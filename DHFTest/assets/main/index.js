System.register("chunks:///_virtual/AbstractGenerator.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"04dcaNRi2hAF7EPRn0aqgLf","AbstractGenerator",void 0);var n=t("DataTypeConst",(function(){}));n.int_MaxValue=2147483647;t("AbstractGenerator",function(){function t(){this.ULongToIntShift=33,this.IntToDoubleMultiplier=4.656612873077393e-10,this.Seed=void 0,this.CanReset=!0}var e=t.prototype;return e.Reset=function(t){return!!this.CanReset&&(this.Seed=t,!0)},e.Next=function(){var t=arguments.length;switch(t){case 0:return this.NextA();case 1:return this.NextB(arguments.length<=0?void 0:arguments[0]);case 2:return this.NextC(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}},e.NextA=function(){var t;do{t=this.NextInclusiveMaxValue()}while(t==n.int_MaxValue);return t},e.NextB=function(t){return Math.floor(this.NextDouble()*t)},e.NextC=function(t,e){return t+Math.floor(this.NextDouble()*(e-t))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Action.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionProp.ts","./ActionPropHandler.ts","./BaseAction.ts","./Tools.ts","./Values.ts","./ActionPlayer.ts"],(function(t){var e,i,n,o,r,a,s,l,u,c,p,h,f,y,v,g,b,P,d,m,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.CCFloat,c=t.CCInteger,p=t.CurveRange,h=t.EventHandler,f=t.tween},function(t){y=t.ActionPropFloat,v=t.ActionPropVec3},function(t){g=t.ActionPropHandler},function(t){b=t.BaseAction},function(t){P=t.default},function(t){d=t.Easing,m=t.AcitonType},function(t){w=t.ActionPlayer}],execute:function(){var E,A,F,T,z,_,S,C,L,D,H,R,V,x,O,I,k,B,M,N,j,q,U,Y,G,J,K,Q,W,X,Z;s._RF.push({},"997f8zNUa9NH6OzmFRYh3mL","Action",void 0);var $=l.ccclass,tt=l.property,et=l.executeInEditMode,it=l.requireComponent;t("Action",(E=$("Action"),A=et(!0),F=it(w),T=tt({type:y}),z=tt({type:v}),_=tt({type:v}),S=tt({type:y}),C=tt({type:u,tooltip:"動作長度"}),L=tt({type:c,tooltip:"動作類型標記"}),D=tt({tooltip:"動作完成後重製"}),H=tt({type:d,tooltip:"動作緩動函數"}),R=tt({type:p,tooltip:"動作緩動曲線，easing要選擇custom"}),V=tt({type:c,tooltip:"動作重複次數，填負數則無限循環"}),x=tt({tooltip:"開啟時自動撥放"}),O=tt({type:[h],tooltip:"開始事件"}),I=tt({type:[h],tooltip:"結束事件"}),E(k=A(k=F((M=e((B=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"opacityProp",M,o(e)),n(e,"positionProp",N,o(e)),n(e,"scaleProp",j,o(e)),n(e,"angleProp",q,o(e)),n(e,"duration",U,o(e)),n(e,"actionFlag",Y,o(e)),n(e,"reset",G,o(e)),n(e,"easing",J,o(e)),n(e,"easingCurve",K,o(e)),n(e,"loopTimes",Q,o(e)),n(e,"autoPlay",W,o(e)),n(e,"startEvent",X,o(e)),n(e,"endEvent",Z,o(e)),e.propRecord={},e._onFinish=null,e._onStart=null,e.curLoopTimes=0,e.isPlaying=!1,e.tweenEntity=null,e.timeOut=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.recordProps()},s.onEnable=function(){this.autoPlay&&this.playAction()},s.onDisable=function(){this.autoPlay&&this.recoverProps()},s.recordProps=function(){for(var t=1,e="";e=m[t];){if(this.actionFlag&t){var i=g.getHandlerClass(t).getPropValue(this);this.propRecord[e]=P.getClone(i)}else this.propRecord[e]=null;t<<=1}},s.recoverProps=function(){this.tweenEntity&&this.tweenEntity.stop();for(var t=1,e="";e=m[t];){if(this.actionFlag&t){var i=this.propRecord[e];g.getHandlerClass(t).setPropValue(this,i)}t<<=1}for(var n,o=r(this.nextActions);!(n=o()).done;){n.value.recoverProps()}this.curLoopTimes=0,this.isPlaying=!1},s.playAction=function(){this.isPlaying||(this.onStartEvent(),this._onStart&&this._onStart(),this.setPropToStartValue(),this.tweenEntity=f(this.node),this.delay>0&&this.tweenEntity.delay(this.delay),this._play(this.tweenEntity))},s.replayAction=function(){this.recoverProps(),this.playAction()},s._play=function(t){g.handleTween(t,this),t.call(this.onPlayFinish.bind(this)),t.start(),this.curLoopTimes++,this.isPlaying=!0},s.setPropToStartValue=function(){g.resetToStartValue(this);for(var t,e=r(this.nextActions);!(t=e()).done;){t.value.setPropToStartValue()}},s.onPlayFinish=function(){if(this.isPlaying=!1,this.onEndEvent(),this._onFinish&&this._onFinish(),this.loopTimes>0&&this.curLoopTimes<this.loopTimes||this.loopTimes<0)this.playAction();else{this.onEventPlayFinish(),this.curLoopTimes=0;for(var t,e=r(this.nextActions);!(t=e()).done;){t.value.playAction()}}},s.onEventPlayFinish=function(){if(this.reset){this.recoverProps();for(var t,e=r(this.nextActions);!(t=e()).done;){t.value.onEventPlayFinish()}}},s.onStartEvent=function(){if(null!=this.startEvent)for(var t,e=r(this.startEvent);!(t=e()).done;){var i=t.value,n=new Array;0!==i.customEventData.trim().length&&(n=new Array(i.customEventData)),i.emit(n)}},s.onEndEvent=function(){if(null!=this.endEvent)for(var t,e=r(this.endEvent);!(t=e()).done;){var i=t.value,n=new Array;0!==i.customEventData.trim().length&&(n=new Array(i.customEventData)),i.emit(n)}},a(e,[{key:"OnFinished",get:function(){return this._onFinish},set:function(t){this._onFinish=t}},{key:"OnStart",get:function(){return this._onStart},set:function(t){this._onStart=t}}]),e}(b)).prototype,"opacityProp",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),N=e(B.prototype,"positionProp",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v}}),j=e(B.prototype,"scaleProp",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v}}),q=e(B.prototype,"angleProp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),U=e(B.prototype,"duration",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=e(B.prototype,"actionFlag",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=e(B.prototype,"reset",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=e(B.prototype,"easing",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.linear}}),K=e(B.prototype,"easingCurve",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),Q=e(B.prototype,"loopTimes",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=e(B.prototype,"autoPlay",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=e(B.prototype,"startEvent",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=e(B.prototype,"endEvent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=B))||k)||k)||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/Action2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n;return{setters:[function(i){t=i.inheritsLoose,e=i.createForOfIteratorHelperLoose},function(i){n=i.cclegacy}],execute:function(){n._RF.push({},"eff7buhKyFJo7g/my4vcusR","Action",void 0);var o=function(){function i(){this._handlers=[],this._isInvoking=!1,this._removeList=[]}var t=i.prototype;return t.add=function(i){this._handlers.push(i)},t.remove=function(i){var t=this._handlers.indexOf(i);this._isInvoking?this._removeList.push(t):this.removeHandler(t)},t.removeHandler=function(i){i>-1&&this._handlers.splice(i,1)},i}();i("Action",function(i){function n(){return i.apply(this,arguments)||this}return t(n,i),n.prototype.invoke=function(){this._isInvoking=!0;for(var i,t=e(this._handlers);!(i=t()).done;){(0,i.value)()}this._isInvoking=!1;for(var n,o=e(this._removeList);!(n=o()).done;){var r=n.value;this.removeHandler(r)}this._removeList=[]},n}(o)),i("ActionWithOne",function(i){function n(){return i.apply(this,arguments)||this}return t(n,i),n.prototype.invoke=function(i){this._isInvoking=!0;for(var t,n=e(this._handlers);!(t=n()).done;){(0,t.value)(i)}this._isInvoking=!1;for(var o,r=e(this._removeList);!(o=r()).done;){var s=o.value;this.removeHandler(s)}this._removeList=[]},n}(o)),i("ActionWithTwo",function(i){function n(){return i.apply(this,arguments)||this}return t(n,i),n.prototype.invoke=function(i,t){this._isInvoking=!0;for(var n,o=e(this._handlers);!(n=o()).done;){(0,n.value)(i,t)}this._isInvoking=!1;for(var r,s=e(this._removeList);!(r=s()).done;){var h=r.value;this.removeHandler(h)}this._removeList=[]},n}(o)),i("ActionWithThree",function(i){function n(){return i.apply(this,arguments)||this}return t(n,i),n.prototype.invoke=function(i,t,n){this._isInvoking=!0;for(var o,r=e(this._handlers);!(o=r()).done;){(0,o.value)(i,t,n)}this._isInvoking=!1;for(var s,h=e(this._removeList);!(s=h()).done;){var v=s.value;this.removeHandler(v)}this._removeList=[]},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/ActionPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,a,e,i,c;return{setters:[function(t){n=t.inheritsLoose,o=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){e=t.cclegacy,i=t._decorator,c=t.Component}],execute:function(){var r;e._RF.push({},"0e669U9y2VBUrKAYCf2p3VO","ActionPlayer",void 0);var s=i.ccclass;t("ActionPlayer",s("ActionPlayer")(r=function(t){function e(){for(var n,o=arguments.length,a=new Array(o),e=0;e<o;e++)a[e]=arguments[e];return(n=t.call.apply(t,[this].concat(a))||this)._actionMap=void 0,n._isReady=!1,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this.InitActionData(),this._isReady=!0},i.PlayActionsByEvent=function(t,n){var a=this._actionMap.get(n);if(a)for(var e,i=o(a);!(e=i()).done;){e.value.playAction()}},i.PlayAllActions=function(){this._actionMap.forEach((function(t,n){for(var a,e=o(t);!(a=e()).done;){a.value.playAction()}}))},i.ReplayActionsByEvent=function(t,n){var a=this._actionMap.get(n);if(a)for(var e,i=o(a);!(e=i()).done;){var c=e.value;c.recoverProps(),c.playAction()}},i.ReplayAllActions=function(){this._actionMap.forEach((function(t,n){for(var a,e=o(t);!(a=e()).done;){var i=a.value;i.recoverProps(),i.playAction()}}))},i.ResetAllActions=function(){this._actionMap.forEach((function(t,n){for(var a,e=o(t);!(a=e()).done;){a.value.recoverProps()}}))},i.ResetActionsByEvent=function(t,n){var a=this._actionMap.get(n);if(a)for(var e,i=o(a);!(e=i()).done;){e.value.recoverProps()}},i.GetActions=function(t){return this._actionMap.get(t)},i.InitActionMap=function(){this._actionMap=new Map;for(var t,n=o(this.node.getComponents("BaseAction"));!(t=n()).done;){var a=t.value,e=a.event,i=this._actionMap.get(e);i?i.push(a):this._actionMap.set(e,[a])}},i.InitActionData=function(){this.InitActionMap()},a(e,[{key:"isReady",get:function(){return this._isReady}}]),e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/ActionProp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Values.ts"],(function(e){var t,r,i,n,o,a,l,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.CCFloat,u=e.Vec3},function(e){c=e.PropType,p=e.ValueType}],execute:function(){var s,f,y,v,b,h,m,g,P,w,A,F,T,d,z,V,D,_,H,R,B;o._RF.push({},"652edhR2n1HBab+HlJs5ZDE","ActionProp",void 0);var C=a.ccclass,L=a.property,j=e("ActionProp",(s=C("ActionProp"),f=L({type:c}),y=L({type:p}),s((h=t((b=function(){r(this,"type",h,this),r(this,"valueType",m,this),this.valueTo=void 0,this.valueFrom=void 0}).prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.from}}),m=t(b.prototype,"valueType",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.relative}}),v=b))||v));e("ActionPropVec3",(g=C("ActionPropVec3"),P=L({}),w=L({}),g((T=t((F=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"valueFrom",T,n(t)),r(t,"valueTo",d,n(t)),t}return i(t,e),t}(j)).prototype,"valueFrom",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),d=t(F.prototype,"valueTo",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),A=F))||A)),e("ActionPropFloat",(z=C("ActionPropFloat"),V=L({type:l}),D=L({type:l}),z((R=t((H=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"valueFrom",R,n(t)),r(t,"valueTo",B,n(t)),t}return i(t,e),t}(j)).prototype,"valueFrom",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=t(H.prototype,"valueTo",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=H))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/ActionPropHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tools.ts","./Values.ts"],(function(e){var t,n,r,o,a,i,u,c,p,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.UIOpacity,o=e.error,a=e.tween},function(e){i=e.default},function(e){u=e.AcitonType,c=e.Easing,p=e.PropType,s=e.ValueType}],execute:function(){n._RF.push({},"042caLQo5FFgLpVxgkZ7zJ5","ActionPropHandler",void 0);e("ActionPropHandler",function(){function e(){}return e.handleTween=function(e,t){for(var n=1,r=[],o=t.actionFlag;u[n];){if(o&n){var a=this.getHandlerClass(n).handleProp(t);r.push(a)}n<<=1}r.length&&(1===r.length?e.then(r[0]):e.parallel.apply(e,r))},e.resetToStartValue=function(e){for(var t=e.actionFlag,n=1;u[n];){if(t&n)this.getHandlerClass(n).resetToStartValue(e);n<<=1}},e.getHandlerClass=function(e){switch(e){case u.position:return f;case u.opacity:return g;case u.scale:return v;case u.angle:return h}},e}());var l=function(){function e(){}return e.getActionProp=function(e){return null},e.getPropValue=function(e){return e.node[this.PropName]},e.setPropValue=function(e,t){e.node[this.PropName]=t},e.resetToStartValue=function(e){var t,n=e.propRecord[this.PropName],r=this.getActionProp(e),o=r.type;o===p.from||o===p.free?r.valueType===s.absolute?t=r.valueFrom:r.valueType===s.relative&&(t=i.add(n,r.valueFrom)):o===p.to&&(t=n),this.setPropValue(e,i.getClone(t))},e.getEndValue=function(e){var t,n=e.propRecord[this.PropName],r=this.getActionProp(e),o=r.type;return o===p.from?t=n:o!==p.to&&o!==p.free||(r.valueType===s.absolute?t=r.valueTo:r.valueType===s.relative&&(t=i.add(n,r.valueTo))),i.getClone(t)},e.handleProp=function(e){var t=e.duration,n=this.getActionProp(e).valueType,r=this.getEndValue(e);return this.craeteTween(e,t,n,r,e.easing)},e.craeteTween=function(e,t,n,r,o){var i={};i[this.PropName]=r;var u={};return u.easing=c[e.easing].toString(),a().to(t,i,u)},e}();l.PropName="";var g=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.getActionProp=function(e){return e.opacityProp},n.setPropValue=function(e,t){this.getOpacityComp(e).opacity=t},n.getOpacityComp=function(e){var t=e.node.getComponent(r);return t||o("ActionManager 开启透明度配置项的节点需有UIOpacity组件!"),t},n.getPropValue=function(e){var t=this.getOpacityComp(e);return t?t.opacity:255},n.recoverPropValue=function(e,t){this.getOpacityComp(e).opacity=i.getClone(t)},n.craeteTween=function(e,t,n,o,i){var u=this.getPropValue(e),p=o-u,s=e.node.getComponent(r),l={};return i==c.custom?l.onUpdate=function(t,n){s.opacity=u+p*e.easingCurve.evaluate(n,0)}:(l.easing=c[i].toString(),l.onUpdate=function(e,t){s.opacity=u+p*t}),a().to(t,o,l)},n}(l);g.PropName="opacity";var f=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.getActionProp=function(e){return e.positionProp},n.craeteTween=function(e,t,n,r,o){var i={};i[this.PropName]=r;var u={};return u.easing=c[e.easing].toString(),o==c.custom?a().to(t,{position:{value:r,progress:function(t,n,r,o){return t+(n-t)*e.easingCurve.evaluate(o,0)}}}):a().to(t,i,u)},n}(l);f.PropName="position";var v=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.getActionProp=function(e){return e.scaleProp},n.craeteTween=function(e,t,n,r,o){var i={};i[this.PropName]=r;var u={};return u.easing=c[e.easing].toString(),o==c.custom?a().to(t,{scale:{value:r,progress:function(t,n,r,o){return t+(n-t)*e.easingCurve.evaluate(o,0)}}}):a().to(t,i,u)},n}(l);v.PropName="scale";var h=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.getActionProp=function(e){return e.angleProp},n.craeteTween=function(e,t,n,r,o){var i={};i[this.PropName]=r;var u={};return u.easing=c[e.easing].toString(),o==c.custom?a().to(t,{angle:{value:r,progress:function(t,n,r,o){return t+(n-t)*e.easingCurve.evaluate(o,0)}}}):a().to(t,i,u)},n}(l);h.PropName="angle",n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./CollectionExtension.ts"],(function(i){var t,e,o,n,r,u,a,l,s,c,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,u=i._decorator,a=i.Enum,l=i.AudioClip,s=i.CCFloat},function(i){c=i.SingletonComponent},function(i){p=i.CollectionExtension}],execute:function(){var y,f,h,g,b,d,S,F,C,m,X,A,v,D,w,z,B,_,G;r._RF.push({},"77fb8N+QwVFpoA3vpb6YEG1","AudioConfig",void 0);var I=u.ccclass,M=u.property,x=i("AudioCategory",function(i){return i[i.BGM=0]="BGM",i[i.SFX=1]="SFX",i[i.UI_SFX=2]="UI_SFX",i[i.FishSFX=3]="FishSFX",i[i.WeaponSFX=4]="WeaponSFX",i[i.SpecialBGM=5]="SpecialBGM",i}({}));a(x);var E=i("AudioClipSetting",(y=I("AudioClipSetting"),f=M({type:x}),h=M(l),g=M({type:s,slide:!0,min:0,max:1,step:.01}),b=M({visible:function(){return this.isSFXType()}}),d=M({visible:function(){return!(this.audioCategory===x.SFX||this.audioCategory===x.UI_SFX)}}),y((C=t((F=function(){function i(){o(this,"audioCategory",C,this),o(this,"key",m,this),o(this,"clip",X,this),o(this,"volume",A,this),o(this,"simultaneouslyPlay",v,this),o(this,"loop",D,this)}return i.prototype.isSFXType=function(){return this.audioCategory===x.FishSFX||this.audioCategory===x.WeaponSFX},i}()).prototype,"audioCategory",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.SFX}}),m=t(F.prototype,"key",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=t(F.prototype,"clip",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(F.prototype,"volume",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(F.prototype,"simultaneouslyPlay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=t(F.prototype,"loop",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=F))||S));i("AudioConfig",(w=I("AudioConfig"),z=M([E]),w((G=t((_=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return t=i.call.apply(i,[this].concat(r))||this,o(t,"Settings",G,n(t)),t.AudioDictionary={},t}e(t,i);var r=t.prototype;return r.getSettingByKey=function(i){return p.getItemByKey(this.AudioDictionary,i)},r.onLoad=function(){i.prototype.onLoad.call(this),this.AudioDictionary=p.createDictionary(this.Settings)},r.onDestroy=function(){this.AudioDictionary={},i.prototype.onDestroy.call(this)},t}(c)).prototype,"Settings",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=_))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./CollectionExtension.ts","./AudioConfig.ts","./AudioMixerConfig.ts","./RuntimeSettingConfig.ts","./MessageManager.ts","./MessageCmd.ts"],(function(i){var e,t,o,n,u,a,l,s,c,r,h,d,p,S,m,g,f,v,y;return{setters:[function(i){e=i.inheritsLoose,t=i.applyDecoratedDescriptor,o=i.initializerDefineProperty,n=i.assertThisInitialized,u=i.createClass},function(i){a=i.cclegacy,l=i._decorator,s=i.AudioSource,c=i.Node,r=i.game},function(i){h=i.SingletonComponent},function(i){d=i.CollectionExtension},function(i){p=i.AudioConfig,S=i.AudioCategory},function(i){m=i.AudioState,g=i.AudioMixerConfig},function(i){f=i.RuntimeSettingConfig},function(i){v=i.MessageManager},function(i){y=i.MessageCmd}],execute:function(){var M,B,A;a._RF.push({},"59a18nS0MpEA7P554b9g8tX","AudioManager",void 0);var F=l.ccclass,b=l.property,C=i("SFXUnit",(function(i,e){this.isPlaying=!1,this.audioSource=null,this.setting=null,this.setting=i,this.audioSource=e,this.audioSource.clip=i.clip})),X=i("SpecailBgmUnit",function(i){function t(e,t,o){var n;return void 0===o&&(o=1),(n=i.call(this,e,t)||this).volumeCache=1,n.volumeCache=o,n}return e(t,i),t}(C)),D=i("tempAudioUnit",(function(){this.audioSource=null}));i("AudioManager",F("AudioManager")((A=t((B=function(i){function t(){for(var e,t=arguments.length,u=new Array(t),a=0;a<t;a++)u[a]=arguments[a];return e=i.call.apply(i,[this].concat(u))||this,o(e,"MainTheme",A,n(e)),e.bgmAudioSource=null,e.specialBgmDic={},e.sfxDic={},e.tempAudioUnits=[],e.currentState=void 0,e.sfxQueue=[],e.stateSettingDic={},e.BGMVolumeMultiplier=1,e.SFXVolumeMultiplier=1,e.UISFXVolumeMultiplier=1,e.FishSFXVolumeMultiplier=1,e.WeaponSFXVolumeMultiplier=1,e.SpecialBGMVolumeMultiplier=1,e.totalVolume=1,e._enterMainFish=!1,e._currentBGMSetting=null,e._bgmVolumeScale=1,e._isSpecialBgmPlaying=!1,e._muteSFX=!1,e.fadeOutCallback=null,e.fadeInCallback=null,e}e(t,i);var a=t.prototype;return a.test=function(){var i=this;console.error("cc.AudioSource.maxAudioChannel: "+s.maxAudioChannel);for(var e=0;e<50;e++)setTimeout((function(){i.play("fort01_shoot01");var e=i.getPlayingAmount();console.error("now playing Audio Amount:"+e)}),10*e)},a.PreloadSFXAudio=function(i,e){if(!this.sfxDic[i]){var t=p.instance().getSettingByKey(i);this.UpdateSFXDic(t,e)}},a.MuteSwitch=function(){if(this.totalVolume=1===this.totalVolume?0:1,this.bgmAudioSource.volume=this.getBGMVolume(),0==this.totalVolume){this.stopAllSFX();for(var i=this.tempAudioUnits.length-1;i>=0;i--){this.tempAudioUnits[i].audioSource.volume=this.totalVolume}}this.updateSpecialBgmVolume(0==this.totalVolume)},a.TestStateSwitch=function(){var i=this.currentState===m.Normal?m.Gotcha:m.Normal;this.updateMixerState(i)},a.SwitchMixerState=function(i){this.updateMixerState(i)},a.MuteForDuration=function(i){var e=this;this._muteSFX=!0,setTimeout((function(){e._muteSFX=!1}),i)},a.play=function(i,e,t,o){void 0===e&&(e=0),void 0===t&&(t=1),void 0===o&&(o=null);var n=p.instance().getSettingByKey(i);switch(t*=n.volume,n.audioCategory){case S.BGM:this.playBGM(i,e,t);break;case S.SFX:this.playSFX(i,e,t*this.SFXVolumeMultiplier,o);break;case S.UI_SFX:this.playSFX(i,e,t*this.UISFXVolumeMultiplier,o);break;case S.FishSFX:this.playManagedSFX(i,e,t*this.FishSFXVolumeMultiplier,o);break;case S.WeaponSFX:this.playManagedSFX(i,e,t*this.WeaponSFXVolumeMultiplier,o);break;case S.SpecialBGM:this.playSpecialBGM(i,e,t);break;default:console.warn("Unknown audio category")}},a.stop=function(i,e,t){switch(void 0===e&&(e=0),void 0===t&&(t=null),p.instance().getSettingByKey(i).audioCategory){case S.BGM:break;case S.SFX:case S.FishSFX:case S.WeaponSFX:this.stopSFX(i,e,t);break;case S.SpecialBGM:this.stopSpecialBGM(i)}},a.playSFX=function(i,e,t,o){var n=this;if(void 0===e&&(e=0),void 0===t&&(t=1),!f.instance().IsSpeedUpMode){var u=p.instance().getSettingByKey(i);this.UpdateSFXDic(u),this.scheduleOnce((function(){n.playSFXMethod(i,t)}),e)}},a.playManagedSFX=function(i,e,t,o){var n=this;void 0===e&&(e=0),void 0===t&&(t=1),void 0===o&&(o=null);var u=p.instance().getSettingByKey(i);this.UpdateSFXDic(u,o),1==u.loop?this.scheduleOnce((function(){n.playManagedSFXMethod(o,t)}),e):this.scheduleOnce((function(){n.playManagedSFXMethod(i,t)}),e)},a.stopSFX=function(i,e,t){var o=this;void 0===e&&(e=0),void 0===t&&(t=null),1==p.instance().getSettingByKey(i).loop?this.scheduleOnce((function(){o.stopSFXMethod(t)}),e):this.scheduleOnce((function(){o.stopSFXMethod(i)}),e)},a.stopAllSFX=function(){for(var i in this.sfxDic)if(this.sfxDic.hasOwnProperty(i)){var e=this.sfxDic[i];e.audioSource&&(e.audioSource.stop(),e.isPlaying=!1)}},a.playBGM=function(i,e,t,o){void 0===e&&(e=0),void 0===t&&(t=.8),void 0===o&&(o=1),this.updateCurrentBGMSetting(i,o),this._enterMainFish&&this.switchBGMProcess(e,t)},a.stopBGM=function(){this.bgmAudioSource&&this.bgmAudioSource.stop()},a.playSpecialBGM=function(i,e,t){var o=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.checkPlayingAmountValidity(s.maxAudioChannel)){var n=p.instance().getSettingByKey(i);this.updateSpecialBgmDic(n),this.specialBgmDic[i].volumeCache=t*this.SpecialBGMVolumeMultiplier,this._isSpecialBgmPlaying=!0,this.scheduleOnce((function(){o.specialBgmDic[i].isPlaying=!0,o.specialBgmDic[i].audioSource.volume=o.specialBgmDic[i].volumeCache*o.totalVolume,o.specialBgmDic[i].audioSource.play(),o.bgmAudioSource.pause()}),e)}},a.stopSpecialBGM=function(i,e){this.specialBgmDic[i].isPlaying=!1,this.specialBgmDic[i].audioSource.stop(),this.checkSpecialBgmPlaying()||(this._isSpecialBgmPlaying=!1,this.volumeFadeIn(this.bgmAudioSource,.8,this.getBGMVolume()))},a.onLoad=function(){i.prototype.onLoad.call(this),this.BGMfadeIn=this.BGMfadeIn.bind(this),this.volumeFadeOut=this.volumeFadeOut.bind(this),this.onCloseLoadingUIScene=this.onCloseLoadingUIScene.bind(this),v.Instance.on(y.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene),this.bgmAudioSource||(this.bgmAudioSource=this.node.addComponent(s),this.bgmAudioSource.playOnAwake=!1,this.bgmAudioSource.loop=!0)},a.start=function(){this.updateCurrentBGMSetting(this.MainTheme,0)},a.update=function(i){var e=this;if(this.sfxQueue.length>0){var t=new Set;this.sfxQueue=this.sfxQueue.filter((function(i){return!t.has(i.id)&&(t.add(i.id),!0)})),this.sfxQueue.forEach((function(i){var t=e.sfxDic[i.id];t&&!e._muteSFX&&t.audioSource.playOneShot(t.audioSource.clip,i.volumeScale*e.totalVolume)})),this.sfxQueue=[]}},a.onDestroy=function(){this.stopBGM(),this.sfxDic={},this.stateSettingDic={},this.tempAudioUnits=[],v.Instance.off(y.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene),i.prototype.onDestroy.call(this)},a.updateMixerState=function(i){this.currentState=i;var e=g.instance().GetStateSetting(this.currentState);this.stateSettingDic=d.createDictionary(e),this.updateVolumeMultiplier(),this.bgmAudioSource.volume=this.getBGMVolume()},a.updateVolumeMultiplier=function(){for(var i in this.stateSettingDic)if(this.stateSettingDic.hasOwnProperty(i)){var e=this.stateSettingDic[i];switch(e.category){case S.BGM:this.BGMVolumeMultiplier=e.volume;case S.SFX:this.SFXVolumeMultiplier=e.volume;case S.UI_SFX:this.UISFXVolumeMultiplier=e.volume;case S.FishSFX:this.FishSFXVolumeMultiplier=e.volume;case S.WeaponSFX:this.WeaponSFXVolumeMultiplier=e.volume;case S.SpecialBGM:this.SpecialBGMVolumeMultiplier=e.volume}}},a.getBGMVolume=function(){return 1*this.BGMVolumeMultiplier*this._currentBGMSetting.volume*this._bgmVolumeScale*this.totalVolume*(this._isSpecialBgmPlaying?0:1)},a.BGMfadeOutAndPlayNewSound=function(i){void 0===i&&(i=.8),this.volumeFadeOut(this.bgmAudioSource,i,this.BGMfadeIn)},a.BGMfadeIn=function(i){void 0===i&&(i=.8),this.bgmAudioSource.clip=this._currentBGMSetting.clip,this.bgmAudioSource.loop=this._currentBGMSetting.loop,this.volumeFadeIn(this.bgmAudioSource,i,this.getBGMVolume())},a.UpdateSFXDic=function(i,e){void 0===e&&(e=null);var t=i.key;1==i.loop&&(t=e);var o=this.sfxDic[t];if(!o){var n=this.node.addComponent(s);n.playOnAwake=!1,n.loop=i.loop,o=new C(i,n),this.sfxDic[t]=o}},a.playSFXMethod=function(i,e){void 0===e&&(e=1),this._muteSFX||this.sfxQueue.push({id:i,volumeScale:e})},a.playManagedSFXMethod=function(i,e){if(void 0===e&&(e=1),this.checkPlayingAmountValidity(s.maxAudioChannel-1)){var t=this.sfxDic[i];if(t.setting.simultaneouslyPlay||!t.isPlaying)if(t.audioSource.volume=e*this.totalVolume,t.isPlaying&&t.setting.simultaneouslyPlay){var o=this.getAvailableAudioUnit();if(o)o.audioSource.clip=t.audioSource.clip,o.audioSource.volume=t.audioSource.volume,o.audioSource.loop=t.audioSource.loop;else{var n=new c("TempAudioSource");this.node.addChild(n);var u=n.addComponent(s);u.playOnAwake=!1,u.clip=t.audioSource.clip,u.volume=t.audioSource.volume,u.loop=t.audioSource.loop,(o=new D).audioSource=u,this.tempAudioUnits.push(o)}o.audioSource.play()}else t.isPlaying=0!==this.totalVolume,t.audioSource.play(),t.audioSource.loop||this.scheduleOnce((function(){t.isPlaying=!1}),t.audioSource.duration)}},a.stopSFXMethod=function(i){var e=this.sfxDic[i];e&&(e.isPlaying=!1,e.audioSource.stop())},a.updateCurrentBGMSetting=function(i,e){void 0===e&&(e=1),this._currentBGMSetting=p.instance().getSettingByKey(i),this._bgmVolumeScale=e},a.volumeFadeIn=function(i,e,t){var o=this;void 0===e&&(e=.8);var n=0;this.fadeInCallback&&this.unschedule(this.fadeInCallback),i.volume=0,i.play(),this.fadeInCallback=function(){var u=r.deltaTime,a=(n+=u)/e*t;i.volume=a*o.totalVolume,n>=e&&(i.volume=t*o.totalVolume,o.unschedule(o.fadeInCallback),o.fadeInCallback=null)},this.schedule(this.fadeInCallback,0)},a.volumeFadeOut=function(i,e,t){var o=this;void 0===e&&(e=.8),void 0===t&&(t=null);var n=0,u=i.volume;this.fadeOutCallback&&this.unschedule(this.fadeOutCallback),this.fadeOutCallback=function(){var a=r.deltaTime,l=u*(1-(n+=a)/(e<=0?n:e));i.volume=l,n>=e&&(i.stop(),t(),o.unschedule(o.fadeOutCallback),o.fadeOutCallback=null)},this.schedule(this.fadeOutCallback,0)},a.updateSpecialBgmDic=function(i){var e=this.specialBgmDic[i.key];if(!e){for(var t=null,o=null,n=0,u=Object.entries(this.specialBgmDic);n<u.length;n++){var a=u[n],l=a[0],c=a[1];if(!c.audioSource.playing){t=c,o=l;break}}if(t)t.setting=i,t.audioSource.clip=i.clip,t.audioSource.loop=i.loop,delete this.specialBgmDic[o],this.specialBgmDic[i.key]=t;else{var r=this.node.addComponent(s);r.playOnAwake=!1,r.clip=i.clip,r.loop=i.loop,e=new X(i,r),this.specialBgmDic[i.key]=e}}},a.checkSpecialBgmPlaying=function(){return 0!==Object.keys(this.specialBgmDic).length&&Object.values(this.specialBgmDic).some((function(i){return i.isPlaying}))},a.updateSpecialBgmVolume=function(i){Object.values(this.specialBgmDic).forEach((function(e){e.audioSource.volume=i?0:e.volumeCache}))},a.getAvailableAudioUnit=function(){for(var i=0;i<this.tempAudioUnits.length;i++)if(!this.tempAudioUnits[i].audioSource.playing)return this.tempAudioUnits[i];return null},a.getPlayingAmount=function(){var i=0,e=function(i){var e=0;return i.forEach((function(i){i.audioSource.playing&&e++})),e};return i+=this.bgmAudioSource.playing?1:0,i+=e(Object.values(this.specialBgmDic)),i+=e(Object.values(this.sfxDic)),i+=e(this.tempAudioUnits)},a.checkPlayingAmountValidity=function(i){return!(this.getPlayingAmount()>=s.maxAudioChannel-1)||(console.warn("Reach Audio Playing Limit"),!1)},a.onCloseLoadingUIScene=function(){this.SwitchMixerState(m.Normal),this._enterMainFish=!0,this.switchBGMProcess()},a.switchBGMProcess=function(i,e){var t=this;if(void 0===i&&(i=0),void 0===e&&(e=.8),this.bgmAudioSource){if(this.bgmAudioSource.clip==this._currentBGMSetting.clip&&this.bgmAudioSource.playing)return;this.scheduleOnce((function(){t.bgmAudioSource.playing?t.BGMfadeOutAndPlayNewSound(e):t.BGMfadeIn(e)}),i)}else console.warn("Failed to create or find AudioSource component.")},u(t,[{key:"isMute",get:function(){return 0===this.totalVolume}},{key:"mixerState",get:function(){return this.currentState}}]),t}(h)).prototype,"MainTheme",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"BGM_01"}}),M=B))||M);a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMixerConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./CollectionExtension.ts","./AudioConfig.ts"],(function(t){var i,e,n,o,r,a,c,u,s,l,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,n=t.inheritsLoose,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Enum,u=t.CCFloat},function(t){s=t.SingletonComponent},function(t){l=t.CollectionExtension},function(t){g=t.AudioCategory}],execute:function(){var y,f,p,h,d,S,b,m,x,M,v,A,C,D,z,k,w,L,P;r._RF.push({},"b81c91nXxlJKZOkefKKOKze","AudioMixerConfig",void 0);var E=a.ccclass,K=a.property,G=t("AudioState",function(t){return t[t.Normal=0]="Normal",t[t.Gotcha=1]="Gotcha",t[t.Loading=2]="Loading",t[t.Weapon=3]="Weapon",t}({}));c(G);var _=t("AudioMixerUnit",(y=E("AudioMixerUnit"),f=K({type:g}),p=K({type:u,slide:!0,min:0,max:1,step:.01}),y((S=i((d=function(){e(this,"category",S,this),e(this,"volume",b,this),this.key=void 0}).prototype,"category",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.BGM}}),b=i(d.prototype,"volume",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=d))||h)),B=t("AudioMixerSetting",(m=E("AudioMixerSetting"),x=K({type:G}),M=K({type:[_]}),m((C=i((A=function(){e(this,"category",C,this),e(this,"setting",D,this),this.key=void 0}).prototype,"category",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.Normal}}),D=i(A.prototype,"setting",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=A))||v));t("AudioMixerConfig",(z=E("AudioMixerConfig"),k=K([B]),z((P=i((L=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"Settings",P,o(i)),i.MixerSettingDictionary={},i}n(i,t);var r=i.prototype;return r.GetStateSetting=function(t){return l.getItemByKey(this.MixerSettingDictionary,t.toString()).setting},r.onLoad=function(){t.prototype.onLoad.call(this),this.SettingPreProcess(),this.MixerSettingDictionary=l.createDictionary(this.Settings)},r.onDestroy=function(){this.MixerSettingDictionary={},t.prototype.onDestroy.call(this)},r.SettingPreProcess=function(){this.Settings.forEach((function(t){t.key=t.category.toString(),t.setting.forEach((function(t){t.key=t.category.toString()}))}))},i}(s)).prototype,"Settings",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=L))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var i,t,n,o,r,u,a,l,s,d,c,h,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,n=e.inheritsLoose,o=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,a=e.CCInteger,l=e.CCString,s=e.Enum,d=e.CCBoolean,c=e.CCFloat,h=e.Component},function(e){p=e.AudioManager}],execute:function(){var y,f,b,g,m,O,K,S,A,L,v,w,N,C,_,E,P,z,B,D,I,T,k,M;r._RF.push({},"42549WdH0hNaYkGTB7vlX8w","AudioPlayer",void 0);var W=u.ccclass,F=u.property,R=function(e){return e[e.ON_CALL=0]="ON_CALL",e[e.ON_ENABLE=1]="ON_ENABLE",e[e.ON_DISABLE=2]="ON_DISABLE",e}(R||{}),x=e("AudioKeyWeight",(y=W("AudioKeyWeight"),f=F(a),b=F(l),y((O=i((m=function(){t(this,"weight",O,this),t(this,"key",K,this)}).prototype,"weight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),K=i(m.prototype,"key",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"defaultKey"}}),g=m))||g));s(R);e("AudioPlayer",(S=W("AudioPlayer"),A=F(d),L=F({visible:function(){return!this.randomPlay}}),v=F({type:[x],visible:function(){return this.randomPlay}}),w=F({type:R}),N=F({type:R}),C=F(c),_=F(c),S((z=i((P=function(e){function i(){for(var i,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return i=e.call.apply(e,[this].concat(r))||this,t(i,"randomPlay",z,o(i)),t(i,"audioKey",B,o(i)),t(i,"audioKeys",D,o(i)),t(i,"playSoundOption",I,o(i)),t(i,"stopSoundOption",T,o(i)),t(i,"volumeScale",k,o(i)),t(i,"delayTime",M,o(i)),i.currentKey=void 0,i}n(i,e);var r=i.prototype;return r.preload=function(){p.instance().PreloadSFXAudio(this.audioKey,this.uuid)},r.play=function(){this.handleSoundOption()},r.stop=function(){this.handleStopOption()},r.onLoad=function(){this.refreshCurrentKey()},r.onEnable=function(){this.playSoundOption===R.ON_ENABLE&&this.handleSoundOption()},r.onDisable=function(){this.playSoundOption===R.ON_DISABLE&&this.handleSoundOption(),this.stopSoundOption===R.ON_DISABLE&&this.handleStopOption()},r.handleSoundOption=function(){this.refreshCurrentKey(),p.instance().play(this.currentKey,this.delayTime,this.volumeScale,this.uuid)},r.handleStopOption=function(){p.instance().stop(this.currentKey,this.delayTime,this.uuid)},r.getRandomWeightedIndex=function(){for(var e=this.audioKeys.reduce((function(e,i){return e+i.weight}),0),i=Math.floor(Math.random()*e),t=0;t<this.audioKeys.length;t++){if(i<this.audioKeys[t].weight)return t;i-=this.audioKeys[t].weight}return this.audioKeys.length-1},r.refreshCurrentKey=function(){if(this.randomPlay){var e=this.getRandomWeightedIndex();this.currentKey=this.audioKeys[e].key}else this.currentKey=this.audioKey},i}(h)).prototype,"randomPlay",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=i(P.prototype,"audioKey",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"defaultAudioKey"}}),D=i(P.prototype,"audioKeys",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=i(P.prototype,"playSoundOption",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.ON_ENABLE}}),T=i(P.prototype,"stopSoundOption",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.ON_CALL}}),k=i(P.prototype,"volumeScale",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=i(P.prototype,"delayTime",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=P))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/AuthResponse.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"59d84YWfi9DD4+C2P+mNwIX","AuthResponse",void 0);e("AuthResponse",function(){function e(){this.AuthResult=void 0,this.Id=void 0,this.Data=void 0,this.IsNewPLayer=void 0,this.AuthResult=0,this.Id="",this.Data="",this.IsNewPLayer=!1}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(4),e.writeInt32(r.AuthResult),e.writeString(r.Id),e.writeString(r.Data),e.writeBoolean(r.IsNewPLayer)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(4==n)a.AuthResult=r.readInt32(),a.Id=r.readString(),a.Data=r.readString(),a.IsNewPLayer=r.readBoolean();else{if(n>4)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.AuthResult=r.readInt32(),1==n)return a;if(a.Id=r.readString(),2==n)return a;if(a.Data=r.readString(),3==n)return a;if(a.IsNewPLayer=r.readBoolean(),4==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/AuthResult.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"f616aXjRA5PrIhS1sFKkj+4","AuthResult",void 0);i("AuthResult",function(i){return i[i.Success=0]="Success",i[i.CodeVersionError=1]="CodeVersionError",i[i.ServiceDisabled=2]="ServiceDisabled",i[i.IsBlocked=3]="IsBlocked",i[i.IOKeyError=4]="IOKeyError",i[i.UserCancel=5]="UserCancel",i[i.ClientTimeout=6]="ClientTimeout",i[i.Duplicate=7]="Duplicate",i[i.ServiceException=8]="ServiceException",i[i.DBError=9]="DBError",i[i.IllegalConnection=10]="IllegalConnection",i[i.WaitLogoutTimeout=11]="WaitLogoutTimeout",i[i.ConnectError=12]="ConnectError",i[i.AuthFailure=13]="AuthFailure",i[i.ThirdPartyFailure=14]="ThirdPartyFailure",i[i.InvalidIPAddress=100]="InvalidIPAddress",i[i.InvalidLoginWay=101]="InvalidLoginWay",i[i.ThirdPartyTimeout=102]="ThirdPartyTimeout",i[i.ThirdPartyOffine=103]="ThirdPartyOffine",i[i.BindConflict=104]="BindConflict",i[i.InvalidBindWay=105]="InvalidBindWay",i[i.IsBinding=106]="IsBinding",i[i.UnbindFailure=107]="UnbindFailure",i[i.SMSVerificationFailure=108]="SMSVerificationFailure",i[i.SMSVerificationCodeCooldown=109]="SMSVerificationCodeCooldown",i[i.WebConfigErrorCode=1e7]="WebConfigErrorCode",i[i.WebConfigError=10000001]="WebConfigError",i[i.WebConfigException=10000002]="WebConfigException",i[i.Continue=10000003]="Continue",i[i.Unknown=2147483647]="Unknown",i}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/auto-config-intl-manager.ts",["cc","./l10n-manager.ts","./env"],(function(){var t,n,e,a;return{setters:[function(e){t=e.cclegacy,n=e.game},function(t){e=t.default},function(t){a=t.EDITOR}],execute:async function(){t._RF.push({},"2f21bx4gAFNj6dct9qDHJHH","auto-config-intl-manager",void 0),t.GAME_VIEW||a?await e.createIntl({}):n.onPostProjectInitDelegate.add((function(){return e.createIntl({})})),t._RF.pop()}}}));

System.register("chunks:///_virtual/AutoShootConstraintType.ts",["cc"],(function(o){var t;return{setters:[function(o){t=o.cclegacy}],execute:function(){t._RF.push({},"f083cSxFa9GmKyDsI83PvuW","AutoShootConstraintType",void 0);o("AutoShootConstraintType",function(o){return o[o.ShootCountEqual=0]="ShootCountEqual",o[o.CoinMoreThan=1]="CoinMoreThan",o[o.CoinLessThan=2]="CoinLessThan",o}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/AutoShootHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NormalShoot.ts","./LockShoot.ts","./Constants.ts","./UIPlayerState.ts","./MessageCmd.ts","./MessageData.ts","./MessageManager.ts","./PlayerFortManager.ts","./SingletonComponent.ts","./ShootManager.ts","./BulletKind.ts","./AutoShootConstraintType.ts"],(function(t){var o,n,e,i,a,u,h,s,r,S,c,l,A,f,p,_,I,C,d,M,y,g;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass},function(t){u=t.cclegacy,h=t._decorator,s=t.Button,r=t.Label,S=t.Node},function(t){c=t.NormalShoot},function(t){l=t.LockShoot},function(t){A=t.Constants},function(t){f=t.PlayerStateType},function(t){p=t.MessageCmd},function(t){_=t.AutoShootConstraintArrivalMessage},function(t){I=t.MessageManager},function(t){C=t.PlayerFortManager},function(t){d=t.SingletonComponent},function(t){M=t.ShootManager},function(t){y=t.BulletKind},function(t){g=t.AutoShootConstraintType}],execute:function(){var b,w,T,F,B,O,L,m,U,k,R,v,P,N,H;u._RF.push({},"d0818nyrCtEa6ERIsINfyOP","AutoShootHelper",void 0);var E=h.ccclass,W=h.property;t("AutoShootHelper",(b=E("AutoShootHelper"),w=W(c),T=W(l),F=W(s),B=W(s),O=W(r),L=W(S),b((k=o((U=function(t){function o(){for(var o,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return o=t.call.apply(t,[this].concat(a))||this,e(o,"autoNormalShoot",k,i(o)),e(o,"autoLockShoot",R,i(o)),e(o,"autoOnBtn",v,i(o)),e(o,"autoOffBtn",P,i(o)),e(o,"autoShootCountLabel",N,i(o)),e(o,"autoShootCountInfinity",H,i(o)),o._isReady=!1,o._bulletTimer=0,o._nowAutoShoot=null,o._autoShootMap=new Map,o._isAutoWeaponMode=!1,o}n(o,t);var u=o.prototype;return u.initial=function(){this.autoNormalShoot.initAutoShoot(),this.autoLockShoot.initAutoShoot(),this._autoShootMap.set(y.Normal,this.autoNormalShoot),this._autoShootMap.set(y.Lock,this.autoLockShoot),this._isReady=!0},u.release=function(){this._isReady=!1},u.reset=function(){this.changeAutoShoot(this.FortManager.MainPlayerFort.UsedBulletKind)},u.onStartAutoShoot=function(){this._nowAutoShoot.IsUIAutoShootMode=!0,this._nowAutoShoot.startAutoShoot(),this.FortManager.MainPlayerFort.setPlayerStateUI(f.AutoShooting),this.setAutoBtnState(!0)},u.onStopAutoShoot=function(){this._nowAutoShoot.IsUIAutoShootMode&&(this._nowAutoShoot.IsUIAutoShootMode=!1,this._nowAutoShoot.stopAutoShoot(),this.FortManager.MainPlayerFort.setPlayerStateUI(f.None),this.setAutoBtnState(!1),this.FortManager.MainPlayerFort.UsedBulletKind==y.Lock&&this.FortManager.MainPlayerFort.UsedBulletFort.reset())},u.autoShootCheck=function(t){if(!t)return!1;var o=t.AutoShootInfo;return o.HasShootCountConstraint&&!o.IsShootCountInfinity&&t.AutoShootCount>=o.ShootCountConstraint?(this.onAutoShootCheckFail(g.ShootCountEqual,o.ShootCountConstraint),!1):o.HasMoreThanStopConstraint&&this.FortManager.MainPlayerCoin>=o.MoreThanStopConstraint?(this.onAutoShootCheckFail(g.CoinMoreThan,o.MoreThanStopConstraint),!1):!(o.HasLessThanStopConstraint&&this.FortManager.MainPlayerCoin<=o.LessThanConstraint)||(this.onAutoShootCheckFail(g.CoinLessThan,o.LessThanConstraint),!1)},u.updateAutoShootCount=function(){var t=this._nowAutoShoot.AutoShootInfo;if(t.HasShootCountConstraint){if(!t.IsShootCountInfinity){var o=t.ShootCountConstraint-this._nowAutoShoot.AutoShootCount;this.autoShootCountLabel.string=o.toString()}this.autoShootCountLabel.node.active=!t.IsShootCountInfinity}else this.autoShootCountLabel.node.active=!1;this.autoShootCountInfinity.active=t.IsShootCountInfinity},u.resetAutoWeapon=function(){this._isAutoWeaponMode=!1},u.onLoad=function(){t.prototype.onLoad.call(this),this.onSwitchFortAction=this.onSwitchFortAction.bind(this),this.onStartUIAutoShootAction=this.onStartUIAutoShootAction.bind(this),this.OnGetSpecialBulletRewardAction=this.OnGetSpecialBulletRewardAction.bind(this),I.Instance.on(p.ON_SWITCH_FORT,this.onSwitchFortAction),I.Instance.on(p.START_UI_AUTO_SHOOT,this.onStartUIAutoShootAction),I.Instance.on(p.ON_GET_SPECIAL_BULLET_REWARD,this.OnGetSpecialBulletRewardAction)},u.update=function(t){if(this._isReady&&this._nowAutoShoot)if(M.instance().IsAutoShoot||this._nowAutoShoot.IsUIAutoShootMode){if(this._bulletTimer+=t,this._bulletTimer>=A.BulletFrequency){if(this._bulletTimer-=A.BulletFrequency,!M.instance().checkConnection())return void(this._bulletTimer=0);if(this._nowAutoShoot.IsUIAutoShootMode&&(!this.autoShootCheck(this._nowAutoShoot)||!M.instance().checkShoot()))return void this.onStopAutoShoot();if(M.instance().IsAutoShoot&&!M.instance().checkShoot())return void M.instance().setAutoShoot(!1);this._nowAutoShoot.updateAutoShoot()}}else this._bulletTimer=0},u.onDestroy=function(){I.Instance.off(p.ON_GET_SPECIAL_BULLET_REWARD,this.OnGetSpecialBulletRewardAction),I.Instance.off(p.START_UI_AUTO_SHOOT,this.onStartUIAutoShootAction),I.Instance.off(p.ON_SWITCH_FORT,this.onSwitchFortAction),t.prototype.onDestroy.call(this)},u.onStartUIAutoShootAction=function(t){this._bulletTimer=0,this.changeAutoShoot(t.BulletKind),this._nowAutoShoot.AutoShootInfo=t,this._isAutoWeaponMode=t.IsAutoWeaponMode,this.onStartAutoShoot(),this.updateAutoShootCount()},u.setAutoBtnState=function(t){this.autoOnBtn.node.active=!t,this.autoOffBtn.node.active=t},u.setAutoBtnInteractable=function(t){this.autoOnBtn.interactable=t,this.autoOffBtn.interactable=t},u.onSwitchFortAction=function(t,o,n){if(this.FortManager.checkMainFort(t)){var e=this.getAutoShoot(n);this._nowAutoShoot&&e&&e!=this._nowAutoShoot&&this.onStopAutoShoot(),this.setAutoShoot(e),this._nowAutoShoot&&this._nowAutoShoot.IsUIAutoShootMode&&this.onStartAutoShoot()}},u.onAutoShootCheckFail=function(t,o){I.Instance.emit(p.ON_AUTOSHOOT_CONSTRAINT_ARRIVAL,new _(t,o))},u.getAutoShoot=function(t){return this._autoShootMap.has(t)?this._autoShootMap.get(t):null},u.setAutoShoot=function(t){this._nowAutoShoot=t,t?(this.setAutoBtnInteractable(!0),this.node.active=!0):(this.setAutoBtnInteractable(!1),this.node.active=!1)},u.changeAutoShoot=function(t){this.setAutoShoot(this.getAutoShoot(t))},u.OnGetSpecialBulletRewardAction=function(t){this.FortManager.checkMainFort(t.CatchInfo.FortID)&&this.changeAutoShoot(t.BulletKind)},a(o,[{key:"IsAutoShootMode",get:function(){return!!this._nowAutoShoot&&this._nowAutoShoot.IsUIAutoShootMode}},{key:"IsAutoWeaponMode",get:function(){return this._isAutoWeaponMode}},{key:"FortManager",get:function(){return C.instance()}}]),o}(d)).prototype,"autoNormalShoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=o(U.prototype,"autoLockShoot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(U.prototype,"autoOnBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=o(U.prototype,"autoOffBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=o(U.prototype,"autoShootCountLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=o(U.prototype,"autoShootCountInfinity",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=U))||m));u._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundSettingAttribute.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var a;e._RF.push({},"e6e21/UlFVPbagtH050E435","BackgroundSettingAttribute",void 0);var n=t("BackgroundSettingAttribute",(function(){this.ID=void 0,this.PrefabName=void 0})),r=t("BackgroundSettingAttributeData",function(){function t(){this.Data=new Map}return t.prototype.LoadFromJsonAsset=function(t){for(var e in this.Data.clear(),t.Data){var a=t.Data[e],r=new n;r.ID=+a.ID,r.PrefabName=a.PrefabName,this.Data.set(r.ID,r)}},t}());a=r,r.Instance=new a,e._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundTime.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"49311SHpXNASaCmBvsaG7UK","BackgroundTime",void 0);e("BackgroundTime",function(){function e(){this.Id=void 0,this.StayTime=void 0,this.TransTime=void 0,this.Id=0,this.StayTime=0,this.TransTime=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeInt32(r.Id),e.writeInt32(r.StayTime),e.writeInt32(r.TransTime)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(3==n)a.Id=r.readInt32(),a.StayTime=r.readInt32(),a.TransTime=r.readInt32();else{if(n>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Id=r.readInt32(),1==n)return a;if(a.StayTime=r.readInt32(),2==n)return a;if(a.TransTime=r.readInt32(),3==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundTimeAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BackgroundTimeAttribute2.ts"],(function(t){var a,e,r;return{setters:[function(t){a=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy},function(t){r=t.BackgroundTimeAttribute}],execute:function(){var i;e._RF.push({},"5cc47ZfqcdKMaqqIvhzCqG4","BackgroundTimeAttribute",void 0);var n=t("BackgroundTimeAttributeData",function(){function t(){this.Data=new Map,this.DataArray=[]}var e=t.prototype;return e.LoadFromJsonAsset=function(t){this.Data.clear();var a=0;for(var e in t.Data){var i=t.Data[e],n=new r;n.ID=+i.ID,n.StayTime=+i.StayTime,n.TransTime=+i.TransTime,this.Data.set(+i.Id,n),this.DataArray[a]=n,a++}},e.LoadFromMemoryPack=function(t){this.Data.clear();for(var e,i=0,n=a(t);!(e=n()).done;){var o=e.value,c=new r;c.ID=+o.ID,c.StayTime=+o.StayTime,c.TransTime=+o.TransTime,this.Data.set(c.ID,c),this.DataArray[i]=c,i++}},t}());i=n,n.Instance=new i,e._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundTimeAttribute2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"9fd28l6artK3bAFsfjC9m7M","BackgroundTimeAttribute",void 0);e("BackgroundTimeAttribute",function(){function e(){this.ID=void 0,this.StayTime=void 0,this.TransTime=void 0,this.ID=0,this.StayTime=0,this.TransTime=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeInt32(r.ID),e.writeInt32(r.StayTime),e.writeInt32(r.TransTime)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(3==n)a.ID=r.readInt32(),a.StayTime=r.readInt32(),a.TransTime=r.readInt32();else{if(n>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.ID=r.readInt32(),1==n)return a;if(a.StayTime=r.readInt32(),2==n)return a;if(a.TransTime=r.readInt32(),3==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundTimeAttributeExtension.ts",["cc","./BackgroundTimeAttribute2.ts","./Constants.ts"],(function(){var t,e,n;return{setters:[function(e){t=e.cclegacy},function(t){e=t.BackgroundTimeAttribute},function(t){n=t.Constants}],execute:function(){t._RF.push({},"c4574P3ZeJJSoGw5xnt98i5","BackgroundTimeAttributeExtension",void 0),e.prototype.GetTotalFixedUpdateCount=function(){return(this.StayTime+this.TransTime)*n.FixedUpdateCountPerSecond},t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseAction.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,c,a,s,u,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,c=e.createClass},function(e){a=e.cclegacy,s=e._decorator,u=e.CCFloat,l=e.Node,p=e.Component}],execute:function(){var f,d,y,v,A,h,_,x,b,E;a._RF.push({},"13349yz23JCyp8J+SkBNijt","BaseAction",void 0);var N=s.ccclass,g=s.property,m=e("BaseAction",(f=N("BaseAction"),d=g({type:u,tooltip:"動作延遲"}),y=g({type:[l],tooltip:"後續動作節點列表"}),v=g({tooltip:"動作所屬事件"}),f(((E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"delay",_,o(t)),i(t,"nextActionNodes",x,o(t)),i(t,"event",b,o(t)),t._nextActions=void 0,t}return n(t,e),t.findNextActions=function(e){for(var t,n=[],i=r(e.nextActionNodes);!(t=i()).done;)for(var o,c=t.value,a=r(c.getComponents("BaseAction"));!(o=a()).done;){var s=o.value;n.push(s)}return n},t.isSameQueue=function(e,t){return e.event==t.event},c(t,[{key:"nextActions",get:function(){return this._nextActions=t.findNextActions(this),this._nextActions},set:function(e){this._nextActions=e}}]),t}(p)).EVENT_VIEW_SHOW="show",E.EVENT_VIEW_HIDE="hide",_=t((h=E).prototype,"delay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=t(h.prototype,"nextActionNodes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(h.prototype,"event",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.EVENT_VIEW_SHOW}}),A=h))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./AudioPlayer.ts","./RuntimeSettingConfig.ts"],(function(t){var e,i,n,l,o,u,s,r,a,c,h,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized,o=t.createClass},function(t){u=t.cclegacy,s=t._decorator,r=t.Sprite,a=t.Component},function(t){c=t.MessageManager},function(t){h=t.MessageCmd},function(t){f=t.AudioPlayer},function(t){p=t.RuntimeSettingConfig}],execute:function(){var d,b,y,B,_,A,g;u._RF.push({},"df3a4RetOdEBo8fj552sc5l","BaseBullet",void 0);var S=s.ccclass,H=s.property;t("BaseBullet",(d=S("BaseBullet"),b=H(r),y=H(f),d((A=e((_=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,n(e,"bulletSprite",A,l(e)),n(e,"shootAudioPlayer",g,l(e)),e._bullet=null,e._bulletable=null,e._mute=void 0,e}i(e,t);var u=e.prototype;return u.initial=function(t,e){this._bullet=t,this._bulletable=e,this._mute=p.instance().IsSpeedUpMode,this.shootAudioPlayer&&this.shootAudioPlayer.preload()},u.release=function(t,e){this._bulletable=e,this._bullet=null},u.setBulletSpriteActive=function(t){this.BulletSprite.node.active=t},u.playShootAudio=function(t){this.shootAudioPlayer&&!this._mute&&t&&this.shootAudioPlayer.play()},u.checkHitable=function(t,e){return t==this.Bullet&&this.BulletSprite.node.active},u.onLoad=function(){this.onBulletHitFishAction=this.onBulletHitFishAction.bind(this)},u.onEnable=function(){this.setBulletSpriteActive(!0),this.playShootAudio(!0),c.Instance.on(h.ON_BULLET_HIT_FISH,this.onBulletHitFishAction)},u.update=function(t){this.IsReady&&this.onUpdate(t)},u.onDisable=function(){c.Instance.off(h.ON_BULLET_HIT_FISH,this.onBulletHitFishAction),this.playShootAudio(!1),this.setBulletSpriteActive(!1)},u.onDestroy=function(){this.onBulletHitFishAction=null},u.onUpdate=function(t){},u.onBulletHitFishAction=function(t,e){this.checkHitable(t,e)&&this.doHit()},o(e,[{key:"IsReady",get:function(){return null!=this._bullet}},{key:"Bullet",get:function(){return this._bullet}},{key:"BulletInfo",get:function(){return this._bullet.Info}},{key:"BulletKind",get:function(){return this._bullet.BulletKind}},{key:"Bulletable",get:function(){return this._bulletable}},{key:"BulletSprite",get:function(){return this.bulletSprite}},{key:"FromAnchor",get:function(){return this._bulletable?this._bulletable.BulletAnchor:this.node}},{key:"ShootAudio",get:function(){return this.shootAudioPlayer}}]),e}(a)).prototype,"bulletSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(_.prototype,"shootAudioPlayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=_))||B));u._RF.pop()}}}));

System.register("chunks:///_virtual/BaseFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./BulletPoolNode.ts","./SpriteAnimationPlayer.ts","./AudioPlayer.ts","./DirectionHelper.ts"],(function(t){var i,n,e,o,r,u,l,s,a,c,f,h,d,p,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){u=t.cclegacy,l=t._decorator,s=t.Node,a=t.Quat,c=t.Vec3,f=t.Component},null,function(t){h=t.BulletPoolNode},function(t){d=t.SpriteAnimationPlayer},function(t){p=t.AudioPlayer},function(t){A=t.DirectionHelper}],execute:function(){var y,F,m,I,g,b,P,w,S,v,B,k,N;u._RF.push({},"d60cfSBOgVESo5v4Fa3OjJ3","BaseFort",void 0);var D=l.ccclass,_=l.property;t("BaseFort",(y=D("BaseFort"),F=_(s),m=_([d]),I=_(p),g=_(p),b=_([h]),y((S=i((w=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return i=t.call.apply(t,[this].concat(r))||this,e(i,"fortAnchor",S,o(i)),e(i,"fortSpriteAnim",v,o(i)),e(i,"switchFortAudio",B,o(i)),e(i,"audioPlayer",k,o(i)),e(i,"bulletNodes",N,o(i)),i.IdleAnimationIndex=0,i.FireAnimationIndex=1,i._info=null,i}n(i,t);var u=i.prototype;return u.initial=function(t){this._info=t},u.release=function(t){this._info=null},u.spawnBullet=function(t,i){this.bulletNodes.push(i)},u.despawnBullet=function(t,i){this.bulletNodes.splice(this.bulletNodes.indexOf(i),1)},u.set=function(){this.playSwitchAudio()},u.reset=function(){this.resetAnchorAngle()},u.setAnchorAngle=function(t){var i=A.DirectionToVector(t),n=i[0],e=i[1],o=a.rotationTo(new a,c.UNIT_Y,new c(n,e,0));this.FortAnchor.setRotation(o)},u.resetAnchorAngle=function(){this.setAnchorAngle(A.MinDirection)},u.onLoad=function(){},u.onEnable=function(){},u.update=function(t){this.IsReady&&this.onUpdate(t)},u.onDisable=function(){},u.onDestroy=function(){},u.onUpdate=function(t){},u.playIdleAnim=function(){this.FortIdleAnim.reset(),this.FortIdleAnim.node.active=!0,this.FortFireAnim.node.active=!1},u.playShootAnim=function(){this.FortFireAnim.reset(),this.FortFireAnim.node.active=!0,this.FortIdleAnim.node.active=!1},u.playSwitchAudio=function(){this.switchFortAudio&&this.IsMainFort&&this.switchFortAudio.play()},u.playFortAudio=function(){this.AudioPlayer&&this.IsMainFort&&this.AudioPlayer.play()},u.stopFortAudio=function(){this.AudioPlayer&&this.IsMainFort&&this.AudioPlayer.stop()},r(i,[{key:"Info",get:function(){return this._info}},{key:"IsReady",get:function(){return null!=this.Info}},{key:"IsMainFort",get:function(){return!!this.Info&&this.Info.IsMainFort}},{key:"Fort",get:function(){return this.Info?this.Info.PlayerInfo:null}},{key:"FortAnchor",get:function(){return this.fortAnchor}},{key:"FortSpriteAnim",get:function(){return this.fortSpriteAnim}},{key:"AudioPlayer",get:function(){return this.audioPlayer}},{key:"BulletNodes",get:function(){return this.bulletNodes}},{key:"BulletCount",get:function(){return this.bulletNodes.length}},{key:"FortIdleAnim",get:function(){return this.FortSpriteAnim[this.IdleAnimationIndex]}},{key:"FortFireAnim",get:function(){return this.FortSpriteAnim[this.FireAnimationIndex]}}]),i}(f)).prototype,"fortAnchor",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(w.prototype,"fortSpriteAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=i(w.prototype,"switchFortAudio",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(w.prototype,"audioPlayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(w.prototype,"bulletNodes",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=w))||P));u._RF.pop()}}}));

System.register("chunks:///_virtual/BaseShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerFortManager.ts","./BulletKind.ts","./DirectionHelper.ts","./MessageCmd.ts","./MessageManager.ts"],(function(t){var o,n,e,i,s,a,r,h,c,u,l,f,T;return{setters:[function(t){o=t.inheritsLoose,n=t.createClass},function(t){e=t.cclegacy,i=t._decorator,s=t.input,a=t.Input,r=t.Vec2,h=t.math,c=t.Component},function(t){u=t.PlayerFortManager},null,function(t){l=t.DirectionHelper},function(t){f=t.MessageCmd},function(t){T=t.MessageManager}],execute:function(){var p;e._RF.push({},"1a60bBgIPpAAKvzzRrvPgd5","BaseShoot",void 0);var S=i.ccclass;i.property,t("BaseShoot",S("BaseShoot")(p=function(t){function e(){for(var o,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(o=t.call.apply(t,[this].concat(e))||this)._shootable=null,o}o(e,t);var i=e.prototype;return i.initial=function(t){this._shootable=t},i.release=function(t){this._shootable=null},i.tryShoot=function(){return!!this.checkShoot()&&(this.runShoot(),!0)},i.onEnable=function(){s.on(a.EventType.TOUCH_START,this.onTouchStart,this),s.on(a.EventType.TOUCH_END,this.onTouchEnd,this),s.on(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.OnGetSpecialBulletRewardAction=this.OnGetSpecialBulletRewardAction.bind(this),T.Instance.on(f.ON_GET_SPECIAL_BULLET_REWARD,this.OnGetSpecialBulletRewardAction)},i.onDisable=function(){s.off(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),s.off(a.EventType.TOUCH_END,this.onTouchEnd,this),s.off(a.EventType.TOUCH_START,this.onTouchStart,this),T.Instance.off(f.ON_GET_SPECIAL_BULLET_REWARD,this.OnGetSpecialBulletRewardAction)},i.onTouchStart=function(t){this.shootable.checkTouchPoint()&&this.tryShoot()},i.onTouchEnd=function(t){},i.checkShoot=function(){return this.shootable&&this.shootable.checkShoot()&&this.IsUsedShoot},i.transToShootDirection=function(t){var o=this.shootable.FortPoint,n=t.clone().subtract(o);if(n.equals(r.ZERO))return l.MinDirection;var e=n.signAngle(r.UNIT_Y)/l.DirectionToRadian,i=this.genClampValue(e),s=i[0],a=i[1];return e=h.clamp(e,s,a),e=l.DirectionConstrain(e)},i.genClampValue=function(t){return t<0?[-this.RotateDirectionLimit,0]:[0,this.RotateDirectionLimit]},i.OnGetSpecialBulletRewardAction=function(t){},n(e,[{key:"shootable",get:function(){return this._shootable}},{key:"ShootPoint",get:function(){return this.shootable?this.shootable.ShootPoint:r.ZERO.clone()}},{key:"IsAutoShoot",get:function(){return!!this.shootable&&this.shootable.IsAutoShoot}},{key:"IsUsedShoot",get:function(){return u.instance().MainPlayerFort.UsedBulletKind==this.BulletKind}},{key:"RotateDirectionLimit",get:function(){return 0}}]),e}(c))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/BetChange.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"719820o2sFMIrpErCvMoLq5","BetChange",void 0);e("BetChange",function(){function e(){this.Bet=void 0,this.Bet=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeFloat64(r.Bet)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(1==n)a.Bet=r.readFloat64();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Bet=r.readFloat64(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BetControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerFortManager.ts","./AudioPlayer.ts","./Utility2.ts"],(function(t){var e,n,i,r,o,s,a,u,c,l,h,d,B,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,i=t.inheritsLoose,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Label,u=t.Button,c=t.Node,l=t.UITransform,h=t.Component},function(t){d=t.PlayerFortManager},function(t){B=t.AudioPlayer},function(t){f=t.Utility}],execute:function(){var g,_,p,T,b,v,y,m,M,C,A,E,L,S,z,O,U,x,I,N,w,H;o._RF.push({},"1c015mn9YBFMLTu7fvZ835d","BetControl",void 0);var k=s.ccclass,P=s.property,D=t("BetIntervalSetting",(g=k("BetIntervalSetting"),_=P({tooltip:"這個階段過多久到下個階段"}),p=P({tooltip:"這個階段切Bet間隔"}),g((v=e((b=function(){n(this,"timeToNextStage",v,this),n(this,"interval",y,this)}).prototype,"timeToNextStage",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=e(b.prototype,"interval",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=b))||T));t("BetControl",(m=k("BetControl"),M=P(a),C=P(u),A=P(B),E=P(u),L=P(B),S=P([D]),m((U=e((O=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"betLabel",U,r(e)),n(e,"increaseButton",x,r(e)),n(e,"increaseAudio",I,r(e)),n(e,"reduceButton",N,r(e)),n(e,"reduceAudio",w,r(e)),n(e,"changeBetIntervalSetting",H,r(e)),e._increaseTransform=null,e._reduceTransform=null,e._isLocked=!1,e._isMaxBet=!1,e._isMinBet=!1,e._isAdding=!1,e._isMinusing=!1,e}i(e,t);var o=e.prototype;return o.SetPlayer=function(t,e,n){this.increaseButton.node.active=e,this.reduceButton.node.active=e,this.betLabel.node.active=t,this.betLabel.string=f.formatLocalizedNumber(n)},o.SetBetValue=function(t){this.betLabel.string=f.formatLocalizedNumber(t),this.ChangeBetState(!1)},o.ChangeBetState=function(t){if(t)this.increaseButton.interactable=!t,this.reduceButton.interactable=!t,this._isLocked=!0;else{var e=d.instance();this._isMaxBet=e.IsMaxBet,this._isMinBet=e.IsMinBet,this.increaseButton.interactable=!this._isMaxBet,this.reduceButton.interactable=!this._isMinBet,this._isLocked=!1}},o.onLoad=function(){var t=this;this.increaseButton.node.on(c.EventType.TOUCH_START,(function(){return t.TouchBtnStart(!0)}),this),this.increaseButton.node.on(c.EventType.TOUCH_MOVE,this.TouchBtnMove,this),this.increaseButton.node.on(c.EventType.TOUCH_END,this.TouchBtnEnd,this),this.increaseButton.node.on(c.EventType.TOUCH_CANCEL,this.TouchBtnEnd,this),this.reduceButton.node.on(c.EventType.TOUCH_START,(function(){return t.TouchBtnStart(!1)}),this),this.reduceButton.node.on(c.EventType.TOUCH_MOVE,this.TouchBtnMove,this),this.reduceButton.node.on(c.EventType.TOUCH_END,this.TouchBtnEnd,this),this.reduceButton.node.on(c.EventType.TOUCH_CANCEL,this.TouchBtnEnd,this),this._increaseTransform=this.increaseButton.node.getComponent(l),this._reduceTransform=this.reduceButton.node.getComponent(l)},o.TouchBtnStart=function(t){this._isLocked||this._isAdding||this._isMinusing||(t&&!this._isMaxBet?(d.instance().increaseBet(),this.increaseAudio.play(),this._isAdding||(this._isAdding=!0,this.startBetChange(t))):t||this._isMinBet||(d.instance().reduceBet(),this.reduceAudio.play(),this._isMinusing||(this._isMinusing=!0,this.startBetChange(t))))},o.startBetChange=function(t){var e=this,n=0,i=null,r=function(){e._isLocked||(t&&!e._isMaxBet?(d.instance().increaseBet(),e.increaseAudio.play()):t||e._isMinBet||(d.instance().reduceBet(),e.reduceAudio.play()))};!function t(){if(!(n>=e.changeBetIntervalSetting.length)){var o=e.changeBetIntervalSetting[n];i&&e.unschedule(i),i=function(){r()},e.schedule(i,o.interval),e.scheduleOnce((function(){n+=1,t()}),o.timeToNextStage)}}()},o.TouchBtnMove=function(t){var e=t.getLocation();if(this._isAdding||this._isMinusing){var n=!1;this._isAdding&&this._increaseTransform?n=this._increaseTransform.hitTest(e):this._isMinusing&&this._reduceTransform&&(n=this._reduceTransform.hitTest(e)),n||this.TouchBtnEnd()}},o.TouchBtnEnd=function(){this._isAdding=!1,this._isMinusing=!1,this.unscheduleAllCallbacks()},e}(h)).prototype,"betLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(O.prototype,"increaseButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(O.prototype,"increaseAudio",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(O.prototype,"reduceButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(O.prototype,"reduceAudio",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(O.prototype,"changeBetIntervalSetting",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=O))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/BetDataRaw.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"fc6aa6pc5ZGS59E52M6t1RJ","BetDataRaw",void 0);e("BetDataRaw",function(){function e(){this.TID=void 0,this.Time=void 0,this.FishID=void 0,this.BulletKind=void 0,this.Bet=void 0,this.Win=void 0,this.SpecialBulletKey=void 0,this.TID="",this.Time=0,this.FishID=0,this.BulletKind=0,this.Bet=0,this.Win=0,this.SpecialBulletKey=""}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(7),e.writeString(r.TID),e.writeFloat64(r.Time),e.writeInt32(r.FishID),e.writeUint8(r.BulletKind),e.writeInt16(r.Bet),e.writeInt32(r.Win),e.writeString(r.SpecialBulletKey)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(7==n)a.TID=r.readString(),a.Time=r.readFloat64(),a.FishID=r.readInt32(),a.BulletKind=r.readUint8(),a.Bet=r.readInt16(),a.Win=r.readInt32(),a.SpecialBulletKey=r.readString();else{if(n>7)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.TID=r.readString(),1==n)return a;if(a.Time=r.readFloat64(),2==n)return a;if(a.FishID=r.readInt32(),3==n)return a;if(a.BulletKind=r.readUint8(),4==n)return a;if(a.Bet=r.readInt16(),5==n)return a;if(a.Win=r.readInt32(),6==n)return a;if(a.SpecialBulletKey=r.readString(),7==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BetHistoryController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RespDataGetBetHistory.ts","./ClientAgent.ts","./UIBetHistoryPanel.ts","./NodeControll.ts","./UIBetHistoryDetailPanel.ts","./Constants.ts","./Utility2.ts","./FishGameAck.ts","./ReqDataGetBetHistory.ts","./MessageManager.ts","./MessageCmd.ts","./GeneralPopup.ts","./L10nKeyConfig.ts","./UIGeneralPopup.ts","./BetDataRaw.ts","./StopwatchHelper.ts","./GameConfig.ts"],(function(t){var e,i,s,a,n,o,l,r,h,c,u,y,d,p,_,B,D,g,m,T,f,H,b,P,I,C,k,x;return{setters:[function(t){e=t.inheritsLoose,i=t.applyDecoratedDescriptor,s=t.initializerDefineProperty,a=t.assertThisInitialized,n=t.createClass},function(t){o=t.cclegacy,l=t._decorator,r=t.UIOpacity,h=t.SpriteFrame,c=t.Component},function(t){u=t.RespDataGetBetHistory},function(t){y=t.ClientAgent},function(t){d=t.UIBetHistoryPanel},function(t){p=t.NodeControll},function(t){_=t.UIBetHistoryDetailPanel},function(t){B=t.Constants},function(t){D=t.Utility},function(t){g=t.FishGameAck},function(t){m=t.ReqDataGetBetHistory},function(t){T=t.MessageManager},function(t){f=t.MessageCmd},function(t){H=t.GeneralPopup},function(t){b=t.SystemMessageType},function(t){P=t.GeneralPopupType},function(t){I=t.BetDataRaw},function(t){C=t.StopwatchHelper,k=t.StopwatchUnitType},function(t){x=t.GameConfig}],execute:function(){var G,S,v,M,F,O,E,w,N,A,R,q,L,U,K;o._RF.push({},"baa9aW3uFBMCrLQpN2gDtjM","BetHistoryController",void 0);var W=l.ccclass,z=l.property,Q=t("BetDataGroup",(function(){this.tid=void 0,this.time=void 0,this.bet=void 0,this.win=void 0,this.betDatas=void 0,this.Setting=void 0})),X=t("BetData",function(t){function i(e,i){var s;return(s=t.call(this)||this).Setting=void 0,s.TID=e.TID,s.Time=e.Time,s.FishID=e.FishID,s.BulletKind=e.BulletKind,s.Bet=e.Bet,s.Win=e.Win,s.SpecialBulletKey=e.SpecialBulletKey,s.Setting=i,s}return e(i,t),i}(I)),j=function(){this.DailyBet=void 0,this.DailyWin=void 0,this.DailyMinTID=void 0,this.TidThreshold=void 0};t("BetHistoryController",(G=W("BetHistoryController"),S=z(p),v=z(r),M=z(d),F=z(_),O=z({type:[h],visible:!0}),G((N=i((w=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,s(e,"uiBetHistory",N,a(e)),s(e,"uiOpacity",A,a(e)),s(e,"uiBetHistoryPanel",R,a(e)),s(e,"uiBetHistoryDetailPanel",q,a(e)),s(e,"timeIndexMax",L,a(e)),s(e,"pageDataCountMax",U,a(e)),s(e,"_bulletKindSpriteFrames",K,a(e)),e._pageIndexMin=0,e._timeIndexMin=0,e._tidThresholdMin="-2",e._tidThresholdMax="-1",e._originTime=0,e._timezoneOffset=0,e._timeIndex=0,e._queryStartTime=0,e._queryEndTime=0,e._pageIndex=0,e._pageIndexMax=Number.MAX_SAFE_INTEGER,e._tidThreshold=e._tidThresholdMax,e._dailyCaches=new Map,e._timeThreshold=0,e._isFirstDayFecthed=!1,e._betDataGroups=[],e._respData=null,e._onGetBetHistoryCallback=null,e._refreshDailyQuery=!0,e}e(i,t);var o=i.prototype;return o.openUIBetHistory=function(){x.config.demo?H.open(b.generalPopup_DemoInvalid,"H5F/GeneralPopup/Maintenance",H.defaultTitle,P.OneButton,null):(this.uiBetHistory.node.active=!0,this._originTime=D.getNowDateSeconds(),this._queryStartTime=this._originTime-this._timeIndex*B.SecondsPerDay,this._queryEndTime=this._queryStartTime+B.SecondsPerDay-1,this._timeThreshold=Date.now(),this.uiBetHistoryPanel.setTime(-1),this.uiBetHistoryPanel.setPreviousTimeButtonEnable(!1),this.uiBetHistoryPanel.setNextTimeButtonEnable(!1),this.uiBetHistoryPanel.setDailyBetAndDailyWin(-1,-1),this.uiBetHistoryPanel.setPage(-1),this.uiBetHistoryPanel.setLeftPageButtonEnable(!1),this.uiBetHistoryPanel.setRightPageButtonEnable(!1),this.getBetHistory(this._queryStartTime,this._queryEndTime,this._pageIndex))},o.closeUIBetHistory=function(){this.uiBetHistoryPanel.unsetDatas(),this.uiBetHistory.node.active=!1,this._refreshDailyQuery=!0,this._onGetBetHistoryCallback=null,this._betDataGroups.length=0,this._respData=null,this._isFirstDayFecthed=!1,this._timeThreshold=0,this._dailyCaches.clear(),this._tidThreshold=this._tidThresholdMax,this._pageIndexMax=Number.MAX_SAFE_INTEGER,this._pageIndex=0,this._queryEndTime=0,this._queryStartTime=0,this._timeIndex=0,this._originTime=0},o.openUIBetHistoryDetailPanel=function(t){this.uiBetHistoryPanel.node.active=!1,this.uiBetHistoryDetailPanel.node.active=!0,this.uiBetHistoryDetailPanel.setDatas(t.data,this._timezoneOffset)},o.closeUIBetHistoryDetailPanel=function(){this.uiBetHistoryDetailPanel.unsetDatas(),this.uiBetHistoryDetailPanel.node.active=!1,this.uiBetHistoryPanel.node.active=!0},o.onLoad=function(){this.onGetBetHistoryAction=this.onGetBetHistoryAction.bind(this),this.processGetBetHistory=this.processGetBetHistory.bind(this),this.onClickUIBetDataGroupAction=this.onClickUIBetDataGroupAction.bind(this),this.clickLeftPage=this.clickLeftPage.bind(this),this.clickRightPage=this.clickRightPage.bind(this),this.clickPreviousTime=this.clickPreviousTime.bind(this),this.clickNextTime=this.clickNextTime.bind(this),this.clickPreviousTimeCallback=this.clickPreviousTimeCallback.bind(this),this.clickNextTimeCallback=this.clickNextTimeCallback.bind(this),this.clickLeftPageCallback=this.clickLeftPageCallback.bind(this),this.clickRightPageCallback=this.clickRightPageCallback.bind(this),this.OnOpenGotchaFish=this.OnOpenGotchaFish.bind(this),this.OnCloseGotchaFish=this.OnCloseGotchaFish.bind(this),y.Instance.OnRespGetBetHistory.add(this.onGetBetHistoryAction),this.uiBetHistoryPanel.onClickUIBetDataGroup.add(this.onClickUIBetDataGroupAction),this.uiBetHistoryPanel.onClickLeftPage.add(this.clickLeftPage),this.uiBetHistoryPanel.onClickRightPage.add(this.clickRightPage),this.uiBetHistoryPanel.onClickPreviousTime.add(this.clickPreviousTime),this.uiBetHistoryPanel.onClickNextTime.add(this.clickNextTime),this._timezoneOffset=D.getTimeZoneOffset(),T.Instance.on(f.OPEN_GOTCHA_FISH,this.OnOpenGotchaFish,this),T.Instance.on(f.CLOSE_GOTCHA_FISH,this.OnCloseGotchaFish,this)},o.onDestroy=function(){y.Instance.OnRespGetBetHistory.remove(this.onGetBetHistoryAction),T.Instance.off(f.OPEN_GOTCHA_FISH,this.OnOpenGotchaFish,this),T.Instance.off(f.CLOSE_GOTCHA_FISH,this.OnCloseGotchaFish,this)},o.onGetBetHistoryAction=function(t){C.stop("QueryBetHistory","query time:",k.MilliSeconds),this._respData=t,T.Instance.emit(f.CLOSE_FETCHING_HINT,this.processGetBetHistory)},o.processGetBetHistory=function(){var t;if(this._respData.Ack!=g.Success)return H.open(b.generalPopup_JoinRoomFail,"H5F/GeneralPopup/JoinRoomFail",H.defaultTitle,P.OneButton,null,this._respData.Ack),void(this._isFirstDayFecthed||this.closeUIBetHistory());this._isFirstDayFecthed=!0,null==(t=this._onGetBetHistoryCallback)||t.call(this),this._onGetBetHistoryCallback=null,C.start("ProcessBetHistory"),this.processDailyCache(),console.warn("data count: "+this._respData.BetDatas.length);var e=0,i=0,s=-1,a=0,n=new Q;n.Setting=this,n.betDatas=[];for(var o=[],l=!1,r=!1,h=new Map,c=0,u=this._respData.BetDatas.length-1;c<=u;++c){var y=this._respData.BetDatas[c];if(!(y.Time>this._queryEndTime&&(String.isNullOrEmpty(y.SpecialBulletKey)||y.SpecialBulletKey.endsWith("+")))){if(!String.isNullOrEmpty(y.SpecialBulletKey)){if(!y.SpecialBulletKey.endsWith("+")){var d=h.get(y.SpecialBulletKey);null==d&&(d={bet:0,win:0},h.set(y.SpecialBulletKey,d)),d.bet+=y.Bet,d.win+=y.Win;continue}var p=y.SpecialBulletKey.slice(0,y.SpecialBulletKey.length-1),_=h.get(p);null!=_&&(y.Bet+=_.bet,y.Win+=_.win)}if(this._tidThreshold==this._tidThresholdMax||l){var B=new X(y,this);if(-1===s&&(s=B.Time),B.Time===s&&(n.betDatas.push(B),e+=B.Bet,i+=B.Win,++a),B.Time!=s||a>=this.pageDataCountMax||c>=u){if(n.tid=n.betDatas[n.betDatas.length-1].TID,n.time=n.betDatas[n.betDatas.length-1].Time,n.bet=e,n.win=i,o.push(n),B.Time!=s){if(e=0,i=0,(n=new Q).Setting=this,n.betDatas=[],n.betDatas.push(B),e+=B.Bet,i+=B.Win,!(++a>=this.pageDataCountMax||c>=u)){s=B.Time;continue}n.tid=n.betDatas[n.betDatas.length-1].TID,n.time=n.betDatas[n.betDatas.length-1].Time,n.bet=e,n.win=i,o.push(n)}this._tidThreshold=B.TID,this._queryEndTime=B.Time,B.TID===this._respData.DailyMinTID&&(r=!0);break}}else y.TID===this._tidThreshold&&(l=!0)}}this._betDataGroups.push(o),r||(r=0===o.length),r&&(this._pageIndexMax=this._pageIndex),this._refreshDailyQuery&&(this.uiBetHistoryPanel.setTime(this._queryStartTime),this.uiBetHistoryPanel.setPreviousTimeButtonEnable(this._timeIndex<this.timeIndexMax),this.uiBetHistoryPanel.setNextTimeButtonEnable(this._timeIndex>this._timeIndexMin),this.uiBetHistoryPanel.setDailyBetAndDailyWin(this._respData.DailyBet,this._respData.DailyWin)),this.uiBetHistoryPanel.setDatas(this._betDataGroups[this._pageIndex]),this.uiBetHistoryPanel.setPage(this._pageIndex+1),this.uiBetHistoryPanel.setLeftPageButtonEnable(this._pageIndex>this._pageIndexMin),this.uiBetHistoryPanel.setRightPageButtonEnable(this._pageIndex<this._pageIndexMax),C.stop("ProcessBetHistory","process time:",k.MilliSeconds)},o.processDailyCache=function(){var t=this._dailyCaches.get(this._queryStartTime);null!=t?(this._respData.DailyBet=t.DailyBet,this._respData.DailyWin=t.DailyWin,this._respData.DailyMinTID=t.DailyMinTID):((t=new j).DailyBet=this._respData.DailyBet,t.DailyWin=this._respData.DailyWin,t.DailyMinTID=this._respData.DailyMinTID,t.TidThreshold=this._respData.BetDatas.length>0?this._respData.BetDatas[0].TID:this._tidThresholdMin,this._dailyCaches.set(this._queryStartTime,t))},o.onClickUIBetDataGroupAction=function(t){this.openUIBetHistoryDetailPanel(t)},o.clickPreviousTime=function(){var t=this._originTime-(this._timeIndex+1)*B.SecondsPerDay,e=t+B.SecondsPerDay-1;this._onGetBetHistoryCallback=this.clickPreviousTimeCallback,this._refreshDailyQuery=!0,this.getBetHistory(t,e,this._pageIndexMin)},o.clickNextTime=function(){var t=this._originTime-(this._timeIndex-1)*B.SecondsPerDay,e=t+B.SecondsPerDay-1;this._onGetBetHistoryCallback=this.clickNextTimeCallback,this._refreshDailyQuery=!0,this.getBetHistory(t,e,this._pageIndexMin)},o.clickPreviousTimeCallback=function(){++this._timeIndex,this.clickTimeCallback()},o.clickNextTimeCallback=function(){--this._timeIndex,this.clickTimeCallback()},o.clickTimeCallback=function(){this._queryStartTime=this._originTime-this._timeIndex*B.SecondsPerDay,this._queryEndTime=this._queryStartTime+B.SecondsPerDay-1,this._betDataGroups.length=0,this._pageIndex=this._pageIndexMin,this._pageIndexMax=Number.MAX_SAFE_INTEGER,this._tidThreshold=this._tidThresholdMax},o.clickLeftPage=function(){this._onGetBetHistoryCallback=this.clickLeftPageCallback,this._refreshDailyQuery=!1,this.getBetHistory(this._queryStartTime,this._queryEndTime,this._pageIndex-1)},o.clickRightPage=function(){this._onGetBetHistoryCallback=this.clickRightPageCallback,this._refreshDailyQuery=!1,this.getBetHistory(this._queryStartTime,this._queryEndTime,this._pageIndex+1)},o.clickLeftPageCallback=function(){--this._pageIndex},o.clickRightPageCallback=function(){++this._pageIndex},o.getBetHistory=function(t,e,i){if(t===this._queryStartTime&&i<this._betDataGroups.length)this.getCacheBetHistory();else{var s=this._dailyCaches.get(t);if(T.Instance.emit(f.OPEN_FETCHING_HINT),C.start("QueryBetHistory"),null!=s&&s.TidThreshold===this._tidThresholdMin){var a=new u;a.Ack=g.Success,a.IncludeDailyQuery=!1,a.BetDatas=[],this.onGetBetHistoryAction(a)}else{var n=new m;n.NowDateTime=this._originTime,n.QueryStartTime=t,n.QueryEndTime=e,n.TidThreshold=null!=s?s.TidThreshold:this._tidThresholdMax,n.TimeThreshold=this._timeThreshold,n.IncludeDailyQuery=null==s,y.Instance.GetBetHistory(n)}}},o.getCacheBetHistory=function(){var t;null==(t=this._onGetBetHistoryCallback)||t.call(this),this._onGetBetHistoryCallback=null,this.uiBetHistoryPanel.setDatas(this._betDataGroups[this._pageIndex]),this.uiBetHistoryPanel.setPage(this._pageIndex+1),this.uiBetHistoryPanel.setLeftPageButtonEnable(this._pageIndex>this._pageIndexMin),this.uiBetHistoryPanel.setRightPageButtonEnable(this._pageIndex<this._pageIndexMax)},o.OnOpenGotchaFish=function(){this.uiBetHistory.node.active&&(this.uiOpacity.opacity=0)},o.OnCloseGotchaFish=function(){this.uiBetHistory.node.active&&(this.uiOpacity.opacity=255)},n(i,[{key:"bulletKindSpriteFrames",get:function(){return this._bulletKindSpriteFrames}},{key:"timezoneOffset",get:function(){return this._timezoneOffset}}]),i}(c)).prototype,"uiBetHistory",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(w.prototype,"uiOpacity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(w.prototype,"uiBetHistoryPanel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(w.prototype,"uiBetHistoryDetailPanel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(w.prototype,"timeIndexMax",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),U=i(w.prototype,"pageDataCountMax",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),K=i(w.prototype,"_bulletKindSpriteFrames",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=w))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/BetLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BetType.ts"],(function(e){var t,i,n,r,o;return{setters:[function(e){t=e.createClass,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.math},function(e){o=e.BetType}],execute:function(){n._RF.push({},"64561BY2vBLIa1FPHrQ09PW","BetLevel",void 0);var s=e("BetLevel",function(){function e(){this._betLevel=0,this._playerBetMax=0,this._playerBetMin=0,this._maxLevel=void 0,this._minLevel=void 0,this._nowBetType=void 0}e.LoadBetInfo=function(t){if(null!=t)for(var i,n=0;n<e.BetTypes.length;n++){var r=e.BetTypes[n],o=t.AllLevelRanges.get(r);if(null!=o){i=[];for(var s=o.length,l=0;l<s;l++)for(var a=o[l],h=a.BetLimitRange.X;h<=a.BetLimitRange.Y;h+=a.BetInterval)i.push(h);e._toGoldRatioMapping[r]=t.ToGoldRatioMapping[r],e._betsDic.set(r,i)}}},e.IsValidByBetRegionInfo=function(t,i,n,r){return e.IsValid(t.BetType,i,n,r,t.MaxBet,t.MinBet)},e.IsValid=function(t,n,r,o,s,l){for(var a,h=e._betsDic.get(t),u=i(h);!(a=u()).done;){var _=a.value;if(!(_>r||_>s||_<o||_<l)&&_===n)return!0}return!1},e.GetToGoldRatio=function(t){return e._toGoldRatioMapping[t]};var n=e.prototype;return n.GetNowBet=function(){return this.GetBet(this._nowBetType)},n.GetBet=function(t){return e._betsDic.get(t)[this._betLevel]},n.SetBetRegion=function(t,i,n,o,s){this._nowBetType=s;for(var l=e._betsDic.get(s),a=!1,h=!1,u=!1,_=!1,v=0,B=l.length-1;v<=B;++v)l[v]<=t&&(this._playerBetMax=v,a=!0),!h&&l[v]>=i&&(this._playerBetMin=v,h=!0),n===l[v]&&(this._maxLevel=v,u=!0),o===l[v]&&(this._minLevel=v,_=!0);a||console.error("betMax<"+t+"> not found"),h||console.error("betMin<"+i+"> not found"),u||console.error("RegionbetMax<"+n+"> not found"),_||console.error("RegionbetMin<"+o+"> not found"),this._betLevel=r.clamp(this._betLevel,Math.max(this._minLevel,this._playerBetMin),Math.min(this._maxLevel,this._playerBetMax))},n.GetMinBet=function(t){return e._betsDic.get(t)[this._minLevel]},n.GetMaxBet=function(t){return e._betsDic.get(t)[this._maxLevel]},n.IncreaseLevel=function(){return this.TryApplyLevel(Math.min(this._betLevel+1,this._maxLevel,this._playerBetMax))},n.DecreaseLevel=function(){return this.TryApplyLevel(Math.max(this._betLevel-1,this._minLevel,this._playerBetMin))},n.SetBetLevelToMinLevel=function(){return this._betLevel=this._minLevel,this.GetBet(this._nowBetType)},n.SetBetLevelByBet=function(t){if(this.GetBet(this._nowBetType)!==t)for(var i=e._betsDic.get(this._nowBetType),n=0,r=i.length-1;n<=r;++n){if(i[n]===t)return void(this._betLevel=n)}},n.TryApplyLevel=function(e){return this._betLevel!=e&&(this._betLevel=e,!0)},t(e,[{key:"IsLimitBetMax",get:function(){return this._betLevel>=e._betsDic.get(this._nowBetType).length-1}},{key:"IsLimitBetMin",get:function(){return this._betLevel<=0}},{key:"IsPlayerBetMax",get:function(){return this._betLevel>=this._playerBetMax}},{key:"IsPlayerBetMin",get:function(){return this._betLevel<=this._playerBetMin}},{key:"IsRegionBetMax",get:function(){return this._betLevel>=this._maxLevel}},{key:"IsRegionBetMin",get:function(){return this._betLevel<=this._minLevel}},{key:"IsPlayerLessRegion",get:function(){return this._playerBetMax<this._minLevel}}]),e}());s.BetTypes=[o.Gold],s._betsDic=new Map,s._toGoldRatioMapping=new Map,n._RF.pop()}}}));

System.register("chunks:///_virtual/BetLevelDataLoader.ts",["cc","./BetLevelHelper.ts","./BetType.ts"],(function(e){var t,l,a;return{setters:[function(e){t=e.cclegacy},function(e){l=e.BetLevelHelper},function(e){a=e.BetType}],execute:function(){var n;t._RF.push({},"7c607UGhzNF7ooHNpx3EA4M","BetLevelDataLoader",void 0);var i=e("BetLevelDataLoader",function(){function e(){this.BetLevelHelper=null}return e.prototype.LoadFromJsonAsset=function(t){this.BetLevelHelper=new l,this.BetLevelHelper.AllLevelRanges=new Map;var a=t.AllLevelRanges;for(var n in a){for(var i=a[n],o=0,r=i.length-1;o<=r;++o){var v=i[o];v.BetLimitRange.X=v.BetLimitRange.X.toLogicValue(),v.BetLimitRange.Y=v.BetLimitRange.Y.toLogicValue(),v.BetInterval=v.BetInterval.toLogicValue()}this.BetLevelHelper.AllLevelRanges.set(e.StringToBetType(n),i)}this.BetLevelHelper.ToGoldRatioMapping=new Map;var g=t.ToGoldRatioMapping;for(var B in g){var L=g[B];this.BetLevelHelper.ToGoldRatioMapping.set(e.StringToBetType(B),L)}this.BetLevelHelper.PlayerLevelBetMaxSetting=t.PlayerLevelBetMaxSetting;for(var p=0,s=this.BetLevelHelper.PlayerLevelBetMaxSetting.length-1;p<=s;++p){var u=this.BetLevelHelper.PlayerLevelBetMaxSetting[p];u.BetMax=u.BetMax.toLogicValue()}this.BetLevelHelper.RegionGroups=t.RegionGroups;for(var c=0,R=this.BetLevelHelper.RegionGroups.length-1;c<=R;++c){var h=this.BetLevelHelper.RegionGroups[c];h.BetRegionRange.X=h.BetRegionRange.X.toLogicValue(),h.BetRegionRange.Y=h.BetRegionRange.Y.toLogicValue(),h.InitialBet=h.InitialBet.toLogicValue()}},e.StringToBetType=function(e){switch(e){default:case"Gold":return a.Gold}},e}());n=i,i.Instance=new n,t._RF.pop()}}}));

System.register("chunks:///_virtual/BetLevelHelper.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./BetLevelRange.ts","./PlayerLevelBetMax.ts","./BetRegionType.ts"],(function(e){var r,n,t,i,a,o;return{setters:[function(e){r=e.cclegacy},function(e){n=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){i=e.BetLevelRange},function(e){a=e.PlayerLevelBetMax},function(e){o=e.BetRegionType}],execute:function(){r._RF.push({},"d5791pJCKxPK4WsWWrInZVR","BetLevelHelper",void 0);e("BetLevelHelper",function(){function e(){this.AllLevelRanges=void 0,this.ToGoldRatioMapping=void 0,this.PlayerLevelBetMaxSetting=void 0,this.RegionGroups=void 0,this.AllLevelRanges=null,this.ToGoldRatioMapping=null,this.PlayerLevelBetMaxSetting=null,this.RegionGroups=null}return e.serialize=function(e){var r=n.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(4),e.writeMap(r.AllLevelRanges,(function(e,r){return e.writeInt32(r)}),(function(e,r){return e.writeArray(r,(function(e,r){return i.serializeCore(e,r)}))})),e.writeMap(r.ToGoldRatioMapping,(function(e,r){return e.writeInt32(r)}),(function(e,r){return e.writeInt32(r)})),e.writeArray(r.PlayerLevelBetMaxSetting,(function(e,r){return a.serializeCore(e,r)})),e.writeArray(r.RegionGroups,(function(e,r){return o.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=n.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,n){r.writeArray(n,(function(r,n){return e.serializeCore(r,n)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var n=r.tryReadObjectHeader(),t=n[0],u=n[1];if(!t)return null;var l=new e;if(4==u)l.AllLevelRanges=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return i.deserializeCore(e)}))})),l.ToGoldRatioMapping=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readInt32()})),l.PlayerLevelBetMaxSetting=r.readArray((function(e){return a.deserializeCore(e)})),l.RegionGroups=r.readArray((function(e){return o.deserializeCore(e)}));else{if(u>4)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==u)return l;if(l.AllLevelRanges=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return i.deserializeCore(e)}))})),1==u)return l;if(l.ToGoldRatioMapping=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readInt32()})),2==u)return l;if(l.PlayerLevelBetMaxSetting=r.readArray((function(e){return a.deserializeCore(e)})),3==u)return l;if(l.RegionGroups=r.readArray((function(e){return o.deserializeCore(e)})),4==u)return l}return l},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BetLevelRange.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./BetVector2.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.BetVector2}],execute:function(){r._RF.push({},"c2504hfdBVIQqJ2kwxCnmg5","BetLevelRange",void 0);e("BetLevelRange",function(){function e(){this.BetLimitRange=void 0,this.BetInterval=void 0,this.BetLimitRange=null,this.BetInterval=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),n.serializeCore(e,r.BetLimitRange),e.writeFloat64(r.BetInterval)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],a=t[1];if(!i)return null;var o=new e;if(2==a)o.BetLimitRange=n.deserializeCore(r),o.BetInterval=r.readFloat64();else{if(a>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.BetLimitRange=n.deserializeCore(r),1==a)return o;if(o.BetInterval=r.readFloat64(),2==a)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BetRegion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BetRegionInfo.ts","./BetType.ts"],(function(e){var n,o,t,i;return{setters:[function(e){n=e.createClass},function(e){o=e.cclegacy},function(e){t=e.BetRegionInfo},function(e){i=e.BetType}],execute:function(){o._RF.push({},"bcbeaYKzJRBU6DtYFLmzIwY","BetRegion",void 0),e("BetRegion",function(){function e(){}return e.LoadRegionInfo=function(n){if(null!=n){e._regionDict=new Map;for(var o=0;o<n.RegionGroups.length;o++){var i=new t;i.BetType=n.RegionGroups[o].BetType,i.RegionNumber=n.RegionGroups[o].RegionNum,i.MinBet=n.RegionGroups[o].BetRegionRange.X,i.MaxBet=n.RegionGroups[o].BetRegionRange.Y,i.InitialBet=n.RegionGroups[o].InitialBet,i.ToGoldRatio=n.ToGoldRatioMapping[n.RegionGroups[o].BetType],e._regionDict.set(n.RegionGroups[o].RegionNum,i)}}},e.GetInfo=function(n){var o=e._regionDict.get(n);return null==o&&(console.warn("BetRegionNumber is not match: "+n),(o=new t).BetType=i.Gold,o.RegionNumber=n,o.MinBet=1,o.MaxBet=1,o.ToGoldRatio=1),o},e.GetBetType=function(n){var o=e._regionDict.get(n);if(null!=o)return o.BetType;throw RangeError("BetRegionNumber is not match: "+n)},n(e,null,[{key:"MaxRegionNumber",get:function(){return e._regionDict.size}}]),e}())._regionDict=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/BetRegionInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"c2003fhSStDw6tipknaLN1k","BetRegionInfo",void 0);e("BetRegionInfo",function(){function e(){this.BetType=void 0,this.RegionNumber=void 0,this.MaxBet=void 0,this.MinBet=void 0,this.InitialBet=void 0,this.ToGoldRatio=void 0,this.BetType=0,this.RegionNumber=0,this.MaxBet=0,this.MinBet=0,this.InitialBet=0,this.ToGoldRatio=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeInt32(r.BetType),e.writeUint8(r.RegionNumber),e.writeFloat64(r.MaxBet),e.writeFloat64(r.MinBet),e.writeFloat64(r.InitialBet),e.writeInt32(r.ToGoldRatio)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(6==n)a.BetType=r.readInt32(),a.RegionNumber=r.readUint8(),a.MaxBet=r.readFloat64(),a.MinBet=r.readFloat64(),a.InitialBet=r.readFloat64(),a.ToGoldRatio=r.readInt32();else{if(n>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.BetType=r.readInt32(),1==n)return a;if(a.RegionNumber=r.readUint8(),2==n)return a;if(a.MaxBet=r.readFloat64(),3==n)return a;if(a.MinBet=r.readFloat64(),4==n)return a;if(a.InitialBet=r.readFloat64(),5==n)return a;if(a.ToGoldRatio=r.readInt32(),6==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BetRegionType.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./BetVector2.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.BetVector2}],execute:function(){r._RF.push({},"4f760yJTWVDhbnXOkIbBwJ2","BetRegionType",void 0);e("BetRegionType",function(){function e(){this.BetType=void 0,this.RegionNum=void 0,this.BetRegionRange=void 0,this.InitialBet=void 0,this.BetType=0,this.RegionNum=0,this.BetRegionRange=null,this.InitialBet=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(4),e.writeInt32(r.BetType),e.writeUint8(r.RegionNum),n.serializeCore(e,r.BetRegionRange),e.writeFloat64(r.InitialBet)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],a=t[1];if(!i)return null;var o=new e;if(4==a)o.BetType=r.readInt32(),o.RegionNum=r.readUint8(),o.BetRegionRange=n.deserializeCore(r),o.InitialBet=r.readFloat64();else{if(a>4)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.BetType=r.readInt32(),1==a)return o;if(o.RegionNum=r.readUint8(),2==a)return o;if(o.BetRegionRange=n.deserializeCore(r),3==a)return o;if(o.InitialBet=r.readFloat64(),4==a)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BetType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"aab79jGfs9IP4AsVf/EYvol","BetType",void 0);e("BetType",{Gold:0,Silver:1,Copper:2});t._RF.pop()}}}));

System.register("chunks:///_virtual/BetVector2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"feb47RW8l9NL5vJAf6cB8TR","BetVector2",void 0);e("BetVector2",function(){function e(){this.X=void 0,this.Y=void 0,this.X=0,this.Y=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeFloat64(r.X),e.writeFloat64(r.Y)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(2==n)a.X=r.readFloat64(),a.Y=r.readFloat64();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.X=r.readFloat64(),1==n)return a;if(a.Y=r.readFloat64(),2==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BGConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./ResourceLoader.ts","./ThemeSettingAttribute2.ts","./BackgroundSettingAttribute.ts"],(function(e){var t,n,r,i,a,o,u,s,c,f,l,p,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,r=e.inheritsLoose,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Prefab},function(e){f=e.SingletonComponent},function(e){l=e.ResourceLoader},function(e){p=e.ThemeSettingAttributeData},function(e){B=e.BackgroundSettingAttributeData}],execute:function(){var g,G,h,b,d,m,y,S,P,v,L,M,w,D,k,x,T;u._RF.push({},"5257ehoOblP+KA4MIuAD+yv","BGConfig",void 0);var A=s.ccclass,z=s.property,I=e("BGSetting",(g=A("BGSetting"),G=z({type:c,readonly:!0}),g((d=t((b=function(){n(this,"prefab",d,this)}).prototype,"prefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h)),C=e("GroupBGMSetting",A("ThemeBGMSetting")((S=t((y=function(){n(this,"mainBGMkey",S,this),n(this,"bossBGMkey",P,this)}).prototype,"mainBGMkey",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"defaultAudioKey"}}),P=t(y.prototype,"bossBGMkey",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"defaultAudioKey"}}),m=y))||m);e("BGConfig",(v=A("BGConfig"),L=z({group:{name:"一般背景",id:"BG",displayOrder:2},type:[I]}),M=z({group:{name:"BGM",id:"BGM",displayOrder:1},type:[C]}),v((k=t((D=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"BGPrefabPath",k,i(t)),n(t,"BGSettings",x,i(t)),n(t,"groupBGMSettings",T,i(t)),t.themeBGs=new Map,t}r(t,e);var u=t.prototype;return u.getGroupBGMSetting=function(e){return this.groupBGMSettings[e]},u.getBGSettingCount=function(){return this.BGSettings.length},u.getBGPrefab=function(e){return null===this.BGSettings[e].prefab?null:this.BGSettings[e].prefab},u.getThemeBGPrefab=function(){var e=a(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.Instance.Data.get(t),this.themeBGs.has(t)){e.next=4;break}return e.next=4,this.LoadThemeBG(t,n.ThemeBG);case 4:return e.abrupt("return",this.themeBGs[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.LoadAllBG=function(){var e=a(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.Instance.Data.get(t),e.next=3,this.LoadBG(0,n.StartBleed);case 3:return e.next=5,this.LoadBG(1,n.BG1);case 5:return e.next=7,this.LoadBG(2,n.BG2);case 7:return e.next=9,this.LoadBG(3,n.BG3);case 9:return e.next=11,this.LoadBG(4,n.EndBleed);case 11:return e.next=13,this.LoadThemeBG(t,n.ThemeBG);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.LoadThemeBG=function(e,t){var n=this;return null==B.Instance.Data.get(t)?(this.BGSettings.length=0,null):new Promise((function(r,i){l.LoadPrefab(n.BGPrefabPath+B.Instance.Data.get(t).PrefabName,(function(t,a){t?i(t):(n.themeBGs[e]=a,r())}))}))},u.LoadBG=function(e,t){var n=this;B.Instance.Data.get(t);return new Promise((function(r,i){l.LoadPrefab(n.BGPrefabPath+B.Instance.Data.get(t).PrefabName,(function(t,a){t?i(t):(n.BGSettings[e].prefab=a,r())}))}))},t}(f)).prototype,"BGPrefabPath",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"prefabs/background/Game130_BG"}}),x=t(D.prototype,"BGSettings",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=t(D.prototype,"groupBGMSettings",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=D))||w));u._RF.pop()}}}));

System.register("chunks:///_virtual/BGController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./Constants.ts","./BackgroundTimeAttribute.ts","./ThemeSettingAttribute2.ts","./MessageCmd.ts","./MessageManager.ts","./BGConfig.ts","./BGNode.ts"],(function(t){var e,n,r,i,s,o,u,a,c,h,p,d,l,G,B,_,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){u=t.cclegacy,a=t._decorator,c=t.Component},function(t){h=t.AudioManager},function(t){p=t.Constants},function(t){d=t.BackgroundTimeAttributeData},function(t){l=t.ThemeSettingAttributeData},function(t){G=t.MessageCmd},function(t){B=t.MessageManager},function(t){_=t.BGConfig},function(t){g=t.BGNode,f=t.BGType}],execute:function(){var I,S,m,C,x,R,T,D,M,E,v,F;u._RF.push({},"0761d7H7KRHA7Al7RHwcCFA","BGController",void 0);var y=a.ccclass,b=a.property;t("BGController",(I=y("BGController"),S=b(g),m=b(g),C=b(g),x=b(g),I(((F=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,r(e,"previousSprite",D,i(e)),r(e,"currentSprite",M,i(e)),r(e,"nextSprite",E,i(e)),r(e,"extendSprite",v,i(e)),e._currentBGSetting=null,e._currentBGIndex=-1,e._currentThemeIndex=-1,e._currentRoundInfo=null,e._currentRoundGroup=null,e._currentBackgroundTimeAttribute=null,e._isThemeChanging=!1,e._isBossStage=!1,e._refreshThemeRequestId=0,e._refreshThemePromise=Promise.resolve(),e}n(e,t);var u=e.prototype;return u.onLoad=function(){this.RefreshBGStep=this.RefreshBGStep.bind(this),B.Instance.on(G.REFRESH_BG,this.RefreshBGStep,this),B.Instance.on(G.PLAY_BG_BGM,this.ChangeBGM,this),B.Instance.on(G.RESET_BG_LOCATION,this.MoveBackground,this),B.Instance.on(G.ON_CHANGE_THEME,this.RefreshTheme,this),e.LoadFirstBGFinish=!1,this.currentSprite.type=f.Current,this.previousSprite.type=f.Previous,this.nextSprite.type=f.Next,this.extendSprite.type=f.Extend},u.onDestroy=function(){B.Instance.off(G.REFRESH_BG,this.RefreshBGStep,this),B.Instance.off(G.PLAY_BG_BGM,this.ChangeBGM,this),B.Instance.off(G.RESET_BG_LOCATION,this.MoveBackground,this),B.Instance.off(G.ON_CHANGE_THEME,this.RefreshTheme,this)},u.RefreshBGStep=function(){var t=s(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._currentRoundInfo=e,this._currentBackgroundTimeAttribute=d.Instance.Data.get(this._currentRoundInfo.ID);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),u.RefreshTheme=function(){var t=s(o().mark((function t(n,r){var i,u=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._refreshThemeRequestId++,i=this._refreshThemeRequestId,this._refreshThemePromise=this._refreshThemePromise.then(s(o().mark((function t(){var s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=_.instance().getBGPrefab(0)&&u._currentThemeIndex==n.ID){t.next=15;break}if(e.LoadBGFinish=!1,!(r>=n.GenEndFixedUpdateCount()&&r<=n.GenNextFixedUpdateCount())){t.next=6;break}return t.abrupt("return");case 6:return u._currentRoundGroup=n,t.next=9,_.instance().LoadAllBG(n.ID);case 9:return s=l.Instance.Data.get(n.ID).GroupID,u.ChangeBGM(s),u._isBossStage=!1,e.LoadBGFinish=!0,e.LoadFirstBGFinish||i!=u._refreshThemeRequestId||(e.LoadFirstBGFinish=!0,B.Instance.emit(G.BG_FIRST_FINISH,G.BG_FIRST_FINISH)),t.abrupt("return");case 15:u._isThemeChanging&&(u._currentBGIndex=u._currentRoundGroup.RoundIndex+1,u._isThemeChanging=!1);case 16:case"end":return t.stop()}}),t)})))),t.abrupt("return",this._refreshThemePromise);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),u.ChangeBGM=function(t){h.instance().playBGM(_.instance().getGroupBGMSetting(t-1).mainBGMkey,0,.8)},u.ChangeBossBGM=function(t){h.instance().playBGM(_.instance().getGroupBGMSetting(t-1).bossBGMkey,0,0)},u.SwapBG=function(t,e){var n=[e.type,t.type];return t.type=n[0],e.type=n[1],[e,t]},u.MoveBackground=function(t,n){if(e.LoadBGFinish&&!this._isThemeChanging)if(t>=this._currentRoundGroup.GenEndFixedUpdateCount()&&t<=this._currentRoundGroup.GenNextFixedUpdateCount()&&!this._isThemeChanging)this.SetNextTheme(t,n);else{var r=this._currentRoundGroup.RoundIndex+1,i=_.instance().getBGSettingCount()-2,s=l.Instance.Data.get(this._currentRoundGroup.ID).Direction,o=this.CalculateDirection(s),u=p.PerTickTime/p.MilliSecondsPerSecond*n,a=this.CalculateProgress(t),c={location:0,length:0};if(c.length=this.CalculateLength(s),c.location=this.CalculateLocation(o,a,c.length),r>=i&&this._currentThemeIndex==this._currentRoundGroup.ID){if(this._currentBGIndex===i)return c.location=0,void this.EmitMoveBG(c,o,0,s);if(-1===this._currentBGIndex)return c.location=0,void this.InitializeBossStage(c,r,o,s)}(r===this._currentBGIndex&&this._currentThemeIndex==this._currentRoundGroup.ID||(this.SwapBackgroundSprites(c,r,o,a,s),!this._isBossStage))&&this.EmitMoveBG(c,o,u,s)}},u.CalculateDirection=function(t){return t%2==0?1:-1},u.CalculateIndex=function(t){return Math.floor((t-this._currentRoundGroup.GenStartFixedUpdateCount())/this._currentBackgroundTimeAttribute.GetTotalFixedUpdateCount())+1},u.CalculateLength=function(t){return t<=1?this.currentSprite.getWidth():this.currentSprite.getHeight()},u.CalculateProgress=function(t){return(t-this._currentRoundInfo.StartFixedUpdateCount)/(this._currentRoundInfo.EndFixedUpdateCount-this._currentRoundInfo.StartFixedUpdateCount)},u.CalculateLocation=function(t,e,n){return t*(e*n)},u.EmitMoveBG=function(t,e,n,r){B.Instance.emit(G.MOVE_BG,e,t,n,r)},u.InitializeBossStage=function(t,e,n,r){var i=l.Instance.Data.get(this._currentRoundGroup.ID).GroupID;this._currentBGIndex=e,B.Instance.emit(G.REINDEX_BG,Math.min(e,_.instance().getBGSettingCount()-2)),t.length=this.CalculateLength(r),B.Instance.emit(G.LOCATE_BG,n,t,r),B.Instance.emit(G.INIT_BOSS_STAGE),_.instance().LoadAllBG(this._currentRoundGroup.NextID),this.ChangeBossBGM(i)},u.SwapBackgroundSprites=function(t,e,n,r,i){var s=this.SwapBG(this.nextSprite,this.currentSprite);this.nextSprite=s[0],this.currentSprite=s[1];var o=this.SwapBG(this.nextSprite,this.previousSprite);this.nextSprite=o[0],this.previousSprite=o[1],B.Instance.emit(G.REINDEX_BG,e,n,t,i),-1==this._currentBGIndex&&(t.length=this.CalculateLength(i),t.location=this.CalculateLocation(n,r,t.length),B.Instance.emit(G.LOCATE_BG,n,t,i)),this._currentBGIndex=e,this._currentThemeIndex=this._currentRoundGroup.ID,this._currentBGIndex===_.instance().getBGSettingCount()-2?(_.instance().LoadAllBG(this._currentRoundGroup.NextID),this._isBossStage||this.EnterBossStage()):this._isBossStage=!1},u.SetNextTheme=function(t,e){var n=l.Instance.Data.get(this._currentRoundGroup.NextID).GroupID,r=l.Instance.Data.get(this._currentRoundGroup.NextID).Direction,i={location:0,length:this.CalculateLength(r)},s=(this._currentRoundGroup.GenNextFixedUpdateCount()-t)/p.FixedUpdateCountPerSecond*e;B.Instance.emit(G.ON_FADE_IN_THEME,this.CalculateDirection(r),i,r,s),this.ChangeBGM(n),this._isThemeChanging=!0,this._currentThemeIndex=this._currentRoundGroup.NextID,this._isBossStage=!1},u.EnterBossStage=function(){var t=l.Instance.Data.get(this._currentRoundGroup.ID).GroupID;B.Instance.emit(G.ENTER_BOSS_STAGE),this.ChangeBossBGM(t),this._isBossStage=!0},e}(c)).LoadFirstBGFinish=!1,F.LoadBGFinish=!1,D=e((T=F).prototype,"previousSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(T.prototype,"currentSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(T.prototype,"nextSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(T.prototype,"extendSprite",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=T))||R));u._RF.pop()}}}));

System.register("chunks:///_virtual/BGNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./BGConfig.ts"],(function(t){var n,e,o,i,r,s,c,a,h,u,g,B,d,l,f,p,k;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,a=t.instantiate,h=t.UIOpacity,u=t.UITransform,g=t.sp,B=t.tween,d=t.Vec3,l=t.Component},function(t){f=t.MessageManager},function(t){p=t.MessageCmd},function(t){k=t.BGConfig}],execute:function(){var G,E,I,y,S,_,m;r._RF.push({},"68e75NLEe1HuJBMXhJFLVWR","BGNode",void 0);var C=s.ccclass,v=s.property;t("BGType",{Previous:-1,Current:0,Next:1,Extend:2}),t("MoveMode",{Horizon:0,Vertical:1}),t("BGNode",(G=C("BGNode"),E=v(c),I=v(c),G((_=n((S=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,o(n,"currentBackground",_,i(n)),o(n,"nextBackground",m,i(n)),n.bossEffect=null,n.width=-1,n.height=-1,n.type=null,n}e(n,t);var r=n.prototype;return r.getWidth=function(){return this.width},r.getHeight=function(){return this.height},r.onLoad=function(){f.Instance.on(p.LOCATE_BG,this.LocateBG,this),f.Instance.on(p.MOVE_BG,this.MoveBG,this),f.Instance.on(p.ENTER_BOSS_STAGE,this.EnterBossStage,this),f.Instance.on(p.INIT_BOSS_STAGE,this.EnterBossStage,this),f.Instance.on(p.REINDEX_BG,this.ReIndexBG,this),f.Instance.on(p.ON_FADE_IN_THEME,this.FadeInNextTheme,this)},r.onDestroy=function(){f.Instance.off(p.LOCATE_BG,this.LocateBG,this),f.Instance.off(p.MOVE_BG,this.MoveBG,this),f.Instance.off(p.ENTER_BOSS_STAGE,this.EnterBossStage,this),f.Instance.off(p.INIT_BOSS_STAGE,this.EnterBossStage,this),f.Instance.off(p.REINDEX_BG,this.ReIndexBG,this),f.Instance.off(p.ON_FADE_IN_THEME,this.FadeInNextTheme,this)},r.ReIndexBG=function(t,n,e,o){(t=(t+this.type)%k.instance().getBGSettingCount())<0&&(t=0);var i=k.instance().getBGPrefab(t);if(this.CheckValidBG(i)){var r=a(i);r.parent=this.node,null!=this.currentBackground&&(this.type>=1?this.LocateBG(n,e,o,r):r.setPosition(this.currentBackground.getPosition()),this.DestroyBG(this.currentBackground)),r.getComponent(h).opacity=255,this.currentBackground=r,this.width=this.currentBackground.getComponent(u).contentSize.width,this.height=this.currentBackground.getComponent(u).contentSize.height,this.bossEffect=this.currentBackground.getComponentInChildren(g.Skeleton)}else this.DestroyBG(this.currentBackground)},r.FadeInNextTheme=function(t,n,e,o){var i=this,r=k.instance().getBGPrefab(1+this.type);if(!this.CheckValidBG(r))return B(this.currentBackground.getComponent(h)).to(o,{opacity:0}).start(),void this.DestroyBG(this.currentBackground);var s=a(r);s.parent=this.node,this.nextBackground=s,this.width=this.nextBackground.getComponent(u).contentSize.width,this.height=this.nextBackground.getComponent(u).contentSize.height,n.length=e<=1?this.width:this.height,this.LocateBG(t,n,e,this.nextBackground),null!=this.currentBackground&&B(this.currentBackground.getComponent(h)).to(o,{opacity:0}).start(),B(this.nextBackground.getComponent(h)).to(o,{opacity:255}).call((function(){var t=[i.nextBackground,i.currentBackground];i.currentBackground=t[0],i.nextBackground=t[1],i.DestroyBG(i.nextBackground),i.nextBackground=null,i.bossEffect=i.currentBackground.getComponentInChildren(g.Skeleton)})).start()},r.DestroyBG=function(t){null!=t&&(t.destroy(),t=null)},r.MoveBG=function(t,n,e,o){var i=this.type*n.length;o<=1?B(this.currentBackground).to(e,{position:new d(n.location-t*i,0,0)}).start():B(this.currentBackground).to(e,{position:new d(0,n.location-t*i,0)}).start()},r.LocateBG=function(t,n,e,o){void 0===o&&(o=this.currentBackground);var i=this.type*n.length;e<=1?o.setPosition(n.location-t*i,0):o.setPosition(0,n.location-t*i)},r.EnterBossStage=function(){this.bossEffect&&-1!=this.currentBackground.name.search("SP")&&(this.bossEffect.setAnimation(0,this.currentBackground.name+"_chang",!1),this.bossEffect.addAnimation(0,this.currentBackground.name+"_red",!0))},r.CheckValidBG=function(t){return null!=t||(this.width=-1,this.height=-1,!1)},n}(l)).prototype,"currentBackground",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(S.prototype,"nextBackground",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/BonusFrequencyAttribute.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"bf7c2ryJm1J3r7iHLfPatv4","BonusFrequencyAttribute",void 0);e("BonusFrequencyAttribute",function(){function e(){this.ID=void 0,this.WaveCount=void 0,this.WaveKind0=void 0,this.WaveKind1=void 0,this.WaveKind2=void 0,this.WaveKind3=void 0,this.WaveKind4=void 0,this.ID=0,this.WaveCount=0,this.WaveKind0=0,this.WaveKind1=0,this.WaveKind2=0,this.WaveKind3=0,this.WaveKind4=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(7),e.writeInt32(r.ID),e.writeInt32(r.WaveCount),e.writeInt32(r.WaveKind0),e.writeInt32(r.WaveKind1),e.writeInt32(r.WaveKind2),e.writeInt32(r.WaveKind3),e.writeInt32(r.WaveKind4)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(7==n)a.ID=r.readInt32(),a.WaveCount=r.readInt32(),a.WaveKind0=r.readInt32(),a.WaveKind1=r.readInt32(),a.WaveKind2=r.readInt32(),a.WaveKind3=r.readInt32(),a.WaveKind4=r.readInt32();else{if(n>7)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.ID=r.readInt32(),1==n)return a;if(a.WaveCount=r.readInt32(),2==n)return a;if(a.WaveKind0=r.readInt32(),3==n)return a;if(a.WaveKind1=r.readInt32(),4==n)return a;if(a.WaveKind2=r.readInt32(),5==n)return a;if(a.WaveKind3=r.readInt32(),6==n)return a;if(a.WaveKind4=r.readInt32(),7==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BonusFrequencyAttribute2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BonusFrequencyAttribute.ts"],(function(e){var a,t,n;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},function(e){n=e.BonusFrequencyAttribute}],execute:function(){var r;t._RF.push({},"ef086SqV8dH/6T7TF93ObBh","BonusFrequencyAttribute",void 0);var i=e("BonusFrequencyAttributeData",function(){function e(){this.Data=new Map,this.DataArray=[]}var t=e.prototype;return t.LoadFromJsonAsset=function(e){this.Data.clear();var a=0;for(var t in e.Data){var r=e.Data[t],i=new n;i.ID=+r.ID,i.WaveCount=+r.WaveCount,i.WaveKind0=+r.WaveKind0,i.WaveKind1=+r.WaveKind1,i.WaveKind2=+r.WaveKind2,i.WaveKind3=+r.WaveKind3,i.WaveKind4=+r.WaveKind4,this.Data.set(+r.ID,i),this.DataArray[a]=i,a++}},t.LoadFromMemoryPack=function(e){this.Data.clear();for(var t,r=0,i=a(e);!(t=i()).done;){var o=t.value,u=new n;u.ID=+o.ID,u.WaveCount=+o.WaveCount,u.WaveKind0=+o.WaveKind0,u.WaveKind1=+o.WaveKind1,u.WaveKind2=+o.WaveKind2,u.WaveKind3=+o.WaveKind3,u.WaveKind4=+o.WaveKind4,this.Data.set(+o.ID,u),this.DataArray[r]=u,r++}},e}());r=i,i.Instance=new r,t._RF.pop()}}}));

System.register("chunks:///_virtual/BonusFrequencyAttributeData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./BonusFrequencyAttribute.ts"],(function(e){var r,t,n,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){i=e.BonusFrequencyAttribute}],execute:function(){r._RF.push({},"7088b85pp5L+JoS0CcckIwF","BonusFrequencyAttributeData",void 0);e("BonusFrequencyAttributeData",function(){function e(){this.Data=void 0,this.DataTable=void 0,this.Data=null,this.DataTable=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeArray(r.Data,(function(e,r){return i.serializeCore(e,r)})),e.writeMap(r.DataTable,(function(e,r){return e.writeInt32(r)}),(function(e,r){return i.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),n=t[0],a=t[1];if(!n)return null;var u=new e;if(2==a)u.Data=r.readArray((function(e){return i.deserializeCore(e)})),u.DataTable=r.readMap((function(e){return e.readInt32()}),(function(e){return i.deserializeCore(e)}));else{if(a>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return u;if(u.Data=r.readArray((function(e){return i.deserializeCore(e)})),1==a)return u;if(u.DataTable=r.readMap((function(e){return e.readInt32()}),(function(e){return i.deserializeCore(e)})),2==a)return u}return u},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BonusWaveAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BonusWaveAttribute2.ts"],(function(e){var a,t,n;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},function(e){n=e.BonusWaveAttribute}],execute:function(){var s;t._RF.push({},"4c961xYbghP0o9NwZpZExVC","BonusWaveAttribute",void 0);var o=e("BonusWaveAttributeData",function(){function e(){this.Data=[],this.DataTable=new Map}return e.prototype.LoadFromJsonAsset=function(e){for(var t in this.Data.length=0,this.DataTable.clear(),e.Data){var s=e.Data[t];if(s.BonusWaveName.endsWith(".json")){var o=new n;o.ID=+s.ID,o.BonusWaveName=s.BonusWaveName,o.BGIndex=s.BGIndex,o.WaveKind=+s.WaveKind,this.Data.push(o);for(var i,r=o.BGIndex.split(","),u=a(r);!(i=u()).done;){var v=+i.value;this.DataTable.has(v)||this.DataTable.set(v,new Map),this.DataTable.get(v).has(o.WaveKind)||this.DataTable.get(v).set(o.WaveKind,[]),this.DataTable.get(v).get(o.WaveKind).push(o.BonusWaveName.split(".")[0])}}else console.error("WaveName invalid: "+s.BonusWaveName)}},e}());s=o,o.Instance=new s,t._RF.pop()}}}));

System.register("chunks:///_virtual/BonusWaveAttribute2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"c259cPwSCNBxJQhbcSt25qq","BonusWaveAttribute",void 0);e("BonusWaveAttribute",function(){function e(){this.ID=void 0,this.BonusWaveName=void 0,this.BGIndex=void 0,this.WaveKind=void 0,this.ID=0,this.BonusWaveName="",this.BGIndex="",this.WaveKind=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(4),e.writeInt32(r.ID),e.writeString(r.BonusWaveName),e.writeString(r.BGIndex),e.writeInt32(r.WaveKind)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(4==n)a.ID=r.readInt32(),a.BonusWaveName=r.readString(),a.BGIndex=r.readString(),a.WaveKind=r.readInt32();else{if(n>4)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.ID=r.readInt32(),1==n)return a;if(a.BonusWaveName=r.readString(),2==n)return a;if(a.BGIndex=r.readString(),3==n)return a;if(a.WaveKind=r.readInt32(),4==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BonusWaveFlag.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7ef99j+3JRHUL3wKpYTtMmp","BonusWaveFlag",void 0);e("BonusWaveFlag",{Middle:1,Gotcha:2,Weapon:4,GotchaLow:8,Boss:16});t._RF.pop()}}}));

System.register("chunks:///_virtual/Bot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoomController.ts","./DirectionHelper.ts","./BetChange.ts","./ControllerState.ts"],(function(t){var o,e,r,i,a,n,s,l,h,m,c,u,p,y;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose,n=t.createClass},function(t){s=t.cclegacy,l=t._decorator,h=t.Enum,m=t.Component},function(t){c=t.RoomController},function(t){u=t.DirectionHelper},function(t){p=t.BetChange},function(t){y=t.ControllerState}],execute:function(){var f,d,_,R,D,I,F,b,P;s._RF.push({},"07fa1BmbZZJtLBTqkfbPvhD","Bot",void 0);var g=l.ccclass,B=l.property,v=t("BotFireType",function(t){return t[t.Normal=0]="Normal",t[t.Lock=1]="Lock",t}({}));t("Bot",(f=g("Bot"),d=B(c),_=B({type:h(v)}),f((I=o((D=function(t){function o(){for(var o,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return o=t.call.apply(t,[this].concat(a))||this,r(o,"PrimaryRoom",I,i(o)),r(o,"PlayerID",F,i(o)),r(o,"Gold",b,i(o)),r(o,"FireType",P,i(o)),o._playerID=0,o._fortID=0,o._bet=0,o._targetFish=0,o._frameUpdate=void 0,o._joinRoom=void 0,o._exitRoom=void 0,o}e(o,t);var s=o.prototype;return s.onLoad=function(){this._playerID=this.PlayerID,this._frameUpdate=this.OnFrameUpdate.bind(this),this._joinRoom=this.OnJoinRoom.bind(this),this._exitRoom=this.OnExitRoom.bind(this)},s.onEnable=function(){this.PrimaryRoom.OnJoinRoom.add(this._joinRoom),this.PrimaryRoom.TryJoinRoom(this._playerID,this.Gold,0)||console.error("Bot: "+this.PlayerID+" join room failed.")},s.onDisable=function(){this.PrimaryRoom.ExitRoom(this._playerID)},s.OnJoinRoom=function(t,o){if(this._playerID==t.PlayerID){if(this._fortID<0)return void console.error("Bot: "+this.PlayerID+" join room failed");this._fortID=o,this.PrimaryRoom.OnFrameUpdate.add(this._frameUpdate),this.PrimaryRoom.OnExitRoom.add(this._exitRoom),this.PrimaryRoom.OnJoinRoom.remove(this._joinRoom),console.log("Bot: "+this.PlayerID+" join room, playerID: "+t.PlayerID+", fortID: "+o)}},s.OnExitRoom=function(t,o,e){this._playerID==t&&(this.PrimaryRoom.OnFrameUpdate.remove(this._frameUpdate),this.PrimaryRoom.OnExitRoom.remove(this._exitRoom),console.log("Bot: "+this.PlayerID+" exit room, playerID: "+t+", fortID: "+o))},s.OnFrameUpdate=function(t,o){var e=this,r=t.Info;switch(r.FortRequests[this._fortID]&&r.FortRequests[this._fortID].forEach((function(t){t instanceof p&&(e._bet=Number(t.Bet))})),null!=r.FortFireRequests[this._fortID]&&(this.Gold-=this.Bet),r.CatchResults.forEach((function(t){t.PlayerID==e._playerID&&(e.Gold+=Number(t.Score))})),this.FireType){case v.Normal:this.FireNormalBullet();break;case v.Lock:this.FireLockBullet()}},s.FireNormalBullet=function(){var t=Math.round(Math.random()*u.MaxDirection),o=Math.round(10*Math.random()+1);this.PrimaryRoom.ChangeBet(this._playerID,o),this.PrimaryRoom.FireNormalBullet(this._playerID,t)},s.FireLockBullet=function(){var t=this.PrimaryRoom.Room;0!=this._targetFish&&(null==t.FishMgr.GetSpawnedObject(this._targetFish)&&(this._targetFish=0));if(0==this._targetFish){for(var o,e=[],r=a(t.FishMgr.GetSpawnedObjects());!(o=r()).done;){var i=o.value;i.State==y.FixedUpdate&&e.push(i)}if(0==e.length)return;var n=Math.round(Math.random()*(e.length-1)),s=e[n];null!=s?this._targetFish=s.ID:console.error(e.length+", "+n)}var l=Math.round(10*Math.random()+1);this.PrimaryRoom.ChangeBet(this._playerID,l),this.PrimaryRoom.FireLockBullet(this._playerID,this._targetFish)},n(o,[{key:"Bet",get:function(){return this._bet}}]),o}(m)).prototype,"PrimaryRoom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=o(D.prototype,"PlayerID",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=o(D.prototype,"Gold",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o(D.prototype,"Bet",[B],Object.getOwnPropertyDescriptor(D.prototype,"Bet"),D.prototype),P=o(D.prototype,"FireType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Normal}}),R=D))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/BouncyBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialBullet.ts","./DirectionHelper.ts","./BulletParameter.ts","./Room.ts","./BulletPoolManager.ts","./CameraShakePlayer.ts"],(function(t){var i,e,o,n,s,r,a,u,c,l,h,p,f,y,d,B;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,a=t._decorator,u=t.Quat,c=t.macro,l=t.Vec3},function(t){h=t.SpecialBullet},function(t){p=t.DirectionHelper},function(t){f=t.BouncyBulletParameter},function(t){y=t.Room},function(t){d=t.BulletPoolManager},function(t){B=t.CameraShakePlayer}],execute:function(){var P,m,I,R,S,g,b,v,T,Y;r._RF.push({},"1cd90tzOrZLf6SXSo59xdYF","BouncyBullet",void 0);var D=a.ccclass,X=a.property;t("BouncyBullet",(P=D("BouncyBullet"),m=X(B),P(((Y=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,o(i,"cameraShakePlayer",S,n(i)),o(i,"time",g,n(i)),o(i,"posX",b,n(i)),o(i,"posY",v,n(i)),o(i,"dir",T,n(i)),i}e(i,t);var r=i.prototype;return r.initial=function(i,e){t.prototype.initial.call(this,i,e);var o=[this.BouncyInfo.PosX,this.BouncyInfo.PosY,this.BouncyInfo.Direction];this.posX=o[0],this.posY=o[1],this.dir=o[2],this.updatePose(this.posX,this.posY,this.dir)},r.release=function(i,e){var o=[this.BouncyInfo.PosX,this.BouncyInfo.PosY,this.BouncyInfo.Direction];this.posX=o[0],this.posY=o[1],this.dir=o[2],this.updatePose(this.posX,this.posY,this.dir),t.prototype.release.call(this,i,e)},r.reset=function(){this.time=0},r.doCast=function(){var t=d.instance().genCastNode(this.Bullet),i=this.genCastRTS(),e=i[0],o=i[1];t.node.setRTS(o,e)},r.doHit=function(){var t=d.instance().genHitNode(this.Bullet),i=this.genHitRTS(),e=i[0],o=i[1];t.node.setRTS(o,e)},r.doFinish=function(){var t=d.instance().genFinishNode(this.Bullet),i=this.genFinishRTS(),e=i[0],o=i[1];t.node.setRTS(o,e)},r.playShootAudio=function(t){this.ShootAudio&&(t?this.ShootAudio.play():this.ShootAudio.stop())},r.genCastRTS=function(){var t=this.calculatePose(this.BouncyInfo.PosX,this.BouncyInfo.PosY,this.BouncyInfo.Direction);return[t[0],t[1]]},r.genHitRTS=function(){var t=this.calculatePose(this.BouncyInfo.PosX,this.BouncyInfo.PosY,this.BouncyInfo.Direction),i=t[0],e=t[1];return[i,e=u.rotateZ(e,u.IDENTITY,360*Math.random()*c.RAD)]},r.genFinishRTS=function(){var t=this.calculatePose(this.BouncyInfo.PosX,this.BouncyInfo.PosY,this.BouncyInfo.Direction),i=t[0],e=t[1];return[i,e=u.rotateZ(e,u.IDENTITY,360*Math.random()*c.RAD)]},r.checkHitable=function(e,o){return t.prototype.checkHitable.call(this,e,o)&&o.Rank>=i.HitRank},r.onUpdate=function(e){t.prototype.onUpdate.call(this,e),this.time+=e;var o=function(){return this.posX==this.BouncyInfo.PosX&&this.posY==this.BouncyInfo.PosY}.bind(this)(),n=function(){return this.dir==this.BouncyInfo.Direction}.bind(this)();if(o&&n)this.time=Math.min(this.time,d.instance().FixedUpdateTime);else{var s=[this.BouncyInfo.PosX,this.BouncyInfo.PosY,this.BouncyInfo.Direction];this.posX=s[0],this.posY=s[1],this.dir=s[2],this.time%=d.instance().FixedUpdateTime}n||this.cameraShakePlayer.shakeCamera();var r=p.CalculatePose(this.posX,this.posY,this.dir,this.time,i.BulletSpeed,i.BulletRadius,i.RoomWidth,i.RoomHeight),a=r[0],u=r[1],c=r[2];this.updatePose(a,u,c)},r.updatePose=function(t,i,e){var o=this.calculatePose(t,i,e),n=o[0],s=o[1];this.node.setRTS(s,n)},r.calculatePose=function(t,i,e){var o=p.DirectionToVector(e),n=o[0],s=o[1],r=u.rotationTo(new u,l.UNIT_Y,new l(n,s,0));return[new l(t,i),r]},s(i,[{key:"BouncyInfo",get:function(){return this.Bullet.Info}},{key:"BouncyBulletable",get:function(){return this.Bulletable}}]),i}(h)).BulletSpeed=f.Speed,Y.BulletRadius=f.Radius,Y.HitRank=f.HitRank,Y.RoomWidth=y.Width,Y.RoomHeight=y.Height,S=i((R=Y).prototype,"cameraShakePlayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(R.prototype,"time",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=i(R.prototype,"posX",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=i(R.prototype,"posY",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=i(R.prototype,"dir",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=R))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/BouncyBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./IBulletSource.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.IBulletSource}],execute:function(){r._RF.push({},"dfe79ENDapCrbf1O6fvqP9/","BouncyBulletInfo",void 0);e("BouncyBulletInfo",function(){function e(){this.Source=void 0,this.Direction=void 0,this.PosX=void 0,this.PosY=void 0,this.MaxHitCount=void 0,this.RemainHitCount=void 0,this.Source=null,this.Direction=0,this.PosX=0,this.PosY=0,this.MaxHitCount=0,this.RemainHitCount=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),n.serializeCore(e,r.Source),e.writeInt32(r.Direction),e.writeFloat64(r.PosX),e.writeFloat64(r.PosY),e.writeUint32(r.MaxHitCount),e.writeUint32(r.RemainHitCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],o=t[1];if(!i)return null;var a=new e;if(6==o)a.Source=n.deserializeCore(r),a.Direction=r.readInt32(),a.PosX=r.readFloat64(),a.PosY=r.readFloat64(),a.MaxHitCount=r.readUint32(),a.RemainHitCount=r.readUint32();else{if(o>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Source=n.deserializeCore(r),1==o)return a;if(a.Direction=r.readInt32(),2==o)return a;if(a.PosX=r.readFloat64(),3==o)return a;if(a.PosY=r.readFloat64(),4==o)return a;if(a.MaxHitCount=r.readUint32(),5==o)return a;if(a.RemainHitCount=r.readUint32(),6==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BouncyCatchAudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CatchAudioController.ts"],(function(o){var t,r,n,c;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,n=o._decorator},function(o){c=o.CatchAudioController}],execute:function(){var e;r._RF.push({},"eb3d8OtMqdPhYWciJHDTENo","BouncyCatchAudioController",void 0);var u=n.ccclass;n.property,o("BouncyCatchAudioController",u("BouncyCatchAudioController")(e=function(o){function r(){return o.apply(this,arguments)||this}return t(r,o),r}(c))||e);r._RF.pop()}}}));

System.register("chunks:///_virtual/BouncyFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./SpecialFort.ts"],(function(t){var n,e,o,r,c,u;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy,r=t._decorator},function(t){c=t.BulletKind},function(t){u=t.SpecialFort}],execute:function(){var l;o._RF.push({},"8c193FJTBdPIZHEF8kUn1zO","BouncyFort",void 0);var i=r.ccclass;r.property,t("BouncyFort",i("BouncyFort")(l=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var r=o.prototype;return r.spawnBullet=function(n,e){t.prototype.spawnBullet.call(this,n,e);var o=n.Info;this.setAnchorAngle(o.Direction)},r.despawnBullet=function(n,e){t.prototype.despawnBullet.call(this,n,e)},r.set=function(){t.prototype.set.call(this)},r.reset=function(){t.prototype.reset.call(this)},e(o,[{key:"BulletKind",get:function(){return c.Bouncy}},{key:"BulletAnchor",get:function(){return this.node}}]),o}(u))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/BouncyShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialShoot.ts","./PlayerFortManager.ts","./BulletKind.ts","./ClientAgent.ts","./Vector2.ts","./DirectionHelper.ts"],(function(t){var o,n,i,e,r,u,c,l,s,a,h,f,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized,r=t.createClass},function(t){u=t.cclegacy,c=t._decorator},function(t){l=t.SpecialShoot},function(t){s=t.PlayerFortManager},function(t){a=t.BulletKind},function(t){h=t.ClientAgent},function(t){f=t.Vector2},function(t){p=t.DirectionHelper}],execute:function(){var S,y,d;u._RF.push({},"5599drdo1pGorzJWVJtA51f","BouncyShoot",void 0);var A=c.ccclass,g=c.property;t("BouncyShoot",A("BouncyShoot")((d=o((y=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return o=t.call.apply(t,[this].concat(r))||this,i(o,"rotateAngleLimit",d,e(o)),o.IsCountDownFinish=void 0,o.IsAutoShootMode=void 0,o.AutoShootInfo=void 0,o.HoldingSpecialBulletInfo=void 0,o.AutoShootCount=void 0,o}n(o,t);var u=o.prototype;return u.set=function(){},u.reset=function(){},u.initAutoShoot=function(){this.AutoShootCount=0,this.AutoShootInfo=null},u.startAutoShoot=function(){this.tryShoot()},u.updateAutoShoot=function(){},u.stopAutoShoot=function(){this.AutoShootCount=0},u.runShoot=function(){var t=s.instance().MainPlayerFort.UsedBulletFort,o=t.BulletKind,n=this.transToShootDirection(this.IsCountDownFinish?this.CenterPoint:this.ShootPoint),i=new f;i.X=t.BulletAnchor.position.x,i.Y=t.BulletAnchor.position.y,h.Instance.FireSpecialBullet(i,n,o),this.IsCountDownFinish=!1},r(o,[{key:"BulletKind",get:function(){return a.Bouncy}},{key:"RotateDirectionLimit",get:function(){return this.rotateAngleLimit/p.DegreePerDirection}}]),o}(l)).prototype,"rotateAngleLimit",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),S=y))||S);u._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletInfo.ts"],(function(t){var n,e,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){l=t.BulletInfo}],execute:function(){e._RF.push({},"775d01X36NGoLC7B8DwJ1bV","Bullet",void 0);t("Bullet",function(t){function e(){for(var n,e=arguments.length,l=new Array(e),u=0;u<e;u++)l[u]=arguments[u];return(n=t.call.apply(t,[this].concat(l))||this).CatchInfo=null,n}return n(e,t),e}(l));e._RF.pop()}}}));

System.register("chunks:///_virtual/BulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./IBulletInfo.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.IBulletInfo}],execute:function(){r._RF.push({},"0e6b1jrGilCy4+1WWBwKfrN","BulletInfo",void 0);e("BulletInfo",function(){function e(){this.SerialNumber=void 0,this.Info=void 0,this.PlayerID=void 0,this.FortID=void 0,this.Bet=void 0,this.BulletKind=void 0,this.SerialNumber=0,this.Info=null,this.PlayerID=0,this.FortID=0,this.Bet=0,this.BulletKind=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeUint32(r.SerialNumber),n.serializeCore(e,r.Info),e.writeUint32(r.PlayerID),e.writeUint32(r.FortID),e.writeFloat64(r.Bet),e.writeInt32(r.BulletKind)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],a=t[1];if(!i)return null;var o=new e;if(6==a)o.SerialNumber=r.readUint32(),o.Info=n.deserializeCore(r),o.PlayerID=r.readUint32(),o.FortID=r.readUint32(),o.Bet=r.readFloat64(),o.BulletKind=r.readInt32();else{if(a>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.SerialNumber=r.readUint32(),1==a)return o;if(o.Info=n.deserializeCore(r),2==a)return o;if(o.PlayerID=r.readUint32(),3==a)return o;if(o.FortID=r.readUint32(),4==a)return o;if(o.Bet=r.readFloat64(),5==a)return o;if(o.BulletKind=r.readInt32(),6==a)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BulletInfoPool.ts",["cc","./BulletKind.ts","./Queue.ts","./BulletKindHelper.ts"],(function(e){var t,n,o,l;return{setters:[function(e){t=e.cclegacy},function(e){n=e.BulletKind},function(e){o=e.Queue},function(e){l=e.BulletKindHelper}],execute:function(){t._RF.push({},"08027Mi/0JCC7qFSWbP7sqd","BulletInfoPool",void 0);e("BulletInfoPool",function(){function e(){this._poolMaps=new Map,this._creatorMaps=new Map,this._checkHandleMap=new Map,this._spawnHandleMap=new Map,this._copyHandleMap=new Map}var t=e.prototype;return t.Get=function(e){var t=this.GetPool(e);return t.size()>0?t.dequeue():new(this._creatorMaps.get(e))},t.CheckBulletFireable=function(e,t){var o=l.BulletKindOfFortFireInfo(t);return o==n.None?(console.error("[BulletInfoPool:CheckBulletFireable] FortFireInfo type error!"),!1):this._checkHandleMap.get(o)(e,t)},t.SpawnBulletInfo=function(e,t){var o=l.BulletKindOfFortFireInfo(t);if(o!=n.None){var r=this.Get(o);return this._spawnHandleMap.get(o)(r,e,t),r}console.error("[BulletInfoPool:SpawnBulletInfo] FortFireInfo type error!")},t.FetchAndCopyBulletInfo=function(e){var t=l.BulletKindOfBulletInfo(e);if(t!=n.None){var o=this.Get(t);return this._copyHandleMap.get(t)(o,e),o}console.error("[BulletInfoPool:FetchAndCopyBulletInfo] BulletInfo kind error!")},t.Register=function(e,t,n,o,l){this._creatorMaps.set(o,l),this._checkHandleMap.set(o,(function(t,n){return e(t,n)})),this._spawnHandleMap.set(o,(function(e,n,o){t(e,n,o)})),this._copyHandleMap.set(o,(function(e,t){n(e,t)})),this.GetPool(o)},t.Return=function(e){var t=l.BulletKindOfBulletInfo(e);t!=n.None?this.GetPool(t).enqueue(e):console.error("[BulletInfoPool:Return] BulletInfo kind error!")},t.GetPool=function(e){return this._poolMaps.has(e)||this._poolMaps.set(e,new o),this._poolMaps.get(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BulletKind.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"5cc9dopHuJBX7M2lsdsuo+6","BulletKind",void 0);e("BulletKind",{None:-1,Normal:0,Lock:1,Trace:2,Through:10,Meteor:11,Missile:12,Bouncy:13});c._RF.pop()}}}));

System.register("chunks:///_virtual/BulletKindHelper.ts",["cc","./BulletKind.ts","./FireNormal.ts","./FireLock.ts","./FireThrough.ts","./FireMeteor.ts","./FireMissile.ts","./FireBouncy.ts","./NormalBulletInfo.ts","./LockBulletInfo.ts","./ThroughBulletInfo.ts","./MeteorBulletInfo.ts","./MissileBulletInfo.ts","./BouncyBulletInfo.ts"],(function(e){var n,t,o,i,u,c,l,r,s,f,a,B,h,M;return{setters:[function(e){n=e.cclegacy},function(e){t=e.BulletKind},function(e){o=e.FireNormal},function(e){i=e.FireLock},function(e){u=e.FireThrough},function(e){c=e.FireMeteor},function(e){l=e.FireMissile},function(e){r=e.FireBouncy},function(e){s=e.NormalBulletInfo},function(e){f=e.LockBulletInfo},function(e){a=e.ThroughBulletInfo},function(e){B=e.MeteorBulletInfo},function(e){h=e.MissileBulletInfo},function(e){M=e.BouncyBulletInfo}],execute:function(){n._RF.push({},"6c7d2bvADxPKZDsxnpoPL9m","BulletKindHelper",void 0);var F=e("BulletKindHelper",function(){function e(){}return e.BulletKindOfFortFireInfo=function(e){return e instanceof o?t.Normal:e instanceof i?t.Lock:e instanceof i?t.Trace:e instanceof u?t.Through:e instanceof c?t.Meteor:e instanceof l?t.Missile:e instanceof r?t.Bouncy:t.None},e.BulletKindOfBulletInfo=function(e){return e instanceof s?t.Normal:e instanceof f?t.Lock:e instanceof a?t.Through:e instanceof B?t.Meteor:e instanceof h?t.Missile:e instanceof M?t.Bouncy:t.None},e.IsMultipleBulletKind=function(e){switch(e){case t.Normal:case t.Missile:case t.Meteor:return!0;case t.Lock:case t.Bouncy:case t.Through:default:return!1}},e.IsSpriteFinishAnimBulletKind=function(e){switch(e){case t.Normal:case t.Lock:case t.Trace:case t.Through:case t.Bouncy:return!1;case t.Meteor:case t.Missile:return!0;default:return!1}},e}());F.Count=6,F.CountIndexAndBulletKindMap=new Map([[0,t.Normal],[1,t.Lock],[6,t.Trace],[2,t.Through],[3,t.Meteor],[4,t.Missile],[5,t.Bouncy]]),n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./NormalBulletInfo.ts","./LockBulletInfo.ts","./ThroughBulletInfo.ts","./MeteorBulletInfo.ts","./MissileBulletInfo.ts","./BouncyBulletInfo.ts","./Bullet.ts","./BulletInfoPool.ts","./Action2.ts","./DirectionHelper.ts","./Fort.ts","./KindHelper.ts","./ObjectPool.ts"],(function(e){var t,n,l,o,i,u,r,s,c,a,f,B,I,h,p,d,P,b;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,l=e.assertThisInitialized},function(e){o=e.cclegacy},function(e){i=e.BulletKind},function(e){u=e.NormalBulletInfo},function(e){r=e.LockBulletInfo},function(e){s=e.ThroughBulletInfo},function(e){c=e.MeteorBulletInfo},function(e){a=e.MissileBulletInfo},function(e){f=e.BouncyBulletInfo},function(e){B=e.Bullet},function(e){I=e.BulletInfoPool},function(e){h=e.ActionWithOne},function(e){p=e.DirectionHelper},function(e){d=e.Fort},function(e){P=e.KindHelper},function(e){b=e.ObjectPool}],execute:function(){o._RF.push({},"832dbFvHNZGsY+FPJ+WTXTc","BulletManager",void 0);e("BulletManager",function(e){function o(){var t;return(t=e.call(this)||this)._checkFirers=new Map,t._bulletFirers=new Map,t._bulletUpdaters=new Map,t._waitForDespawn=[],t._bulletInfoPool=new I,t.OnSpawnBullet=new h,t.OnDespawnBullet=new h,t._bulletInfoPool.Register(t.checkNormalBulletFire.bind(l(t)),t.spawnNormalBulletInfo.bind(l(t)),t.copyNormalBulletInfo.bind(l(t)),i.Normal,u),t._bulletInfoPool.Register(t.checkLockBulletFire.bind(l(t)),t.spawnLockBulletInfo.bind(l(t)),t.copyLockBulletInfo.bind(l(t)),i.Lock,r),t._bulletInfoPool.Register(t.checkThroughBulletFire.bind(l(t)),t.spawnThroughBulletInfo.bind(l(t)),t.copyThroughBulletInfo.bind(l(t)),i.Through,s),t._bulletInfoPool.Register(t.checkMeteorBulletFire.bind(l(t)),t.spawnMeteorBulletInfo.bind(l(t)),t.copyMeteorBulletInfo.bind(l(t)),i.Meteor,c),t._bulletInfoPool.Register(t.checkMissileBulletFire.bind(l(t)),t.spawnMissileBulletInfo.bind(l(t)),t.copyMissileBulletInfo.bind(l(t)),i.Missile,a),t._bulletInfoPool.Register(t.checkBouncyBulletFire.bind(l(t)),t.spawnBouncyBulletInfo.bind(l(t)),t.copyBouncyBulletInfo.bind(l(t)),i.Bouncy,f),t}t(o,e);var b=o.prototype;return b.trySpawn=function(e,t){var n=null;if(this.CheckBulletFireable(e,t)){var l=P.FortFireInfoToBulletKind(t);if(P.IsSpecialBullet(l))if(null==e.CurrentSpecialBulletInfo){var o=e.TryPeekHoldingSpecialBulletInfo();if(o.Success){var u=o.Info;if(l==u.BulletKind){e.CurrentSpecialBulletInfo=u,e.RemoveHoldingSpecialBulletInfo(),n=this.Get();var r=this._bulletInfoPool.SpawnBulletInfo(e,t);this.spawnBullet(n,r,e.PlayerID,e.ID,u.Bet,u.BulletKind)}else console.warn("Fort: "+e.ID+" bulletKind not match! BulletKind: "+l+"/"+u.BulletKind+".")}}else{var s=e.CurrentSpecialBulletInfo;switch(s.BulletKind){case i.Meteor:case i.Missile:if(s.RemainHitCount>0){n=this.Get();var c=this._bulletInfoPool.SpawnBulletInfo(e,t);this.spawnBullet(n,c,e.PlayerID,e.ID,s.Bet,s.BulletKind)}break;default:console.warn("Spawn bullet failed, bullet kind: "+s.BulletKind+" ")}}else if(e.TryPlaceBet()){n=this.Get();var a=this._bulletInfoPool.SpawnBulletInfo(e,t);this.spawnBullet(n,a,e.PlayerID,e.ID,e.Bet,l)}else console.warn("Fort: "+e.ID+" try place bet failed! Coin: "+e.Coin.toPerformValue()+", Bet: "+e.Bet.toPerformValue()+".");null!=n&&null!=n.Info&&this._bulletFirers.get(n.BulletKind)(n)}return{bulletExist:null!=n,bullet:n}},b.despawn=function(e){this._waitForDespawn.push(e)},b.fixedUpdate=function(){for(var e,t=n(this.GetSpawnedObjects());!(e=t()).done;){var l=e.value;null!=l&&null!=l.Info&&this._bulletUpdaters.get(l.BulletKind)(l)}for(var o,i=n(this._waitForDespawn);!(o=i()).done;){var u=o.value;this._bulletInfoPool.Return(u.Info),this.despawnBullet(u)}this._waitForDespawn=[]},b.registerBulletHandler=function(e,t,n,l){this._checkFirers.set(e,t),this._bulletFirers.set(e,n),this._bulletUpdaters.set(e,l)},b.reset=function(e,t){for(var l,o=n(this.GetSpawnedObjects());!(l=o()).done;){var i=l.value;this._bulletInfoPool.Return(i.Info)}this.Clear();for(var u,r=n(t);!(u=r()).done;){var s=u.value,c=this.Get(s.SerialNumber),a=this._bulletInfoPool.FetchAndCopyBulletInfo(s.Info);this.spawnBullet(c,a,s.PlayerID,s.FortID,s.Bet,s.BulletKind)}this.SerialNumber=e},b.GetAllBulletInfo=function(e){e.push.apply(e,this.GetSpawnedObjects())},b.CheckBulletFireable=function(e,t){return null!=t&&this._checkFirers.get(P.FortFireInfoToBulletKind(t))(e,t)&&this._bulletInfoPool.CheckBulletFireable(e,t)},b.CheckBulletCatchExist=function(e,t){for(var l,o=n(this.GetSpawnedObjects());!(l=o()).done;){var i=l.value;if(null!=i.CatchInfo&&i.CatchInfo.FortID!=e&&i.CatchInfo.FishID==t&&i.CatchInfo.IsCatch)return!0}return!1},b.NewObecject=function(){return new B},b.spawnBullet=function(e,t,n,l,o,i){var u;e.Info=t,e.PlayerID=n,e.FortID=l,e.Bet=o,e.BulletKind=i,e.CatchInfo=null,null==(u=this.OnSpawnBullet)||u.invoke(e)},b.despawnBullet=function(e){var t;null==(t=this.OnDespawnBullet)||t.invoke(e),e.PlayerID=0,e.FortID=0,e.Bet=0,e.Info=null,e.BulletKind=i.None,e.CatchInfo=null,this.Return(e)},b.checkNormalBulletFire=function(e,t){return e.IsInUse},b.checkLockBulletFire=function(e,t){return e.IsInUse&&!this.CheckBulletCatchExist(e.ID,t.FishID)},b.checkThroughBulletFire=function(e,t){return e.IsInUse},b.checkMeteorBulletFire=function(e,t){return e.IsInUse},b.checkMissileBulletFire=function(e,t){return e.IsInUse},b.checkBouncyBulletFire=function(e,t){return e.IsInUse},b.spawnNormalBulletInfo=function(e,t,n){var l=p.DirectionToVector(n.Direction),o=l[0],i=l[1];e.Direction=n.Direction,e.PosX=t.PoxX+d.Length*o,e.PosY=t.PoxY+d.Length*i},b.spawnLockBulletInfo=function(e,t,n){e.FishID=n.FishID},b.spawnThroughBulletInfo=function(e,t,n){var l=p.DirectionToVector(n.Direction),o=l[0],i=l[1];e.Source=t.CurrentSpecialBulletInfo,e.Direction=n.Direction,e.PosX=t.PoxX+d.Length*o,e.PosY=t.PoxY+d.Length*i},b.spawnMeteorBulletInfo=function(e,t,n){e.Source=t.CurrentSpecialBulletInfo,e.Direction=n.Direction,e.PosX=n.Position.X,e.PosY=n.Position.Y,e.CurrentFixedUpdateCount=0},b.spawnMissileBulletInfo=function(e,t,n){e.Source=t.CurrentSpecialBulletInfo,e.Direction=n.Direction,e.PosX=n.Position.X,e.PosY=n.Position.Y,e.CurrentFixedUpdateCount=0},b.spawnBouncyBulletInfo=function(e,t,n){var l=p.DirectionToVector(n.Direction),o=l[0],i=l[1];e.Source=t.CurrentSpecialBulletInfo,e.Direction=n.Direction,e.PosX=t.PoxX+d.Length*o,e.PosY=t.PoxY+d.Length*i},b.copyNormalBulletInfo=function(e,t){e.Direction=t.Direction,e.PosX=t.PosX,e.PosY=t.PosY},b.copyLockBulletInfo=function(e,t){e.FishID=t.FishID},b.copyThroughBulletInfo=function(e,t){e.Source=t.Source,e.Direction=t.Direction,e.PosX=t.PosX,e.PosY=t.PosY},b.copyMeteorBulletInfo=function(e,t){e.Source=t.Source,e.Direction=t.Direction,e.PosX=t.PosX,e.PosY=t.PosY,e.CurrentFixedUpdateCount=t.CurrentFixedUpdateCount},b.copyMissileBulletInfo=function(e,t){e.Source=t.Source,e.Direction=t.Direction,e.PosX=t.PosX,e.PosY=t.PosY,e.CurrentFixedUpdateCount=t.CurrentFixedUpdateCount},b.copyBouncyBulletInfo=function(e,t){e.Source=t.Source,e.Direction=t.Direction,e.PosX=t.PosX,e.PosY=t.PosY},o}(b));o._RF.pop()}}}));

System.register("chunks:///_virtual/BulletParameter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a;return{setters:[function(e){t=e.createClass,r=e.inheritsLoose},function(e){a=e.cclegacy}],execute:function(){var i,u,n,d,s;a._RF.push({},"bc436GpKwlFyIgoxzNNXBwp","BulletParameter",void 0);var l=e("BulletParameter",function(){function e(){}return t(e,null,[{key:"Speed",get:function(){return this._speed}},{key:"Radius",get:function(){return this._radius}},{key:"RadiusSqrt",get:function(){return this._radiusSqrt}}]),e}());l._speed=1,l._radius=1,l._radiusSqrt=1;var _=e("NormalBulletParameter",function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t}(l));(i=_)._speed=1200,i._radius=15,i._radiusSqrt=i._radius*i._radius;var p=e("ThroughBulletParameter",function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t}(l));(u=p)._speed=1200,u._radius=25,u._radiusSqrt=u._radius*u._radius;var o=e("BouncyBulletParameter",function(e){function a(){return e.apply(this,arguments)||this}return r(a,e),t(a,null,[{key:"HitRank",get:function(){return this._hitRank}}]),a}(l));n=o,o._hitRank=1,n._speed=1200,n._radius=25,n._radiusSqrt=n._radius*n._radius,n._hitRank=2;var c=e("MissileBulletParameter",function(e){function a(){return e.apply(this,arguments)||this}return r(a,e),t(a,null,[{key:"DelayMaxFixedUpdate",get:function(){return this._delayMaxFixedUpdate}},{key:"MaxHitPerFixedUpdate",get:function(){return this._maxHitPerFixUpdate}}]),a}(l));d=c,c._delayMaxFixedUpdate=20,c._maxHitPerFixUpdate=5,d._speed=1200,d._radius=80,d._delayMaxFixedUpdate=20,d._maxHitPerFixUpdate=5;var x=e("MeteorBulletParameter",function(e){function a(){return e.apply(this,arguments)||this}return r(a,e),t(a,null,[{key:"DelayMaxFixedUpdate",get:function(){return this._delayMaxFixedUpdate}},{key:"MaxHitPerFixedUpdate",get:function(){return this._maxHitPerFixUpdate}}]),a}(l));s=x,x._delayMaxFixedUpdate=4,x._maxHitPerFixUpdate=5,s._speed=1200,s._radius=80,s._delayMaxFixedUpdate=4,s._maxHitPerFixUpdate=5,a._RF.pop()}}}));

System.register("chunks:///_virtual/BulletPoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./FSUIManager.ts","./BulletPoolNode.ts","./PlayerFortManager.ts","./MessageManager.ts","./MessageCmd.ts","./SpriteAnimationNode.ts","./Pool.ts","./MatchPool.ts","./MapPool.ts","./FxNode.ts","./BulletKindHelper.ts"],(function(t){var e,o,n,i,l,r,a,s,u,c,h,P,f,p,g,d,b,m,M,w,B,y,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,l=t.createClass},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,u=t.Quat,c=t.Vec3},function(t){h=t.SingletonComponent},function(t){P=t.FSUIManager},function(t){f=t.BulletPoolNode},function(t){p=t.PlayerFortManager},function(t){g=t.MessageManager},function(t){d=t.MessageCmd},function(t){b=t.SpriteAnimationNode},function(t){m=t.Pool,M=t.PoolInstance},function(t){w=t.MatchPool},function(t){B=t.MapPoolInstance},function(t){y=t.FxNode},function(t){_=t.BulletKindHelper}],execute:function(){var F,N,R,v,A,C,S,z,I,D,T,x,K,H,O,U,L,j,V,k,W,E,G,Q,X,q,J,Y,Z,$,tt;r._RF.push({},"0a3a3OCXjlDp5vts9D4kyiO","BulletPoolManager",void 0);var et=a.ccclass,ot=a.property;t("BulletPoolManager",(F=et("BulletPoolManager"),N=ot(s),R=ot(s),v=ot(s),A=ot(s),C=ot(s),S=ot([m]),z=ot([m]),I=ot([m]),D=ot([m]),T=ot([m]),x=ot([m]),K=ot([m]),H=ot([m]),O=ot(m),F((j=e((L=function(t){function e(){for(var e,o=arguments.length,l=new Array(o),r=0;r<o;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,n(e,"bulletPoolRoot",j,i(e)),n(e,"castPoolRoot",V,i(e)),n(e,"hitPoolRoot",k,i(e)),n(e,"finishPoolRoot",W,i(e)),n(e,"netPoolRoot",E,i(e)),n(e,"mainBulletPools",G,i(e)),n(e,"mainCastPools",Q,i(e)),n(e,"mainHitPools",X,i(e)),n(e,"mainFinishPools",q,i(e)),n(e,"minorBulletPools",J,i(e)),n(e,"minorCastPools",Y,i(e)),n(e,"minorHitPools",Z,i(e)),n(e,"minorFinishPools",$,i(e)),n(e,"netRool",tt,i(e)),e._spawnedBullet=new Map,e._bulletMatchPool=new Map,e._castMatchPool=new Map,e._hitMatchPool=new Map,e._finishMatchPool=new Map,e._netPool=null,e._fixedUpdateTime=0,e}o(e,t);var r=e.prototype;return r.initial=function(t){this._fixedUpdateTime=t},r.release=function(){this._fixedUpdateTime=0},r.reset=function(){var t=P.PoolCenter.negative(),e=u.fromAxisAngle(new u,c.FORWARD,0);this.bulletPoolRoot.setRTS(e,t),this.castPoolRoot.setRTS(e,t),this.hitPoolRoot.setRTS(e,t),this.finishPoolRoot.setRTS(e,t),this.netPoolRoot.setRTS(e,t);for(var o=this.PlayerFortManager.MainPlayerFort,n=0;n<_.Count;n++){var i=_.CountIndexAndBulletKindMap.get(n),l=o.getBulletFort(i);this._bulletMatchPool.get(i).MatchValue=l,this._castMatchPool.get(i).MatchValue=l,this._hitMatchPool.get(i).MatchValue=l,this._finishMatchPool.get(i).MatchValue=l}},r.findBulletFort=function(t,e){return this.PlayerFortManager.getPlayerFort(t).getBulletFort(e)},r.hasBulletNode=function(t){return this._spawnedBullet.has(t)},r.getBulletNode=function(t){return this._spawnedBullet.get(t)},r.genBulletNode=function(t){var e=t.BulletKind,o=this.findBulletFort(t.FortID,e);return this._bulletMatchPool.get(e).getObject(o)},r.genCastNode=function(t){var e=t.BulletKind,o=this.findBulletFort(t.FortID,e);return this._castMatchPool.get(e).getObject(o)},r.genHitNode=function(t){var e=t.BulletKind,o=this.findBulletFort(t.FortID,e);return this._hitMatchPool.get(e).getObject(o)},r.genFinishNode=function(t){var e=t.BulletKind,o=this.findBulletFort(t.FortID,e);return this._finishMatchPool.get(e).getObject(o)},r.spawnBullet=function(t){var e=this.genBulletNode(t);return this._spawnedBullet.set(t.SerialNumber,e),e.initial(t),g.Instance.emit(d.ON_SPAWN_BULLET,t,e),e},r.despawnBullet=function(t){var e=this.getBulletNode(t.SerialNumber);g.Instance.emit(d.ON_DESPAWN_BULLET,t,e),e.release(t),this._spawnedBullet.delete(t.SerialNumber)},r.spawnNet=function(t,e){var o=this._netPool.GetObject();return e?o.node.setPosition(t):o.node.setWorldPosition(t),o},r.onLoad=function(){t.prototype.onLoad.call(this);for(var e=0;e<_.Count;e++){var o=_.CountIndexAndBulletKindMap.get(e),n=this.mainBulletPools[e].NewPool(f,_.IsMultipleBulletKind(o)?M:B),i=this.minorBulletPools[e].NewPool(f,_.IsMultipleBulletKind(o)?M:B),l=new w(n,i);this._bulletMatchPool.set(o,l);var r=this.mainCastPools[e].NewPool(b,M),a=this.minorCastPools[e].NewPool(b,M),s=new w(r,a);this._castMatchPool.set(o,s);var u=this.mainHitPools[e].NewPool(b,M),c=this.minorHitPools[e].NewPool(b,M),h=new w(u,c);if(this._hitMatchPool.set(o,h),_.IsSpriteFinishAnimBulletKind(o)){var P=this.mainFinishPools[e].NewPool(b,M),p=this.minorFinishPools[e].NewPool(b,M),g=new w(P,p);this._finishMatchPool.set(o,g)}else{var d=this.mainFinishPools[e].NewPool(y,M),m=this.minorFinishPools[e].NewPool(y,M),F=new w(d,m);this._finishMatchPool.set(o,F)}}this._netPool=this.netRool.NewPool(b,M)},r.onDestroy=function(){this._netPool=null,this._finishMatchPool.clear(),this._hitMatchPool.clear(),this._castMatchPool.clear(),this._bulletMatchPool.clear(),t.prototype.onDestroy.call(this)},l(e,[{key:"PlayerFortManager",get:function(){return p.instance()}},{key:"FixedUpdateTime",get:function(){return this._fixedUpdateTime}}]),e}(h)).prototype,"bulletPoolRoot",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(L.prototype,"castPoolRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(L.prototype,"hitPoolRoot",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(L.prototype,"finishPoolRoot",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(L.prototype,"netPoolRoot",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(L.prototype,"mainBulletPools",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),Q=e(L.prototype,"mainCastPools",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),X=e(L.prototype,"mainHitPools",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),q=e(L.prototype,"mainFinishPools",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),J=e(L.prototype,"minorBulletPools",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),Y=e(L.prototype,"minorCastPools",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),Z=e(L.prototype,"minorHitPools",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),$=e(L.prototype,"minorFinishPools",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),tt=e(L.prototype,"netRool",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=L))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/BulletPoolNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseBullet.ts","./MapPool.ts","./BulletPoolManager.ts"],(function(e){var t,l,i,n,o,u,r,a,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){u=e.cclegacy,r=e._decorator},function(e){a=e.BaseBullet},function(e){s=e.MapPoolNode},function(e){c=e.BulletPoolManager}],execute:function(){var f,p,h,B,d;u._RF.push({},"67eed+ljjpCkJaIPYZyJmkF","BulletPoolNode",void 0);var y=r.ccclass,P=r.property;e("BulletPoolNode",(f=y("BulletPoolNode"),p=P(a),f((d=t((B=function(e){function t(){for(var t,l=arguments.length,o=new Array(l),u=0;u<l;u++)o[u]=arguments[u];return(t=e.call.apply(e,[this].concat(o))||this).MapKey=null,i(t,"bullet",d,n(t)),t}l(t,e);var u=t.prototype;return u.initial=function(e){this.Bullet.initial(e,this.findBulletable(e)),this.Bullet.doCast()},u.release=function(e){this.Bullet.doFinish(),this.Bullet.release(e,this.findBulletable(e))},u.update=function(e){this.Bullet.IsReady||(this.Bullet.reset(),this.pushToPool(this))},u.findBulletable=function(e){return this.MapKey=c.instance().findBulletFort(e.FortID,e.BulletKind)},o(t,[{key:"Bullet",get:function(){return this.bullet}},{key:"isAvailable",get:function(){return!this.node.active},set:function(e){this.node.active=!e}}]),t}(s)).prototype,"bullet",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=B))||h));u._RF.pop()}}}));

System.register("chunks:///_virtual/BundleLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PrefabData.ts","./FishAttribute2.ts","./BackgroundSettingAttribute.ts","./FlyPathSizeSettingAttribute.ts","./SingletonComponent.ts"],(function(t){var e,a,i,n,o,r,l,u,s,c,d,h,f,b,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.CCInteger,u=t.assetManager,s=t.resources,c=t.director},function(t){d=t.FishPrefabData},function(t){h=t.FishAttributeData},function(t){f=t.BackgroundSettingAttributeData},function(t){b=t.FlyPathSizeSettingAttributeData},function(t){p=t.SingletonComponent}],execute:function(){var g,F,P,D,S,A,L,y,m,v,z,C;o._RF.push({},"8b768PqXUpB15qMvMVifP6w","BundleLoader",void 0);var _=r.ccclass,B=r.property;t("BundleLoader",(g=_("BundleLoader"),F=B([l]),g(((C=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"fishAttrFilePath",S,n(e)),i(e,"backgroundSettingAttrFilePath",A,n(e)),i(e,"flyPathSizeSettingAttrFilePath",L,n(e)),i(e,"loadResourcesDir",y,n(e)),i(e,"waveFilePath",m,n(e)),i(e,"mainSceneName",v,n(e)),i(e,"preloadFishes",z,n(e)),e._totalLoadCount=6,e._curLoadedCount=0,e}a(e,t);var o=e.prototype;return o.start=function(){this.loadDir=this.loadDir.bind(this),this.loadBundle()},o.update=function(t){this._curLoadedCount>=this._totalLoadCount&&(e.IsBundleLoadedFinish=!0,this._curLoadedCount=0)},o.loadBundle=function(){var t=this;u.loadBundle("resources",(function(e,a){t.loadDir()}))},o.loadDir=function(){this.loadAttrDatas(),this.loadPreloadResources(),this.loadMainScene()},o.loadAttrDatas=function(){var t=this;s.load(this.fishAttrFilePath,(function(e,a){e?console.error("load AttrDatas fail "+e):h.Instance.LoadFromJsonAsset(a.json),t.loadFishPrefabs(),t._curLoadedCount++})),s.load(this.backgroundSettingAttrFilePath,(function(e,a){e?console.error("load AttrDatas fail "+e):f.Instance.LoadFromJsonAsset(a.json),t._curLoadedCount++})),s.load(this.flyPathSizeSettingAttrFilePath,(function(e,a){e?console.error("load AttrDatas fail "+e):b.Instance.LoadFromJsonAsset(a.json),t._curLoadedCount++}))},o.loadPreloadResources=function(){var t=this;s.loadDir(this.loadResourcesDir,(function(){t._curLoadedCount++}))},o.loadMainScene=function(){var t=this;c.preloadScene(this.mainSceneName,(function(){t._curLoadedCount++}))},o.loadFishPrefabs=function(){d.Instance.LoadPrefabs(this.preloadFishes).catch((function(t){console.warn("load Fish Prefabs fail "+t)})),this._curLoadedCount++},e}(p)).IsBundleLoadedFinish=!1,S=e((D=C).prototype,"fishAttrFilePath",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Data/FishAttributeData"}}),A=e(D.prototype,"backgroundSettingAttrFilePath",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Data/BackgroungSetting"}}),L=e(D.prototype,"flyPathSizeSettingAttrFilePath",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Data/FlyPathSizeSetting"}}),y=e(D.prototype,"loadResourcesDir",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"preload"}}),m=e(D.prototype,"waveFilePath",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Data/WaveData"}}),v=e(D.prototype,"mainSceneName",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"MainFish"}}),z=e(D.prototype,"preloadFishes",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=D))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonControll.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,r,e,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,e=t.Button,u=t.Component}],execute:function(){var l;o._RF.push({},"e8abcv/krZKqbbgBYVxTo2+","ButtonControll",void 0);var c=r.ccclass;r.property,t("ButtonControll",c("ButtonControll")(l=function(t){function o(){for(var n,o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];return(n=t.call.apply(t,[this].concat(r))||this)._button=null,n}n(o,t);var r=o.prototype;return r.setEnable=function(t,n){if(null!=this._button){var o=JSON.parse(n);this._button.enabled=o}},r.onLoad=function(){this._button=this.getComponent(e)},o}(u))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./Room.ts","./MessageManager.ts","./MessageCmd.ts"],(function(e){var a,t,n,r,i,o,s,c,m,u,h,l,C,f,p,d;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){o=e.cclegacy,s=e._decorator,c=e.Camera,m=e.Quat,u=e.macro,h=e.DynamicAtlasManager,l=e.Vec3},function(e){C=e.SingletonComponent},function(e){f=e.Room},function(e){p=e.MessageManager},function(e){d=e.MessageCmd}],execute:function(){var g,y,v,A,I,w;o._RF.push({},"90326yDrwVHbpPtOjCmSPW+","CameraManager",void 0);var M=s.ccclass,b=s.property,F=e("CameraType",function(e){return e[e.Debug=0]="Debug",e[e.Shadow=1]="Shadow",e[e.Fish=2]="Fish",e[e.Pool=3]="Pool",e[e.Game=4]="Game",e[e.UI=5]="UI",e[e.UIGotcha=6]="UIGotcha",e}({}));e("CameraManager",(g=M("CameraManager"),y=b(c),g((I=a((A=function(e){function a(){for(var a,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,n(a,"cameras",I,r(a)),n(a,"cameraFar",w,r(a)),a}t(a,e);var o=a.prototype;return o.GetCameraByIndex=function(e){return this.cameras[e]},o.onLoad=function(){e.prototype.onLoad.call(this),this.switchCameraActive=this.switchCameraActive.bind(this),p.Instance.on(d.PRELOAD_START,this.switchCameraActive)},o.start=function(){for(var e=0;e<this.cameras.length;e++){var a=this.cameras[e];a.far=this.cameraFar,a.node.setRTS(m.IDENTITY,this.CameraPosition)}},o.onEnable=function(){u.CLEANUP_IMAGE_CACHE=!1,h.instance.enabled=!0,h.instance.maxFrameSize=2048},o.onDestroy=function(){p.Instance.off(d.PRELOAD_START,this.switchCameraActive),this.switchCameraActive=null,e.prototype.onDestroy.call(this)},o.switchCameraActive=function(e){var a="MainFish"==e.LoadSceneName;this.GetCameraByIndex(F.Shadow).node.active=a,this.GetCameraByIndex(F.Fish).node.active=a,this.GetCameraByIndex(F.Pool).node.active=a,this.GetCameraByIndex(F.Game).node.active=a},i(a,[{key:"CameraPosition",get:function(){return new l(f.Center.X,f.Center.Y,this.CameraFarCenter)}},{key:"CameraFarCenter",get:function(){return this.cameraFar/2}}]),a}(C)).prototype,"cameras",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=a(A.prototype,"cameraFar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),v=A))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraShake.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSUIManager.ts"],(function(e){var t,a,i,n,r,o,h,s,S,c,l,u,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,o=e.createClass},function(e){h=e.cclegacy,s=e._decorator,S=e.Node,c=e.CCFloat,l=e.Vec3,u=e.Component},function(e){k=e.FSUIManager}],execute:function(){var g,f,b,p,d,m,_,w,y,v,C,T,N,O,z,R,B,G;h._RF.push({},"056712uOVlIJKrKveaq/NGE","CameraShake",void 0);var M=s.ccclass,I=s.property,D=e("ScoreShakeSetting",M("ScoreShakeSetting")((b=t((f=function(){a(this,"Odd",b,this),a(this,"ShakeRangeX",p,this),a(this,"ShakeRangeY",d,this),a(this,"ShakeDuration",m,this),a(this,"ShakeCount",_,this)}).prototype,"Odd",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=t(f.prototype,"ShakeRangeX",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=t(f.prototype,"ShakeRangeY",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=t(f.prototype,"ShakeDuration",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=t(f.prototype,"ShakeCount",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=f))||g);e("CameraShake",(w=M("CameraShake"),y=I(S),v=I(c),C=I({type:[D],tooltip:"請從小分開始填"}),T=I(D),w((z=t((O=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"cameraNode",z,n(t)),a(t,"ShakeMagnification",R,n(t)),a(t,"scoreShakeSettings",B,n(t)),a(t,"gotchaShakeSettings",G,n(t)),t._originalPos=new l(l.ZERO),t._smallShakeTween=null,t._bigShakeTween=null,t._isBigShaking=!1,t._isShakable=!0,t}i(t,e);var h=t.prototype;return h.onLoad=function(){k.Instance.CameraShake=this},h.start=function(){this._originalPos.set(this.cameraNode[0].position)},h.ShakableSwitch=function(){this._isShakable=1!=this._isShakable},h.TryShakeSmall=function(e){var t=this;if(this._isShakable&&!this._isBigShaking){var a=this.GetScoreShakeSettingByOdd(e);if(!a)return console.error("[CameraShake:CreateShakeTween] ScoreShakeSetting for Odds("+e+") is not exist."),!1;this._isShakable=!1,this._smallShakeTween=this.CreateShakeTween(a),this._smallShakeTween.call((function(){t.StopShake(t._smallShakeTween)})).start();for(var i=1;i<this.cameraNode.length;i++)this._smallShakeTween.clone(this.cameraNode[i]).start()}},h.ShakeBig=function(e){var t=this,a=this.GetGotchaShakeSettingByOdd(e);this._isShakable=!1,this._isBigShaking=!0,this._bigShakeTween=k.Instance.GetShakeTween(this.cameraNode[0],a.ShakeRangeX*this.ShakeMagnification,a.ShakeRangeY*this.ShakeMagnification,a.ShakeDuration,a.ShakeCount),this._bigShakeTween.call((function(){t.StopShake(t._bigShakeTween),t._isBigShaking=!1})).start();for(var i=1;i<this.cameraNode.length;i++)this._bigShakeTween.clone(this.cameraNode[i]).start()},h.StopShake=function(e){e.stop();for(var t=0;t<this.cameraNode.length;t++)this.cameraNode[t].setPosition(this._originalPos);this._isShakable=!0},h.GetScoreShakeSettingByOdd=function(e){for(var t,a=r(this.scoreShakeSettings);!(t=a()).done;){var i=t.value;if(e<i.Odd)return i}return this.scoreShakeSettings[this.scoreShakeSettings.length-1]},h.GetGotchaShakeSettingByOdd=function(e){for(var t,a=r(this.gotchaShakeSettings);!(t=a()).done;){var i=t.value;if(e<i.Odd)return i}return this.gotchaShakeSettings[this.gotchaShakeSettings.length-1]},h.CreateShakeTween=function(e){return k.Instance.GetShakeTween(this.cameraNode[0],e.ShakeRangeX*this.ShakeMagnification,e.ShakeRangeY*this.ShakeMagnification,e.ShakeDuration,e.ShakeCount)},o(t,[{key:"isShakable",get:function(){return this._isShakable}}]),t}(u)).prototype,"cameraNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(O.prototype,"ShakeMagnification",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.7}}),B=t(O.prototype,"scoreShakeSettings",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(O.prototype,"gotchaShakeSettings",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=O))||N));h._RF.pop()}}}));

System.register("chunks:///_virtual/CameraShakePlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSUIManager.ts"],(function(e){var n,a,t,i,r,s,o,l,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Enum,l=e.Component},function(e){c=e.FSUIManager}],execute:function(){var u,h,y,f,m,k;r._RF.push({},"896bcvNMfVFYrddECR7y4aR","CameraShakePlayer",void 0);var p=s.ccclass,g=s.property,b=s.type,O=function(e){return e[e.OnCall=0]="OnCall",e[e.Awake=1]="Awake",e[e.OnEnable=2]="OnEnable",e[e.Start=3]="Start",e[e.OnDisable=4]="OnDisable",e[e.OnDestroy=5]="OnDestroy",e}(O||{});e("CameraShakePlayer",(u=p("CameraShakePlayer"),h=b(o(O)),u((m=n((f=function(e){function n(){for(var n,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,t(n,"timing",m,i(n)),t(n,"shakeOdds",k,i(n)),n}a(n,e);var r=n.prototype;return r.shakeCamera=function(){this.shakeByTiming(O.OnCall)},r.onLoad=function(){this.shakeByTiming(O.Awake)},r.onEnable=function(){this.shakeByTiming(O.OnEnable)},r.start=function(){this.shakeByTiming(O.Start)},r.onDisable=function(){this.shakeByTiming(O.OnDisable)},r.onDestroy=function(){this.shakeByTiming(O.OnDestroy)},r.shakeByTiming=function(e){e==this.timing&&c.Instance.CameraShake.TryShakeSmall(this.shakeOdds)},n}(l)).prototype,"timing",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.OnCall}}),k=n(f.prototype,"shakeOdds",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=f))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/CanvasInitializer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraManager.ts"],(function(e){var a,n,r,t,i,o,c,s,l,p,u;return{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Enum,s=e.Canvas,l=e.Component},function(e){p=e.CameraType,u=e.CameraManager}],execute:function(){var m,y,C,f,v;i._RF.push({},"3e127icb5dOMJ2CPkwlTjjS","CanvasInitializer",void 0);var g=o.ccclass,h=o.property;e("CanvasInitializer",(m=g("CanvasInitializer"),y=h({type:c(p)}),m((v=a((f=function(e){function a(){for(var a,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,r(a,"cameraType",v,t(a)),a}return n(a,e),a.prototype.start=function(){var e=this.node.getComponent(s);e.cameraComponent=u.instance().GetCameraByIndex(this.cameraType),console.log(e.cameraComponent.name)},a}(l)).prototype,"cameraType",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.UI}}),C=f))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/CatchAudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioPlayer.ts"],(function(e){var t,i,l,r,n,o,a,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,a=e.CCInteger,c=e.Component},function(e){u=e.AudioPlayer}],execute:function(){var s,h,p,d,v,y,f;n._RF.push({},"9e9602ncR9J+4NBr+Sgg/aq","CatchAudioController",void 0);var _=o.ccclass,b=o.property;e("CatchAudioController",(s=_("CatchAudioController"),h=b(a),p=b([u]),s((y=t((v=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,l(t,"duringTime",y,r(t)),l(t,"players",f,r(t)),t._level=0,t._callback=null,t}i(t,e);var n=t.prototype;return n.Play=function(){this.mainProcedure()},n.PlayLevel=function(e){this.playLevelAudio(e)},n.onEnable=function(){this._level=0},n.mainProcedure=function(){var e=this;this._callback&&this.unschedule(this._callback),this.playLevelAudio(this._level),this.updateLevel(),this._callback=function(){e.resetLevel()},this.schedule(this._callback,this.duringTime)},n.updateLevel=function(){this._level<this.players.length-1&&this._level++},n.resetLevel=function(){this._level=0},n.playLevelAudio=function(e){this.players[e].play()},t}(c)).prototype,"duringTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=t(v.prototype,"players",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=v))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/CatchInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var t,r,i;return{setters:[function(e){t=e.cclegacy},function(e){r=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){t._RF.push({},"1a757+/Nk1OjreK9+iDqJuQ","CatchInfo",void 0);e("CatchInfo",function(){function e(){this.IsCatch=void 0,this.HitCount=void 0,this.PlayerID=void 0,this.FortID=void 0,this.BulletID=void 0,this.FishID=void 0,this.Bet=void 0,this.Odds=void 0,this.Score=void 0,this.FishRank=void 0,this.Length=void 0,this.Weight=void 0,this.IsCatch=!1,this.HitCount=0,this.PlayerID=0,this.FortID=0,this.BulletID=0,this.FishID=0,this.Bet=0,this.Odds=0,this.Score=0,this.FishRank=0,this.Length=0,this.Weight=0}return e.serialize=function(e){var t=r.getSharedInstance();return this.serializeCore(t,e),t.toArray()},e.serializeCore=function(e,t){null!=t?(e.writeObjectHeader(12),e.writeBoolean(t.IsCatch),e.writeUint32(t.HitCount),e.writeUint32(t.PlayerID),e.writeUint32(t.FortID),e.writeUint32(t.BulletID),e.writeUint32(t.FishID),e.writeFloat64(t.Bet),e.writeUint32(t.Odds),e.writeFloat64(t.Score),e.writeUint8(t.FishRank),e.writeInt32(t.Length),e.writeInt32(t.Weight)):e.writeNullObjectHeader()},e.serializeArray=function(e){var t=r.getSharedInstance();return this.serializeArrayCore(t,e),t.toArray()},e.serializeArrayCore=function(t,r){t.writeArray(r,(function(t,r){return e.serializeCore(t,r)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(t){var r=t.tryReadObjectHeader(),i=r[0],n=r[1];if(!i)return null;var a=new e;if(12==n)a.IsCatch=t.readBoolean(),a.HitCount=t.readUint32(),a.PlayerID=t.readUint32(),a.FortID=t.readUint32(),a.BulletID=t.readUint32(),a.FishID=t.readUint32(),a.Bet=t.readFloat64(),a.Odds=t.readUint32(),a.Score=t.readFloat64(),a.FishRank=t.readUint8(),a.Length=t.readInt32(),a.Weight=t.readInt32();else{if(n>12)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.IsCatch=t.readBoolean(),1==n)return a;if(a.HitCount=t.readUint32(),2==n)return a;if(a.PlayerID=t.readUint32(),3==n)return a;if(a.FortID=t.readUint32(),4==n)return a;if(a.BulletID=t.readUint32(),5==n)return a;if(a.FishID=t.readUint32(),6==n)return a;if(a.Bet=t.readFloat64(),7==n)return a;if(a.Odds=t.readUint32(),8==n)return a;if(a.Score=t.readFloat64(),9==n)return a;if(a.FishRank=t.readUint8(),10==n)return a;if(a.Length=t.readInt32(),11==n)return a;if(a.Weight=t.readInt32(),12==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(t){return t.readArray((function(t){return e.deserializeCore(t)}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CatchRule.ts",["cc","./RTPSetting.ts"],(function(t){var i,n;return{setters:[function(t){i=t.cclegacy},function(t){n=t.RTPSetting}],execute:function(){i._RF.push({},"4c701KoQ3VF0ZmQGVE6oxAU","CatchRule",void 0);var e=t("CatchRule",function(){function t(t){this._fishRnd=void 0,this._idealStandardRTP=void 0,this._idealRTP=void 0,this._rtpStandardDeviation=void 0,this._fishRnd=t}return t.prototype.SetRTP=function(t,i){var e=i;this._idealStandardRTP=t/e,this._idealRTP=t*(100*n.Precision/e),this._rtpStandardDeviation=this._idealRTP*((i-t)/e)},t}());e.MinRandom=0,e.MaxRandom=100*n.Precision,i._RF.pop()}}}));

System.register("chunks:///_virtual/ChangeTickSpeedUp.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"ad276LnAmdK/qoPfxNeEjGQ","ChangeTickSpeedUp",void 0);e("ChangeTickSpeedUp",function(){function e(){this.TickSpeedUp=void 0,this.TickSpeedUp=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeFloat32(r.TickSpeedUp)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.TickSpeedUp=r.readFloat32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.TickSpeedUp=r.readFloat32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ClientAgent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishGameAgent.ts","./Action2.ts","./ServiceManager.ts","./Queue.ts","./FishGameAck.ts"],(function(t){var e,n,i,o,s,h,a,r;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.FishGameAgent},function(t){o=t.ActionWithOne,s=t.ActionWithTwo},function(t){h=t.ServiceManager},function(t){a=t.Queue},function(t){r=t.FishGameAck}],execute:function(){var u;n._RF.push({},"8cf6aK5SKZJ6ZlEUu0IoTRf","ClientAgent",void 0);var c=t("ClientAgent",function(){var t=n.prototype;function n(){this.OnFrameUpdate=new o,this.OnJoinRoom=new o,this.OnExitRoom=new o,this.OnEventSetting=new s,this.OnEventSilentUpdateSetting=new s,this.OnEventSilentUpdateTime=new o,this.OnRespGetBetHistory=new o,this.isReady=!1,this._isLogin=!1,this._fishGameAgent=null,this._settingData=null,this._settingDataPayload=null,this._roomInfo=null,this._frameQueue=new a,this.RespJoinRoom=this.RespJoinRoom.bind(this),this.RespExitRoom=this.RespExitRoom.bind(this),this.EventFrameInfo=this.EventFrameInfo.bind(this),this.OnEventSettingAction=this.OnEventSettingAction.bind(this),this.OnEventSilentUpdateSettingAction=this.OnEventSilentUpdateSettingAction.bind(this),this.OnEventSilentUpdateTimeAction=this.OnEventSilentUpdateTimeAction.bind(this),this.OnRespGetBetHistoryAction=this.OnRespGetBetHistoryAction.bind(this)}return t.Init=function(){this._isLogin=!0,this._fishGameAgent=new i(h.instance().roomService),this._fishGameAgent.respJoinRoomEvent=this.RespJoinRoom,this._fishGameAgent.respExitRoomEvent=this.RespExitRoom,this._fishGameAgent.eventFrameInfoEvent=this.EventFrameInfo,this._fishGameAgent.eventSettingEvent=this.OnEventSettingAction,this._fishGameAgent.eventSilentUpdateSettingEvent=this.OnEventSilentUpdateSettingAction,this._fishGameAgent.eventSilentUpdateTimeEvent=this.OnEventSilentUpdateTimeAction,this._fishGameAgent.respGetBetHistoryEvent=this.OnRespGetBetHistoryAction},t.JoinRoom=function(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=0),void 0===n&&(n=0),this.isReady=!1,this._settingData=null,this._settingDataPayload=null,this._roomInfo=null,this._frameQueue.clear(),this._fishGameAgent.reqJoinRoom(t,e,n)},t.ExitRoom=function(){this._fishGameAgent.reqExitRoom()},t.ChangeBet=function(t){this._fishGameAgent.reqChangeBet(t)},t.FireNormalBullet=function(t){this._fishGameAgent.reqFireNormalBullet(t)},t.FireLockBullet=function(t){this._fishGameAgent.reqFireLockBullet(t)},t.FireSpecialBullet=function(t,e,n){this._fishGameAgent.reqFireSpecialBullet(t,e,n)},t.CheckRoomInfo=function(t,e){this._fishGameAgent.reqCheckRoomInfo(t,e)},t.RefreshIdleTime=function(){this._fishGameAgent.reqRefreshIdleTime()},t.GetBetHistory=function(t){this._fishGameAgent.reqGetBetHistory(t)},t.RespJoinRoom=function(t){t.Ack==r.Success&&(this._roomInfo=t.RoomInfo),this.OnJoinRoom.invoke(t)},t.RespExitRoom=function(t){this.OnExitRoom.invoke(t)},t.EventFrameInfo=function(t){this.isReady||this._frameQueue.enqueue(t.FrameInfo),this.OnFrameUpdate.invoke(t.FrameInfo)},t.OnEventSettingAction=function(t,e){var n;this._settingData=t,this._settingDataPayload=e,null==(n=this.OnEventSetting)||n.invoke(t,e)},t.OnEventSilentUpdateSettingAction=function(t,e){var n;null==(n=this.OnEventSilentUpdateSetting)||n.invoke(t,e)},t.OnEventSilentUpdateTimeAction=function(t){var e;null==(e=this.OnEventSilentUpdateTime)||e.invoke(t)},t.OnRespGetBetHistoryAction=function(t){var e;null==(e=this.OnRespGetBetHistory)||e.invoke(t)},e(n,[{key:"isLogin",get:function(){return this._isLogin}},{key:"settingData",get:function(){return this._settingData}},{key:"settingDataPayload",get:function(){return this._settingDataPayload}},{key:"roomInfo",get:function(){return this._roomInfo}},{key:"frameQueue",get:function(){return this._frameQueue}}]),n}());u=c,c.Instance=new u,n._RF.pop()}}}));

System.register("chunks:///_virtual/CloneHelper.ts",["cc","./HoldingSpecialBulletInfo.ts","./PlayerInfo.ts"],(function(l){var n,e,t;return{setters:[function(l){n=l.cclegacy},function(l){e=l.HoldingSpecialBulletInfo},function(l){t=l.PlayerInfo}],execute:function(){n._RF.push({},"0a0118ZfvJDR4xSqqEokNJ+","CloneHelper",void 0);l("CloneHelper",function(){function l(){}return l.CloneHoldingSpecialBulletInfo=function(l){var n=null;return null!=l&&((n=new e).BulletKind=l.BulletKind,n.MaxHitCount=l.MaxHitCount,n.RemainHitCount=l.RemainHitCount,n.Bet=l.Bet),n},l.CloneHoldingSpecialBulletInfoArray=function(n){var e=null;if(null!=n){e=[];for(var t=0,o=n.length-1;t<=o;++t)e.push(l.CloneHoldingSpecialBulletInfo(n[t]))}return e},l.ClonePlayerInfo=function(n){var e=null;return null!=n&&((e=new t).PlayerID=n.PlayerID,e.PlayerName=n.PlayerName,e.Coin=n.Coin,e.Bet=n.Bet,e.BetMax=n.BetMax,e.BetMin=n.BetMin,e.SpecialBulletScore=n.SpecialBulletScore,e.HoldingSpecialBulletInfos=l.CloneHoldingSpecialBulletInfoArray(n.HoldingSpecialBulletInfos),e.CurrentSpecialBulletInfo=l.CloneHoldingSpecialBulletInfo(n.CurrentSpecialBulletInfo)),e},l.ClonePlayerInfoArray=function(n){var e=null;if(null!=n){e=[];for(var t=0,o=n.length-1;t<=o;++t)e.push(l.ClonePlayerInfo(n[t]))}return e},l}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Coin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pool.ts","./Action.ts"],(function(t){var i,n,e,o,c,r,a,s,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,c=t.createClass},function(t){r=t.cclegacy,a=t._decorator},function(t){s=t.PoolNode},function(t){l=t.Action}],execute:function(){var u,p,f,h,A,d,y;r._RF.push({},"4ed52NYfBFLh42hwOhWUYmr","Coin",void 0);var v=a.ccclass,w=a.property;t("Coin",(u=v("Coin"),p=w(l),f=w(l),u((d=i((A=function(t){function i(){for(var i,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return i=t.call.apply(t,[this].concat(c))||this,e(i,"scaleUpAction",d,o(i)),e(i,"scaleDownAction",y,o(i)),i}return n(i,t),i.prototype.SetDuration=function(t){if(this.scaleUpAction&&this.scaleDownAction){var i=t/4;this.scaleUpAction.duration=i,this.scaleUpAction.recordProps(),this.scaleDownAction.duration=i,this.scaleDownAction.delay=i,this.scaleDownAction.recordProps()}},c(i,[{key:"isAvailable",get:function(){return!this.node.active},set:function(t){this.node.active=!t}}]),i}(s)).prototype,"scaleUpAction",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(A.prototype,"scaleDownAction",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=A))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/CoinPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pool.ts","./Coin.ts","./ShowRewardConfig.ts"],(function(o){var i,n,t,e,r,l,c,a,u,s,p,f;return{setters:[function(o){i=o.applyDecoratedDescriptor,n=o.inheritsLoose,t=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){r=o.cclegacy,l=o._decorator,c=o.Node,a=o.Prefab,u=o.Component},function(o){s=o.PoolInstance},function(o){p=o.Coin},function(o){f=o.CoinType}],execute:function(){var P,h,b,d,C,g,y,w,z;r._RF.push({},"1c801Scbh9CCZ3RhTY2TWgF","CoinPool",void 0);var G=l.ccclass,m=l.property;o("CoinPool",(P=G("CoinPool"),h=m(c),b=m(a),P((g=i((C=function(o){function i(){for(var i,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return i=o.call.apply(o,[this].concat(r))||this,t(i,"coinRoot",g,e(i)),t(i,"rewardGoldCoin",y,e(i)),t(i,"initGoldSize",w,e(i)),t(i,"maxPoolSize",z,e(i)),i._coinPools=new Map,i}n(i,o);var r=i.prototype;return r.Init=function(){this._coinPools.set(f.GOLD,new s),this._coinPools.get(f.GOLD).InitPool(p,this.initGoldSize,this.maxPoolSize,this.coinRoot,this.rewardGoldCoin)},r.GetObject=function(o){var i=this._coinPools.get(o);return i?i.GetObject():null},r.PushToPool=function(o,i){var n=this._coinPools.get(o);n&&n.PushToPool(i)},i}(u)).prototype,"coinRoot",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(C.prototype,"rewardGoldCoin",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(C.prototype,"initGoldSize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),z=i(C.prototype,"maxPoolSize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),d=C))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionExtension.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"f2752x4kMJGDLfd6hmkkEes","CollectionExtension",void 0);n("CollectionExtension",function(){function n(){}return n.createDictionary=function(n){return n.reduce((function(n,t){return n[t.key]=t,n}),{})},n.getItemByKey=function(n,t){return n.hasOwnProperty(t)?n[t]:void console.error("Item with key '"+t+"' not found.")},n.toMap=function(n,t){for(var e=new Map,o=0,r=n.length-1;o<=r;++o){var c=n[o];e.set(t(c),c)}return e},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Collision.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./Vector2.ts"],(function(r){var e,i,t,a;return{setters:[function(r){e=r.cclegacy},function(r){i=r.MemoryPackWriter},function(r){t=r.MemoryPackReader},function(r){a=r.Vector2}],execute:function(){e._RF.push({},"cd21d1t9jNKh6FyDAfkNfsN","Collision",void 0);r("Collision",function(){function r(){this.LocalPosition=void 0,this.X=void 0,this.Y=void 0,this.Radius=void 0,this.RadiusSqr=void 0,this.LocalPosition=null,this.X=0,this.Y=0,this.Radius=0,this.RadiusSqr=0}return r.serialize=function(r){var e=i.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(5),a.serializeCore(r,e.LocalPosition),r.writeFloat64(e.X),r.writeFloat64(e.Y),r.writeFloat64(e.Radius),r.writeFloat64(e.RadiusSqr)):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=i.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,i){e.writeArray(i,(function(e,i){return r.serializeCore(e,i)}))},r.deserialize=function(r){return this.deserializeCore(new t(r))},r.deserializeCore=function(e){var i=e.tryReadObjectHeader(),t=i[0],o=i[1];if(!t)return null;var n=new r;if(5==o)n.LocalPosition=a.deserializeCore(e),n.X=e.readFloat64(),n.Y=e.readFloat64(),n.Radius=e.readFloat64(),n.RadiusSqr=e.readFloat64();else{if(o>5)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return n;if(n.LocalPosition=a.deserializeCore(e),1==o)return n;if(n.X=e.readFloat64(),2==o)return n;if(n.Y=e.readFloat64(),3==o)return n;if(n.Radius=e.readFloat64(),4==o)return n;if(n.RadiusSqr=e.readFloat64(),5==o)return n}return n},r.deserializeArray=function(r){return this.deserializeArrayCore(new t(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionDebugInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Room.ts","./BulletParameter.ts"],(function(i){var o,s,t,e,l,n,r,h,a,u,c,f;return{setters:[function(i){o=i.applyDecoratedDescriptor,s=i.inheritsLoose,t=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){l=i.cclegacy,n=i._decorator,r=i.Graphics,h=i.misc,a=i.Vec3,u=i.Component},function(i){c=i.Room},function(i){f=i.NormalBulletParameter}],execute:function(){var _,d,P,p,b,g;l._RF.push({},"2bd96PIAH1L35Gclj+PprYt","CollisionDebugInfo",void 0);var C=n.ccclass,N=n.property;i("CollisionDebugInfo",(_=C("CollisionDebugInfo"),d=N({type:r,visible:!0}),_(((g=function(i){function o(){for(var o,s=arguments.length,l=new Array(s),n=0;n<s;n++)l[n]=arguments[n];return o=i.call.apply(i,[this].concat(l))||this,t(o,"_graphics",b,e(o)),o._fishPoolNode=null,o._fishPos=new a,o._bulletPoolNode=null,o._bulletInfo=null,o._bulletPos=new a,o._timeSinceLastDraw=0,o._drawInterval=.05,o}s(o,i);var l=o.prototype;return l.setFishInfo=function(i){this._fishPoolNode=i},l.setBulletInfo=function(i,o){this._bulletPoolNode=i,this._bulletInfo=o},l.update=function(i){if(this._timeSinceLastDraw+=i,this._timeSinceLastDraw>=this._drawInterval){this._graphics.clear();var o=!1;o||(o=this.drawFishCollisions()),o||(o=this.drawBulletCollisions()),o&&this._graphics.stroke(),this._timeSinceLastDraw=0}},l.drawFishCollisions=function(){if(null==this._fishPoolNode||null==this._fishPoolNode.node||!this._fishPoolNode.node.active)return!1;var i=this._fishPoolNode.fish.Cos,o=this._fishPoolNode.fish.Sin;this._fishPos.set(this._fishPoolNode.fish.Pos.x,this._fishPoolNode.fish.Pos.y,0);for(var s=0,t=this._fishPoolNode.fish.Collision.CollisiblePoints.length-1;s<=t;++s){var e=this._fishPoolNode.fish.Collision.CollisiblePoints[s],l=e.X*i-e.Y*o,n=e.X*o+e.Y*i,r=this._fishPos.x+l,h=this._fishPos.y+n;this._graphics.circle(r,h,e.Radius)}return!0},l.drawBulletCollisions=function(){return!(null==this._bulletPoolNode||null==this._bulletPoolNode.node||!this._bulletPoolNode.node.active)&&(this._bulletPos.set(this._bulletInfo.PosX,this._bulletInfo.PosY,0),this._graphics.circle(this._bulletPos.x,this._bulletPos.y,f.Radius),!0)},o}(u)).Center={x:c.Center.X,y:c.Center.Y,z:0},g.Radians_180=h.degreesToRadians(180),b=o((p=g).prototype,"_graphics",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=p))||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionDebugInfoGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishPoolNode.ts","./FishPoolManager.ts","./CollisionDebugInfo.ts","./Room.ts","./BulletKind.ts"],(function(e){var t,n,i,o,s,l,u,a;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e.instantiate},function(e){o=e.FishPoolNode},function(e){s=e.FishPoolManager},function(e){l=e.CollisionDebugInfo},function(e){u=e.Room},function(e){a=e.BulletKind}],execute:function(){n._RF.push({},"97ecclo8fVNwr81ouMjyZmm","CollisionDebugInfoGenerator",void 0);var r=function(e){return e[e.Fish=0]="Fish",e[e.Bullet=1]="Bullet",e}(r||{});e("CollisionDebugInfoGenerator",function(){function e(e){this._setting=null,this._debugInfoActive=!1,this._debugInfoMap=new Map,this._setting=e,this._setting.onSpawnFishNode.add(this.onSpawnFishNodeAction.bind(this)),this._setting.onDespawnFish.add(this.onDespawnFishAction.bind(this)),this._setting.onSpawnBullet.add(this.onSpawnBulletAction.bind(this)),this._setting.onDespawnBullet.add(this.onDespawnBulletAction.bind(this)),this._setting.onSetCollisionDebugInfoActive.add(this.onSetCollisionDebugInfoActiveAction.bind(this)),this._debugInfoMap.set(r.Fish,new Map),this._debugInfoMap.set(r.Bullet,new Map)}var n=e.prototype;return n.onSpawnFishNodeAction=function(e){if(this._debugInfoActive){var t=e.getComponent(o);null!=t&&this.spawnFishDebugInfo(t)}},n.spawnFishDebugInfo=function(e){var t=i(this._setting.collisionDebugInfoPrefab),n=t.getComponent(l);n.setFishInfo(e),t.setParent(this._setting.collisionDebugInfoRoot),t.setPosition(-u.Center.X,-u.Center.Y),t.active=!0,this._debugInfoMap.get(r.Fish).set(e.fishSerialNumber,n)},n.onDespawnFishAction=function(e){if(this._debugInfoActive){var t=this._debugInfoMap.get(r.Fish).get(e.SerialNumber);null!=t&&(this._debugInfoMap.get(r.Fish).delete(e.SerialNumber),t.node.destroy())}},n.onSpawnBulletAction=function(e,t){var n=e.BulletKind;if(this._debugInfoActive&&n==a.Normal){var o=i(this._setting.collisionDebugInfoPrefab),s=o.getComponent(l);s.setBulletInfo(t,e.Info),o.setParent(this._setting.collisionDebugInfoRoot),o.setPosition(-u.Center.X,-u.Center.Y),o.active=!0,this._debugInfoMap.get(r.Bullet).set(e.SerialNumber,s)}},n.onDespawnBulletAction=function(e,t){var n=e.BulletKind;if(this._debugInfoActive&&n==a.Normal){var i=this._debugInfoMap.get(r.Bullet).get(e.SerialNumber);null!=i&&(this._debugInfoMap.get(r.Bullet).delete(e.SerialNumber),i.node.destroy())}},n.onSetCollisionDebugInfoActiveAction=function(e){if(this._debugInfoActive=e,this._debugInfoActive)for(var n,i=t(s.instance().SpawnedFish);!(n=i()).done;){var o=n.value,l=s.instance().GetSpawnedFish(o);this.spawnFishDebugInfo(l)}else for(var u,a=t(this._debugInfoMap);!(u=a()).done;){for(var r,f=u.value,h=t(f[1]);!(r=h()).done;){r.value[1].node.destroy()}f[1].clear()}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ColorChangeHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,o,t,i,n,l,a,c,s,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.Color,c=e.Label,s=e.Sprite,p=e.Component}],execute:function(){var u,f,h,b,g,y,C,v,d;n._RF.push({},"516051M/fpK45+MFLx/T8wu","ColorChangeHelper",void 0);var m=l.ccclass,w=l.property;e("ColorChangeHelper",(u=m("ColorChangeHelper"),f=w([a]),h=w([c]),b=w([s]),u((C=r((y=function(e){function r(){for(var r,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return r=e.call.apply(e,[this].concat(n))||this,t(r,"colors",C,i(r)),t(r,"labels",v,i(r)),t(r,"sprites",d,i(r)),r}return o(r,e),r.prototype.changeColor=function(e){var r=this;this.labels.forEach((function(o){o.color=r.colors[e]})),this.sprites.forEach((function(o){o.color=r.colors[e]}))},r}(p)).prototype,"colors",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=r(y.prototype,"labels",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=r(y.prototype,"sprites",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=y))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/ColorGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var o,e,t,n,i,c,l,a;return{setters:[function(r){o=r.applyDecoratedDescriptor,e=r.inheritsLoose,t=r.initializerDefineProperty,n=r.assertThisInitialized,i=r.createClass},function(r){c=r.cclegacy,l=r._decorator,a=r.UIRenderer}],execute:function(){var s,u,h,p,f;c._RF.push({},"26cb25c7xBBcIUzT7yPxRS6","ColorGroup",void 0);var g=l.ccclass,C=l.property;r("ColorGroup",(s=g("ColorGroup"),u=C([a]),s((f=o((p=function(r){function o(){for(var o,e=arguments.length,i=new Array(e),c=0;c<e;c++)i[c]=arguments[c];return o=r.call.apply(r,[this].concat(i))||this,t(o,"Targets",f,n(o)),o}e(o,r);var c=o.prototype;return c.ChangeColor=function(r,o){r?r.color=o:console.error("Null Renderer target of "+this.node.name)},c.ChangeColorRecursively=function(r,o){var e=this,t=r.getComponent(a);t&&this.ChangeColor(t,o),r.children.forEach((function(r){e.ChangeColorRecursively(r,o)}))},i(o,[{key:"color",get:function(){return this._color},set:function(r){var o=this;this._color=r,null!=this.Targets?this.Targets.forEach((function(r){o.ChangeColor(r,o._color)})):this.node.children.forEach((function(r){o.ChangeColorRecursively(r,o._color)}))}}]),o}(a)).prototype,"Targets",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=p))||h));c._RF.pop()}}}));

System.register("chunks:///_virtual/ConnectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WebSocketClient.ts","./Packet.ts"],(function(e){var t,n,i,c,o,r,s,a,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Component},function(e){a=e.WebSocketClient},function(e){l=e.Queue,h=e.Packet}],execute:function(){var u,d,m,v,C;o._RF.push({},"faf90RzdV5CT6cnFZhFKg6x","ConnectManager",void 0);var _=r.ccclass,O=r.property,f=function(e){return e[e.None=0]="None",e[e.Disconnect=33]="Disconnect",e[e.Packet=30]="Packet",e[e.NoOrderPacket=31]="NoOrderPacket",e[e.Connect=112]="Connect",e[e.Reconnect=113]="Reconnect",e[e.OverReconnectTime=114]="OverReconnectTime",e[e.PingPong=199]="PingPong",e[e.Discard=250]="Discard",e[e.Live=255]="Live",e}(f||{}),S=e("ConnectState",function(e){return e[e.Offline=0]="Offline",e[e.Connect=1]="Connect",e[e.Reconnect=2]="Reconnect",e[e.Online=3]="Online",e}({})),b=e("StopReason",function(e){return e[e.ByClient=0]="ByClient",e[e.ByService=1]="ByService",e[e.Disconnect=2]="Disconnect",e[e.AuthFailure=3]="AuthFailure",e[e.ConnectFailure=4]="ConnectFailure",e[e.OverReconnectTime=5]="OverReconnectTime",e[e.Conflict=6]="Conflict",e[e.StartTwice=7]="StartTwice",e[e.DisconnectTimeout=8]="DisconnectTimeout",e[e.Robbed=9]="Robbed",e[e.ServiceShutdown=10]="ServiceShutdown",e[e.OverLivingTime=11]="OverLivingTime",e[e.Exception=12]="Exception",e}({}));e("ConnectManager",_("ConnectManager")((m=t((d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"MaxRetryCount",m,c(t)),i(t,"RetryIntervalSeconds",v,c(t)),i(t,"ConnectTimeout",C,c(t)),t.OnConnected=void 0,t.OnResume=void 0,t.OnPause=void 0,t.OnDisconnected=void 0,t.OnReceivePingPong=void 0,t.OnReceiveCommand=[],t.State=S.Offline,t.Url="ws://localhost:443",t._isScheduled=void 0,t._client=void 0,t._packetQueue=void 0,t._receiveNumber=0,t._serialNumber=0,t._randomNumber=0,t._connectTime=0,t._retryCount=0,t._receiveCommand=new Map,t}n(t,e);var o=t.prototype;return o.update=function(e){switch(this.State){case S.Connect:this.Retry(e,this.Connect.bind(this));break;case S.Reconnect:this.Retry(e,this.Reconnect.bind(this))}},o.onDestroy=function(){this.CloseSocket()},o.StartConnect=function(){this._retryCount=0,this._receiveNumber=0,this.Reset(),this._packetQueue=new l,this.Connect()},o.RegisterReceiveCommand=function(e,t,n){this._receiveCommand.set(e<<8|t,n)},o.UnregisterReceiveCommand=function(e,t){this._receiveCommand.delete(e<<8|t)},o.SendCommand=function(e,t,n){var i=this;this._packetQueue.Send(e,t,n,(function(e){i.State==S.Online&&i._client.SendPacket(f.Packet,e.Number,e.Category,e.Command,e.Payload)}))},o.SendNoOrderCommand=function(e,t,n){this._client.SendPacket(f.NoOrderPacket,0,e,t,n)},o.OnDisconnect=function(e,t){var n;console.warn("["+(new Date).toLocaleString()+"] "+t+this.Url+" "+e),null==(n=this.OnDisconnected)||n.call(this,e),this.State=S.Offline,this.CloseSocket()},o.Reset=function(){this._retryCount++,this._connectTime=0,this._isScheduled=!1,this.CloseSocket(),console.log("["+(new Date).toLocaleString()+"] reset<"+this._retryCount+">")},o.Retry=function(e,t){var n=this;if(!this._isScheduled)if(this._connectTime<this.ConnectTimeout)this._connectTime+=e;else if(this._retryCount<this.MaxRetryCount){var i=.5*this.RetryIntervalSeconds*(1+Math.random());this.Reset(),this._isScheduled=!0,this.scheduleOnce((function(){n._isScheduled=!1,t()}),i)}else this.OnDisconnect(b.ConnectFailure,S[this.State]+" ")},o.Connect=function(){console.log("["+(new Date).toLocaleString()+"] connect<"+this._retryCount+"> "+this.Url),this._client=new a,this.State=S.Connect,this._client.OnOpen=function(e){var t=new Uint8Array([0,0,1,f.Connect]);this._client.DirectSend(t)},this._client.OnOpen=this._client.OnOpen.bind(this),this._client.OnClose=function(e){this.OnSocketClose(e)},this._client.OnClose=this._client.OnClose.bind(this),this._client.OnReceive=function(e){this.OnReceivedPacket(e)},this._client.OnReceive=this._client.OnReceive.bind(this),this._client.Connect(this.Url)},o.Reconnect=function(){console.warn("["+(new Date).toLocaleString()+"] reconnect<"+this._retryCount+"> "+this.Url);var e=this;this._client=new a,this.State=S.Reconnect;var t=new Uint8Array([0,0,11,255&this._serialNumber,this._serialNumber>>8&255,this._serialNumber>>16&255,this._serialNumber>>24&255,255&this._randomNumber,this._randomNumber>>8&255,this._randomNumber>>16&255,this._randomNumber>>24&255,255&this._receiveNumber,this._receiveNumber>>8&255,f.Reconnect]);this._client.OnOpen=function(n){e._client.DirectSend(t)},this._client.OnClose=function(t){e.OnSocketClose(t)},this._client.OnReceive=function(t){e.OnReceivedPacket(t)},this._client.Connect(this.Url)},o.OnSocketClose=function(e){var t;this.State==S.Online&&(this._serialNumber>0&&(null==(t=this.OnPause)||t.call(this),this._retryCount=0,this.Reset(),this.Reconnect()))},o.CloseSocket=function(){var e=this._client;e&&(e.OnOpen=null,e.OnReceive=null,e.OnClose=null,e.OnError=null,e.Close()),this._client=null},o.OnReceivedPacket=function(e){if(this.State!=S.Offline){var t=e[e.length-1];switch(t){case f.Packet:var n=h.ReceiveOrderPacket(e,this._receiveNumber);if(n){this._receiveNumber=n.Number;var i=n.Category<<8|n.Command,c=this._receiveCommand.get(i);if(c&&c(n.Payload),this._receiveNumber%h.KeepPacketCount==0){var o=new Uint8Array([0,0,3,255&this._receiveNumber,this._receiveNumber>>8&255,f.Discard]);this._client.DirectSend(o)}}else this._retryCount=0,this.Reset(),this.Reconnect(),new Error(this.Url+" send wrong packet number against "+this._receiveNumber);break;case f.NoOrderPacket:var r=h.ReceiveNoOrderPacket(e),s=r.Category<<8|r.Command,a=this._receiveCommand.get(s);a&&a(r.Payload);break;case f.PingPong:var l;null==(l=this.OnReceivePingPong)||l.call(this,e.subarray(0,e.length-1));break;case f.Discard:var u=e[0]|e[1]<<8;this._packetQueue.Remove(u);break;case f.Disconnect:this.OnDisconnect(b.Disconnect,"");break;case f.OverReconnectTime:var d=e[0]|e[1]<<8;this.OnDisconnect(b.OverReconnectTime,"Idle more than "+d+" seconds.");break;case f.Connect:if(this.State==S.Connect){var m,v=0;this._serialNumber=e[v++]|e[v++]<<8|e[v++]<<16|e[v++]<<24,this._randomNumber=e[v++]|e[v++]<<8|e[v++]<<16|e[v++]<<24,console.log("["+(new Date).toLocaleString()+"] "+S[this.State]),this.State=S.Online,null==(m=this.OnConnected)||m.call(this)}break;case f.Reconnect:if(this.State==S.Reconnect){var C,_=e[0]|e[1]<<8,O=this;this._packetQueue.Resend(_,(function(e,t){console.log("["+(new Date).toLocaleString()+"] Next Number : "+e+", Count : "+t.length);for(var n=0;n<t.length;++n){var i=t[n];O._client.SendPacket(f.Packet,i.Number,i.Category,i.Command,i.Payload)}})),console.log("["+(new Date).toLocaleString()+"] "+S[this.State]),this.State=S.Online,null==(C=this.OnResume)||C.call(this)}break;default:console.log("["+(new Date).toLocaleString()+"] From "+this.Url+" receive undfine packet code "+t)}}},t}(s)).prototype,"MaxRetryCount",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),v=t(d.prototype,"RetryIntervalSeconds",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),C=t(d.prototype,"ConnectTimeout",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),u=d))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/ConstantNumChangeLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumChangeLevel.ts"],(function(t){var e,a,n,i,u,s,l,h,r;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,u=t.createClass},function(t){s=t.cclegacy,l=t._decorator,h=t.CCInteger},function(t){r=t.NumChangeLevel}],execute:function(){var c,o,f,V,_;s._RF.push({},"13c6edOL8FKRau9ZrH+iOTC","ConstantNumChangeLevel",void 0);var v=l.ccclass,m=l.property;t("ConstantNumChangeLevel",(c=v("ConstantNumChangeLevel"),o=m([h]),c((_=e((V=function(t){function e(){for(var e,a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];return e=t.call.apply(t,[this].concat(u))||this,n(e,"constantNum",_,i(e)),e._finalValue=0,e}a(e,t);var s=e.prototype;return s.ResetValue=function(){this.defaultValue>this.constantNum.length-1&&(this.defaultValue=this.constantNum.length-1),this._value=this.defaultValue,this._finalValue=this.constantNum[this._value]},s.SetValue=function(e){t.prototype.SetValue.call(this,e),this._finalValue=this.constantNum[this._value]},s.setFinalValue=function(t){this._finalValue=t,this._value=this.getValueByFinalValue(!1),this.checkValueValid()},s.SetBound=function(t,e){this._max=this.constantNum.length-1,this._min=0},s.TryIncrease=function(){if(this.IsMax)return!1;var t=this.getValueByFinalValue(!1);return this._value=t,this._value=Math.min(this._value+this._nextAddValue,this._max),this.checkValueValid(),this._finalValue=this.constantNum[this._value],this.AddValue(),this._value!=t},s.TryDecrease=function(){if(this.IsMin)return!1;var t=this.getValueByFinalValue(!0);return this._value=t,this._value=Math.max(this._value-this._nextAddValue,this._min),this.checkValueValid(),this._finalValue=this.constantNum[this._value],this.AddValue(),this._value!=t},s.getValueByFinalValue=function(t){var e=this.constantNum.indexOf(this._finalValue);if(e<0)for(var a=0;a<this.constantNum.length;a++)this._finalValue>=this.constantNum[a]&&(e=t?a+1:a);return e},s.checkValueValid=function(){this._value<0?this._value=0:this._value>this.constantNum.length-1&&(this._value=this.constantNum.length-1)},u(e,[{key:"Value",get:function(){return this._finalValue}},{key:"ConstantNums",get:function(){return this.constantNum}}]),e}(r)).prototype,"constantNum",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[10,50,100,500,1e3,5e3]}}),f=V))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var t;n._RF.push({},"fbcacgzGstKk4dfEPXb88Sq","Constants",void 0);var u=e("Constants",(function(){}));t=u,u.MinutesPerHour=60,u.SecondsPerDay=86400,u.SecondsPerMinute=60,u.MilliSecondsPerSecond=1e3,u.FixedUpdateCountPerSecond=20,u.FixedUpdateCountPerMinute=60*t.FixedUpdateCountPerSecond,u.FixedUpdateCountPerHalfMinute=30*t.FixedUpdateCountPerSecond,u.SharpMinuteWaveCountPerRound=2,u.MidMinuteWaveCountPerRound=2,u.BonusWaveCountPerRound=t.SharpMinuteWaveCountPerRound+t.MidMinuteWaveCountPerRound,u.RoundTotalFixedUpdateCount=t.BonusWaveCountPerRound*t.FixedUpdateCountPerHalfMinute,u.PerTickTime=200,u.FixedUpdateCountPerTick=4,u.BulletFrequency=.2,n._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerState.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"5b151xTk/JIErYanCfQ5ErF","ControllerState",void 0);t("ControllerState",{None:0,Spawn:1,WaitForStart:2,FixedUpdate:3,Catch:4});e._RF.pop()}}}));

System.register("chunks:///_virtual/CSBetHistoryController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BetHistoryController.ts","./BetDataRaw.ts","./UIBetHistoryDetailPanel.ts","./Utility2.ts","./FishAttribute2.ts"],(function(t){var e,i,r,n,o,a,s,l,u,c,f,p,h,m,b,y,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.JsonAsset,c=t.SpriteFrame,f=t.Component},function(t){p=t.BetData,h=t.BetDataGroup},function(t){m=t.BetDataRaw},function(t){b=t.UIBetHistoryDetailPanel},function(t){y=t.Utility},function(t){D=t.FishAttributeData}],execute:function(){var B,d,v,F,g,w,C,H,S;s._RF.push({},"82bfbDII2dN5JQtdFsMT31C","CSBetHistoryController",void 0);var _=l.ccclass,z=l.property;t("CSBetHistoryController",(B=_("CSBetHistoryController"),d=z(u),v=z(b),F=z({type:[c],visible:!0}),B((C=e((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"fishAttrFile",C,n(e)),r(e,"uiBetHistoryDetailPanel",H,n(e)),r(e,"_bulletKindSpriteFrames",S,n(e)),e._timezoneOffset=0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this._timezoneOffset=y.getTimeZoneOffset(),D.Instance.LoadFromJsonAsset(this.fishAttrFile.json)},s.start=function(){var t=null;t=new URL(window.location.href),console.info("search: "+t.search);for(var e,i=o(t.searchParams);!(e=i()).done;){var r=e.value;console.info("params: "+r[0]+", "+r[1])}var n=new h;n.betDatas=[],n.Setting=this;for(var a,s=t.searchParams.get("BetDatas").split("_"),l=o(s);!(a=l()).done;){var u=a.value.split("-"),c=new m;c.TID=u[0],c.Bet=Number(u[1]),c.Win=Number(u[2]),c.FishID=Number(u[3]),c.BulletKind=Number(u[4]),n.betDatas.push(new p(c,this)),console.info(JSON.stringify(c))}n.betDatas.length>0&&(n.time=Number(t.searchParams.get("Time")),this.uiBetHistoryDetailPanel.setDatas(n,this.timezoneOffset))},a(e,[{key:"bulletKindSpriteFrames",get:function(){return this._bulletKindSpriteFrames}},{key:"timezoneOffset",get:function(){return this._timezoneOffset}}]),e}(f)).prototype,"fishAttrFile",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(w.prototype,"uiBetHistoryDetailPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(w.prototype,"_bulletKindSpriteFrames",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=w))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DebugNodeControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts"],(function(o){var t,e,n,r,u;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,r=o.Component},function(o){u=o.GameConfig}],execute:function(){var c;e._RF.push({},"16bf18Znz1BrKmmeabEBItn","DebugNodeControl",void 0);var i=n.ccclass;n.property,o("DebugNodeControl",i("DebugNodeControl")(c=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.start=function(){this.node.active=u.config.useGMCommand},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/DebugUICommandItem_FindRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ClientAgent.ts"],(function(o){var n,e,t,r,i,a,c,m,u,l;return{setters:[function(o){n=o.applyDecoratedDescriptor,e=o.inheritsLoose,t=o.initializerDefineProperty,r=o.assertThisInitialized},function(o){i=o.cclegacy,a=o._decorator,c=o.randomRangeInt,m=o.Component},function(o){u=o.EDITOR},function(o){l=o.ClientAgent}],execute:function(){var s,f,d,p;i._RF.push({},"78ff1mOG6lAQ6cZGmT62L/A","DebugUICommandItem_FindRoom",void 0);var h=a.ccclass,g=a.property;o("DebugUICommandItem_FindRoom",h("DebugUICommandItem_FindRoom")((d=n((f=function(o){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=o.call.apply(o,[this].concat(i))||this,t(n,"roomMin",d,r(n)),t(n,"roomMax",p,r(n)),n}e(n,o);var i=n.prototype;return i.onLoad=function(){this.node.active=!u},i.findRoom=function(){var o=-1;do{o=c(this.roomMin,this.roomMax)}while(o===l.Instance.roomInfo.RoomNo);var n=new URL(window.location.href);n.searchParams.set("room",o.toString()),window.location.href=n.href},n}(m)).prototype,"roomMin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=n(f.prototype,"roomMax",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),s=f))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/DebugUICommandItem_SpawnFish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DebugUICommandItem.ts"],(function(e){var n,t,i,r,o,a,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator},function(e){u=e.DebugUICommandItem}],execute:function(){var c,s,l;o._RF.push({},"13ba6D/yAJGwrPygVB196u0","DebugUICommandItem_SpawnFish",void 0);var m=a.ccclass,p=a.property;e("DebugUICommandItem_SpawnFish",m("DebugUICommandItem_SpawnFish")((l=n((s=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"inField",l,r(n)),n}return t(n,e),n.prototype.genCommand=function(){var n=e.prototype.genCommand.call(this);return n+=this.inField?" -2":""},n}(u)).prototype,"inField",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/DebugUICommandItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GMCommandSystem.ts","./MessageManager.ts","./MessageCmd.ts"],(function(t){var n,e,o,i,r,a,c,s,u,m,d,l,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.CCString,s=t.EditBox,u=t.Button,m=t.Component},function(t){d=t.GMCommandSystem},function(t){l=t.MessageManager},function(t){f=t.MessageCmd}],execute:function(){var p,b,h,g,C,y,I,M,B;r._RF.push({},"2143fQUrcdGybN0J5B50AEU","DebugUICommandItem",void 0);var _=a.ccclass,D=a.property;t("DebugUICommandItem",(p=_("DebugUICommandItem"),b=D(c),h=D([s]),g=D(u),p((I=n((y=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(n,"command",I,i(n)),o(n,"editBoxes",M,i(n)),o(n,"button",B,i(n)),n.combinedText="",n}e(n,t);var r=n.prototype;return r.onLoad=function(){this.button.node.on("click",this.onButtonClicked,this)},r.onDestroy=function(){this.button.node.off("click",this.onButtonClicked,this)},r.genCommand=function(){return this.combinedText=this.editBoxes.map((function(t){return t.string})).join(" "),this.command+" "+this.combinedText},r.onButtonClicked=function(){var t=this.genCommand();console.warn(t),"SpecifyRoom"===this.command?l.Instance.emit(f.GM_SPECIFY_ROOM,t):"GotchaFish"===this.command?l.Instance.emit(f.OPEN_GOTCHA_FISH_FOR_DEBUG,t):d.instance.reqGMComamnd(t)},n}(m)).prototype,"command",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=n(y.prototype,"editBoxes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=n(y.prototype,"button",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=y))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/DebugUIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GMCommandSystem.ts","./MessageManager.ts","./MessageCmd.ts","./ServiceManager.ts","./PrefabData.ts","./FishPoolManager.ts","./FishAttribute2.ts","./FishKind.ts","./FishPerform.ts","./CatchInfo.ts","./KindHelper.ts","./TickPingHelper.ts"],(function(n){var o,i,t,e,s,c,a,r,h,f,l,u,m,I,p,g,F,b,d,v,_;return{setters:[function(n){o=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){s=n.cclegacy,c=n._decorator,a=n.Label,r=n.instantiate,h=n.Component},function(n){f=n.GMCommandSystem},function(n){l=n.MessageManager},function(n){u=n.MessageCmd},function(n){m=n.ServiceManager},function(n){I=n.FishPrefabData},function(n){p=n.DeadFishInfo},function(n){g=n.FishAttributeData},function(n){F=n.FishKind},function(n){b=n.FishPerform},function(n){d=n.CatchInfo},function(n){v=n.KindHelper},function(n){_=n.TickPingHelper}],execute:function(){var C,D,S,A,M,R,G;s._RF.push({},"c95aamFxORPWoY+4UOcxQYn","DebugUIController",void 0);var O=c.ccclass,y=c.property;n("DebugUIController",(C=O("DebugUIController"),D=y({type:a,visible:!0}),S=y(_),C((R=o((M=function(n){function o(){for(var o,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return o=n.call.apply(n,[this].concat(s))||this,t(o,"_roomNo",R,e(o)),t(o,"tickPingHelper",G,e(o)),o._fishDebugInfoActive=!1,o._collisionDebugInfoActive=!1,o}i(o,n);var s=o.prototype;return s.disconnectRoomService=function(){m.instance().disconnectRoomService()},s.setFishDebugInfoActive=function(){this._fishDebugInfoActive=!this._fishDebugInfoActive,l.Instance.emit(u.SET_FISHDEBUGINFO_ACTIVE,this._fishDebugInfoActive)},s.setCollisionDebugInfoActive=function(){this._collisionDebugInfoActive=!this._collisionDebugInfoActive,l.Instance.emit(u.SET_COLLISIONDEBUGINFO_ACTIVE,this._collisionDebugInfoActive)},s.spawnSpecialFish=function(n,o){var i=+o;if(v.IsSpecialFish(i)){var t=0;switch(i){case F.Through:t=25401;break;case F.Meteor:t=25402;break;case F.Missile:t=25403}f.instance.reqGMComamnd("SpawnFish "+t+" -1 -2")}else console.error("not a special fish, fishKind: "+i)},s.onLoad=function(){this.onRespGMCommandAction=this.onRespGMCommandAction.bind(this),this.onJoinRoomAction=this.onJoinRoomAction.bind(this),f.respGMCommandEvent=this.onRespGMCommandAction,l.Instance.on(u.JOIN_ROOM,this.onJoinRoomAction),l.Instance.on(u.OPEN_GOTCHA_FISH_FOR_DEBUG,this.onOpenGotchaFish),l.Instance.on(u.GM_SPECIFY_ROOM,this.onGMSpecifyRoom)},s.onDestroy=function(){l.Instance.off(u.OPEN_GOTCHA_FISH_FOR_DEBUG,this.onOpenGotchaFish),l.Instance.off(u.JOIN_ROOM,this.onJoinRoomAction),l.Instance.off(u.GM_SPECIFY_ROOM,this.onGMSpecifyRoom),f.respGMCommandEvent=null},s.onRespGMCommandAction=function(n){console.warn(n.Command+", "+n.IsSuccess+", "+n.Result)},s.onJoinRoomAction=function(n){this._roomNo.string=n.roomInfo.RoomNo.toString(),this.tickPingHelper.onJoinRoomAction()},s.onOpenGotchaFish=function(n){var o=this,i=n.split(" "),t=new p;if(t.FishID=+i[1],t.FishAttribute=g.Instance.Data.get(t.FishID),t.FishAttribute.FishKind==F.Gotcha){var e=new d;e.FishRank=5,e.Length=3e3,e.Weight=9e4,e.Score=1e3*+i[2],t.CatchInfo=e,I.Instance.GetPrefab(t.FishID).then((function(n){var i=r(n),e=function(){i.active=!1,i.destroy()};e=e.bind(o);var s=i.getComponent(b);s.switchFishState(!0),s.setScale(t.FishAttribute.Scale),i.active=!0,s.SetFishCatchInfo(t,!0,e),s.gotFishByCatchInfo()}))}else console.error("[DebugUIController:onOpenGotchaFish] FishType("+t.FishID+") is not Gotcha Fish.")},s.onGMSpecifyRoom=function(n){var o=n.replace("SpecifyRoom ",""),i=window.location.href,t=new URL(i),e=t.searchParams;e.set("room",o),t.search=e.toString(),window.location.href=t.toString()},o}(h)).prototype,"_roomNo",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=o(M.prototype,"tickPingHelper",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=M))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/DirectionHelper.ts",["cc","./Utility.ts"],(function(i){var n,t;return{setters:[function(i){n=i.cclegacy},function(i){t=i.Utility}],execute:function(){var e;n._RF.push({},"751daJIvRtKArxDwL4iXI1f","DirectionHelper",void 0);var r=i("DirectionHelper",function(){function i(){}return i.ReflectDirection=function(n,t){return(n-t)%this.HalfDirection==0?i.DirectionConstrain(this.HalfDirection+n):i.DirectionConstrain(this.MaxDirection-n+2*t)},i.VectorToDirection=function(n,t){var e=(0!=n||0!=t?Math.atan2(t,n):0)/i.DirectionToRadian;return i.DirectionConstrain(e)},i.DirectionToVector=function(n){return i._dirToVec[i.DirectionConstrain(n)]},i.DirectionConstrain=function(n){return Math.round(i.Constrain(n,i.MinDirection,i.MaxDirection))},i.ReflectX=function(n){return(i.MaxDirection-n)%i.MaxDirection},i.ReflectY=function(n){return(i.MaxDirection-n+i.HalfDirection)%i.MaxDirection},i.Constrain=function(i,n,e){var r=Math.abs(e-n),o=t.ToSigFigsValue(i%r);return o<n?o+r:o>e?o-r:o},i.CalculatePose=function(n,e,r,o,c,a,D,u){var f=i.DirectionToVector(r),s=f[0],l=f[1],M=t.ToSigFigsValue(c*o);for(n+=s*M,e+=l*M;R(n,e,a,D,u);){var g=T(n,e,r,a,D,u);n=g[0],e=g[1],r=g[2]}return[t.ToSigFigsValue(n),t.ToSigFigsValue(e),r];function R(i,n,t,e,r){return i+t>e||i-t<0||n+t>r||n-t<0}function T(n,t,e,r,o,c){return n+r>o?(n=2*(o-r)-n,e=i.ReflectX(e)):n-r<0&&(n=2*r-n,e=i.ReflectX(e)),t+r>c?(t=2*(c-r)-t,e=i.ReflectY(e)):t-r<0&&(t=2*r-t,e=i.ReflectY(e)),[n,t,e]}},i}());e=r,r.DigitPrecision=5,r.MinDirection=0,r.MaxDirection=36,r.HalfDirection=e.MaxDirection/2,r.DegreePerDirection=360/e.MaxDirection,r.DegreeToRadian=Math.PI/180,r.DirectionToRadian=e.DegreePerDirection*e.DegreeToRadian,r._dirToVec=[],function(){for(var i=e.MinDirection;i<e.MaxDirection;++i){var n=i*e.DirectionToRadian,t=Math.sin(n),r=Math.cos(n);t=+t.toFixed(e.DigitPrecision),r=+r.toFixed(e.DigitPrecision),e._dirToVec[i]=[t,r]}}(),n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectPoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pool.ts","./SingletonComponent.ts","./FxNode.ts"],(function(t){var o,e,i,a,n,r,c,l,h,s,f,u,g;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,i=t.inheritsLoose,a=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose,r=t.createClass},function(t){c=t.cclegacy,l=t._decorator,h=t.CCInteger},function(t){s=t.Pool,f=t.PoolInstance},function(t){u=t.SingletonComponent},function(t){g=t.FxNode}],execute:function(){var p,G,b,P,m,_,y,E,R,v,M,w,D,F,I,S;c._RF.push({},"3f49e/03L9JJ60DvG3N9bmH","EffectPoolManager",void 0);var d=l.ccclass,z=l.property,N=t("GotchaEffectSetting",(p=d("GotchaEffectSetting"),G=z(h),b=z(s),p((_=o((m=function(){e(this,"FishGroupID",_,this),e(this,"GotchaRoot",y,this)}).prototype,"FishGroupID",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=o(m.prototype,"GotchaRoot",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=m))||P));t("EffectPoolManager",(E=d("EffectPoolManager"),R=z(s),v=z(s),M=z([N]),E((F=o((D=function(t){function o(){for(var o,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return o=t.call.apply(t,[this].concat(n))||this,e(o,"smallGotchaRoot",F,a(o)),e(o,"bigGotchaRoot",I,a(o)),e(o,"gotchaEffectSettings",S,a(o)),o._smallGotchaPool=null,o._bigGotchaPool=null,o._gotchaEffectMap=new Map,o}i(o,t);var c=o.prototype;return c.GetGotchaPoolByGroupID=function(t){return this._gotchaEffectMap.has(t)?this._gotchaEffectMap.get(t):this._bigGotchaPool},c.start=function(){this.init()},c.init=function(){this._gotchaEffectMap.clear();for(var t,o=n(this.gotchaEffectSettings);!(t=o()).done;){var e=t.value;if(!this._gotchaEffectMap.has(e.FishGroupID)){var i=e.GotchaRoot.NewPool(g,f);this._gotchaEffectMap.set(e.FishGroupID,i)}}this.smallGotchaRoot&&(this._smallGotchaPool=this.smallGotchaRoot.NewPool(g,f)),this.bigGotchaRoot&&(this._bigGotchaPool=this.bigGotchaRoot.NewPool(g,f))},r(o,[{key:"SmallGotchaPool",get:function(){return this._smallGotchaPool}},{key:"BigGotchaPool",get:function(){return this._bigGotchaPool}}]),o}(u)).prototype,"smallGotchaRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=o(D.prototype,"bigGotchaRoot",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=o(D.prototype,"gotchaEffectSettings",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=D))||w));c._RF.pop()}}}));

System.register("chunks:///_virtual/EnumWrapper.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"353f1kEwjlBK5lR5ZoYFfeU","EnumWrapper",void 0);e("EnumWrapper",function(){function e(){this.FishStopReasopn=void 0,this.WaveKind=void 0,this.FishStopReasopn=0,this.WaveKind=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeInt32(r.FishStopReasopn),e.writeInt32(r.WaveKind)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(2==n)a.FishStopReasopn=r.readInt32(),a.WaveKind=r.readInt32();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.FishStopReasopn=r.readInt32(),1==n)return a;if(a.WaveKind=r.readInt32(),2==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/EventDataFrameInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./FrameInfo.ts"],(function(e){var r,n,t,i;return{setters:[function(e){r=e.cclegacy},function(e){n=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){i=e.FrameInfo}],execute:function(){r._RF.push({},"bb6cbEGKUtH678uwQRMBkTg","EventDataFrameInfo",void 0);e("EventDataFrameInfo",function(){function e(){this.FrameInfo=void 0,this.FrameInfo=null}return e.serialize=function(e){var r=n.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),i.serializeCore(e,r.FrameInfo)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=n.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,n){r.writeArray(n,(function(r,n){return e.serializeCore(r,n)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var n=r.tryReadObjectHeader(),t=n[0],a=n[1];if(!t)return null;var o=new e;if(1==a)o.FrameInfo=i.deserializeCore(r);else{if(a>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.FrameInfo=i.deserializeCore(r),1==a)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/EventDataSilentUpdateTime.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var t,r,i;return{setters:[function(e){t=e.cclegacy},function(e){r=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){t._RF.push({},"1e48aewKCxCHYqsgT5dtNO9","EventDataSilentUpdateTime",void 0);e("EventDataSilentUpdateTime",function(){function e(){this.SilentUpdateFixedUpdateCount=void 0,this.UnlockJoinRoomFixedUpdateCount=void 0,this.SilentUpdateFixedUpdateCount=0,this.UnlockJoinRoomFixedUpdateCount=0}return e.serialize=function(e){var t=r.getSharedInstance();return this.serializeCore(t,e),t.toArray()},e.serializeCore=function(e,t){null!=t?(e.writeObjectHeader(2),e.writeUint32(t.SilentUpdateFixedUpdateCount),e.writeUint32(t.UnlockJoinRoomFixedUpdateCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var t=r.getSharedInstance();return this.serializeArrayCore(t,e),t.toArray()},e.serializeArrayCore=function(t,r){t.writeArray(r,(function(t,r){return e.serializeCore(t,r)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(t){var r=t.tryReadObjectHeader(),i=r[0],n=r[1];if(!i)return null;var a=new e;if(2==n)a.SilentUpdateFixedUpdateCount=t.readUint32(),a.UnlockJoinRoomFixedUpdateCount=t.readUint32();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.SilentUpdateFixedUpdateCount=t.readUint32(),1==n)return a;if(a.UnlockJoinRoomFixedUpdateCount=t.readUint32(),2==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(t){return t.readArray((function(t){return e.deserializeCore(t)}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ExitRequest.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"9446eJH70tFG7lfYwD+QXOB","ExitRequest",void 0);e("ExitRequest",function(){function e(){}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?e.writeObjectHeader(0):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(0==n);else{if(n>0)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ExtendBGController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./BGConfig.ts"],(function(e){var t,n,r,i,o,a,c,s,u,p,l,f,d,h,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Sprite,p=e.tween,l=e.UIOpacity,f=e.Component},function(e){d=e.MessageManager},function(e){h=e.MessageCmd},function(e){S=e.BGConfig}],execute:function(){var g,I,G,C,x,B,y,E,L;c._RF.push({},"0ccdaIZWu5LF56mS/WHCcHA","ExtendBGController",void 0);var _=s.ccclass,v=s.property;e("ExtendBGController",(g=_("ExtendBGController"),I=v(u),G=v(u),C=v(u),g((y=t((B=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"currentSprite",y,i(t)),r(t,"nextSprite",E,i(t)),r(t,"loadingSprite",L,i(t)),t._curentBGIndex=0,t}n(t,e);var c=t.prototype;return c.onLoad=function(){d.Instance.on(h.OPEN_LOADING_UISCENE,this.onOpenLoadingUIScene,this),d.Instance.on(h.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene,this)},c.onDestroy=function(){d.Instance.off(h.OPEN_LOADING_UISCENE,this.onOpenLoadingUIScene,this),d.Instance.off(h.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene,this)},c.refreshBGStep=function(){var e=o(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,this._curentBGIndex=n,e.next=4,S.instance().getExtendBG(this._curentBGIndex);case 4:this.nextSprite.spriteFrame=e.sent,this.FadeInBG(this.nextSprite),this.FadeOutBG(this.currentSprite);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.FadeInBG=function(e){p(e.getComponent(l)).to(1,{opacity:255}).start()},c.FadeOutBG=function(e){var t=this;p(e.getComponent(l)).to(1,{opacity:0}).call((function(){t.SwapBG()})).start()},c.SwapBG=function(){var e=this.nextSprite;this.nextSprite=this.currentSprite,this.currentSprite=e},c.onOpenLoadingUIScene=function(){this.loadingSprite.node.active=!0},c.onCloseLoadingUIScene=function(){this.loadingSprite.node.active=!1},t}(f)).prototype,"currentSprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(B.prototype,"nextSprite",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(B.prototype,"loadingSprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=B))||x));c._RF.pop()}}}));

System.register("chunks:///_virtual/FetchingController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./Utility2.ts"],(function(i){var n,t,e,o,s,c,r,l,h,a,u;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){s=i.cclegacy,c=i._decorator,r=i.EventHandler,l=i.Component},function(i){h=i.MessageManager},function(i){a=i.MessageCmd},function(i){u=i.Utility}],execute:function(){var g,p,_,f,C,m,H,w;s._RF.push({},"ac351wL2aZO7oL5jJ0NhfXo","FetchingController",void 0);var F=c.ccclass,b=c.property;i("FetchingController",(g=F("FetchingController"),p=b([r]),_=b([r]),g((m=n((C=function(i){function n(){for(var n,t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return n=i.call.apply(i,[this].concat(s))||this,e(n,"minShowTime",m,o(n)),e(n,"onOpen",H,o(n)),e(n,"onClose",w,o(n)),n._isShowing=!1,n._waitingClose=!1,n._timer=0,n._callback=null,n}t(n,i);var s=n.prototype;return s.onLoad=function(){this.onOpenFetchingHintAction=this.onOpenFetchingHintAction.bind(this),this.onCloseFetchingHintAction=this.onCloseFetchingHintAction.bind(this),h.Instance.on(a.OPEN_FETCHING_HINT,this.onOpenFetchingHintAction),h.Instance.on(a.CLOSE_FETCHING_HINT,this.onCloseFetchingHintAction)},s.update=function(i){this._isShowing&&(this._timer+=i,this._timer>=this.minShowTime&&this._waitingClose&&this.close())},s.onDestroy=function(){h.Instance.off(a.CLOSE_FETCHING_HINT,this.onCloseFetchingHintAction),h.Instance.off(a.OPEN_FETCHING_HINT,this.onOpenFetchingHintAction)},s.onOpenFetchingHintAction=function(){this._isShowing?(this._waitingClose=!1,this._timer=0):this.open()},s.onCloseFetchingHintAction=function(i){this._isShowing&&(this._callback=i,this._timer>=this.minShowTime?this.close():this._waitingClose=!0)},s.open=function(){this._isShowing=!0,this._waitingClose=!1,this._timer=0,u.emitEventHandlers(this.onOpen)},s.close=function(){var i;this._isShowing=!1,null==(i=this._callback)||i.call(this),this._callback=null,u.emitEventHandlers(this.onClose)},n}(l)).prototype,"minShowTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),H=n(C.prototype,"onOpen",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=n(C.prototype,"onClose",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=C))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/FireBouncy.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"9d9b3fYzDpG2YNhvRsF/Kp3","FireBouncy",void 0);e("FireBouncy",function(){function e(){this.Direction=void 0,this.Direction=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeInt32(r.Direction)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.Direction=r.readInt32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Direction=r.readInt32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FireLock.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"9a6e5Dn5DxE9Y0yPz2L1CBC","FireLock",void 0);e("FireLock",function(){function e(){this.FishID=void 0,this.FishID=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeUint32(r.FishID)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.FishID=r.readUint32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.FishID=r.readUint32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FireMeteor.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./Vector2.ts"],(function(e){var r,i,t,n;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){n=e.Vector2}],execute:function(){r._RF.push({},"46774ObSt9GjbEawqDuAzMG","FireMeteor",void 0);e("FireMeteor",function(){function e(){this.Direction=void 0,this.Position=void 0,this.Direction=0,this.Position=null}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeInt32(r.Direction),n.serializeCore(e,r.Position)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],o=i[1];if(!t)return null;var a=new e;if(2==o)a.Direction=r.readInt32(),a.Position=n.deserializeCore(r);else{if(o>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Direction=r.readInt32(),1==o)return a;if(a.Position=n.deserializeCore(r),2==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FireMissile.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./Vector2.ts"],(function(e){var r,i,t,n;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){n=e.Vector2}],execute:function(){r._RF.push({},"7d70bYNuUJHhq324+iU9PPJ","FireMissile",void 0);e("FireMissile",function(){function e(){this.Direction=void 0,this.Position=void 0,this.Direction=0,this.Position=null}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeInt32(r.Direction),n.serializeCore(e,r.Position)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],o=i[1];if(!t)return null;var a=new e;if(2==o)a.Direction=r.readInt32(),a.Position=n.deserializeCore(r);else{if(o>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Direction=r.readInt32(),1==o)return a;if(a.Position=n.deserializeCore(r),2==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FireNormal.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"fb28640ezJFZ79PIqn56Uyy","FireNormal",void 0);e("FireNormal",function(){function e(){this.Direction=void 0,this.Direction=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeInt32(r.Direction)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.Direction=r.readInt32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Direction=r.readInt32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FireThrough.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(r){var e,i,t;return{setters:[function(r){e=r.cclegacy},function(r){i=r.MemoryPackWriter},function(r){t=r.MemoryPackReader}],execute:function(){e._RF.push({},"73c45l40YVBnr4aJSHhbAQS","FireThrough",void 0);r("FireThrough",function(){function r(){this.Direction=void 0,this.Direction=0}return r.serialize=function(r){var e=i.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(1),r.writeInt32(e.Direction)):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=i.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,i){e.writeArray(i,(function(e,i){return r.serializeCore(e,i)}))},r.deserialize=function(r){return this.deserializeCore(new t(r))},r.deserializeCore=function(e){var i=e.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new r;if(1==n)a.Direction=e.readInt32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Direction=e.readInt32(),1==n)return a}return a},r.deserializeArray=function(r){return this.deserializeArrayCore(new t(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Fish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishInfo.ts","./ControllerState.ts","./Action2.ts","./PathAttributeHelper.ts","./PathSpeedHelper.ts","./DirectionHelper.ts","./Utility.ts"],(function(t){var i,e,s,n,o,h,a,r,f,u,d;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){n=t.cclegacy},function(t){o=t.FishInfo},function(t){h=t.ControllerState},function(t){a=t.ActionWithOne},function(t){r=t.PathAttributeHelper},function(t){f=t.PathSpeedHelper},function(t){u=t.DirectionHelper},function(t){d=t.Utility}],execute:function(){n._RF.push({},"37fe0RulOdFdYlTZSr0DXoi","Fish",void 0),t("Fish",function(t){function n(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(i=t.call.apply(t,[this].concat(s))||this).Pos={x:0,y:0},i.OnStartUpdate=new a,i.OnCatch=new a,i.OnDespawn=new a,i._destroyUpdateCount=void 0,i._path=void 0,i._pathSpeed=void 0,i._info=void 0,i._collision=void 0,i._fishOdds=void 0,i._cos=0,i._sin=0,i}i(n,t);var o=n.prototype;return o.Spawn=function(t,i,e,s,n,o,a,f,u){this.State=h.Spawn,this.WaveKindValue=t,this.WaveInfoID=i.InfoID,this.FishID=e,this.Rank=a.FishRank,this._info=i,this._destroyUpdateCount=this._info.StartTimeFixedUpdateCounts+this._info.LifeTimeFixedUpdateCounts,this._path=f,this._pathSpeed=u,this._collision=o,this._fishOdds=a,this.OffsetX=r.GetStartOffsetX(this._path,s),this.OffsetY=r.GetStartOffsetY(this._path,n),this.OffsetX*=.5,this.OffsetY*=.5},o.SpawnByFishInfo=function(t,i,e,s,n,o){this.State=t.State,this.WaveKindValue=t.WaveKindValue,this.WaveInfoID=t.WaveInfoID,this.FishID=t.FishID,this.Rank=t.Rank,this.OffsetX=t.OffsetX,this.OffsetY=t.OffsetY,this.UpdateCount=t.UpdateCount,this._info=o,this._destroyUpdateCount=this._info.StartTimeFixedUpdateCounts+this._info.LifeTimeFixedUpdateCounts,this._path=s,this._pathSpeed=n,this._collision=i,this._fishOdds=e,this.UpdateTransform()},o.Despawn=function(){this.State=h.None,this.UpdateCount=0,this.OnDespawn.invoke(this)},o.Start=function(){this.State==h.Spawn&&(this.State=h.WaitForStart,this.UpdateCount=-1)},o.Catch=function(){this.State=h.Catch,this.OnCatch.invoke(this)},o.FixedUpdate=function(){if(null!=this._info&&this.State!=h.None&&this.State!=h.Spawn&&this.State!=h.Catch){if(this.UpdateCount++,this.State==h.WaitForStart){if(this.UpdateCount!=this._info.StartTimeFixedUpdateCounts)return;this.State=h.FixedUpdate,this.OnStartUpdate.invoke(this.SerialNumber)}if(this.State==h.FixedUpdate){if(this.UpdateCount==this._destroyUpdateCount)return void(this.State=h.None);this.UpdateTransform()}}},o.HitTest=function(t,i,e){return!(Math.abs(t-this.Pos.x)>e+this._collision.RoughRadius)&&(!(Math.abs(i-this.Pos.y)>e+this._collision.RoughRadius)&&this.InteralHitTest(t,i,e))},o.InteralHitTest=function(t,i,s){for(var n,o=e(this._collision.CollisiblePoints);!(n=o()).done;){var h=n.value,a=d.ToSigFigsValue(h.X*this._cos-h.Y*this._sin),r=d.ToSigFigsValue(h.X*this._sin+h.Y*this._cos),f=t-(this.Pos.x+a),u=i-(this.Pos.y+r);if(d.ToSigFigsValue(f*f+u*u)<=d.ToSigFigsValue((h.Radius+s)*(h.Radius+s)))return!0}return!1},o.UpdateTransform=function(){var t=(this.UpdateCount-this._info.StartTimeFixedUpdateCounts)/this._info.LifeTimeFixedUpdateCounts,i=f.GetPositionInterpolation(this._pathSpeed,t)/1e6,e=r.GetPositionInterpolation_v2(this._path,i,this.Pos);this.Pos.x/=n.FishPathRatioOffset,this.Pos.y/=n.FishPathRatioOffset,this.Pos.x+=this.OffsetX,this.Pos.y+=this.OffsetY,this.Pos.x=d.ToSigFigsValue(this.Pos.x),this.Pos.y=d.ToSigFigsValue(this.Pos.y),this._cos=0,this._sin=this._path.SinTheta[e]>0?1:-1},s(n,[{key:"WaveKind",get:function(){return this.WaveKindValue}},{key:"lifeUpdateCount",get:function(){return this._info.LifeTimeFixedUpdateCounts}},{key:"path",get:function(){return this._path}},{key:"Collision",get:function(){return this._collision}},{key:"FishOdds",get:function(){return this._fishOdds}},{key:"WaveInfo",get:function(){return this._info}},{key:"PathIndex",get:function(){return this._info.PathIndex}},{key:"PathSpeedIndex",get:function(){return this._info.PathSpeedIndex}},{key:"PathSpeed",get:function(){return this._pathSpeed}},{key:"Cos",get:function(){return this._cos}},{key:"Sin",get:function(){return this._sin}},{key:"Direction",get:function(){return u.VectorToDirection(this.Cos,this.Sin)}},{key:"startUpdateCount",get:function(){return this._info.StartTimeFixedUpdateCounts}},{key:"DestroyUpdateCount",get:function(){return this._destroyUpdateCount}}]),n}(o)).FishPathRatioOffset=1500,n._RF.pop()}}}));

System.register("chunks:///_virtual/FishAttribute.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(r){var e,i,t;return{setters:[function(r){e=r.cclegacy},function(r){i=r.MemoryPackWriter},function(r){t=r.MemoryPackReader}],execute:function(){e._RF.push({},"95a7dWeKzhPJJBNmmNnLEdM","FishAttribute",void 0);r("FishAttribute",function(){function r(){this.ID=void 0,this.LockGroup=void 0,this.FishKind=void 0,this.LockIcon=void 0,this.PrefabName=void 0,this.FishName=void 0,this.Scale=void 0,this.SwimObjOrder=void 0,this.DeathObjOrder=void 0,this.FishInfo01=void 0,this.FishInfo02=void 0,this.FishInfo03=void 0,this.ID=0,this.LockGroup=0,this.FishKind=0,this.LockIcon="",this.PrefabName="",this.FishName="",this.Scale=0,this.SwimObjOrder=0,this.DeathObjOrder=0,this.FishInfo01="",this.FishInfo02="",this.FishInfo03=""}return r.serialize=function(r){var e=i.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(12),r.writeInt32(e.ID),r.writeInt32(e.LockGroup),r.writeInt32(e.FishKind),r.writeString(e.LockIcon),r.writeString(e.PrefabName),r.writeString(e.FishName),r.writeFloat64(e.Scale),r.writeInt32(e.SwimObjOrder),r.writeInt32(e.DeathObjOrder),r.writeString(e.FishInfo01),r.writeString(e.FishInfo02),r.writeString(e.FishInfo03)):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=i.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,i){e.writeArray(i,(function(e,i){return r.serializeCore(e,i)}))},r.deserialize=function(r){return this.deserializeCore(new t(r))},r.deserializeCore=function(e){var i=e.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new r;if(12==n)a.ID=e.readInt32(),a.LockGroup=e.readInt32(),a.FishKind=e.readInt32(),a.LockIcon=e.readString(),a.PrefabName=e.readString(),a.FishName=e.readString(),a.Scale=e.readFloat64(),a.SwimObjOrder=e.readInt32(),a.DeathObjOrder=e.readInt32(),a.FishInfo01=e.readString(),a.FishInfo02=e.readString(),a.FishInfo03=e.readString();else{if(n>12)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.ID=e.readInt32(),1==n)return a;if(a.LockGroup=e.readInt32(),2==n)return a;if(a.FishKind=e.readInt32(),3==n)return a;if(a.LockIcon=e.readString(),4==n)return a;if(a.PrefabName=e.readString(),5==n)return a;if(a.FishName=e.readString(),6==n)return a;if(a.Scale=e.readFloat64(),7==n)return a;if(a.SwimObjOrder=e.readInt32(),8==n)return a;if(a.DeathObjOrder=e.readInt32(),9==n)return a;if(a.FishInfo01=e.readString(),10==n)return a;if(a.FishInfo02=e.readString(),11==n)return a;if(a.FishInfo03=e.readString(),12==n)return a}return a},r.deserializeArray=function(r){return this.deserializeArrayCore(new t(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FishAttribute2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishAttribute.ts"],(function(a){var t,r,o;return{setters:[function(a){t=a.createForOfIteratorHelperLoose},function(a){r=a.cclegacy},function(a){o=a.FishAttribute}],execute:function(){var e;r._RF.push({},"dea82ULd5RGUJYOypjdguVV","FishAttribute",void 0);a("FishLayer",function(a){return a[a.Normal=0]="Normal",a[a.Small=1]="Small",a[a.Big=2]="Big",a[a.Count=3]="Count",a}({}));var i=a("FishAttributeData",function(){function a(){this.Data=new Map,this.DataArray=[],this.DataGroup=new Map}var r=a.prototype;return r.LoadFromJsonAsset=function(a){this.Data.clear(),this.DataGroup.clear();var t=0;for(var r in a.Data){var e=a.Data[r],i=new o;i.ID=+e.ID,i.LockGroup=e.LockGroup,i.FishKind=+e.FishKind,i.LockIcon=e.LockIcon,i.PrefabName=e.PrefabName,i.FishName=e.FishName,i.Scale=+e.Scale,i.SwimObjOrder=+e.SwimObjOrder,i.DeathObjOrder=+e.DeathObjOrder,i.FishInfo01=e.FishInfo01,i.FishInfo02=e.FishInfo02,i.FishInfo03=e.FishInfo03,this.Data.set(i.ID,i),this.DataArray[t]=i,this.DataGroup.has(i.LockGroup)||this.DataGroup.set(i.LockGroup,[]),this.DataGroup.get(i.LockGroup).push(i),t++}},r.LoadFromMemoryPack=function(a){this.Data.clear(),this.DataGroup.clear();for(var r,e=0,i=t(a);!(r=i()).done;){var s=r.value,n=new o;n.ID=+s.ID,n.LockGroup=s.LockGroup,n.FishKind=+s.FishKind,n.LockIcon=s.LockIcon,n.PrefabName=s.PrefabName,n.FishName=s.FishName,n.Scale=+s.Scale,n.SwimObjOrder=+s.SwimObjOrder,n.DeathObjOrder=+s.DeathObjOrder,n.FishInfo01=s.FishInfo01,n.FishInfo02=s.FishInfo02,n.FishInfo03=s.FishInfo03,this.Data.set(n.ID,n),this.DataArray[e]=n,this.DataGroup.has(n.LockGroup)||this.DataGroup.set(n.LockGroup,[]),this.DataGroup.get(n.LockGroup).push(n),e++}},a}());e=i,i.Instance=new e,r._RF.pop()}}}));

System.register("chunks:///_virtual/FishCollision.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collision.ts","./FishCollision2.ts"],(function(i){var o,a,s,n;return{setters:[function(i){o=i.createForOfIteratorHelperLoose},function(i){a=i.cclegacy},function(i){s=i.Collision},function(i){n=i.FishCollision}],execute:function(){var t;a._RF.push({},"898f8iOKmpM7rflPMKtid2F","FishCollision",void 0);var u=i("FishCollisionData",function(){function i(){this.Data=new Map}var a=i.prototype;return a.LoadFromJsonAsset=function(i){var o=this;this.Data.clear();var a=function(){var a=i[t],u=new n;u.Scale=a.Scale,a.CollisiblePoints.forEach((function(i){var o=new s;o.X=-i.LocalPosition.Y/1e3*a.Scale,o.Y=i.LocalPosition.X/1e3*a.Scale,o.Radius=i.Radius*a.Scale,o.RadiusSqr=o.Radius*o.Radius,u.CollisiblePoints.push(o);var n=Math.sqrt(o.X*o.X+o.Y*o.Y)+o.Radius;u.RoughRadius<n&&(u.RoughRadius=n)})),u.RoughRadiusSqr=u.RoughRadius*u.RoughRadius,o.Data.set(+t,u)};for(var t in i)a()},a.LoadFromMemoryPack=function(i){var a=this;this.Data.clear();for(var t,u=function(){var i=t.value,o=i[0],u=i[1],e=new n;e.RoughRadius=u.RoughRadius,e.RoughRadiusSqr=u.RoughRadiusSqr,u.CollisiblePoints.forEach((function(i){var o=new s;o.X=i.X,o.Y=i.Y,o.Radius=i.Radius,o.RadiusSqr=i.RadiusSqr,e.CollisiblePoints.push(o)})),a.Data.set(o,e)},e=o(i.entries());!(t=e()).done;)u()},i}());t=u,u.Instance=new t,a._RF.pop()}}}));

System.register("chunks:///_virtual/FishCollision2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./Collision.ts"],(function(r){var e,i,t,o;return{setters:[function(r){e=r.cclegacy},function(r){i=r.MemoryPackWriter},function(r){t=r.MemoryPackReader},function(r){o=r.Collision}],execute:function(){e._RF.push({},"b98a0oRvsJDl4HywIkFJV+r","FishCollision",void 0);r("FishCollision",function(){function r(){this.ID=void 0,this.CollisiblePoints=void 0,this.RoughRadius=void 0,this.RoughRadiusSqr=void 0,this.Scale=void 0,this.ID=0,this.CollisiblePoints=null,this.RoughRadius=0,this.RoughRadiusSqr=0,this.Scale=0}return r.serialize=function(r){var e=i.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(5),r.writeInt32(e.ID),r.writeArray(e.CollisiblePoints,(function(r,e){return o.serializeCore(r,e)})),r.writeFloat64(e.RoughRadius),r.writeFloat64(e.RoughRadiusSqr),r.writeFloat64(e.Scale)):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=i.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,i){e.writeArray(i,(function(e,i){return r.serializeCore(e,i)}))},r.deserialize=function(r){return this.deserializeCore(new t(r))},r.deserializeCore=function(e){var i=e.tryReadObjectHeader(),t=i[0],a=i[1];if(!t)return null;var n=new r;if(5==a)n.ID=e.readInt32(),n.CollisiblePoints=e.readArray((function(r){return o.deserializeCore(r)})),n.RoughRadius=e.readFloat64(),n.RoughRadiusSqr=e.readFloat64(),n.Scale=e.readFloat64();else{if(a>5)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return n;if(n.ID=e.readInt32(),1==a)return n;if(n.CollisiblePoints=e.readArray((function(r){return o.deserializeCore(r)})),2==a)return n;if(n.RoughRadius=e.readFloat64(),3==a)return n;if(n.RoughRadiusSqr=e.readFloat64(),4==a)return n;if(n.Scale=e.readFloat64(),5==a)return n}return n},r.deserializeArray=function(r){return this.deserializeArrayCore(new t(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FishData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"4f003uRPMBO14XrVTyDdmu2","FishData",void 0);e("FishData",function(){function e(){this.FishType=void 0,this.Probability=void 0,this.FishType=0,this.Probability=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeInt32(r.FishType),e.writeInt32(r.Probability)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(2==n)a.FishType=r.readInt32(),a.Probability=r.readInt32();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.FishType=r.readInt32(),1==n)return a;if(a.Probability=r.readInt32(),2==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FishDebugInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,n,o,r,s,l,a;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,l=i.Label,a=i.Component}],execute:function(){var u,c,h,f,p;r._RF.push({},"0dad9KHEOZHRZuRoMAZJrcv","FishDebugInfo",void 0);var d=s.ccclass,b=s.property;i("FishDebugInfo",(u=d("FishDebugInfo"),c=b({type:l,visible:!0}),u((p=e((f=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=i.call.apply(i,[this].concat(r))||this,n(e,"_idLabel",p,o(e)),e._fish=null,e}t(e,i);var r=e.prototype;return r.setInfo=function(i){this._fish=i,this._idLabel.string=this._fish.fishSerialNumber.toString()},r.update=function(i){null!=this._fish&&this._fish.node.active&&this.node.setWorldPosition(this._fish.node.worldPosition)},e}(a)).prototype,"_idLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/FishDebugInfoGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishPoolNode.ts","./FishPoolManager.ts","./FishDebugInfo.ts"],(function(e){var i,n,t,s,o,h;return{setters:[function(e){i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,t=e.instantiate},function(e){s=e.FishPoolNode},function(e){o=e.FishPoolManager},function(e){h=e.FishDebugInfo}],execute:function(){n._RF.push({},"e2277Y1qARA75A5HM0ZHoZU","FishDebugInfoGenerator",void 0);e("FishDebugInfoGenerator",function(){function e(e){this._setting=null,this._fishDebugInfoActive=!1,this._fishDebugInfoMap=new Map,this._setting=e,this._setting.onSpawnFishNode.add(this.onSpawnFishNodeAction.bind(this)),this._setting.onDespawnFish.add(this.onDespawnFishAction.bind(this)),this._setting.onSetFishDebugInfoActive.add(this.onSetFishDebugInfoActiveAction.bind(this))}var n=e.prototype;return n.onSpawnFishNodeAction=function(e){if(this._fishDebugInfoActive){var i=e.getComponent(s);null!=i&&this.spawnFishDebugInfo(i)}},n.spawnFishDebugInfo=function(e){var i=t(this._setting.fishDebugInfoPrefab),n=i.getComponent(h);n.setInfo(e),i.setParent(this._setting.fishDebugInfoRoot),i.setPosition(-1e3,-1e3),i.active=!0,this._fishDebugInfoMap.set(e.fishSerialNumber,n)},n.onDespawnFishAction=function(e){if(this._fishDebugInfoActive){var i=this._fishDebugInfoMap.get(e.SerialNumber);null!=i&&(this._fishDebugInfoMap.delete(e.SerialNumber),i.node.destroy())}},n.onSetFishDebugInfoActiveAction=function(e){if(this._fishDebugInfoActive=e,this._fishDebugInfoActive)for(var n,t=i(o.instance().SpawnedFish);!(n=t()).done;){var s=n.value,h=o.instance().GetSpawnedFish(s);this.spawnFishDebugInfo(h)}else{for(var f,a=i(this._fishDebugInfoMap);!(f=a()).done;){f.value[1].node.destroy()}this._fishDebugInfoMap.clear()}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/FishGameAck.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"b0fbcHwvGZM5LwCPuMksNkJ","FishGameAck",void 0);e("FishGameAck",{Success:0,Fail:1,AlreadyInRoom:2,NotInRoom:3,WrongPassword:4,WrongNo:5,RoomFull:6,AllRoomFull:7,CoinInsufficient:8,DbQueryFail:9,ArgumentInvalid:10,InQueryCD:11});o._RF.pop()}}}));

System.register("chunks:///_virtual/FishGameAgent.ts",["cc","./EventDataFrameInfo.ts","./EventDataSilentUpdateTime.ts","./ReqDataChangeBet.ts","./ReqDataCheckRoomInfo.ts","./ReqDataExitRoom.ts","./ReqDataFireLockBullet.ts","./ReqDataFireNormalBullet.ts","./ReqDataFireSpecialBullet.ts","./ReqDataGetBetHistory.ts","./ReqDataJoinRoom.ts","./RespDataExitRoom.ts","./RespDataGetBetHistory.ts","./RespDataJoinRoom.ts","./SettingData.ts","./SubsystemCategory.ts","./FishGameCommand.ts"],(function(e){var t,i,n,o,a,s,r,m,c,v,h,l,R,u,d,f,p;return{setters:[function(e){t=e.cclegacy},function(e){i=e.EventDataFrameInfo},function(e){n=e.EventDataSilentUpdateTime},function(e){o=e.ReqDataChangeBet},function(e){a=e.ReqDataCheckRoomInfo},function(e){s=e.ReqDataExitRoom},function(e){r=e.ReqDataFireLockBullet},function(e){m=e.ReqDataFireNormalBullet},function(e){c=e.ReqDataFireSpecialBullet},function(e){v=e.ReqDataGetBetHistory},function(e){h=e.ReqDataJoinRoom},function(e){l=e.RespDataExitRoom},function(e){R=e.RespDataGetBetHistory},function(e){u=e.RespDataJoinRoom},function(e){d=e.SettingData},function(e){f=e.SubsystemCategory},function(e){p=e.FishGameCommand}],execute:function(){t._RF.push({},"02014llEPtLc6jeFgVeGUdb","FishGameAgent",void 0);e("FishGameAgent",function(){var e=t.prototype;function t(e){var t=this;this.respJoinRoomEvent=null,this.respExitRoomEvent=null,this.eventFrameInfoEvent=null,this.eventSettingEvent=null,this.eventSilentUpdateSettingEvent=null,this.eventSilentUpdateTimeEvent=null,this.respGetBetHistoryEvent=null,this._service=null,this.respJoinRoomAction=function(e){var i=u.deserialize(e.buffer);t.respJoinRoomEvent&&t.respJoinRoomEvent(i)},this.respExitRoomAction=function(e){var i=l.deserialize(e.buffer);t.respExitRoomEvent&&t.respExitRoomEvent(i)},this.eventFrameInfoAction=function(e){var n=i.deserialize(e.buffer);t.eventFrameInfoEvent&&t.eventFrameInfoEvent(n)},this.eventSettingAction=function(e){var i=d.deserialize(e.buffer);t.eventSettingEvent&&t.eventSettingEvent(i,e)},this.eventSilentUpdateSettingAction=function(e){var i=d.deserialize(e.buffer);t.eventSilentUpdateSettingEvent&&t.eventSilentUpdateSettingEvent(i,e)},this.eventSilentUpdateTimeAction=function(e){var i=n.deserialize(e.buffer);t.eventSilentUpdateTimeEvent&&t.eventSilentUpdateTimeEvent(i)},this.respGetBetHistoryAction=function(e){console.warn("data size: "+e.length/1e3+" KB, "+e.buffer.byteLength/1e3+" KB");var i=R.deserialize(e.buffer);t.eventSilentUpdateTimeEvent&&t.respGetBetHistoryEvent(i)},this._service=e,this.respJoinRoomAction=this.respJoinRoomAction.bind(this),this.respExitRoomAction=this.respExitRoomAction.bind(this),this.eventFrameInfoAction=this.eventFrameInfoAction.bind(this),this.eventSettingAction=this.eventSettingAction.bind(this),this.eventSilentUpdateSettingAction=this.eventSilentUpdateSettingAction.bind(this),this.eventSilentUpdateTimeAction=this.eventSilentUpdateTimeAction.bind(this),this.respGetBetHistoryAction=this.respGetBetHistoryAction.bind(this),this._service.registerReceiveCommand(f.FishGameManager,p.RespJoinRoom,this.respJoinRoomAction),this._service.registerReceiveCommand(f.FishGameManager,p.RespExitRoom,this.respExitRoomAction),this._service.registerReceiveCommand(f.FishGameManager,p.EventFrameInfo,this.eventFrameInfoAction),this._service.registerReceiveCommand(f.FishGameManager,p.EventSetting,this.eventSettingAction),this._service.registerReceiveCommand(f.FishGameManager,p.EventSilentUpdateSetting,this.eventSilentUpdateSettingAction),this._service.registerReceiveCommand(f.FishGameManager,p.EventSilentUpdateTime,this.eventSilentUpdateTimeAction),this._service.registerReceiveCommand(f.FishGameManager,p.RespGetBetHistory,this.respGetBetHistoryAction)}return e.reqJoinRoom=function(e,t,i){void 0===e&&(e=-1),void 0===t&&(t=0),void 0===i&&(i=0);var n=new h;n.AssignRoomID=e,n.Password=t,n.BetRegionNumber=i;var o=h.serialize(n);this._service.sendCommand(f.FishGameManager,p.ReqJoinRoom,o)},e.reqExitRoom=function(){var e=new s,t=s.serialize(e);this._service.sendCommand(f.FishGameManager,p.ReqExitRoom,t)},e.reqChangeBet=function(e){var t=new o;t.Bet=e;var i=o.serialize(t);this._service.sendCommand(f.FishGameManager,p.ReqChangeBet,i)},e.reqFireNormalBullet=function(e){var t=new m;t.Direction=e;var i=m.serialize(t);this._service.sendCommand(f.FishGameManager,p.ReqFireNormalBullet,i)},e.reqFireLockBullet=function(e){var t=new r;t.FishSerialNumber=e;var i=r.serialize(t);this._service.sendCommand(f.FishGameManager,p.ReqFireLockBullet,i)},e.reqFireSpecialBullet=function(e,t,i){var n=new c;n.Position=e,n.Direction=t,n.BulletKind=i;var o=c.serialize(n);this._service.sendCommand(f.FishGameManager,p.ReqFireSpecialBullet,o)},e.reqCheckRoomInfo=function(e,t){var i=new a;i.FixedUpdateCount=e,i.RoomInfo=t;var n=a.serialize(i);this._service.sendCommand(f.FishGameManager,p.ReqCheckRoomInfo,n)},e.reqRefreshIdleTime=function(){this._service.sendCommand(f.FishGameManager,p.ReqRefreshIdleTime,null)},e.reqGetBetHistory=function(e){var t=v.serialize(e);this._service.sendCommand(f.FishGameManager,p.ReqGetBetHistory,t)},t}());t._RF.pop()}}}));

System.register("chunks:///_virtual/FishGameCommand.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2c6a8O33f9KJ41rw3o2eiSj","FishGameCommand",void 0);e("FishGameCommand",{ReqJoinRoom:1,RespJoinRoom:2,ReqExitRoom:10,RespExitRoom:11,EventFrameInfo:20,ReqChangeBet:30,ReqFireNormalBullet:40,ReqFireLockBullet:45,ReqFireSpecialBullet:50,ReqGetRoomInfo:60,RespGetRoomInfo:61,EventSetting:70,EventSilentUpdateSetting:71,EventSilentUpdateTime:72,ReqCheckRoomInfo:80,ReqRefreshIdleTime:90,ReqGetBetHistory:100,RespGetBetHistory:101});t._RF.pop()}}}));

System.register("chunks:///_virtual/FishHIDManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./BulletKind.ts","./SingletonComponent.ts","./PlayerFortManager.ts","./FishAttribute2.ts","./FishKind.ts","./UIPoolManager.ts","./FishPoolManager.ts"],(function(t){var i,n,e,s,o,a,r,c,h,u,l,F;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator},function(t){s=t.MessageManager},function(t){o=t.MessageCmd},function(t){a=t.BulletKind},function(t){r=t.SingletonComponent},function(t){c=t.PlayerFortManager},function(t){h=t.FishAttributeData},function(t){u=t.FishKind},function(t){l=t.UIPoolManager},function(t){F=t.FishPoolManager}],execute:function(){var f;n._RF.push({},"11f5d8BVRxPz6aFZ7jbC51i","FishHIDManager",void 0);var I=e.ccclass;e.property,t("FishHIDManager",I("FishHIDManager")(f=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._previusFishID=0,i}i(n,t);var e=n.prototype;return e.reset=function(){this._previusFishID=0},e.onLoad=function(){t.prototype.onLoad.call(this),this.reset=this.reset.bind(this),this.onBulletHitFishAction=this.onBulletHitFishAction.bind(this),s.Instance.on(o.ON_BULLET_HIT_FISH,this.onBulletHitFishAction),s.Instance.off(o.ON_SWITCH_FORT,this.onSwitchFortAction)},e.onDestroy=function(){s.Instance.off(o.ON_SWITCH_FORT,this.onSwitchFortAction),s.Instance.off(o.ON_BULLET_HIT_FISH,this.onBulletHitFishAction),t.prototype.onDestroy.call(this)},e.onBulletHitFishAction=function(t,i){if(c.instance().checkMainFort(t.FortID)&&F.instance().checkSpawnedFish(i.SerialNumber))switch(t.BulletKind){case a.Normal:case a.Bouncy:case a.Meteor:case a.Missile:case a.Through:this.setFishNameHID(i.SerialNumber,i.FishID);break;case a.Lock:this._previusFishID!=i.SerialNumber&&(this._previusFishID=i.SerialNumber,this.setFishNameHID(i.SerialNumber,i.FishID))}},e.onSwitchFortAction=function(t,i,n){c.instance().checkMainFort(t)&&this.reset()},e.setFishNameHID=function(t,i){var n=h.Instance.Data.get(i);if(n.FishKind>=u.Gotcha){var e=F.instance().GetSpawnedFish(t),s=l.instance().fishNamePool.GetObject(e.node);s&&s.SetFishNameByAttr(n)}},n}(r))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/FishInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"674ccboCEJJCLTsfrYtqdFo","FishInfo",void 0);e("FishInfo",function(){function e(){this.SerialNumber=void 0,this.State=void 0,this.WaveKindValue=void 0,this.WaveInfoID=void 0,this.FishID=void 0,this.Rank=void 0,this.OffsetX=void 0,this.OffsetY=void 0,this.UpdateCount=void 0,this.SerialNumber=0,this.State=0,this.WaveKindValue=0,this.WaveInfoID=0,this.FishID=0,this.Rank=0,this.OffsetX=0,this.OffsetY=0,this.UpdateCount=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(9),e.writeUint32(r.SerialNumber),e.writeInt32(r.State),e.writeInt32(r.WaveKindValue),e.writeInt32(r.WaveInfoID),e.writeInt32(r.FishID),e.writeInt32(r.Rank),e.writeFloat64(r.OffsetX),e.writeFloat64(r.OffsetY),e.writeInt32(r.UpdateCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(9==n)a.SerialNumber=r.readUint32(),a.State=r.readInt32(),a.WaveKindValue=r.readInt32(),a.WaveInfoID=r.readInt32(),a.FishID=r.readInt32(),a.Rank=r.readInt32(),a.OffsetX=r.readFloat64(),a.OffsetY=r.readFloat64(),a.UpdateCount=r.readInt32();else{if(n>9)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.SerialNumber=r.readUint32(),1==n)return a;if(a.State=r.readInt32(),2==n)return a;if(a.WaveKindValue=r.readInt32(),3==n)return a;if(a.WaveInfoID=r.readInt32(),4==n)return a;if(a.FishID=r.readInt32(),5==n)return a;if(a.Rank=r.readInt32(),6==n)return a;if(a.OffsetX=r.readFloat64(),7==n)return a;if(a.OffsetY=r.readFloat64(),8==n)return a;if(a.UpdateCount=r.readInt32(),9==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FishKind.ts",["cc"],(function(c){var i;return{setters:[function(c){i=c.cclegacy}],execute:function(){i._RF.push({},"8bcceyf8GlOkpo7Texccjo6","FishKind",void 0);c("FishKind",{Normal:0,Gotcha:1,Through:2,Meteor:3,Missile:4,Bouncy:5,LuckyBag:6,Activity:7});i._RF.pop()}}}));

System.register("chunks:///_virtual/FishManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts","./Fish.ts","./WaveKind.ts","./ControllerState.ts","./Action2.ts","./WaveAttributeHelper.ts"],(function(t){var e,n,a,s,i,o,h,r,l;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy},function(t){s=t.ObjectPool},function(t){i=t.Fish},function(t){o=t.WaveKind},function(t){h=t.ControllerState},function(t){r=t.ActionWithOne},function(t){l=t.WaveAttributeHelper}],execute:function(){a._RF.push({},"996d8rP5P1G4rMryS+xbgEE","FishManager",void 0);t("FishManager",function(t){function a(e,a,s,i,o){var h;(h=t.call(this)||this)._fishCollisionDatas=null,h._fishOddsDatas=null,h._pathDatas=null,h._PathSpeedDatas=null,h._waveInfos=null,h._spawnedPool=new Map,h.OnSpawnFish=new r,h.OnDespawnFish=new r,h.OnStartFish=new r,h.OnCatchFish=new r,h.SetDatas(e,a,s,i,o);for(var u,c=n(l.WaveKindArray);!(u=c()).done;){var f=u.value[0];h._spawnedPool.set(f,[])}return h}e(a,t);var s=a.prototype;return s.SpawnFish=function(t,e,n,a,s){var i,h=this.Get();return this._spawnedPool.get(t).push(h),h.Spawn(t,e,n,a,s,this._fishCollisionDatas.get(n),this._fishOddsDatas.get(n),this._pathDatas.get(e.PathIndex),this._PathSpeedDatas.get(e.PathSpeedIndex)),t===o.Activity&&console.info("spawn activity fish "+n),null==(i=this.OnSpawnFish)||i.invoke(h),h},s.SpawnFishes=function(t,e,n){for(var a=0,s=t.Infos.length-1;a<=s;++a){var i=t.Infos[a],o=l.GetFishTypeByProbility(i,n.NextDouble());this.SpawnFish(e,i,o,n.NextDouble(),n.NextDouble())}},s.DespawnFish=function(t){var e;null==(e=this.OnDespawnFish)||e.invoke(t);var n=t.WaveKind,a=this._spawnedPool.get(n);a.splice(a.indexOf(t),1),t.Despawn(),this.Return(t)},s.StartFishes=function(t){for(var e=this._spawnedPool.get(t),n=0,a=e.length-1;n<=a;++n){var s,i=e[n];if(i.State===h.Spawn)i.Start(),null==(s=this.OnStartFish)||s.invoke(i)}},s.CatchFish=function(t){var e;t.Catch(),null==(e=this.OnCatchFish)||e.invoke(t)},s.FixedUpdate=function(){var t=this;this.Objects.forEach((function(e){e.State>=h.WaitForStart&&(e.FixedUpdate(),e.State!==h.None&&e.State!==h.Catch||t.DespawnFish(e))}))},s.Reset=function(t,e){var a=this;this.Clear();for(var s,i=n(this._spawnedPool);!(s=i()).done;){var o=s.value,h=o[0];o[1].length=0,this._spawnedPool.set(h,[])}e.forEach((function(t){var e=a.Get(t.SerialNumber),n=a._waveInfos.get(t.WaveInfoID);e.SpawnByFishInfo(t,a._fishCollisionDatas.get(t.FishID),a._fishOddsDatas.get(t.FishID),a._pathDatas.get(n.PathIndex),a._PathSpeedDatas.get(n.PathSpeedIndex),n),a._spawnedPool.get(e.WaveKind).push(e)})),this.SerialNumber=t},s.GetAllFishInfo=function(t){for(var e,a=this.GetSpawnedObjects(),s=n(a);!(e=s()).done;){var i=e.value;t.push(i)}},s.CheckFishIDHitable=function(t){return this.CheckFishHitable(this.GetSpawnedObject(t))},s.CheckFishHitable=function(t){return null!=t&&t.State==h.FixedUpdate},s.SetDatas=function(t,e,n,a,s){this._fishCollisionDatas=t,this._fishOddsDatas=e,this._pathDatas=n,this._PathSpeedDatas=a,this._waveInfos=s},s.NewObecject=function(){return new i},a}(s));a._RF.pop()}}}));

System.register("chunks:///_virtual/FishName.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapPool.ts","./FishKind.ts","./L10nKeyConfig.ts"],(function(e){var t,i,a,n,o,r,l,s,u,c,h,p,y,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,l=e._decorator,s=e.Label,u=e.UIOpacity,c=e.Material,h=e.tween,p=e.Color},function(e){y=e.MapPoolNode},function(e){m=e.FishKind},function(e){f=e.L10nKeyConfig}],execute:function(){var b,w,F,g,d,N,C,v,M,O,z,K,P,D,_,L,G;r._RF.push({},"ae365YSuwdPIpyCmIzID5Gr","FishName",void 0);var I=l.ccclass,S=l.property;e("FishName",(b=I("FishName"),w=S(s),F=S(u),g=S({type:c,group:{name:"GotchaFishNameColor"}}),d=S({group:{name:"GotchaFishNameColor"}}),N=S({type:c,group:{name:"WeapenFishNameColor"}}),C=S({group:{name:"WeapenFishNameColor"}}),b((O=t((M=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).MapKey=null,a(t,"label",O,n(t)),a(t,"opacity",z,n(t)),a(t,"pauseDuration",K,n(t)),a(t,"tweenDuration",P,n(t)),a(t,"gotchaFishNameMaterial",D,n(t)),a(t,"gotchaFishNameOutlineColor",_,n(t)),a(t,"weapenFishNameMaterial",L,n(t)),a(t,"weapenFishNameOutlineColor",G,n(t)),t._tweenOpacity=null,t}i(t,e);var r=t.prototype;return r.update=function(e){this.node.active&&(null!=this.MapKey&&this.MapKey.active?this.node.setWorldPosition(this.MapKey.worldPosition):(this._tweenOpacity.stop(),this.pushToPool(this)))},r.onLoad=function(){var e=this;this._tweenOpacity=h(this.opacity).delay(this.pauseDuration).to(this.tweenDuration,{opacity:0}).call((function(){e.pushToPool(e)})),this.node.active=!1},r.SetFishNameByAttr=function(e){var t,i=null!=(t=f.instance().GetFishName(e))?t:e.FishName;this.label.string=i,this.SetColor(e.FishKind),null!=this.MapKey&&this.node.setWorldPosition(this.MapKey.worldPosition),this.node.active=!0,this._tweenOpacity.stop(),this.opacity.opacity=255,this._tweenOpacity.start()},r.SetColor=function(e){var t=e==m.Gotcha;this.label.customMaterial=t?this.gotchaFishNameMaterial:this.weapenFishNameMaterial,this.label.outlineColor=t?this.gotchaFishNameOutlineColor:this.weapenFishNameOutlineColor},o(t,[{key:"isAvailable",get:function(){return!this.node.active},set:function(e){this.node.active=!e}}]),t}(y)).prototype,"label",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"opacity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(M.prototype,"pauseDuration",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),P=t(M.prototype,"tweenDuration",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),D=t(M.prototype,"gotchaFishNameMaterial",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(M.prototype,"gotchaFishNameOutlineColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),L=t(M.prototype,"weapenFishNameMaterial",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(M.prototype,"weapenFishNameOutlineColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),v=M))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/FishOddsAttribute.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./RankData.ts"],(function(t){var i,e,n,r;return{setters:[function(t){i=t.cclegacy},function(t){e=t.MemoryPackWriter},function(t){n=t.MemoryPackReader},function(t){r=t.RankData}],execute:function(){i._RF.push({},"26cbd65IfxML7dqSG/r3U66","FishOddsAttribute",void 0);t("FishOddsAttribute",function(){function t(){this.ID=void 0,this.LockGroup=void 0,this.FishRank=void 0,this.FishKind=void 0,this.MinOdds=void 0,this.AverageOdds=void 0,this.MaxOdds=void 0,this.GotchaSmallRTP=void 0,this.GotchaSmallMinOdds=void 0,this.GotchaSmallAverageOdds=void 0,this.GotchaSmallMaxOdds=void 0,this.L3MinOdds=void 0,this.L4MinOdds=void 0,this.L5MinOdds=void 0,this.L2MinLength=void 0,this.L3MinLength=void 0,this.L4MinLength=void 0,this.L5MinLength=void 0,this.L5MaxLength=void 0,this.L2MinWeight=void 0,this.L3MinWeight=void 0,this.L4MinWeight=void 0,this.L5MinWeight=void 0,this.L5MaxWeight=void 0,this.RankDatas=void 0,this.ID=0,this.LockGroup=0,this.FishRank=0,this.FishKind=0,this.MinOdds=0,this.AverageOdds=0,this.MaxOdds=0,this.GotchaSmallRTP=0,this.GotchaSmallMinOdds=0,this.GotchaSmallAverageOdds=0,this.GotchaSmallMaxOdds=0,this.L3MinOdds=0,this.L4MinOdds=0,this.L5MinOdds=0,this.L2MinLength=0,this.L3MinLength=0,this.L4MinLength=0,this.L5MinLength=0,this.L5MaxLength=0,this.L2MinWeight=0,this.L3MinWeight=0,this.L4MinWeight=0,this.L5MinWeight=0,this.L5MaxWeight=0,this.RankDatas=null}return t.serialize=function(t){var i=e.getSharedInstance();return this.serializeCore(i,t),i.toArray()},t.serializeCore=function(t,i){null!=i?(t.writeObjectHeader(25),t.writeInt32(i.ID),t.writeInt32(i.LockGroup),t.writeInt32(i.FishRank),t.writeUint8(i.FishKind),t.writeInt32(i.MinOdds),t.writeInt32(i.AverageOdds),t.writeInt32(i.MaxOdds),t.writeFloat32(i.GotchaSmallRTP),t.writeInt32(i.GotchaSmallMinOdds),t.writeInt32(i.GotchaSmallAverageOdds),t.writeInt32(i.GotchaSmallMaxOdds),t.writeInt32(i.L3MinOdds),t.writeInt32(i.L4MinOdds),t.writeInt32(i.L5MinOdds),t.writeInt32(i.L2MinLength),t.writeInt32(i.L3MinLength),t.writeInt32(i.L4MinLength),t.writeInt32(i.L5MinLength),t.writeInt32(i.L5MaxLength),t.writeInt32(i.L2MinWeight),t.writeInt32(i.L3MinWeight),t.writeInt32(i.L4MinWeight),t.writeInt32(i.L5MinWeight),t.writeInt32(i.L5MaxWeight),t.writeArray(i.RankDatas,(function(t,i){return r.serializeCore(t,i)}))):t.writeNullObjectHeader()},t.serializeArray=function(t){var i=e.getSharedInstance();return this.serializeArrayCore(i,t),i.toArray()},t.serializeArrayCore=function(i,e){i.writeArray(e,(function(i,e){return t.serializeCore(i,e)}))},t.deserialize=function(t){return this.deserializeCore(new n(t))},t.deserializeCore=function(i){var e=i.tryReadObjectHeader(),n=e[0],a=e[1];if(!n)return null;var d=new t;if(25==a)d.ID=i.readInt32(),d.LockGroup=i.readInt32(),d.FishRank=i.readInt32(),d.FishKind=i.readUint8(),d.MinOdds=i.readInt32(),d.AverageOdds=i.readInt32(),d.MaxOdds=i.readInt32(),d.GotchaSmallRTP=i.readFloat32(),d.GotchaSmallMinOdds=i.readInt32(),d.GotchaSmallAverageOdds=i.readInt32(),d.GotchaSmallMaxOdds=i.readInt32(),d.L3MinOdds=i.readInt32(),d.L4MinOdds=i.readInt32(),d.L5MinOdds=i.readInt32(),d.L2MinLength=i.readInt32(),d.L3MinLength=i.readInt32(),d.L4MinLength=i.readInt32(),d.L5MinLength=i.readInt32(),d.L5MaxLength=i.readInt32(),d.L2MinWeight=i.readInt32(),d.L3MinWeight=i.readInt32(),d.L4MinWeight=i.readInt32(),d.L5MinWeight=i.readInt32(),d.L5MaxWeight=i.readInt32(),d.RankDatas=i.readArray((function(t){return r.deserializeCore(t)}));else{if(a>25)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return d;if(d.ID=i.readInt32(),1==a)return d;if(d.LockGroup=i.readInt32(),2==a)return d;if(d.FishRank=i.readInt32(),3==a)return d;if(d.FishKind=i.readUint8(),4==a)return d;if(d.MinOdds=i.readInt32(),5==a)return d;if(d.AverageOdds=i.readInt32(),6==a)return d;if(d.MaxOdds=i.readInt32(),7==a)return d;if(d.GotchaSmallRTP=i.readFloat32(),8==a)return d;if(d.GotchaSmallMinOdds=i.readInt32(),9==a)return d;if(d.GotchaSmallAverageOdds=i.readInt32(),10==a)return d;if(d.GotchaSmallMaxOdds=i.readInt32(),11==a)return d;if(d.L3MinOdds=i.readInt32(),12==a)return d;if(d.L4MinOdds=i.readInt32(),13==a)return d;if(d.L5MinOdds=i.readInt32(),14==a)return d;if(d.L2MinLength=i.readInt32(),15==a)return d;if(d.L3MinLength=i.readInt32(),16==a)return d;if(d.L4MinLength=i.readInt32(),17==a)return d;if(d.L5MinLength=i.readInt32(),18==a)return d;if(d.L5MaxLength=i.readInt32(),19==a)return d;if(d.L2MinWeight=i.readInt32(),20==a)return d;if(d.L3MinWeight=i.readInt32(),21==a)return d;if(d.L4MinWeight=i.readInt32(),22==a)return d;if(d.L5MinWeight=i.readInt32(),23==a)return d;if(d.L5MaxWeight=i.readInt32(),24==a)return d;if(d.RankDatas=i.readArray((function(t){return r.deserializeCore(t)})),25==a)return d}return d},t.deserializeArray=function(t){return this.deserializeArrayCore(new n(t))},t.deserializeArrayCore=function(i){return i.readArray((function(i){return t.deserializeCore(i)}))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/FishOddsAttribute2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishOddsAttribute.ts"],(function(n){var i,t,a;return{setters:[function(n){i=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy},function(n){a=n.FishOddsAttribute}],execute:function(){var e;t._RF.push({},"abd63wauURC8Y3he5Os36wv","FishOddsAttribute",void 0);var h=n("FishOddsAttributeData",function(){function n(){this.Data=new Map}var t=n.prototype;return t.GetById=function(n){return this.Data.has(n)?this.Data.get(n):null},t.LoadFromJsonAsset=function(n){for(var i in this.Data.clear(),n.Data){var t=n.Data[i],e=new a;e.ID=+t.ID,e.LockGroup=+t.LockGroup,e.FishRank=+t.FishRank,e.FishKind=+t.FishKind,e.AverageOdds=+t.AverageOdds,e.GotchaSmallRTP=+t.GotchaSmallRTP,e.GotchaSmallMinOdds=+t.GotchaSmallMinOdds,e.GotchaSmallAverageOdds=+t.GotchaSmallAverageOdds,e.GotchaSmallMaxOdds=+t.GotchaSmallMaxOdds,e.MinOdds=+t.MinOdds,e.MaxOdds=+t.MaxOdds,e.L3MinOdds=+t.L3MinOdds,e.L4MinOdds=+t.L4MinOdds,e.L5MinOdds=+t.L5MinOdds,e.L2MinLength=+t.L2MinLength,e.L3MinLength=+t.L3MinLength,e.L4MinLength=+t.L4MinLength,e.L5MinLength=+t.L5MinLength,e.L5MaxLength=+t.L5MaxLength,e.L2MinWeight=+t.L2MinWeight,e.L3MinWeight=+t.L3MinWeight,e.L4MinWeight=+t.L4MinWeight,e.L5MinWeight=+t.L5MinWeight,e.L5MaxWeight=+t.L5MaxWeight,e.RankDatas.push({FishRank:2,MinOdds:0,MinLength:e.L2MinLength,MaxLength:e.L3MinLength,MinWeight:e.L2MinWeight,MaxWeight:e.L3MinWeight}),e.RankDatas.push({FishRank:3,MinOdds:e.L3MinOdds,MinLength:e.L3MinLength,MaxLength:e.L4MinLength,MinWeight:e.L3MinWeight,MaxWeight:e.L4MinWeight}),e.RankDatas.push({FishRank:4,MinOdds:e.L4MinOdds,MinLength:e.L4MinLength,MaxLength:e.L5MinLength,MinWeight:e.L4MinWeight,MaxWeight:e.L5MinWeight}),e.RankDatas.push({FishRank:5,MinOdds:e.L5MinOdds,MinLength:e.L5MinLength,MaxLength:e.L5MaxLength,MinWeight:e.L5MinWeight,MaxWeight:e.L5MaxWeight}),this.Data.set(+t.ID,e)}},t.LoadFromMemoryPack=function(n){this.Data.clear();for(var t,e=i(n);!(t=e()).done;){var h=t.value,M=new a;M.ID=h.ID,M.LockGroup=h.LockGroup,M.FishRank=h.FishRank,M.FishKind=h.FishKind,M.MinOdds=h.MinOdds,M.AverageOdds=h.AverageOdds,M.MaxOdds=h.MaxOdds,M.GotchaSmallRTP=h.GotchaSmallRTP,M.GotchaSmallMinOdds=h.GotchaSmallMinOdds,M.GotchaSmallAverageOdds=h.GotchaSmallAverageOdds,M.GotchaSmallMaxOdds=h.GotchaSmallMaxOdds,M.L3MinOdds=h.L3MinOdds,M.L4MinOdds=h.L4MinOdds,M.L5MinOdds=h.L5MinOdds,M.L2MinLength=h.L2MinLength,M.L3MinLength=h.L3MinLength,M.L4MinLength=h.L4MinLength,M.L5MinLength=h.L5MinLength,M.L5MaxLength=h.L5MaxLength,M.L2MinWeight=h.L2MinWeight,M.L3MinWeight=h.L3MinWeight,M.L4MinWeight=h.L4MinWeight,M.L5MinWeight=h.L5MinWeight,M.L5MaxWeight=h.L5MaxWeight,M.RankDatas=h.RankDatas.map((function(n){return{FishRank:n.FishRank,MinOdds:n.MinOdds,MinLength:n.MinLength,MaxLength:n.MaxLength,MinWeight:n.MinWeight,MaxWeight:n.MaxWeight}})),this.Data.set(h.ID,M)}},n}());e=h,h.Instance=new e,t._RF.pop()}}}));

System.register("chunks:///_virtual/FishOddsAttributeHelper.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"125f3+5tiRApqOfg0AS2Gv+","FishOddsAttributeHelper",void 0);t("FishOddsAttributeHelper",function(){function t(){}return t.GetRankData=function(t,e){for(var n=t.RankDatas.length-1;n>=0;n--)if(e>=t.RankDatas[n].MinOdds)return t.RankDatas[n];return null},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FishPerform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PerformCurve.ts","./FSUIManager.ts","./Action2.ts","./FishPoolManager.ts","./AudioPlayer.ts","./ActionPlayer.ts","./MessageManager.ts","./MessageCmd.ts"],(function(e){var t,i,n,o,a,r,s,l,u,h,c,d,f,p,y,b,g,w,m,P,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,s=e._decorator,l=e.Node,u=e.Vec3,h=e.macro,c=e.tween,d=e.view,f=e.Component},function(e){p=e.PerformCurveSingleton},function(e){y=e.FSUIManager},function(e){b=e.Action},function(e){g=e.FishPoolManager},function(e){w=e.AudioPlayer},function(e){m=e.ActionPlayer},function(e){P=e.MessageManager},function(e){_=e.MessageCmd}],execute:function(){var k,v,T,A,F,S,I,D,z,R,C,B,O,M,G,E,X,N,Z,j,H,L,Y,x,U,V,W,q,J,K,Q,$,ee,te,ie,ne,oe,ae,re,se,le,ue,he,ce,de,fe,pe,ye,be,ge,we,me;r._RF.push({},"d7336GcgGZCe6Nt0L745e4r","FishPerform",void 0);var Pe=s.ccclass,_e=s.property;e("FishPerform",(k=Pe("FishPerform"),v=_e(l),T=_e(l),A=_e(l),F=_e(w),S=_e({slide:!0,range:[0,100]}),I=_e(w),D=_e(m),z=_e(l),R=_e(l),C=_e({group:"捕獲"}),B=_e({group:"捕獲"}),O=_e({group:"捕獲"}),M=_e({group:"捕獲"}),G=_e({group:"捕獲"}),E=_e({group:"捕獲"}),X=_e({group:"捕獲"}),N=_e({group:"捕獲"}),Z=_e({group:"捕獲"}),j=_e({group:"受擊震動"}),H=_e({group:"受擊震動"}),L=_e({group:"受擊震動"}),Y=_e({group:"受擊震動"}),x=_e({group:"受擊震動"}),k(((me=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"fishBody",W,o(t)),n(t,"deadBody",q,o(t)),n(t,"shadow",J,o(t)),n(t,"rootScaleActive",K,o(t)),n(t,"normalDeadTweenDuration",Q,o(t)),n(t,"showAudio",$,o(t)),n(t,"playGotchaAudioProb",ee,o(t)),n(t,"gotchaAudio",te,o(t)),n(t,"deadActionPlayer",ie,o(t)),n(t,"appearFX",ne,o(t)),n(t,"fishRootPoint",oe,o(t)),n(t,"jumpOffset",ae,o(t)),n(t,"fly_DelayTime",re,o(t)),n(t,"fly_Duration",se,o(t)),n(t,"flyToPlayerPosOffset",le,o(t)),n(t,"takeIn_DelayTime",ue,o(t)),n(t,"takeIn_Duration",he,o(t)),n(t,"takeInToPlayerPosOffset",ce,o(t)),n(t,"weaponPosOffset",de,o(t)),n(t,"openGotchaFishDelay",fe,o(t)),n(t,"shakeRangeX",pe,o(t)),n(t,"shakeRangeY",ye,o(t)),n(t,"shiftTime",be,o(t)),n(t,"shakeCount",ge,o(t)),n(t,"shakeInterval",we,o(t)),t.DeadPerformCompleteCb=new b,t._spriteZRotation=void 0,t._shakeTween=null,t._flyTween=null,t._takeInTween=null,t._bodyPos=new u(u.ZERO),t._deadBodyPos=new u(u.ZERO),t._deadFishInfo=null,t._isMainPlayer=!1,t._destoryCallback=null,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this._bodyPos.set(this.fishBody.position);var e=this.rootScaleActive?this.shakeRangeX/g.instance().FishRootScale:this.shakeRangeX,t=this.rootScaleActive?this.shakeRangeY/g.instance().FishRootScale:this.shakeRangeY;this._shakeTween=y.Instance.GetShakeTween(this.fishBody,e,t,this.shiftTime,this.shakeCount),this._deadBodyPos.set(this.deadBody.position)},r.start=function(){var e=this;this.fishBody.children.forEach((function(t){"Sprite"==t.name&&(e._spriteZRotation=t.eulerAngles.z)}))},r.playShowAudio=function(){this.showAudio&&this.showAudio.play()},r.setScale=function(e){this.RootScaleActive&&(e*=g.instance().FishRootScale),this.node.setScale(e,e,e)},r.playHitAudio=function(e){e&&(Math.floor(100*Math.random())<this.playGotchaAudioProb&&this.playGotchaAudio(e))},r.playGotchaAudio=function(e){e&&this.gotchaAudio&&this.gotchaAudio.play()},r.doShake=function(){this._shakeTween.stop(),this._shakeTween.start()},r.startShake=function(){this.doShake(),this.schedule(this.doShake,this.shakeInterval,h.REPEAT_FOREVER)},r.stopShake=function(){this._shakeTween.stop(),this.fishBody.setPosition(this._bodyPos),this.unschedule(this.doShake)},r.NormalDead=function(e){var t=this;this.switchFishState(!0),this.node.angle=0,c(this.deadBody).to(this.normalDeadTweenDuration,{},{onUpdate:function(e,i){var n=p.instance().deadCurve.evaluate(i,0),o=new u(0,t.rootScaleActive?n/g.instance().FishRootScale:n,0);e.setPosition(o.add(t._deadBodyPos))}}).call((function(){t.deadBody.active=!1,e()})).start()},r.WeaponDead=function(e,t,i){var n=this;if(this.NormalDead(i),this.deadActionPlayer){this.deadActionPlayer.node.active=!0;var o=this.isFortOnTop(e)?-1:1;if(this.isFortOnTop(e)){var a=this.deadActionPlayer.node.scale,r=new u(a.x,-1*a.y,a.z);this.deadActionPlayer.node.setScale(r)}c(this.deadActionPlayer.node).to(this.fly_Duration,{worldPosition:new u(e.add(this.weaponPosOffset.multiplyScalar(o)))}).call((function(){t(),n.deadActionPlayer.node.active=!1})).start()}},r.GotchaDead=function(e,i,n,o){var a=this;this.switchFishState(!0),this.updateDeadInfo(i,n,o);var r=this.isFortOnTop(e)?-1:1,s=c(this.node).to(this.fly_Duration,{worldPosition:new u(e.add(this.flyToPlayerPosOffset.multiplyScalar(r)))});this._flyTween=s;var l=c(this.node).to(this.takeIn_Duration,{worldPosition:new u(e.add(this.takeInToPlayerPosOffset.multiplyScalar(r)))});if(this._takeInTween=l,this.deadActionPlayer)this.deadActionPlayer.PlayActionsByEvent(this.deadActionPlayer,"gotcha_scale");else{this.node.angle=0;var h=this.node.getScale().x;this.node.setScale(.1,.1,.1);var d=c(this.node).to(t._spinTime,{scale:new u(h,h,h),angle:360});c(this.node).then(d).delay(t._deadTime-t._spinTime).then(s).delay(.5).call((function(){a.gotFishByCatchInfo()})).start()}this.node.position=this.node.position.add(this.jumpOffset.multiplyScalar(r)),this.appearFX.active=!0},r.playFlyTween=function(){var e=this;c(this.node).delay(this.fly_DelayTime).call((function(){e.appearFX.active=!1})).then(this._flyTween).delay(.5).call((function(){e.playTakeInTween()})).start()},r.playTakeInTween=function(){var e=this;c(this.node).delay(this.takeIn_DelayTime).then(this._takeInTween).delay(this.openGotchaFishDelay).call((function(){e.gotFishByCatchInfo()})).start()},r.SetFishCatchInfo=function(e,t,i){this.updateDeadInfo(e,t,i)},r.gotFishByCatchInfo=function(){this.node.active=!1,this.setScale(this._deadFishInfo.FishAttribute.Scale),this._isMainPlayer&&(y.Instance.ShowGetFish.ShowByCatchInfo(this.node,this._deadFishInfo.FishID,this._deadFishInfo.CatchInfo,this._destoryCallback),P.Instance.emit(_.OPEN_GOTCHA_FISH))},r.switchFishState=function(e){this.fishBody.active=!e,this.deadBody.active=e},r.updateDeadInfo=function(e,t,i){this._deadFishInfo=e,this._isMainPlayer=t,this._destoryCallback=i},r.isFortOnTop=function(e){return e.y>d.getDesignResolutionSize().y/2},a(t,[{key:"RootScaleActive",get:function(){return this.rootScaleActive}},{key:"FishRootPoint",get:function(){return this.fishRootPoint}},{key:"FishShadow",get:function(){return this.shadow}}]),t}(f))._deadTime=3,me._spinTime=.5,W=t((V=me).prototype,"fishBody",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(V.prototype,"deadBody",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(V.prototype,"shadow",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(V.prototype,"rootScaleActive",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=t(V.prototype,"normalDeadTweenDuration",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),$=t(V.prototype,"showAudio",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(V.prototype,"playGotchaAudioProb",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),te=t(V.prototype,"gotchaAudio",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(V.prototype,"deadActionPlayer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(V.prototype,"appearFX",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(V.prototype,"fishRootPoint",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(V.prototype,"jumpOffset",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,100,0)}}),re=t(V.prototype,"fly_DelayTime",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),se=t(V.prototype,"fly_Duration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),le=t(V.prototype,"flyToPlayerPosOffset",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,100,0)}}),ue=t(V.prototype,"takeIn_DelayTime",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),he=t(V.prototype,"takeIn_Duration",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),ce=t(V.prototype,"takeInToPlayerPosOffset",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,-100,0)}}),de=t(V.prototype,"weaponPosOffset",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,40,0)}}),fe=t(V.prototype,"openGotchaFishDelay",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=t(V.prototype,"shakeRangeX",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),ye=t(V.prototype,"shakeRangeY",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),be=t(V.prototype,"shiftTime",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.03}}),ge=t(V.prototype,"shakeCount",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),we=t(V.prototype,"shakeInterval",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),U=V))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/FishPoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishAttribute2.ts","./FishPoolNode.ts","./PrefabData.ts","./SingletonComponent.ts","./FSUIManager.ts","./MessageManager.ts","./MessageCmd.ts","./FishKind.ts","./Room.ts","./Pool.ts","./PlayerFortManager.ts"],(function(i){var t,e,n,s,o,r,a,h,l,u,c,f,d,F,p,S,g,w,y,I,m,P,b,_;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,s=i.assertThisInitialized,o=i.createForOfIteratorHelperLoose,r=i.createClass},function(i){a=i.cclegacy,h=i._decorator,l=i.Vec3,u=i.Node,c=i.Quat,f=i.instantiate},function(i){d=i.FishAttributeData},function(i){F=i.FishPoolNode},function(i){p=i.FishPrefabData},function(i){S=i.SingletonComponent},function(i){g=i.FSUIManager,w=i.FishLayer},function(i){y=i.MessageManager},function(i){I=i.MessageCmd},function(i){m=i.FishKind},function(i){P=i.Room},function(i){b=i.PoolInstance},function(i){_=i.PlayerFortManager}],execute:function(){var v,D,G,R,x,B,M,A,C,N,L,T,H,O,k,Y,U,E,z;a._RF.push({},"3a722l4hidKBoh0dCmpR5NB","FishPoolManager",void 0);var K=h.ccclass,j=h.property,W=i("DeadFishInfo",(function(){this.FishID=0,this.FishAttribute=null,this.FishPos=new l(l.ZERO),this.CatchInfo=null,this.GotPos=new l(l.ZERO)}));i("FishPoolManager",(v=K("FishPoolManager"),D=j(u),G=j({min:1}),R=j({tooltip:"怪物排序"}),x=j({tooltip:"最小 Y 值"}),B=j({tooltip:"最大 Y 值"}),M=j({group:{name:"地面怪縮放參數"}}),A=j({group:{name:"地面怪縮放參數"}}),C=j({group:{name:"天空怪縮放參數"},type:[Number]}),v((T=t((L=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return t=i.call.apply(i,[this].concat(o))||this,n(t,"fishPoolRoot",T,s(t)),n(t,"fishRootScale",H,s(t)),n(t,"fishSortSwitch",O,s(t)),n(t,"minY",k,s(t)),n(t,"maxY",Y,s(t)),n(t,"minScale",U,s(t)),n(t,"maxScale",E,s(t)),n(t,"skyFishGroupScaleFactor",z,s(t)),t._fishPool=new Map,t._spawnedFish=new Map,t._groundFish=new Array,t._fishInstantiateCount=new Map,t._fishIDSetByLayer=[new Set,new Set,new Set],t._deadFish=new Map,t._startUpdate=!1,t._fishRoots=new Map,t}e(t,i);var a=t.prototype;return a.initial=function(){this._fishRoots.clear()},a.release=function(){this._fishRoots.clear()},a.reset=function(){var i=g.PoolCenter.negative(),t=c.fromAxisAngle(new c,l.FORWARD,0);this.fishPoolRoot.setRTS(t,i),this._startUpdate=!0},a.onLoad=function(){i.prototype.onLoad.call(this),this._startUpdate=!1,this.onBulletHitFishAction=this.onBulletHitFishAction.bind(this),this.schedule(this.sortChildrenByYIndex,1),y.Instance.on(I.ON_BULLET_HIT_FISH,this.onBulletHitFishAction)},a.onDestroy=function(){y.Instance.off(I.ON_BULLET_HIT_FISH,this.onBulletHitFishAction),this.onBulletHitFishAction=null,this._startUpdate=!1,this.unschedule(this.sortChildrenByYIndex),i.prototype.onDestroy.call(this)},a.SpawnFish=function(i,t,e,n,s){var o=this;return new Promise((function(r,a){if(o.checkSpawnedFish(t))r(null);else{var h=d.Instance.Data.get(i);h?h.FishKind!=m.Gotcha?o.GetFish(i,h,e,n,s).then((function(a){if(t!=e.SerialNumber)return console.warn("[FishPoolManager:SpawnFish] fish id("+t+") is not equal to fish id("+e.SerialNumber+")."),o.PushFishByFishType(a,i),void r(null);a.Init(i,h,e,n,s),o.InsertFishBySwimObjOrder(a),o._spawnedFish.set(t,a),r(a.node)})).catch((function(i){a(i)})):p.Instance.GetPrefab(i).then((function(a){if(null==o.node||!o.node.isValid)return console.warn("node invalid"),void r(null);if(t!=e.SerialNumber)return console.warn("[FishPoolManager:SpawnFish] big fish id("+t+") is not equal to fishInfo id("+e.SerialNumber+")."),void r(null);var l=f(a);o.fishPoolRoot.addChild(l);var u=l.addComponent(F);u.Init(i,h,e,n,s),o.InsertFishBySwimObjOrder(u),o._spawnedFish.set(t,u),o.IncreaseNotNormalFish(i),r(l)})).catch((function(i){a(i)})):a(new Error("[FishPoolManager:InitFishPool] fish("+i+") attribute is not exist."))}}))},a.ResetFish=function(i,t,e,n,s){this.checkSpawnedFish(t)?this.GetSpawnedFish(t).ResetFish(n):this.SpawnFish(i,t,e,n,s).then((function(i){i?(i.getComponent(F).ResetFish(n),y.Instance.emit(I.ON_SPAWN_FISH_NODE,i)):console.warn("[FishPoolManager:ResetFish] fish("+t+") is not exist.")}))},a.DespawnFish=function(i){var t=this.GetSpawnedFish(i);if(t){if(this._spawnedFish.delete(i),t.isGroundFish){var e=this._groundFish.findIndex((function(i){return i===t}));this._groundFish.splice(e,1)}if(this._fishIDSetByLayer[t.Layer].delete(i),t.Layer==w.Normal||t.Layer==w.Small)this.PushFish(t),t.node.active=!1;else{var n=t.fishID;t.node.destroy(),this.DecreaseNotNormalFish(n),t=null}}},a.CatchFish=function(i){var t=this.GetSpawnedFish(i);if(t){var e=new W;e.FishID=t.fishID,e.FishAttribute=t.fishAttribute,e.FishPos=t.node.getWorldPosition(),this._deadFish.set(i,e)}},a.FishStartUpdate=function(i){if(this.checkSpawnedFish(i)){var t=this.GetSpawnedFish(i);this._fishIDSetByLayer[t.Layer].add(i)}},a.HitTest=function(i,t,e){for(var n=w.Count-1;n>=0;n--){var s=this._fishIDSetByLayer[n],o=Array.from(s);o.sort((function(i,t){return i<t?1:i>t?-1:0}));for(var r=0,a=o;r<a.length;r++){var h=a[r],l=this.GetSpawnedFish(h);if(l.HitTest(i,t,e))return l}}return null},a.checkSpawnedFish=function(i){return this._spawnedFish.has(i)},a.GetSpawnedFish=function(i){return this._spawnedFish.get(i)},a.GetFishByFishType=function(i){for(var t,e=o(this._spawnedFish);!(t=e()).done;){var n=t.value;if(n[1].fishID==i&&this.IsFishInField(n[1]))return n[1]}return null},a.GetFishByFishGroupID=function(i){for(var t,e=o(this._spawnedFish);!(t=e()).done;){var n=t.value;if(n[1].fishAttribute.LockGroup==i&&this.IsFishInField(n[1]))return n[1]}return null},a.FrameUpdate=function(){this._spawnedFish.forEach((function(i){i&&i.FrameUpdate()})),this._startUpdate&&(y.Instance.emit(I.FISH_START_UPDATE,I.FISH_START_UPDATE),this._startUpdate=!1)},a.GetDeadFish=function(i,t){var e=this._deadFish.get(i);return e?this._deadFish.delete(i):(p.Instance.GetPrefab(t.FishID),(e=new W).FishID=t.FishID,e.FishAttribute=d.Instance.Data.get(t.FishID),e.FishPos=new l(t.Pos.x,t.Pos.y,0)),e},a.IncreaseNotNormalFish=function(i){var t=this._fishInstantiateCount.get(i)||0;this._fishInstantiateCount.set(i,t+1)},a.DecreaseNotNormalFish=function(i){var t=this._fishInstantiateCount.get(i);t?t-1>0?this._fishInstantiateCount.set(i,t-1):this._fishInstantiateCount.delete(i):console.error("[FishPoolManager:FishDead] fish type("+i+") instantiate count is not exist.")},a.GetFish=function(i,t,e,n,s){var o=this;return new Promise((function(e,n){var s=function(i){var t=i.GetObject();t.node.active=!1,e(t)};if(s=s.bind(o),o._fishPool.has(i)){var r=o._fishPool.get(i);s(r)}else o.InitFishPool(i,t).then((function(i){s(i)})).catch((function(i){n(i)}))}))},a.PushFish=function(i){this.PushFishByFishType(i,i.fishID)},a.PushFishByFishType=function(i,t){var e=this._fishPool.get(t);e?e.PushToPool(i):console.error("[FishPoolManager:PushFish] fish type("+t+") pool is not exist.")},a.InitFishPool=function(i,e){var n=this;return new Promise((function(s,o){p.Instance.GetPrefab(i).then((function(o){if(null!=n.node&&n.node.isValid){t.FishKindToLayer(e.FishKind);var r=new b;n._fishPool.set(i,r),r.InitPool(F,0,100,n.fishPoolRoot,o),s(r)}else console.warn("node invalid")})).catch((function(i){o(i)}))}))},a.InsertFishBySwimObjOrder=function(i){var t=this.fishPoolRoot.children.findIndex((function(t){var e=t.getComponent(F).fishGroup,n=t.getComponent(F).fishAttribute,s=i.fishAttribute;return!(!n||!s)&&(e===i.fishGroup||i.isGroundFish?n.SwimObjOrder>s.SwimObjOrder:e>i.fishGroup)}));-1===t?i.node.setSiblingIndex(this.fishPoolRoot.children.length):i.node.setSiblingIndex(t),i.isGroundFish&&this._groundFish.push(i)},a.IsFishInField=function(i){if(i&&i.fish){for(var t,e=o(i.fish.Collision.CollisiblePoints);!(t=e()).done;)for(var n,s=t.value,r=i.node.position.x+s.X,a=i.node.position.y+s.Y,h=this.GetCollisiblePointEdges(r,a,s.Radius),l=o(h);!(n=l()).done;){var u=n.value;if(u.x>=0&&u.x<P.Width&&u.y>=0&&u.y<P.Height)return!0}return!1}},t.FishKindToLayer=function(i){switch(i){case m.Gotcha:case m.LuckyBag:return w.Big;case m.Normal:return w.Normal;case m.Through:case m.Meteor:case m.Missile:case m.Bouncy:return w.Small;default:return console.error("Invalid fishKind: "+i),w.Big}},a.GetCollisiblePointEdges=function(i,t,e){var n=[];return n[0]=new l(i-e,t-e,0),n[1]=new l(i-e,t+e,0),n[2]=new l(i+e,t+e,0),n[3]=new l(i+e,t-e,0),n},a.onBulletHitFishAction=function(i,t){if(this.checkSpawnedFish(t.SerialNumber)){var e=i.FortID===_.instance().MainPlayerFortIndex;this.GetSpawnedFish(t.SerialNumber).Hit(e)}},a.sortChildrenByYIndex=function(){if(this.fishSortSwitch){this._groundFish.sort((function(i,t){return t.fishRootPointYAxis-i.fishRootPointYAxis}));for(var i=0;i<this._groundFish.length;i++){var t=this._groundFish[i].node;t.getSiblingIndex()!=i&&t.setSiblingIndex(i)}}},r(t,[{key:"SpawnedFish",get:function(){return this._spawnedFish.keys()}},{key:"FishRootScale",get:function(){return this.fishRootScale}},{key:"SkyFishGroupScaleFactor",get:function(){return this.skyFishGroupScaleFactor}},{key:"FishScaleFactor",get:function(){return{minY:this.minY,maxY:this.maxY,minScale:this.minScale,maxScale:this.maxScale}}}]),t}(S)).prototype,"fishPoolRoot",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(L.prototype,"fishRootScale",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=t(L.prototype,"fishSortSwitch",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=t(L.prototype,"minY",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-25}}),Y=t(L.prototype,"maxY",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 370}}),U=t(L.prototype,"minScale",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.9}}),E=t(L.prototype,"maxScale",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),z=t(L.prototype,"skyFishGroupScaleFactor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[.8,.9,1]}}),N=L))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/FishPoolNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Fish.ts","./FishPoolManager.ts","./Action2.ts","./FishPerform.ts","./FSUIManager.ts","./PathSpeedHelper.ts","./PathAttributeHelper.ts","./Pool.ts","./RuntimeSettingConfig.ts","./FlyPathSizeSettingAttribute.ts"],(function(t){var i,e,s,h,n,a,o,r,f,u,_,c,l,d,p,m;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){s=t.cclegacy,h=t._decorator,n=t.Vec3,a=t.math},function(t){o=t.Fish},function(t){r=t.FishPoolManager},function(t){f=t.ActionWithOne},function(t){u=t.FishPerform},function(t){_=t.FishLayer},function(t){c=t.PathSpeedHelper},function(t){l=t.PathAttributeHelper},function(t){d=t.PoolNode},function(t){p=t.RuntimeSettingConfig},function(t){m=t.FlyPathSizeSettingAttributeData}],execute:function(){var P;s._RF.push({},"50f63/PNNJHDJ0tXab/rWor","FishPoolNode",void 0);var S=h.ccclass;h.property,t("FishPoolNode",S("FishPoolNode")(P=function(t){function s(){for(var i,e=arguments.length,s=new Array(e),h=0;h<e;h++)s[h]=arguments[h];return(i=t.call.apply(t,[this].concat(s))||this).fishID=0,i.Layer=_.Normal,i.fishAttribute=null,i.OnFishDespawn=new f,i._timeLimit=.8,i._offlineTimeLimit=60,i._standardTimePerUpdate=.05,i._updateCountPerTick=4,i._isGroundFish=!1,i._isAvailable=!0,i._serverTime=0,i._time=0,i._lifeTime=0,i._timeScale=1,i._fish=null,i._timePerUpdate=0,i._lockCount=0,i._needCheckAppear=!1,i._fishPerform=null,i._mute=void 0,i._fishPoolRootPoint=null,i._skyFishGroup=-1,i}i(s,t);var h=s.prototype;return h.Init=function(t,i,e,s,h){if(this.fishID=t,this.fishAttribute=i,this.Layer=r.FishKindToLayer(i.FishKind),this._timePerUpdate=s,this._timeScale=this._standardTimePerUpdate/this._timePerUpdate,this._lifeTime=e.lifeUpdateCount*this._timePerUpdate,this._fish=e,this._fish.OnStartUpdate.add(this.OnStartUpdate),this._fish.OnDespawn.add(this.OnDespawn),this._fish.OnCatch.add(this.OnCatch),this._lockCount=0,this._needCheckAppear=!1,this._fishPerform=this.node.getComponent(u),this._mute=p.instance().IsSpeedUpMode,this._fishPoolRootPoint=this._fishPerform.FishRootPoint,this._isGroundFish=this._fishPerform.FishShadow.active,!this._isGroundFish){var n=m.Instance.Data.get(this.fish.PathIndex);this._skyFishGroup=null!=n?n.Size:100}this.SetFishScale(i.Scale*(this.fishGroup>=0?this.fishGroup/100:1))},h.SetFishScale=function(t){this._fishPerform.setScale(t)},h.ResetFish=function(t){this._timePerUpdate=t,this._timeScale=this._standardTimePerUpdate/this._timePerUpdate,this._lifeTime=this._fish.lifeUpdateCount*this._timePerUpdate,this.StartUpdate()},h.FrameUpdate=function(){this._serverTime=(this._fish.UpdateCount-this._fish.startUpdateCount)*this._timePerUpdate},h.HitTest=function(t,i,e,s){return!!this._fish&&this._fish.HitTest(t,i,e)},h.Hit=function(t){this._fishPerform.doShake(),this._fishPerform.playHitAudio(t)},h.Locked=function(){0==this._lockCount&&this._fishPerform.startShake(),this._lockCount++},h.Unlocked=function(){this._lockCount--,0==this._lockCount&&this._fishPerform.stopShake()},h.onLoad=function(){this.Init=this.Init.bind(this),this.ResetFish=this.ResetFish.bind(this),this.FrameUpdate=this.FrameUpdate.bind(this),this.HitTest=this.HitTest.bind(this),this.OnStartUpdate=this.OnStartUpdate.bind(this),this.OnDespawn=this.OnDespawn.bind(this),this.OnCatch=this.OnCatch.bind(this)},h.update=function(t){if(this._fish){this._needCheckAppear&&this.CheckPlayShowAudio(),this.CaculateLerpTime(t);var i=this._time/this._lifeTime;this.UpdatePath(i),this.isGroundFish&&this.SetFishScale(this.CalculateScale(this.node.getPosition().y))}},h.OnStartUpdate=function(t){if(!this._fish||this._fish.SerialNumber!=t)return console.warn("[FishPoolNode:OnStartUpdate] fishID("+t+") is not match ("+(this._fish?this._fish.SerialNumber:null)+")."),void(this._fish&&this.OnDespawn(this._fish));this.StartUpdate()},h.StartUpdate=function(){r.instance().FishStartUpdate(this._fish.SerialNumber),this._time=(this._fish.UpdateCount-this._fish.startUpdateCount)*this._timePerUpdate,this._serverTime=this._time,this.UpdatePath(this._time/this._lifeTime),this.node.active=!0,this._needCheckAppear=!0},h.OnDespawn=function(t){this._fish&&this._fish.SerialNumber==t.SerialNumber?(this._lockCount=0,this._fishPerform.stopShake(),this._fish.OnStartUpdate.remove(this.OnStartUpdate),this._fish.OnCatch.remove(this.OnCatch),this._fish.OnDespawn.remove(this.OnDespawn),r.instance().DespawnFish(t.SerialNumber),this.OnFishDespawn.invoke(t.SerialNumber),this._fish=null):console.warn("[FishPoolNode:OnDespawn] fishID("+t.SerialNumber+") is not match ("+(this._fish?this._fish.SerialNumber:void 0)+").")},h.OnCatch=function(t){r.instance().CatchFish(t.SerialNumber)},h.UpdatePath=function(t){var i=c.GetPositionInterpolation(this._fish.PathSpeed,t)/1e6,e={x:0,y:0},s=l.GetPositionInterpolation_v2(this._fish.path,i,e);e.x/=o.FishPathRatioOffset,e.y/=o.FishPathRatioOffset,e.x+=this._fish.OffsetX,e.y+=this._fish.OffsetY,this.node.setPosition(e.x,e.y);var h=0;this._fish.path.SinTheta[s]<0&&(h=180),this.node.eulerAngles=new n(this.node.rotation.x,h,-this.fishPerform._spriteZRotation)},h.CheckPlayShowAudio=function(){r.instance().IsFishInField(this)&&(this._needCheckAppear=!1,this._mute||this._fishPerform.playShowAudio())},h.CaculateLerpTime=function(t){var i=this._serverTime-this._time,e=Math.abs(i);if(i>0){var s=this._timeLimit*this._timeScale;if(p.instance().IsSpeedUpMode)this._time=this._serverTime;else{var h=a.clamp01(e/s);this._time+=t*h}i>p.instance().AccelTickLimit*this._timePerUpdate*this._updateCountPerTick&&(this._time=this._serverTime)}else if(i<0){var n=this._offlineTimeLimit*this._timeScale,o=a.clamp01(e/n);this._time-=t*o}this._time+=t},h.CalculateScale=function(t){var i=r.instance().FishScaleFactor,e=i.maxY,s=i.minY,h=i.maxScale,n=i.minScale;return t>=e?n:t<=s?h:h-(t-s)/(e-s)*(h-n)},e(s,[{key:"isAvailable",get:function(){return this._isAvailable},set:function(t){this._isAvailable=t}},{key:"fish",get:function(){return this._fish}},{key:"fishSerialNumber",get:function(){return this._fish?this._fish.SerialNumber:0}},{key:"fishPerform",get:function(){return this._fishPerform}},{key:"fishRootPointYAxis",get:function(){return this._fishPoolRootPoint.worldPosition.y}},{key:"isGroundFish",get:function(){return this._isGroundFish}},{key:"fishGroup",get:function(){return this._skyFishGroup}}]),s}(d))||P);s._RF.pop()}}}));

System.register("chunks:///_virtual/FishRnd.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"db033QgNZhLMIccAt1Z476S","FishRnd",void 0);t("FishRnd",function(){function t(){}var n=t.prototype;return n.Catch圖鑑=function(t,n,r,e,c,h,i,o){var a=this.NextUInt(1e4),u=0,s=!1;return a<1e4*t?u=this.Catch一般(1,n,r,e):a<1e4*(t+c)&&(u=this.Catch一般(1,h,i,o))>0&&(s=!0),[u,s]},n.RandomNext=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},n.Catch一般=function(t,n,r,e){if(n<=e&&(r>n||r==e)&&this.NextUInt(1e4*r)<1e4*t){for(var c={"捕獲平均倍":r,"捕獲最小倍":n,"捕獲最大倍":e,"目前平均倍":r,"目前最小倍":n,"目前最大倍":e,"開出倍數":0};0==c.開出倍數;)this.Catch倍數(c);return c.開出倍數}return 0},n.NextUInt=function(t){return Math.floor(Math.random()*t)},n.Catch倍數=function(t){var n=t.目前平均倍+4*(t.目前平均倍-t.目前最小倍);n<=t.捕獲最大倍&&(t.目前最大倍=n);var r=t.目前最大倍-t.目前平均倍,e=t.目前平均倍-t.目前最小倍,c=this.NextUInt(r+e);c>=1&&c<=r?t.開出倍數=t.目前平均倍-this.NextUInt(e+1):t.目前最大倍==t.捕獲最大倍?t.開出倍數=t.目前平均倍+this.NextUInt(r+1):(t.目前最小倍=t.目前平均倍,t.目前平均倍=Math.floor(t.目前平均倍+r/2),t.目前最大倍=t.捕獲最大倍)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/FishRndForGotchaServer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishRnd.ts"],(function(t){var e,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.FishRnd}],execute:function(){n._RF.push({},"f8d2aX0jNtPsYuX/Uo1u7eN","FishRndForGotchaServer",void 0);t("FishRndForGotchaServer",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.Catch圖鑑=function(t,e,n,r,i,o,s,c){var u=this.NextUInt(1e4),h=0,a=!1;return u<1e4*t?h=this.Catch一般(1,e,n,r):u<1e4*(t+i)&&(h=this.Catch一般(1e3,o,s,c))>0&&(a=!0),[h,a]},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/FishStopReasopn.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e97fb54VsBNaYSS26H8KYhx","FishStopReasopn",void 0);e("FishStopReasopn",{IdleTimeout:100});t._RF.pop()}}}));

System.register("chunks:///_virtual/FlyPathSizeSettingAttribute.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var i;e._RF.push({},"efb11364sBI6I/eFCDHwb3T","FlyPathSizeSettingAttribute",void 0);var n=t("FlyPathSizeSettingAttribute",(function(){this.Id=0,this.PathIndex=0,this.Size=0})),a=t("FlyPathSizeSettingAttributeData",function(){function t(){this.Data=new Map}return t.prototype.LoadFromJsonAsset=function(t){for(var e in this.Data.clear(),t.Data){var i=t.Data[e],a=new n;a.Id=+i.Id,a.PathIndex=+i.PathIndex,a.Size=+i.Size,this.Data.set(a.PathIndex,a)}},t}());i=a,a.Instance=new i,e._RF.pop()}}}));

System.register("chunks:///_virtual/Fort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerInfo.ts","./BetLevel.ts"],(function(t){var e,i,n,l,o;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy},function(t){l=t.PlayerInfo},function(t){o=t.BetLevel}],execute:function(){n._RF.push({},"870f668pC9GaJjMItSfCR5C","Fort",void 0),t("Fort",function(t){function n(e,i,n){var l;return(l=t.call(this)||this).ID=void 0,l.PoxX=void 0,l.PoxY=void 0,l._betRegionInfo=null,l.ID=e,l.PoxX=i,l.PoxY=n,l.HoldingSpecialBulletInfos=[],l}e(n,t);var l=n.prototype;return l.Spawn=function(t){var e;(this.PlayerID=t.PlayerID,this.PlayerName=t.PlayerName,this.Coin=t.Coin,this.BetMax=t.BetMax,this.BetMin=t.BetMin,this.SetBet(t.Bet)||(this.Bet=this._betRegionInfo.BetRegionInfo.MinBet),this.SpecialBulletScore=t.SpecialBulletScore,null!=t.HoldingSpecialBulletInfos)&&(this.HoldingSpecialBulletInfos.length=0,(e=this.HoldingSpecialBulletInfos).push.apply(e,t.HoldingSpecialBulletInfos));this.CurrentSpecialBulletInfo=t.CurrentSpecialBulletInfo},l.Despawn=function(){this.PlayerID=0,this.PlayerName=null,this.Coin=0,this.Bet=0,this.BetMin=0,this.BetMax=0,this.HoldingSpecialBulletInfos.length=0,this.CurrentSpecialBulletInfo=null},l.AddCoin=function(t,e){t===this.PlayerID?this.Coin+=e:console.error("Fort: "+this.ID+" set coin failed, playerID: "+t+", coin: "+e.toPerformValue())},l.AddSpecialWeaponScore=function(t,e){t===this.PlayerID&&this.CurrentSpecialBulletInfo&&(this.SpecialBulletScore+=e)},l.SetBetRegionInfo=function(t){this._betRegionInfo=t},l.SetBet=function(t){if(!this.IsInUse)return!1;var e=this.Bet!=t&&o.IsValidByBetRegionInfo(this._betRegionInfo.BetRegionInfo,t,this.BetMax,this.BetMin);return e&&(this.Bet=t),e},l.TryPlaceBet=function(){return this.Coin>=this.Bet&&(this.Coin-=this.Bet,!0)},i(n,[{key:"IsInUse",get:function(){return 0!==this.PlayerID}},{key:"UsingSpecialBullet",get:function(){return null!=this.CurrentSpecialBulletInfo}}]),n}(l)).Length=50,n._RF.pop()}}}));

System.register("chunks:///_virtual/FortManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CloneHelper.ts","./Fort.ts"],(function(t){var r,o,n,e;return{setters:[function(t){r=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy},function(t){n=t.CloneHelper},function(t){e=t.Fort}],execute:function(){o._RF.push({},"1a274UmcaZIwq9t+7Xte2Uk","FortManager",void 0);t("FortManager",function(){function t(t,r){this.CurrentPlayerCount=0,this.Forts=void 0,this._fortCount=void 0,this._betRegionInfo=null,this._fortCount=t,this.Forts=new Array(this._fortCount);for(var o=0;o<this._fortCount;o++)this.Forts[o]=new e(o,r[o].X,r[o].Y)}var o=t.prototype;return o.SpawnOnFort=function(t,r){return this.Forts[t].IsInUse?-1:(this.Forts[t].Spawn(r),this.CurrentPlayerCount++,t)},o.Spawn=function(t){if(this.CurrentPlayerCount<this._fortCount)for(var r=0;r<this._fortCount;r++)if(-1!==this.SpawnOnFort(r,t))return r;return-1},o.Despawn=function(t){this.Forts[t].IsInUse&&(this.Forts[t].Despawn(),this.CurrentPlayerCount--)},o.Reset=function(t){if(null!==t&&t.length===this.Forts.length){this.CurrentPlayerCount=0;for(var r=0;r<this.Forts.length;r++){var o=t[r];0!==o.PlayerID?this.SpawnOnFort(r,o):this.Forts[r].Despawn()}}else console.warn("FortManager Reset failed.")},o.Clear=function(){for(var t,o=r(this.Forts);!(t=o()).done;){var n=t.value;n.IsInUse&&n.Despawn()}},o.GetEmptyFortID=function(){if(this.CurrentPlayerCount<this._fortCount)for(var t=0;t<this._fortCount;t++)if(!this.Forts[t].IsInUse)return t;return-1},o.CloneAllForts=function(t){for(var r=0;r<this.Forts.length;r++)t[r]=n.ClonePlayerInfo(this.Forts[r])},o.TryGetFortByFortID=function(t){return t>=0&&t<this.Forts.length?{Success:!0,Fort:this.Forts[t]}:{Success:!1,Fort:null}},o.TryGetFortByPlayerID=function(t){for(var r=0,o=this.Forts.length-1;r<=o;++r)if(this.Forts[r].PlayerID===t)return{Success:!0,Fort:this.Forts[r]};return{Success:!1,Fort:null}},o.SetBetRegionInfo=function(t){this._betRegionInfo=t;for(var r=0;r<this.Forts.length;r++)this.Forts[r].SetBetRegionInfo(t)},o.SetBet=function(t,r){return this.Forts[t].SetBet(r)?(console.warn("Bet Change: fort<"+t+">, bet<"+r.toPerformValue()+">"),!0):(console.warn("Fort: "+t+" set bet failed, coin: "+this.Forts[t].Coin.toPerformValue()+", bet: "+r.toPerformValue()),!1)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/FrameInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./InputInfo.ts"],(function(e){var r,i,n,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){t=e.InputInfo}],execute:function(){r._RF.push({},"b2b16rUV6VELY3bhJNWTbZm","FrameInfo",void 0);e("FrameInfo",function(){function e(){this.Frame=void 0,this.Info=void 0,this.Frame=0,this.Info=null}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeUint32(r.Frame),t.serializeCore(e,r.Info)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),n=i[0],a=i[1];if(!n)return null;var o=new e;if(2==a)o.Frame=r.readUint32(),o.Info=t.deserializeCore(r);else{if(a>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.Frame=r.readUint32(),1==a)return o;if(o.Info=t.deserializeCore(r),2==a)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FSUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Room.ts"],(function(n){var t,e,o,a,r,i,l,s;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,o=n._decorator,a=n.Enum,r=n.Vec3,i=n.tween,l=n.randomRange},function(n){s=n.Room}],execute:function(){var u;e._RF.push({},"9ba55BbEBpN470A97nU4wdU","FSUIManager",void 0);o.ccclass,o.property;var c=n("FishLayer",function(n){return n[n.Normal=0]="Normal",n[n.Small=1]="Small",n[n.Big=2]="Big",n[n.Count=3]="Count",n}({}));a(c);var h=n("FSUIManager",function(){function n(){this.OptionSetting=null,this.ShowReward=null,this.CameraShake=null,this.ShowGetFish=null,this.WeaponUi=null,this.MainFishAudioController=null}return n.prototype.GetShakeTween=function(n,t,e,o,a){var s=new r(n.position),u=i(n),c=l(0,2*Math.PI),h=new r(t*Math.cos(c),e*Math.sin(c),0);h.add(s),u.to(o,{position:h});for(var p=1;p<a;p++)c+=l(.5*Math.PI,1.5*Math.PI),(h=new r(t*Math.cos(c),e*Math.sin(c),0)).add(s),u.to(o,{position:h});return u.to(o,{position:s}),u},t(n,null,[{key:"PoolCenter",get:function(){return new r(s.Center.X,s.Center.Y)}}]),n}());u=h,h.Instance=new u,e._RF.pop()}}}));

System.register("chunks:///_virtual/FxNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pool.ts"],(function(t){var i,e,o,n,r,s,a,l,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.ParticleSystem},function(t){c=t.PoolNode}],execute:function(){var u,p,h;s._RF.push({},"aa644bdJ6VJu6j3ZOig6JhJ","FxNode",void 0);var d=a.ccclass,f=a.property;t("FxNode",d("FxNode")((h=i((p=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"stopDuration",h,n(i)),i._duration=0,i._particles=null,i}e(i,t);var s=i.prototype;return s.onEnable=function(){this._duration=this.stopDuration,this.play=!0},s.update=function(t){this._duration-=t,this._duration<=0&&this.pushToPool(this)},s.onDisable=function(){this.play=!1,this._duration=0},r(i,[{key:"isAvailable",get:function(){return!this.node.active},set:function(t){this.node.active=!t}},{key:"play",set:function(t){this._particles||(this._particles=this.getComponentsInChildren(l));for(var i=0;i<this._particles.length;i++)t?this._particles[i].play():this._particles[i].stop()}}]),i}(c)).prototype,"stopDuration",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),u=p))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./L10nUtility.ts","./l10n-manager.ts"],(function(e){var n,t,o,i,a,l,r,c,g,s,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){l=e.cclegacy,r=e._decorator,c=e.JsonAsset,g=e.Component},null,function(e){s=e.L10nUtility},function(e){u=e.L10nManager}],execute:function(){var f,m,h,p,d,_,b,v;l._RF.push({},"5cbdbXq+IRPJbCM990p7qdJ","GameConfig",void 0);var y=r.ccclass,w=r.property,C=e("GameConfigRuntime",(function(){this.checkRoomInfo=!1,this.useGMCommand=!1,this.room=-1,this.game_code="WTF002",this.lang="tw",this.mobild=0,this.token="",this.gameurl="ws://localhost:15081",this.infourl="https://dev.apex-win.com/Webview/WTF002/root.html?platform=dev",this.platform="WT_Test",this.demo=!1,this.useTestCenter=!0,this.platformURL="http://localhost:15081",this.platformApiGetGameLink="link",this.platformApiGetGameDemoLink="demo/link",this.defaultUserName="我是玩家",this.defaultCoin=1e7,this.defaultBetMax=1e3,this.defaultBetMin=10}));e("GameConfig",(f=y("GameConfig"),m=w(c),f(((v=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return n=e.call.apply(e,[this].concat(a))||this,o(n,"language",d,i(n)),o(n,"room",_,i(n)),o(n,"configFile",b,i(n)),n}t(n,e);var l=n.prototype;return l.applyRoomConfig=function(){u.l10n.changeLanguage(s.ToLanguageTag(this.language)),n._config.lang=this.language,n._config.room=this.room},l.onLoad=function(){null!==this.configFile&&(n._config=this.configFile.json);var e=new URLSearchParams(window.location.search),t=e.get("room");null!=t&&(n._config.room=Number(t));var o=e.get("game_code");null!=o&&(n._config.game_code=o);var i=e.get("lang");null!=i&&(n._config.lang=i);var a=e.get("mobild");null!=a&&(n._config.mobild=Number(a));var l=e.get("token");null!=l&&(n._config.token=l);var r=e.get("gameurl");null!=r&&(n._config.gameurl=r.replace("wss","https"));var c=e.get("platform");null!=c&&(n._config.platform=c);var g=e.get("demo");null!=g&&(n._config.demo=JSON.parse(g)),console.info("load config: ",n._config)},a(n,null,[{key:"config",get:function(){return n._config}}]),n}(g))._config=new C,d=n((p=v).prototype,"language",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"tw"}}),_=n(p.prototype,"room",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=n(p.prototype,"configFile",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/GameFlowBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFlowManager.ts"],(function(e){var t,n,a,o,i,r,c,l,s;return{setters:[function(e){t=e.inheritsLoose,n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,c=e.animation},function(e){l=e.GameFlowManager,s=e.GameFlowData}],execute:function(){var u,p,m,f;i._RF.push({},"72d4frBalVJ/Je+2UMcWdXL","GameFlowBase",void 0);var w=r.ccclass,F=r.property;e("GameFlowBase",w("GameFlowBase")((p=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"FlowName",m,o(t)),a(t,"LoadSceneName",f,o(t)),t}t(n,e);var i=n.prototype;return i.onMotionStateEnter=function(e,t){console.log("StateEnter: "+this.FlowName),l.instance().LoadSceneProcess(new s(this.FlowName,this.LoadSceneName))},i.onMotionStateExit=function(e,t){},i.onMotionStateUpdate=function(e,t){},i.onStateMachineEnter=function(e){},i.onStateMachineExit=function(e){},n}(c.StateMachineComponent),m=n(p.prototype,"FlowName",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"FlowName"}}),f=n(p.prototype,"LoadSceneName",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=p))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameFlowManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./MessageManager.ts","./MessageCmd.ts"],(function(e){var n,t,a,i,o,r,l,c,s,g,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,a=e.inheritsLoose,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.animation,c=e.director},function(e){s=e.SingletonComponent},function(e){g=e.MessageManager},function(e){u=e.MessageCmd}],execute:function(){var m,p,d,f,h,F,S,w,L;o._RF.push({},"dbd67iMpIFEuJwRAH2CJ74A","GameFlowManager",void 0);var b=r.ccclass,M=r.property,y=e("GameFlowTrigger",function(e){return e.StartUp="StartUp",e.Loading="Loading",e.Lobby="Lobby",e.MainFish="MainFish",e.ReloadTrigger="ReloadTrigger",e}({}));e("GameFlowData",b("GameFlowData")((d=n((p=function(e,n){t(this,"FlowName",d,this),t(this,"LoadSceneName",f,this),this.FlowName=e,this.LoadSceneName=n}).prototype,"FlowName",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"FlowName"}}),f=n(p.prototype,"LoadSceneName",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=p))||m),e("GameFlowManager",(h=b("GameFlowManager"),F=M(l.AnimationController),h((L=n((w=function(e){function n(){for(var n,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,t(n,"gameFlow",L,i(n)),n}a(n,e);var o=n.prototype;return o.triggerState=function(e){this.gameFlow.setValue(e,!0)},o.EnterLoading=function(){this.triggerState(y.Loading)},o.LoadComplete=function(){this.triggerState(y.Lobby)},o.EnterMainFish=function(){this.triggerState(y.MainFish)},o.LoadSceneProcess=function(e){g.Instance.emit(u.PRELOAD_START,e),e.LoadSceneName.trim().length>0&&(console.info("loadScene: "+e.LoadSceneName),c.loadScene(e.LoadSceneName)),g.Instance.emit(u.POSTLOAD_START,e)},n}(s)).prototype,"gameFlow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=w))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameViewer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoomController.ts","./ControllerState.ts","./FishPoolManager.ts","./ClientAgent.ts","./FSUIManager.ts","./FishPerform.ts","./PrefabData.ts","./PlayerFortManager.ts","./MessageManager.ts","./MessageCmd.ts","./MessageData.ts","./ServiceManager.ts","./Constants.ts","./FishKind.ts","./BulletPoolManager.ts","./FishOddsAttribute2.ts","./RoomFactory.ts","./UIAutoAttribute.ts","./RuntimeSettingConfig.ts","./ShootManager.ts","./ReplicaRoom.ts","./GMFrameRequestProcessor.ts","./GameConfig.ts","./Queue.ts","./BulletKind.ts","./FishAttribute2.ts","./SyncEventUtility.ts","./BGController.ts","./BonusFrequencyAttribute2.ts","./ThemeSettingAttribute2.ts","./BackgroundTimeAttribute.ts","./AudioManager.ts"],(function(t){var e,i,n,o,a,s,r,l,h,c,d,u,m,p,F,S,f,I,_,O,U,R,g,w,C,b,y,B,P,A,D,T,v,E,x,k,G,M,N,L,H,K,W,V,q,J,z,Q;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose,s=t.createClass,r=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){h=t.cclegacy,c=t._decorator,d=t.Node,u=t.Label,m=t.Vec3,p=t.instantiate,F=t.Component},function(t){S=t.RoomController},function(t){f=t.ControllerState},function(t){I=t.FishPoolManager},function(t){_=t.ClientAgent},function(t){O=t.FSUIManager},function(t){U=t.FishPerform},function(t){R=t.FishPrefabData},function(t){g=t.PlayerFortManager},function(t){w=t.MessageManager},function(t){C=t.MessageCmd},function(t){b=t.JoinRoomMessage,y=t.PlayerCoinChangeMessage},function(t){B=t.ServiceManager},function(t){P=t.Constants},function(t){A=t.FishKind},function(t){D=t.BulletPoolManager},function(t){T=t.FishOddsAttributeData},function(t){v=t.RoomFactory},function(t){E=t.UIAutoAttributeData},function(t){x=t.RuntimeSettingConfig},function(t){k=t.ShootManager},function(t){G=t.ReplicaRoom},function(t){M=t.GMFrameRequestProcessor},function(t){N=t.GameConfig},function(t){L=t.Queue},function(t){H=t.BulletKind},function(t){K=t.FishAttributeData},function(t){W=t.SyncEventUtility},function(t){V=t.BGController},function(t){q=t.BonusFrequencyAttributeData},function(t){J=t.ThemeSettingAttributeData},function(t){z=t.BackgroundTimeAttributeData},function(t){Q=t.AudioManager}],execute:function(){var X,j,Y,Z,$,tt,et,it,nt,ot,at,st,rt,lt,ht,ct;h._RF.push({},"82d2bhr7yJOx6QFTp0n7xa8","GameViewer",void 0);var dt=c.ccclass,ut=c.property;t("GameViewer",(X=dt("GameViewer"),j=ut(S),Y=ut(d),Z=ut(u),$=ut(u),tt=ut(u),et=ut(u),X((ot=e((nt=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"roomController",ot,o(e)),n(e,"deadFishRoot",at,o(e)),n(e,"spawnFishSpeed",st,o(e)),n(e,"debugInfoFrame",rt,o(e)),n(e,"debugRoomFrame",lt,o(e)),n(e,"debugFixUpdate",ht,o(e)),n(e,"debugRandomSeed",ct,o(e)),e._roomFactory=void 0,e._room=void 0,e._tickCount=0,e._tickUpdateTimeLimit=5,e._silentUpdateSetting=null,e._silentUpdateSettingPayload=null,e._gmFrameRequestProcessor=null,e._waitSpawnFishes=new L,e._isRoomReady=!1,e}i(e,t);var h=e.prototype;return h.onLoad=function(){this.InitRoom=this.InitRoom.bind(this),this.ExitRoom=this.ExitRoom.bind(this),this.OnFrameUpdate=this.OnFrameUpdate.bind(this),this.OnPlayerJoin=this.OnPlayerJoin.bind(this),this.OnPlayerExit=this.OnPlayerExit.bind(this),this.OnResetRoom=this.OnResetRoom.bind(this),this.OnRefreshRoundInfo=this.OnRefreshRoundInfo.bind(this),this.OnRefreshRoundGroup=this.OnRefreshRoundGroup.bind(this),this.OnBetChange=this.OnBetChange.bind(this),this.OnCoinChange=this.OnCoinChange.bind(this),this.OnSpawnBullet=this.OnSpawnBullet.bind(this),this.OnDespawnBullet=this.OnDespawnBullet.bind(this),this.OnTickSpeedUp=this.OnTickSpeedUp.bind(this),this.OnSpawnWave=this.OnSpawnWave.bind(this),this.OnBulletHitFish=this.OnBulletHitFish.bind(this),this.OnBulletCatchFish=this.OnBulletCatchFish.bind(this),this.OnSpawnFishAction=this.OnSpawnFishAction.bind(this),this.DespawnFish=this.DespawnFish.bind(this),this.OnFixedUpdateHandler=this.OnFixedUpdateHandler.bind(this),this.SetSettingData=this.SetSettingData.bind(this),this.OnEventSilentUpdateSettingAction=this.OnEventSilentUpdateSettingAction.bind(this),this.OnEventSilentUpdateTimeAction=this.OnEventSilentUpdateTimeAction.bind(this),this.OnSilentUpdateAction=this.OnSilentUpdateAction.bind(this),this.OnGetSpecialBulletRewardAction=this.OnGetSpecialBulletRewardAction.bind(this),this.OnSpecialBulletFinishAction=this.OnSpecialBulletFinishAction.bind(this),this.OnSetActivityDataAction=this.OnSetActivityDataAction.bind(this)},h.onEnable=function(){if(_.Instance.isLogin){for(_.Instance.OnFrameUpdate.add(this.OnFrameUpdate),_.Instance.OnExitRoom.add(this.ExitRoom),_.Instance.OnEventSilentUpdateSetting.add(this.OnEventSilentUpdateSettingAction),_.Instance.OnEventSilentUpdateTime.add(this.OnEventSilentUpdateTimeAction),this.SetSettingData(_.Instance.settingData,_.Instance.settingDataPayload),this.InitRoom(_.Instance.roomInfo);!_.Instance.frameQueue.isEmpty();)this.OnFrameUpdate(_.Instance.frameQueue.dequeue());_.Instance.isReady=!0,console.info("join room completely")}else this.roomController.OnFrameUpdate.add(this.OnFrameUpdate),this.roomController.OnExitRoom.add(this.OnPlayerExit),this.roomController.StartRoom()},h.onDisable=function(){this.Release(),_.Instance.isLogin?(_.Instance.OnFrameUpdate.remove(this.OnFrameUpdate),_.Instance.OnExitRoom.remove(this.ExitRoom),_.Instance.OnEventSilentUpdateSetting.remove(this.OnEventSilentUpdateSettingAction),_.Instance.OnEventSilentUpdateTime.remove(this.OnEventSilentUpdateTimeAction)):(this.roomController.OnFrameUpdate.remove(this.OnFrameUpdate),this.roomController.OnExitRoom.remove(this.OnPlayerExit))},h.update=function(t){!B.instance().roomService.isDisconnected&&this._room&&(this._isRoomReady?this.ClientUpdate():(this._isRoomReady=!0,this.SkipToCurrentFrame()))},h.ClientUpdate=function(){this._tickCount>this._room.Frame&&(this._tickCount-this._room.Frame>=x.instance().MuteTick/this._room.TickSpeedUp&&Q.instance().MuteForDuration(5e3),this._tickCount-this._room.Frame>=x.instance().ShowPopUpTick/this._room.TickSpeedUp&&(x.instance().IsSpeedUpMode=!0),this._tickCount-this._room.Frame<x.instance().AccelTickLimit/this._room.TickSpeedUp?this.NormalFrameUpdate():this.SkipToCurrentFrame())},h.NormalFrameUpdate=function(){for(var t=performance.now();this._tickCount>this._room.Frame;){if(V.LoadFirstBGFinish&&w.Instance.emit(C.RESET_BG_LOCATION,this._room.FixedUpdateCount,this._room.TickSpeedUp),this._room.FrameUpdate(),I.instance().FrameUpdate(),this._tickCount-this._room.Frame<x.instance().ShowPopUpTick/this._room.TickSpeedUp&&(x.instance().IsSpeedUpMode=!1),1e3*(performance.now()-t)>this._tickUpdateTimeLimit)break}},h.SkipToCurrentFrame=function(){for(;this._tickCount>this._room.Frame;)this._room.FrameUpdate(),I.instance().FrameUpdate()},h.OnFrameUpdate=function(t,e){if(_.Instance.isLogin||this._room||this.InitRoom(this.roomController.RoomInfo),this.debugInfoFrame.string="Info Frame: "+t.Frame,this.debugRoomFrame.string="Room Frame: "+this._room.Frame,this.debugRandomSeed.string="Random Seed: "+t.Info.RandomSeed,this._room.Frame<=t.Frame){if(null!=e&&null!=e.ReplayData&&this._room.Frame>0){this._room.CompleteFixedUpdate();var i=this._room.GetRoomInfo();e.ReplayData.CompareRoomInfo(i)}this._room.AddFrameInfo(t.Frame,t),this._tickCount=t.Frame+1,w.Instance.emit(C.ON_RECEIVE_FRAME_UPDATE,t)}else console.warn("Room frame: "+this._room.Frame+" > update frame: "+t.Frame)},h.OnPlayerJoin=function(t,e){console.log("Player "+t.PlayerID+" join room at fort "+e+"."),g.instance().setPlayerInfo(e,t)},h.OnPlayerExit=function(t,e,i){console.log("Player "+t+" exit room, fortID: "+e+", coin: "+i.toPerformValue()),g.instance().setPlayerInfo(e,null),O.Instance.WeaponUi.PlayerExit(e)},h.InitRoom=function(t){this._room=new G(this._roomFactory,Number.MAX_SAFE_INTEGER,t.RoomNo,this.roomController.FixedUpdateCountPerFrame,this.roomController.PerFrameTime,t.TickSpeedUp),this._room.OnPlayerJoin.add(this.OnPlayerJoin),this._room.OnPlayerExit.add(this.OnPlayerExit),this._room.OnResetRoom.add(this.OnResetRoom),this._room.OnRefreshRoundInfo.add(this.OnRefreshRoundInfo),this._room.OnRefreshRoundGroup.add(this.OnRefreshRoundGroup),this._room.OnBetChange.add(this.OnBetChange),this._room.OnCoinChange.add(this.OnCoinChange),this._room.OnSpawnBullet.add(this.OnSpawnBullet),this._room.OnDespawnBullet.add(this.OnDespawnBullet),this._room.OnDespawnFish.add(this.DespawnFish),this._room.OnTickSpeedUp.add(this.OnTickSpeedUp),this._room.OnSpawnWave.add(this.OnSpawnWave),this._room.OnBulletHitFish.add(this.OnBulletHitFish),this._room.OnBulletCatchFish.add(this.OnBulletCatchFish),this._room.OnSpawnFish.add(this.OnSpawnFishAction),this._room.OnFixedUpdateHandler.add(this.OnFixedUpdateHandler),this._room.OnSilentUpdate.add(this.OnSilentUpdateAction),this._room.OnGetSpecialBulletReward.add(this.OnGetSpecialBulletRewardAction),this._room.OnSpecialBulletFinish.add(this.OnSpecialBulletFinishAction),this._room.OnSetActivityData.add(this.OnSetActivityDataAction),N.config.useGMCommand&&(this._gmFrameRequestProcessor=new M,this._gmFrameRequestProcessor.RegisterRoom(this._room)),this._tickCount=0,this._tickUpdateTimeLimit=1e3/(P.PerTickTime*t.TickSpeedUp)*P.FixedUpdateCountPerTick,console.info("TickUpdateTimeLimit: "+this._tickUpdateTimeLimit),g.instance().initial(t.PlayerInfos,t.BetRegionInfo),D.instance().initial(this.FixedUpdateTime),I.instance().initial(),k.instance().initial(),console.log("Init room - frame: "+t.Frame+", random seed: "+t.RandomSeed),this._room.SetRoomInfo(t),w.Instance.emit(C.JOIN_ROOM,new b(t)),w.Instance.emit(C.ON_JOIN_ROOM,this._room)},h.Release=function(){this.unschedule(this.FixedUpdate),N.config.useGMCommand&&(this._gmFrameRequestProcessor.UnregisterRoom(this._room),this._gmFrameRequestProcessor=null),k.instance().release(),I.instance().release(),D.instance().release(),g.instance().release(),this._room.Dispose(),this._room=null,this._tickCount=0},h.ExitRoom=function(){_.Instance.ExitRoom(),this.Release()},h.FixedUpdate=function(){this._room.IsFinished||(this.debugFixUpdate.string="Fixed Update: "+this._room.FixedUpdateCount+"/"+this._room.MaxFixedUpdateCount,this._room.FixedUpdateCount<this._room.MaxFixedUpdateCount&&this._room.FixedUpdate())},h.OnResetRoom=function(){this.ResetFort(),D.instance().reset(),this.ResetFish(),k.instance().reset(),this.ResetBG(),O.Instance.WeaponUi.Reset(),this.unschedule(this.FixedUpdate),this.schedule(this.FixedUpdate,this.ScaledFixedUpdateTime,Number.MAX_SAFE_INTEGER)},h.OnRefreshRoundGroup=function(t){w.Instance.emit(C.ON_CHANGE_THEME,t,this._room.FixedUpdateCount)},h.OnRefreshRoundInfo=function(t){w.Instance.emit(C.REFRESH_BG,this._room.RoundMgr.RoundInfo)},h.OnBetChange=function(t,e){t!=g.instance().MainPlayerFortIndex&&g.instance().getPlayerFort(t).setBet(e.toPerformValue())},h.OnTickSpeedUp=function(t){this._tickUpdateTimeLimit=1e3/(P.PerTickTime*t)*P.FixedUpdateCountPerTick,g.instance().reset(),D.instance().reset(),this.ResetFish(),this.ResetBG(),this.unschedule(this.FixedUpdate),this.schedule(this.FixedUpdate,this.ScaledFixedUpdateTime,Number.MAX_SAFE_INTEGER)},h.OnSpawnWave=function(t,e){w.Instance.emit(C.ON_SPAWN_WAVE,t,e)},h.CheckSpawnFish=function(t){if(!this._waitSpawnFishes.isEmpty())for(var e=1,i=Math.max(Math.round(t*this.spawnFishSpeed),1);e<=i&&(this.SpawnFish(this._waitSpawnFishes.dequeue()),!this._waitSpawnFishes.isEmpty());++e);},h.OnSpawnFishAction=function(t){this._waitSpawnFishes.enqueue(t)},h.SpawnFish=function(t){var e=this;I.instance().SpawnFish(t.FishID,t.SerialNumber,t,this.ScaledFixedUpdateTime,this._room.FixedUpdateCountPerFrame).then((function(i){if(i){switch(t.State){case f.Spawn:case f.WaitForStart:i.active=!1;break;case f.FixedUpdate:I.instance().ResetFish(t.FishID,t.SerialNumber,t,e.ScaledFixedUpdateTime,e._room.FixedUpdateCountPerFrame)}w.Instance.emit(C.ON_SPAWN_FISH_NODE,i)}})).catch((function(t){console.error(t)}))},h.DespawnFish=function(t){w.Instance.emit(C.ON_DESPAWN_FISH,t)},h.OnSpawnBullet=function(t){g.instance().checkFortShootable(t.FortID,t.BulletKind)?D.instance().spawnBullet(t):console.log("SpawnBullet failed! BulletKind: "+t.BulletKind+", PlayerFort UsedBulletKind: "+g.instance().MainPlayerFort.UsedBulletKind)},h.OnDespawnBullet=function(t){D.instance().hasBulletNode(t.SerialNumber)?D.instance().despawnBullet(t):console.log("DespawnBullet failed! Not find bullet, id: "+t.SerialNumber)},h.OnGetSpecialBulletRewardAction=function(t){var e=this._room.FortMgr.TryGetFortByPlayerID(t.PlayerID);if(e.Success){w.Instance.emit(C.ON_GET_SPECIAL_BULLET_REWARD,t);var i=e.Fort,n=g.instance().checkMainFort(i.ID),o=!i.UsingSpecialBullet&&i.HoldingSpecialBulletInfos.length<2;n&&(g.instance().setBet(t.Bet),o&&!this.hasRemainSpecialBullets(i.ID,t.BulletKind)&&k.instance().setHoldingSpecialBulletInfo(t.GenHoldingSpecialBulletInfo(),i.ID)),O.Instance.WeaponUi.SetData(t),g.instance().ChangeBetState(i.ID,!0)}},h.OnSpecialBulletFinishAction=function(t,e){this.SpecialBulletFinishAction(t,e)},h.SpecialBulletFinishAction=function(){var t=r(l().mark((function t(e,i){var n,o,a,s,r,h,c,d,u,m,p=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.FortID,o=e.BulletKind,a=e.PlayerID,s=this._room.FortMgr.TryGetFortByPlayerID(a),g.instance().checkMainFort(n)&&k.instance().setHoldingSpecialBulletInfo(null,n),s.Success&&(O.Instance.WeaponUi.DequeueData(n),O.Instance.WeaponUi.ComboEnd(e)),t.next=8,W.waitCallback((function(){return!p.hasRemainSpecialBullets(n,o)}),P.PerTickTime);case 8:r=k.instance().MainShoot.BulletKind,s.Success&&(h=s.Fort,(c=h.TryPeekHoldingSpecialBulletInfo()).Success?(d=c.Info,r=d.BulletKind,k.instance().setHoldingSpecialBulletInfo(d,n),g.instance().switchFort(n,r)):(u=g.instance().getPlayerFort(n),g.instance().switchFort(n,u.LastBulletKind),g.instance().ChangeBetState(n,!1),g.instance().checkMainFort(n)||u.LastBulletKind!=H.Lock||((m=u.getBulletFort(H.Lock)).setLockIcon(m.LastLockGroupID),m.setCover(m.LastLockGroupID)))),O.Instance.WeaponUi.WeaponUiEnd(n);case 11:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),h.hasRemainSpecialBullets=function(t,e){return g.instance().getPlayerFort(t).getBulletFort(e).BulletCount>0},h.OnBulletHitFish=function(t,e,i){w.Instance.emit(C.ON_BULLET_HIT_FISH,t,e,i)},h.OnBulletCatchFish=function(t,e,i){if(t.Info){var n=t.BulletKind,o=g.instance().getPlayerFort(t.FortID),a=o.IsMainFort;switch(n){case H.Normal:case H.Lock:case H.Through:case H.Meteor:case H.Missile:case H.Bouncy:if(i&&i.Score>=0){var s=null,r=o.node.getWorldPosition(),l=Number(i.Score/t.Bet),h=i.Score>0,c=i.Score>0,d=I.instance().GetDeadFish(i.FishID,e);if(i.IsCatch){if(!d)return void console.error("[GameViewer:OnBulletCatchFish] Dead fish("+i.FishID+") not found.");s=d.FishPos;var u=d.FishAttribute.FishKind==A.Gotcha;if(u)O.Instance.ShowReward.ShowExpload(s,!1,d.FishAttribute.ID),a&&(h=!1,O.Instance.CameraShake.ShakeBig(l),O.Instance.WeaponUi.ShowScore(i.FortID,i.Score.toPerformValue(),n)),O.Instance.MainFishAudioController.playSpecialFishHitAudio();else{var p=d.FishPos;if(n==H.Normal){var F=t.Info;p=new m(F.PosX,F.PosY,0)}O.Instance.ShowReward.ShowNet(p,n==H.Normal),O.Instance.MainFishAudioController.playNormalCatchAudio(n,a)}d.CatchInfo=i,d.GotPos.set(o.GotFishPos),this.FishDead(d,u,a)}else{var S=I.instance().GetSpawnedFish(i.FishID);if(S)s=S.node.worldPosition,S.fishAttribute.FishKind==A.Gotcha&&(O.Instance.ShowReward.ShowExpload(s,!0,S.fishAttribute.ID),a&&O.Instance.CameraShake.TryShakeSmall(l),O.Instance.MainFishAudioController.playSpecialFishHitAudio(),S.fishPerform.playGotchaAudio(!0));else{console.warn("[GameViewer:OnBulletCatchFish] Fish("+i.FishID+") not found.");var f=K.Instance.Data.get(e.FishID);s=e.Pos,f.FishKind==A.Gotcha&&O.Instance.ShowReward.ShowExpload(s,!0,f.ID)}}if(c&&O.Instance.ShowReward.ShowRewardCoin(l,s,r,e,i),h){d?(d.FishAttribute.FishKind,A.Gotcha):console.warn("[GameViewer:OnBulletCatchFish] Dead fish("+i.FishID+") not found.");var _=o.GotScorePos;O.Instance.ShowReward.ShowScore(s,_,!0,e,i,(function(){o.playBumpCoin(i.Score.toPerformValue())})),O.Instance.WeaponUi.ShowScore(i.FortID,i.Score.toPerformValue(),n)}}break;default:console.error("Unknown bullet kind: "+t.Info.constructor.name)}}else console.warn("[GameViewer:OnBulletCatchFish] Bullet info is null.")},h.OnCoinChange=function(t,e){g.instance().getPlayerFort(t).onCoinChange(e.toPerformValue()),w.Instance.emit(C.ON_PLAYER_COIN_CHANGE,new y(t,e))},h.FishDead=function(t,e,i){var n=this;R.Instance.GetPrefab(t.FishID).then((function(e){var o=t.FishID,a=t.FishAttribute.FishKind==A.Gotcha,s=t.FishAttribute.FishKind==A.Bouncy||t.FishAttribute.FishKind==A.Meteor||t.FishAttribute.FishKind==A.Missile||t.FishAttribute.FishKind==A.Through;a&&I.instance().IncreaseNotNormalFish(o);var r=p(e);n.deadFishRoot.addChild(r),r.setPosition(t.FishPos);var l=function(){r.active=!1,r.destroy(),a&&I.instance().DecreaseNotNormalFish(o)};l=l.bind(n);var h=r.getComponent(U);if(h.setScale(t.FishAttribute.Scale),h.FishShadow.active=!1,r.active=!0,h.playGotchaAudio(i),a)h.GotchaDead(t.GotPos,t,i,l);else if(s){var c=function(){O.Instance.WeaponUi.ShowUI(t.CatchInfo.FortID)}.bind(n);h.WeaponDead(t.GotPos,c,l)}else h.NormalDead(l)}))},h.OnFixedUpdateHandler=function(){this.CheckSpawnFish(this._room.FixedUpdateTime)},h.ResetBG=function(){w.Instance.emit(C.ON_CHANGE_THEME,this._room.RoundMgr.RoundGroup,this._room.FixedUpdateCount),w.Instance.emit(C.REFRESH_BG,this._room.RoundMgr.RoundInfo)},h.ResetFort=function(){for(var t,e=this._room.FortMgr.Forts,i=a(e);!(t=i()).done;){var n=t.value;g.instance().setPlayerInfo(n.ID,n)}g.instance().reset()},h.ResetFish=function(){var t=[];this._room.FishMgr.GetAllFishInfo(t),this._waitSpawnFishes.clear();for(var e=0,i=t;e<i.length;e++){var n=i[e];if(n.State==f.Spawn){var o=I.instance().GetSpawnedFish(n.SerialNumber);null==o?this.SpawnFish(n):o.ResetFish(this.ScaledFixedUpdateTime)}else n.State>=f.WaitForStart&&n.State<=f.FixedUpdate?I.instance().ResetFish(n.FishID,n.SerialNumber,n,this.ScaledFixedUpdateTime,this._room.FixedUpdateCountPerFrame):n.State==f.None&&(w.Instance.emit(C.ON_DESPAWN_FISH,n),I.instance().DespawnFish(n.SerialNumber))}I.instance().reset()},h.SetSettingData=function(t,e){console.info("Get SettingData from Server"),T.Instance.LoadFromMemoryPack(t.FishOddsDatas.values()),E.Instance.LoadFromMemoryPack(t.UIAutoDatas.values()),q.Instance.LoadFromMemoryPack(t.BonusFrequencyDatas.values()),J.Instance.LoadFromMemoryPack(t.ThemeSettingDatas.values()),z.Instance.LoadFromMemoryPack(t.BackgroundTimeDatas.values()),this._roomFactory=new v(t,e)},h.OnEventSilentUpdateSettingAction=function(t,e){console.warn("Get SilentUpdate SettingData from Server"),this._silentUpdateSetting=t,this._silentUpdateSettingPayload=e},h.OnEventSilentUpdateTimeAction=function(t){console.warn("Get SilentUpdate Time from Server, SilentUpdateFixedUpdateCount: "+t.SilentUpdateFixedUpdateCount+", UnlockJoinRoomFixedUpdateCount: "+t.UnlockJoinRoomFixedUpdateCount),this._room.SetSilentUpdateFixedUpdateCount(t.SilentUpdateFixedUpdateCount,t.UnlockJoinRoomFixedUpdateCount)},h.OnSilentUpdateAction=function(){this.SetSettingData(this._silentUpdateSetting,this._silentUpdateSettingPayload),this._room.SetDatas(this._roomFactory),this._silentUpdateSetting=null,this._silentUpdateSettingPayload=null,w.Instance.emit(C.ON_SILENT_UPDATE_SETTING)},h.OnSetActivityDataAction=function(t){w.Instance.emit(C.ON_SET_ACTIVITY_DATA,t)},s(e,[{key:"FixedUpdateTime",get:function(){return this._room?this._room.FixedUpdateTime:0}},{key:"ScaledFixedUpdateTime",get:function(){return this._room?this._room.ScaledFixedUpdateTime:0}}]),e}(F)).prototype,"roomController",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(nt.prototype,"deadFishRoot",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(nt.prototype,"spawnFishSpeed",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 120}}),rt=e(nt.prototype,"debugInfoFrame",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(nt.prototype,"debugRoomFrame",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(nt.prototype,"debugFixUpdate",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(nt.prototype,"debugRandomSeed",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=nt))||it));h._RF.pop()}}}));

System.register("chunks:///_virtual/GeneralPopup.ts",["cc","./MessageManager.ts","./MessageCmd.ts","./StringMapAttribute.ts","./StringUtility.ts","./UIGeneralPopup.ts","./L10nKeyConfig.ts"],(function(e){var n,t,i,r,u,a,o,s;return{setters:[function(e){n=e.cclegacy},function(e){t=e.MessageManager},function(e){i=e.MessageCmd},function(e){r=e.StringMap},function(e){u=e.StringUtility},function(e){a=e.GeneralPopupType},function(e){o=e.L10nKeyConfig,s=e.SystemMessageType}],execute:function(){n._RF.push({},"6dd1ec2iI1GSoLcX2MCq6Q9","GeneralPopup",void 0),e("GeneralPopup",function(){function e(){}return e.open=function(e,n,a,c,l){for(var p,g,f=null!=(p=o.instance().GetSystemMsg(e))?p:r.GetString(n),y=arguments.length,G=new Array(y>5?y-5:0),M=5;M<y;M++)G[M-5]=arguments[M];n=u.format(f,G),a=null!=(g=o.instance().GetSystemMsg(s.generalPopup_Title))?g:r.GetString(a),t.Instance.emit(i.OPEN_GENERAL_POPUP,n,a,c,l)},e.openDefault=function(n,t,i){for(var r=arguments.length,u=new Array(r>3?r-3:0),o=3;o<r;o++)u[o-3]=arguments[o];e.open(n,t,e.defaultTitle,a.OneButton,i,u)},e}()).defaultTitle="H5F/GeneralPopup/Title",n._RF.pop()}}}));

System.register("chunks:///_virtual/GeneralPopupController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./UIGeneralPopup.ts"],(function(e){var n,o,r,t,p,a,i,l,s,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){p=e.cclegacy,a=e._decorator,i=e.Component},function(e){l=e.MessageManager},function(e){s=e.MessageCmd},function(e){u=e.UIGeneralPopup}],execute:function(){var c,P,f,G,h;p._RF.push({},"a25316fGIlII638SyGa79gS","GeneralPopupController",void 0);var g=a.ccclass,y=a.property;e("GeneralPopupController",(c=g("GeneralPopupController"),P=y({type:u,visible:!0}),c((h=n((G=function(e){function n(){for(var n,o=arguments.length,p=new Array(o),a=0;a<o;a++)p[a]=arguments[a];return n=e.call.apply(e,[this].concat(p))||this,r(n,"_popup",h,t(n)),n}o(n,e);var p=n.prototype;return p.onLoad=function(){this.onOpenGeneralPopup=this.onOpenGeneralPopup.bind(this),l.Instance.on(s.OPEN_GENERAL_POPUP,this.onOpenGeneralPopup)},p.onDestroy=function(){l.Instance.off(s.OPEN_GENERAL_POPUP,this.onOpenGeneralPopup)},p.onOpenGeneralPopup=function(e,n,o,r){this._popup.open(e,n,o,r)},n}(i)).prototype,"_popup",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=G))||f));p._RF.pop()}}}));

System.register("chunks:///_virtual/GetGameDemoLinkRequest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GetGameLinkRequestBase.ts"],(function(e){var t,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){s=e.GetGameLinkRequestBase}],execute:function(){n._RF.push({},"9a7b9YLedtO+LxR/WXrjAzd","GetGameDemoLinkRequest",void 0);e("GetGameDemoLinkRequest",function(e){function n(t,n,s,u){return e.call(this,t,n,s,u)||this}return t(n,e),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/GetGameLinkRequest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GetGameLinkRequestBase.ts"],(function(e){var t,n,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.GetGameLinkRequestBase}],execute:function(){n._RF.push({},"e7fafd4glhIXbz2azSAT+jD","GetGameLinkRequest",void 0);e("GetGameLinkRequest",function(e){function n(t,n,i,s,u,o,a){var c;return(c=e.call(this,t,n,i,s)||this).tol=void 0,c.max=void 0,c.min=void 0,c.tol=u,c.max=o,c.min=a,c}return t(n,e),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/GetGameLinkRequestBase.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"dc3aeN96DhE94NTxRj1crq7","GetGameLinkRequestBase",void 0);e("GetGameLinkRequestBase",(function(e,t,i,s){this.game_code=void 0,this.lang=void 0,this.mobile=void 0,this.username=void 0,this.game_code=e,this.lang=t,this.mobile=i,this.username=s}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GetGameLinkResponse.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"85a30lEImtICZidnCPShwJy","GetGameLinkResponse",void 0);e("GetGameLinkResponse",(function(){this.url=void 0}));n._RF.pop()}}}));

System.register("chunks:///_virtual/GetRoomServiceInfoRequest.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"c7893gP6rRHBYG2Zr6035XP","GetRoomServiceInfoRequest",void 0);e("GetRoomServiceInfoRequest",function(){function e(){this.AssignRoomID=void 0,this.IsDemo=void 0,this.AssignRoomID=0,this.IsDemo=!1}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeInt32(r.AssignRoomID),e.writeBoolean(r.IsDemo)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var o=new e;if(2==n)o.AssignRoomID=r.readInt32(),o.IsDemo=r.readBoolean();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return o;if(o.AssignRoomID=r.readInt32(),1==n)return o;if(o.IsDemo=r.readBoolean(),2==n)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GetRoomServiceInfoResponse.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"1c395NKBONN369B4WbpIcYk","GetRoomServiceInfoResponse",void 0);e("GetRoomServiceInfoResponse",function(){function e(){this.Ack=void 0,this.ServiceUrl=void 0,this.Ack=0,this.ServiceUrl=""}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeUint8(r.Ack),e.writeString(r.ServiceUrl)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(2==n)a.Ack=r.readUint8(),a.ServiceUrl=r.readString();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Ack=r.readUint8(),1==n)return a;if(a.ServiceUrl=r.readString(),2==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GetRoomServiceInfoResponseCode.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"318b2bENIJO+qtb7C9xZN5s","GetRoomServiceInfoResponseCode",void 0);e("GetRoomServiceInfoResponseCode",{Success:0,Exception:1,NoSutibleRoom:2,RoomNotFound:3,DemoNotMatch:4});o._RF.pop()}}}));

System.register("chunks:///_virtual/GMAddCoinReq.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"be54aboEYFPWJOauXPaP5bD","GMAddCoinReq",void 0);e("GMAddCoinReq",function(){function e(){this.PlayerID=void 0,this.Amount=void 0,this.PlayerID=0,this.Amount=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeUint32(r.PlayerID),e.writeFloat64(r.Amount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(2==n)a.PlayerID=r.readUint32(),a.Amount=r.readFloat64();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.PlayerID=r.readUint32(),1==n)return a;if(a.Amount=r.readFloat64(),2==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GMChangeTickSpeedUpReq.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"f65dckixoRFKpGFd+PVUgyw","GMChangeTickSpeedUpReq",void 0);e("GMChangeTickSpeedUpReq",function(){function e(){this.TickSpeedUp=void 0,this.TickSpeedUp=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeFloat32(r.TickSpeedUp)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.TickSpeedUp=r.readFloat32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.TickSpeedUp=r.readFloat32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GMCommand.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"b3ef8la/uJLD4/4H7GIa2js","GMCommand",void 0);e("GMCommand",{ReqGMCommand:0,RespGMCommand:1});n._RF.pop()}}}));

System.register("chunks:///_virtual/GMCommandAgent.ts",["cc","./ReqDataGMCommand.ts","./RespDataGMCommand.ts","./SubsystemCategory.ts","./GMCommand.ts"],(function(e){var n,t,m,s,a;return{setters:[function(e){n=e.cclegacy},function(e){t=e.ReqDataGMCommand},function(e){m=e.RespDataGMCommand},function(e){s=e.SubsystemCategory},function(e){a=e.GMCommand}],execute:function(){n._RF.push({},"6e0e8V3Qa9F0KB7ReN0NCmN","GMCommandAgent",void 0);e("GMCommandAgent",function(){var e=n.prototype;function n(){this.respGMCommandEvent=null,this._service=null,this.respGMCommand=this.respGMCommand.bind(this)}return e.setService=function(e){null!=this._service&&this._service.unregisterReceiveCommand(s.GMCommandSubsystem,a.RespGMCommand),this._service=e,this._service.registerReceiveCommand(s.GMCommandSubsystem,a.RespGMCommand,this.respGMCommand)},e.reqGMCommand=function(e){var n=t.serialize(e);this._service.sendCommand(s.GMCommandSubsystem,a.ReqGMCommand,n)},e.respGMCommand=function(e){var n=m.deserialize(e.buffer);null!=this.respGMCommandEvent&&this.respGMCommandEvent(n)},n}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GMCommandSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GMCommandAgent.ts","./ReqDataGMCommand.ts","./RespDataGMCommand.ts","./GameConfig.ts"],(function(n){var e,t,a,s,m,o;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy},function(n){a=n.GMCommandAgent},function(n){s=n.ReqDataGMCommand},function(n){m=n.RespDataGMCommand},function(n){o=n.GameConfig}],execute:function(){t._RF.push({},"4d121ByfHdMVIqVdv+Kvhos","GMCommandSystem",void 0);var i=n("GMCommandSystem",function(){function n(){this._agent=null,this.respGMCommand=this.respGMCommand.bind(this),this._agent=new a,this._agent.respGMCommandEvent=this.respGMCommand}var t=n.prototype;return t.setService=function(n){this._agent instanceof a&&this._agent.setService(n)},t.reqGMComamnd=function(n){if(!o.config.useGMCommand){var e=new m;return e.Command="Unknown",e.IsSuccess=!1,e.Result="can not use GM command!!",void this.respGMCommand(e)}if(null==n||0==n.length){var t=new m;return t.Command="Unknown",t.IsSuccess=!1,t.Result="unknown command!!",void this.respGMCommand(t)}var a=new s;a.Command=n,this._agent.reqGMCommand(a)},t.respGMCommand=function(e){null!=n.respGMCommandEvent&&n.respGMCommandEvent(e)},e(n,null,[{key:"instance",get:function(){return null==n._instance&&(n._instance=new n),n._instance}}]),n}());i.respGMCommandEvent=null,i._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/GMCommandTester.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GMCommandSystem.ts"],(function(n){var e,o,t,s,a,m,i,c;return{setters:[function(n){e=n.inheritsLoose},function(n){o=n.cclegacy,t=n._decorator,s=n.input,a=n.Input,m=n.KeyCode,i=n.Component},function(n){c=n.GMCommandSystem}],execute:function(){var r;o._RF.push({},"e659bvYAWJGBJ5qHFMnkLNq","GMCommandTester",void 0);var d=t.ccclass;t.property,n("GMCommandTester",d("GMCommandTester")(r=function(n){function o(){return n.apply(this,arguments)||this}e(o,n);var t=o.prototype;return t.onLoad=function(){this.onKeyDown=this.onKeyDown.bind(this),this.onRespGMCommandAction=this.onRespGMCommandAction.bind(this),s.on(a.EventType.KEY_DOWN,this.onKeyDown),c.respGMCommandEvent=this.onRespGMCommandAction},t.onDestroy=function(){c.respGMCommandEvent=null,s.off(a.EventType.KEY_DOWN,this.onKeyDown)},t.onKeyDown=function(n){switch(n.keyCode){case m.KEY_A:c.instance.reqGMComamnd("ChangeRoomSpeed 1");break;case m.KEY_B:c.instance.reqGMComamnd("ChangeRoomSpeed 2.0");break;case m.KEY_C:c.instance.reqGMComamnd("ChangeRoomSpeed 4.5");break;case m.KEY_D:c.instance.reqGMComamnd("ChangeRoomSpeed 8.5")}},t.onRespGMCommandAction=function(n){console.warn(n.Command+", "+n.IsSuccess+", "+n.Result)},o}(i))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/GMFrameRequestProcessor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GMChangeTickSpeedUpReq.ts","./GMSpawnFishReq.ts","./TypeName.ts","./ControllerState.ts","./GMAddCoinReq.ts","./KindHelper.ts"],(function(e){var n,t,o,r,s,i,a,p;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},function(e){o=e.GMChangeTickSpeedUpReq},function(e){r=e.GMSpawnFishReq},function(e){s=e.TypeName},function(e){i=e.ControllerState},function(e){a=e.GMAddCoinReq},function(e){p=e.KindHelper}],execute:function(){t._RF.push({},"0fe86xwixRN8YJLoHqvby7I","GMFrameRequestProcessor",void 0);e("GMFrameRequestProcessor",function(){function e(){}var t=e.prototype;return t.RegisterRoom=function(e){e.RegisterFrameRequestProcessor(s.GMChangeTickSpeedUpReq,this),e.RegisterFrameRequestProcessor(s.GMSpawnFishReq,this),e.RegisterFrameRequestProcessor(s.GMAddCoinReq,this)},t.UnregisterRoom=function(e){e.UnregisterFrameRequestProcessor(s.GMAddCoinReq),e.UnregisterFrameRequestProcessor(s.GMSpawnFishReq),e.UnregisterFrameRequestProcessor(s.GMChangeTickSpeedUpReq)},t.Process=function(e,n){return e instanceof o?this.ChangeTickSpeedUp(e,n):e instanceof r?this.SpawnFish(e,n):e instanceof a&&this.AddCoin(e,n)},t.ChangeTickSpeedUp=function(e,n){var t=e;return t.TickSpeedUp<=0?(console.warn("ChangeTickSpeedUp fail, "+t.TickSpeedUp+" <= 0"),!1):t.TickSpeedUp==n.TickSpeedUp?(console.warn("ChangeTickSpeedUp fail, "+t.TickSpeedUp+" is equal"),!1):(n.SetTickSpeedUp(t.TickSpeedUp),console.info("ChangeTickSpeedUp success, TickSpeedUp: "+t.TickSpeedUp),!0)},t.SpawnFish=function(e,t){for(var o,r=e,s=[],a=n(t.WaveDatas);!(o=a()).done;)for(var c=o.value,u=c[0],d=0,f=c[1].length-1;d<=f;++d)for(var h=c[1][d],l=0,S=h.Infos.length-1;l<=S;++l)for(var F=h.Infos[l],R=0,C=F.Fishs.length-1;R<=C;++R){if(F.Fishs[R].FishType==r.FishType&&(r.PathIndex<=-1||F.PathIndex==r.PathIndex)){s.push([u,F]);break}}if(0==s.length)return console.warn("SpawnFish fail, waveInfos is empty, FishType: "+r.FishType+", PathIndex: "+r.PathIndex),!1;s.sort((function(e,n){return}));var U=s[t.RandomNext(0,s.length)],T=t.SpawnFish(p.ToWaveKind(U[0]),U[1],r.FishType,t.RandomDouble(),t.RandomDouble()),g=r.UpdateCount<-1?Math.floor(500*(T.startUpdateCount+T.DestroyUpdateCount)/1e3):r.UpdateCount;return-1==g?T.Start():(T.UpdateCount=g,g>=0&&g<T.startUpdateCount?T.State=i.WaitForStart:g>=T.startUpdateCount&&g<T.DestroyUpdateCount?T.State=i.FixedUpdate:T.State=i.None),console.info("SpawnFish success, FishType: "+r.FishType+", PathIndex: "+U[1].PathIndex+", WaveInfo: "+U[1].InfoID),!0},t.AddCoin=function(e,n){var t=e,o=n.FortMgr.TryGetFortByPlayerID(t.PlayerID);if(!o.Success)return console.warn("AddCoin fail, fort not found: "+t.PlayerID),!1;var r=o.Fort,s=r.Coin;return n.AddCoin(r,t.Amount),console.info("AddCoin success, player: "+r.PlayerID+", amount: "+t.Amount.toPerformValue()+", coin: "+r.Coin.toPerformValue()+", diff: "+(r.Coin-s).toPerformValue()),!0},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GMSpawnFishReq.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"c4c211dplxLg5jqZdSb10Gw","GMSpawnFishReq",void 0);e("GMSpawnFishReq",function(){function e(){this.FishType=void 0,this.PathIndex=void 0,this.UpdateCount=void 0,this.FishType=0,this.PathIndex=0,this.UpdateCount=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeInt32(r.FishType),e.writeInt32(r.PathIndex),e.writeInt32(r.UpdateCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(3==n)a.FishType=r.readInt32(),a.PathIndex=r.readInt32(),a.UpdateCount=r.readInt32();else{if(n>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.FishType=r.readInt32(),1==n)return a;if(a.PathIndex=r.readInt32(),2==n)return a;if(a.UpdateCount=r.readInt32(),3==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GotchaFishCatchRule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CatchInfo.ts","./CatchRule.ts","./FishOddsAttributeHelper.ts"],(function(t){var s,h,i,a,e;return{setters:[function(t){s=t.inheritsLoose},function(t){h=t.cclegacy},function(t){i=t.CatchInfo},function(t){a=t.CatchRule},function(t){e=t.FishOddsAttributeHelper}],execute:function(){h._RF.push({},"5a1fdLrSahD/Jxbss1cGnzk","GotchaFishCatchRule",void 0);t("GotchaFishCatchRule",function(t){function h(s){var h;return(h=t.call(this,s)||this).fishRnd=s,h}return s(h,t),h.prototype.TryCatch=function(t,s){var h=this.fishRnd.Catch圖鑑(this._idealStandardRTP*s.FishOdds.GotchaSmallRTP,s.FishOdds.GotchaSmallMinOdds,s.FishOdds.GotchaSmallAverageOdds,s.FishOdds.GotchaSmallMaxOdds,this._idealStandardRTP*(1-s.FishOdds.GotchaSmallRTP),s.FishOdds.MinOdds,s.FishOdds.AverageOdds,s.FishOdds.MaxOdds),a=h[0],d=h[1],n=t.Bet*a,c=null;if((d||n>0)&&((c=new i).IsCatch=d,c.PlayerID=t.PlayerID,c.FortID=t.FortID,c.BulletID=t.ID,c.FishID=s.ID,c.Bet=t.Bet,c.Odds=a,c.Score=n,d)){var r=e.GetRankData(s.FishOdds,a);c.FishRank=r.FishRank,c.Length=this._fishRnd.RandomNext(r.MinLength,r.MaxLength),c.Weight=this._fishRnd.RandomNext(r.MinWeight,r.MaxWeight)}return[d,c]},h}(a));h._RF.pop()}}}));

System.register("chunks:///_virtual/GotchaFishConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./CollectionExtension.ts"],(function(t){var i,e,n,o,r,a,s,c,h,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,n=t.inheritsLoose,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.CCInteger,c=t.Prefab},function(t){h=t.SingletonComponent},function(t){l=t.CollectionExtension}],execute:function(){var u,p,g,f,y,F,S,b,d,C,_,m,v;r._RF.push({},"ea98bDmH+FB26njsKYym5vd","GotchaFishConfig",void 0);var D=a.ccclass,M=a.property,G=t("GotchaFishSetting",(u=D("GotchaFishSetting"),p=M({type:s}),g=M({type:[c]}),u((F=i((y=function(){e(this,"Id",F,this),e(this,"FxPrefab",S,this)}).prototype,"Id",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=i(y.prototype,"FxPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=y))||f));t("GotchaFishConfig",(b=D("GotchaFishConfig"),d=M({type:[G]}),b(((v=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"Settings",m,o(i)),i._gotchaFishSettingMap=null,i}n(i,t);var r=i.prototype;return r.GetShowRewardSetting=function(t){return this._gotchaFishSettingMap.has(t)?this._gotchaFishSettingMap.get(t):this._gotchaFishSettingMap.get(i.DefaultId)},r.onLoad=function(){t.prototype.onLoad.call(this),this._gotchaFishSettingMap=l.toMap(this.Settings,(function(t){return t.Id}))},r.onDestroy=function(){this._gotchaFishSettingMap=null,t.prototype.onDestroy.call(this)},i}(h)).DefaultId=-1,m=i((_=v).prototype,"Settings",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=_))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/HexConvertor.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"3828fyop7BCo6YYznsgZCVD","HexConvertor",void 0);n("HexConvertor",function(){function n(){}return n.ToHexString=function(n){var r="",t="0123456789ABCDEF";return new Uint8Array(n).forEach((function(n){r+=t[n>>4]+t[15&n]})),r},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/HoldingSpecialBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"96778oaM1VN6YSPnU+W/RSh","HoldingSpecialBulletInfo",void 0);e("HoldingSpecialBulletInfo",function(){function e(){this.BulletKind=void 0,this.MaxHitCount=void 0,this.RemainHitCount=void 0,this.Bet=void 0,this.BulletKind=0,this.MaxHitCount=0,this.RemainHitCount=0,this.Bet=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(4),e.writeInt32(r.BulletKind),e.writeUint32(r.MaxHitCount),e.writeUint32(r.RemainHitCount),e.writeFloat64(r.Bet)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(4==n)a.BulletKind=r.readInt32(),a.MaxHitCount=r.readUint32(),a.RemainHitCount=r.readUint32(),a.Bet=r.readFloat64();else{if(n>4)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.BulletKind=r.readInt32(),1==n)return a;if(a.MaxHitCount=r.readUint32(),2==n)return a;if(a.RemainHitCount=r.readUint32(),3==n)return a;if(a.Bet=r.readFloat64(),4==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/HttpHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"1e72aNpsu5Mzo4VSJcOqhOf","HttpHelper",void 0);var o=t("HttpResult",(function(t,n,e){this.Result=void 0,this.Success=void 0,this.ErrorMsg=void 0,this.Result=t,this.Success=n,this.ErrorMsg=e}));t("HttpHelper",function(){function t(){}return t.postAsync=function(){var t=n(e().mark((function t(n,r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){fetch(n,{method:"Post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(t){if(t.ok)return t.json();throw new Error(n+" occurs "+t.status)})).then((function(n){t(n?new o(n,!0,String.empty()):new o(null,!1,"data parse fail"))})).catch((function(n){console.error("post fail, error: "+n),t(new o(null,!1,""+n))}))})));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/IBetRegionInfo.ts",["cc","./BetRegionInfo.ts"],(function(){var e;return{setters:[function(t){e=t.cclegacy},null],execute:function(){e._RF.push({},"a9adeL5BG1OZqEfr0t3yUjM","IBetRegionInfo",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./NormalBulletInfo.ts","./LockBulletInfo.ts","./ThroughBulletInfo.ts","./MeteorBulletInfo.ts","./MissileBulletInfo.ts","./BouncyBulletInfo.ts"],(function(e){var r,n,i,t,o,a,u,l,s;return{setters:[function(e){r=e.cclegacy},function(e){n=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){t=e.NormalBulletInfo},function(e){o=e.LockBulletInfo},function(e){a=e.ThroughBulletInfo},function(e){u=e.MeteorBulletInfo},function(e){l=e.MissileBulletInfo},function(e){s=e.BouncyBulletInfo}],execute:function(){r._RF.push({},"f49ddUZ1mNCWJwu4uC8dmzn","IBulletInfo",void 0);e("IBulletInfo",function(){function e(){}return e.serialize=function(e){var r=n.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){if(null!=r){if(r instanceof t)return e.writeUnionHeader(0),void t.serializeCore(e,r);if(r instanceof o)return e.writeUnionHeader(1),void o.serializeCore(e,r);if(r instanceof a)return e.writeUnionHeader(2),void a.serializeCore(e,r);if(r instanceof u)return e.writeUnionHeader(3),void u.serializeCore(e,r);if(r instanceof l)return e.writeUnionHeader(4),void l.serializeCore(e,r);if(r instanceof s)return e.writeUnionHeader(5),void s.serializeCore(e,r);throw new Error("Concrete type is not in MemoryPackUnion")}e.writeNullObjectHeader()},e.serializeArray=function(e){var r=n.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,n){r.writeArray(n,(function(r,n){return e.serializeCore(r,n)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(e){var r=e.tryReadUnionHeader(),n=r[0],i=r[1];if(!n)return null;switch(i){case 0:return t.deserializeCore(e);case 1:return o.deserializeCore(e);case 2:return a.deserializeCore(e);case 3:return u.deserializeCore(e);case 4:return l.deserializeCore(e);case 5:return s.deserializeCore(e);default:throw new Error("Tag is not found in this MemoryPackUnion")}},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/IBulletSource.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./HoldingSpecialBulletInfo.ts"],(function(e){var r,i,n,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){t=e.HoldingSpecialBulletInfo}],execute:function(){r._RF.push({},"e5ec4c6UItN+LV4XVj6C/kk","IBulletSource",void 0);e("IBulletSource",function(){function e(){}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){if(null!=r){if(r instanceof t)return e.writeUnionHeader(0),void t.serializeCore(e,r);throw new Error("Concrete type is not in MemoryPackUnion")}e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(e){var r=e.tryReadUnionHeader(),i=r[0],n=r[1];if(!i)return null;switch(n){case 0:return t.deserializeCore(e);default:throw new Error("Tag is not found in this MemoryPackUnion")}},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/icu-component.ts",["cc"],(function(){var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){e._RF.push({},"7a9702ZfUJLAYlcof0GxBG1","icu-component",void 0);c.ccclass,c.property,c.requireComponent,c.executeInEditMode;e._RF.pop()}}}));

System.register("chunks:///_virtual/icu-options.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"dc153GItvdCNIAlIBY8vQ+M","icu-options",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/icu-type.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e5dc4ljkiFFpI9LqK8hBCPl","icu-type",void 0);var i=e("default",function(e){return e[e.DateTime=0]="DateTime",e[e.Number=1]="Number",e[e.List=2]="List",e[e.RelativeTime=3]="RelativeTime",e}(i||{}));t._RF.pop()}}}));

System.register("chunks:///_virtual/IdleTimeRefresher.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShootManager.ts","./AutoShootHelper.ts","./PlayerFortManager.ts","./BulletKind.ts","./ClientAgent.ts"],(function(e){var r,t,i,n,o,s,a,l,c,u,h,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Component},function(e){l=e.ShootManager},function(e){c=e.AutoShootHelper},function(e){u=e.PlayerFortManager},function(e){h=e.BulletKind},function(e){f=e.ClientAgent}],execute:function(){var p,m,d;o._RF.push({},"4b628MrVmxFoZNjPF4hIMvV","IdleTimeRefresher",void 0);var T=s.ccclass,y=s.property;e("IdleTimeRefresher",T("IdleTimeRefresher")((d=r((m=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o))||this,i(r,"_refreshTime",d,n(r)),r._refreshTimer=0,r}return t(r,e),r.prototype.update=function(e){(l.instance().IsAutoShoot||c.instance().IsAutoShootMode)&&u.instance().MainPlayerFort.UsedBulletKind==h.Lock?(this._refreshTimer+=e,this._refreshTimer>=this._refreshTime&&(this._refreshTimer=0,f.Instance.RefreshIdleTime())):this._refreshTimer=0},r}(a)).prototype,"_refreshTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),p=m))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/IFishGameAgent.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a5badWT5/BGw67XR7LkAYp+","IFishGameAgent",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IFortFireInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./FireNormal.ts","./FireLock.ts","./FireThrough.ts","./FireMeteor.ts","./FireMissile.ts","./FireBouncy.ts"],(function(e){var r,i,n,t,o,a,s,u,c;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){t=e.FireNormal},function(e){o=e.FireLock},function(e){a=e.FireThrough},function(e){s=e.FireMeteor},function(e){u=e.FireMissile},function(e){c=e.FireBouncy}],execute:function(){r._RF.push({},"5045eJ8TFhImJLfVYIM6LWT","IFortFireInfo",void 0);e("IFortFireInfo",function(){function e(){}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){if(null!=r){if(r instanceof t)return e.writeUnionHeader(0),void t.serializeCore(e,r);if(r instanceof o)return e.writeUnionHeader(1),void o.serializeCore(e,r);if(r instanceof a)return e.writeUnionHeader(2),void a.serializeCore(e,r);if(r instanceof s)return e.writeUnionHeader(3),void s.serializeCore(e,r);if(r instanceof u)return e.writeUnionHeader(4),void u.serializeCore(e,r);if(r instanceof c)return e.writeUnionHeader(5),void c.serializeCore(e,r);throw new Error("Concrete type is not in MemoryPackUnion")}e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(e){var r=e.tryReadUnionHeader(),i=r[0],n=r[1];if(!i)return null;switch(n){case 0:return t.deserializeCore(e);case 1:return o.deserializeCore(e);case 2:return a.deserializeCore(e);case 3:return s.deserializeCore(e);case 4:return u.deserializeCore(e);case 5:return c.deserializeCore(e);default:throw new Error("Tag is not found in this MemoryPackUnion")}},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/IFortFrameInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./ExitRequest.ts","./BetChange.ts","./GMChangeTickSpeedUpReq.ts","./GMSpawnFishReq.ts","./GMAddCoinReq.ts","./SetActivityRequest.ts"],(function(e){var r,i,n,t,o,a,s,u,c;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){t=e.ExitRequest},function(e){o=e.BetChange},function(e){a=e.GMChangeTickSpeedUpReq},function(e){s=e.GMSpawnFishReq},function(e){u=e.GMAddCoinReq},function(e){c=e.SetActivityRequest}],execute:function(){r._RF.push({},"6859eWrxRpKnIswF4LrMeDi","IFortFrameInfo",void 0);e("IFortFrameInfo",function(){function e(){}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){if(null!=r){if(r instanceof t)return e.writeUnionHeader(0),void t.serializeCore(e,r);if(r instanceof o)return e.writeUnionHeader(1),void o.serializeCore(e,r);if(r instanceof a)return e.writeUnionHeader(2),void a.serializeCore(e,r);if(r instanceof s)return e.writeUnionHeader(3),void s.serializeCore(e,r);if(r instanceof u)return e.writeUnionHeader(4),void u.serializeCore(e,r);if(r instanceof c)return e.writeUnionHeader(5),void c.serializeCore(e,r);throw new Error("Concrete type is not in MemoryPackUnion")}e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(e){var r=e.tryReadUnionHeader(),i=r[0],n=r[1];if(!i)return null;switch(n){case 0:return t.deserializeCore(e);case 1:return o.deserializeCore(e);case 2:return a.deserializeCore(e);case 3:return s.deserializeCore(e);case 4:return u.deserializeCore(e);case 5:return c.deserializeCore(e);default:throw new Error("Tag is not found in this MemoryPackUnion")}},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/IFrameRequestProcessor.ts",["cc"],(function(){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"48933EmbOlL+KpgzGbLeJLq","IFrameRequestProcessor",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IGMCommandAgent.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"5cdcdsMRj5DDof5dyamObdx","IGMCommandAgent",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/InputInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./IFortFrameInfo.ts","./IFortFireInfo.ts","./CatchInfo.ts","./PlayerInfo.ts","./SetActivityRequest.ts"],(function(e){var r,t,i,n,o,u,s,a;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.IFortFrameInfo},function(e){o=e.IFortFireInfo},function(e){u=e.CatchInfo},function(e){s=e.PlayerInfo},function(e){a=e.SetActivityRequest}],execute:function(){r._RF.push({},"5a7306NGYtP/ITcCdvlRgM0","InputInfo",void 0);e("InputInfo",function(){function e(){this.RandomSeed=void 0,this.FortRequests=void 0,this.FortFireRequests=void 0,this.CatchResults=void 0,this.JoinRequests=void 0,this.SetActivityRequest=void 0,this.RandomSeed=0,this.FortRequests=null,this.FortFireRequests=null,this.CatchResults=null,this.JoinRequests=null,this.SetActivityRequest=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeUint32(r.RandomSeed),e.writeArray(r.FortRequests,(function(e,r){return e.writeArray(r,(function(e,r){return n.serializeCore(e,r)}))})),e.writeArray(r.FortFireRequests,(function(e,r){return o.serializeCore(e,r)})),e.writeArray(r.CatchResults,(function(e,r){return u.serializeCore(e,r)})),e.writeArray(r.JoinRequests,(function(e,r){return s.serializeCore(e,r)})),a.serializeCore(e,r.SetActivityRequest)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],c=t[1];if(!i)return null;var f=new e;if(6==c)f.RandomSeed=r.readUint32(),f.FortRequests=r.readArray((function(e){return e.readArray((function(e){return n.deserializeCore(e)}))})),f.FortFireRequests=r.readArray((function(e){return o.deserializeCore(e)})),f.CatchResults=r.readArray((function(e){return u.deserializeCore(e)})),f.JoinRequests=r.readArray((function(e){return s.deserializeCore(e)})),f.SetActivityRequest=a.deserializeCore(r);else{if(c>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==c)return f;if(f.RandomSeed=r.readUint32(),1==c)return f;if(f.FortRequests=r.readArray((function(e){return e.readArray((function(e){return n.deserializeCore(e)}))})),2==c)return f;if(f.FortFireRequests=r.readArray((function(e){return o.deserializeCore(e)})),3==c)return f;if(f.CatchResults=r.readArray((function(e){return u.deserializeCore(e)})),4==c)return f;if(f.JoinRequests=r.readArray((function(e){return s.deserializeCore(e)})),5==c)return f;if(f.SetActivityRequest=a.deserializeCore(r),6==c)return f}return f},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/InRoomHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerFortManager.ts"],(function(e){var t,i,n,r,o,a,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,c=e.Component},function(e){u=e.PlayerFortManager}],execute:function(){var p,s,y,f,H,h,d;o._RF.push({},"25c20ewzldN86HuWVAviNHy","InRoomHint",void 0);var v=a.ccclass,g=a.property;e("InRoomHint",(p=v("InRoomHint"),s=g(l),y=g(l),p((h=t((H=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"playerHintLeftNode",h,r(t)),n(t,"playerHintRightNode",d,r(t)),t}i(t,e);var o=t.prototype;return o.start=function(){this.ShowHereHint()},o.ShowHereHint=function(){var e=u.instance().MainPlayerFortIndex;0===e||3===e?(this.playerHintLeftNode.active=!0,this.playerHintRightNode.active=!1):(this.playerHintLeftNode.active=!1,this.playerHintRightNode.active=!0)},t}(c)).prototype,"playerHintLeftNode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(H.prototype,"playerHintRightNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=H))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/InRoomPlayerInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"8edf1rBB0ZNl7To0S2eXKo2","InRoomPlayerInfo",void 0);e("InRoomPlayerInfo",function(){function e(){this.Id=void 0,this.Name=void 0,this.Gold=void 0,this.Id="",this.Name="",this.Gold=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeString(r.Id),e.writeString(r.Name),e.writeUint32(r.Gold)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(3==n)a.Id=r.readString(),a.Name=r.readString(),a.Gold=r.readUint32();else{if(n>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Id=r.readString(),1==n)return a;if(a.Name=r.readString(),2==n)return a;if(a.Gold=r.readUint32(),3==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Intl.PluralRules.ts",["cc","./polyfill.mjs_cjs=&original=.js"],(function(){var l;return{setters:[function(n){l=n.cclegacy},null],execute:function(){l._RF.push({},"c9594RdIOFIPIqnCMoH103U","Intl.PluralRules",void 0),l._RF.pop()}}}));

System.register("chunks:///_virtual/IntroduceController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDotGroup.ts","./UIIntroduceScrollView.ts"],(function(t){var e,i,n,o,r,l,c,s,u,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,c=t.Component},function(t){s=t.UIDotGroup},function(t){u=t.UIIntroduceScrollView,a=t.MoveDirection}],execute:function(){var d,p,_,h,f,x,I,b,v;r._RF.push({},"42ca8hCFeBMJbK+KwCs+CN/","IntroduceController",void 0);var y=l.ccclass,w=l.property;t("IntroduceController",(d=y("IntroduceController"),p=w({visible:!0}),_=w({type:u,visible:!0}),h=w({type:s,visible:!0}),d((I=e((x=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_count",I,o(e)),n(e,"_scrollView",b,o(e)),n(e,"_dotGroup",v,o(e)),e._index=0,e}i(e,t);var r=e.prototype;return r.start=function(){this._scrollView.setItemIndex(this._index),this._dotGroup.setIndex(this._index)},r.onLeftClick=function(){--this._index,this._index<0&&(this._index=this._count-1),this._scrollView.move(a.left),this._dotGroup.setIndex(this._index)},r.onRightClick=function(){++this._index,this._index>=this._count&&(this._index=0),this._scrollView.move(a.right),this._dotGroup.setIndex(this._index)},e}(c)).prototype,"_count",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),b=e(x.prototype,"_scrollView",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(x.prototype,"_dotGroup",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=x))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/IReward.ts",["cc","./FishKind.ts"],(function(){var e;return{setters:[function(t){e=t.cclegacy},null],execute:function(){e._RF.push({},"b8fa1ukOllKaL1yLiumjh/u","IReward",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IRewardRule.ts",["cc","./FishKind.ts"],(function(){var e;return{setters:[function(t){e=t.cclegacy},null],execute:function(){e._RF.push({},"505a9yJNkhJnrhrlwOhC3jg","IRewardRule",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,o;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t._decorator}],execute:function(){var n,l,s,u,c,p,a;r._RF.push({},"e1041sbIIBDAYgKnJXstKhr","JackpotConfig",void 0);var h=o.ccclass,f=o.property;t("JackpotConfig",(n=h("JackpotConfig"),l=f({tooltip:"要變成LV2的分數 = 押注區間最大押注 * 這個參數"}),s=f({tooltip:"要變成LV3的分數 = 押注區間最大押注 * 這個參數"}),n((p=e((c=function(){function t(){i(this,"LV2ThresholdMultiplier",p,this),i(this,"LV3ThresholdMultiplier",a,this),this._betRegion=[],this._maxBet=0,this._minBet=0}var e=t.prototype;return e.SetBetRegion=function(t,e,i){this._betRegion.push(t),this._minBet=e,this._maxBet=i},e.GetJackpotScoreLV=function(t){var e=this._maxBet*this.LV2ThresholdMultiplier,i=this._maxBet*this.LV3ThresholdMultiplier,r=1;return t>e&&t<=i?r=2:t>i&&(r=3),r},t}()).prototype,"LV2ThresholdMultiplier",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=e(c.prototype,"LV3ThresholdMultiplier",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/JsonAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,a,s,r,o,l,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,i=t.inheritsLoose,a=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,o=t._decorator,l=t.JsonAsset,u=t.Component}],execute:function(){var c,h,p,f,d,y,D,v,J;t("JsonName",(function(t){void 0===t&&(t=null);return function(n,e){var i=n.constructor.name;m[i+"_"+e]=null!=t?t:e}})),r._RF.push({},"443fdqn40xIsqYJZFmj5sRX","JsonAttribute",void 0);var g=o.ccclass,_=o.property,m=t("JsonDataName",new Map);t("BaseData",g("BaseData")((p=n((h=function(){e(this,"Id",p,this)}).prototype,"Id",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=h))||c),t("JsonAttribute",(f=g("JsonAttribute"),d=_(l),y=_(l),f((J=n((v=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,e(n,"_jsonFile",J,a(n)),n.Settings=void 0,n.Data=void 0,n._dataMap=null,n}i(n,t);var r=n.prototype;return r.OnDeserialized=function(){try{var t=this.GetJsonByName("Settings");this.OnParseSettings(t);var n=this.GetJsonByName("Data");this.OnParseData(n),this.onLoad()}catch(t){t instanceof TypeError||console.error(t)}},r.OnSerialized=function(){return JSON.stringify({Settings:this.Settings,Data:this.Data})},r.onLoad=function(){this._dataMap=new Map;for(var t=0;t<this.Data.length;t++)this._dataMap.set(this.Data[t].Id,t)},r.GetJsonByName=function(t){this.JsonFile.json;var n=m[this.constructor.name+"_"+t];return null==n&&(n=t),"."==n?this.JsonFile.json:this.JsonFile.json[n]},r.OnParseSettings=function(t){for(var n in t)this.Settings[n]=t[n]},r.OnParseData=function(t){var n=this;this.Data=[];var e=0;t.forEach((function(t){var i=n.CreateDataItem();for(var a in t)i[a]=t[a];n.Data[e++]=i}))},r.GetById=function(t){return this.Data[this._dataMap.get(t)]},r.HasId=function(t){return this._dataMap.has(t)},s(n,[{key:"JsonFile",get:function(){return this._jsonFile},set:function(t){this._jsonFile=t,null!=t?this.OnDeserialized():console.warn("[JsonAttribute.Set_JsonFile] Set empty asset")}}]),n}(u)).prototype,"_jsonFile",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n(v.prototype,"JsonFile",[y],Object.getOwnPropertyDescriptor(v.prototype,"JsonFile"),v.prototype),D=v))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/KindHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./FireNormal.ts","./FireLock.ts","./FireThrough.ts","./FireMeteor.ts","./FireMissile.ts","./FireBouncy.ts","./FishKind.ts","./WaveType.ts","./WaveKind.ts"],(function(n){var e,i,r,t,o,s,u,a,c,l,d,f;return{setters:[function(n){e=n.createForOfIteratorHelperLoose},function(n){i=n.cclegacy},function(n){r=n.BulletKind},function(n){t=n.FireNormal},function(n){o=n.FireLock},function(n){s=n.FireThrough},function(n){u=n.FireMeteor},function(n){a=n.FireMissile},function(n){c=n.FireBouncy},function(n){l=n.FishKind},function(n){d=n.WaveType},function(n){f=n.WaveKind}],execute:function(){i._RF.push({},"b0f6bftBBZNaL0NPFZUwPs2","KindHelper",void 0),n("KindHelper",function(){function n(){}return n.TryTransFishKindToBulletKind=function(n){for(var i,t=e(this.FishKindAndBulletKindMap);!(i=t()).done;){var o=i.value;if(o[0]===n)return[!0,o[1]]}return[!1,r.None]},n.TryTransBulletKindToFishKind=function(n){for(var i,r=e(this.FishKindAndBulletKindMap);!(i=r()).done;){var t=i.value;if(t[1]===n)return[!0,t[0]]}return[!1,l.Normal]},n.IsSmallFish=function(n){return n===l.Normal},n.IsGotchaFish=function(n){return n===l.Gotcha||n===l.LuckyBag},n.IsSpecialFish=function(n){return this.TryTransFishKindToBulletKind(n)[0]},n.IsNormalBullet=function(n){return n===r.Normal||n===r.Lock},n.IsSpecialBullet=function(n){return this.TryTransBulletKindToFishKind(n)[0]},n.ToWaveType=function(n,e){switch(void 0===e&&(e=!0),n){case f.Normal:return d.Wave30s_01;case f.Middle:return e?d.WaveBonusKind00:d.Wave30s_01;case f.Gotcha:return d.WaveBonusKind01;case f.Weapon:return d.WaveBonusKind02;case f.GotchaLow:return d.WaveBonusKind01;case f.Boss:return d.WaveBonusKind04;case f.Activity:return d.WaveBonusKind03;default:throw new RangeError("No WaveType matching")}},n.ToWaveKind=function(n){switch(n){case d.Wave30s_01:return f.Normal;case d.WaveBonusKind00:return f.Middle;case d.WaveBonusKind01:return f.Gotcha;case d.WaveBonusKind02:return f.Weapon;case d.WaveBonusKind04:return f.Boss;case d.WaveBonusKind03:return f.Activity;default:throw new RangeError("No WaveKind matching")}},n.FortFireInfoToBulletKind=function(n){return n instanceof t?r.Normal:n instanceof o?r.Lock:n instanceof s?r.Through:n instanceof u?r.Meteor:n instanceof a?r.Missile:n instanceof c?r.Bouncy:r.None},n}()).FishKindAndBulletKindMap=new Map([[l.Through,r.Through],[l.Meteor,r.Meteor],[l.Missile,r.Missile],[l.Bouncy,r.Bouncy]]),i._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-component.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(t){var e,n,o,r,i,l,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.createClass},function(t){r=t.cclegacy,i=t._decorator,l=t.Label,a=t.Component},function(t){s=t.EDITOR}],execute:function(){var c,p,u,d,h,f,g;r._RF.push({},"64a56e3cKhJIYlOsrVQprpv","l10n-component",void 0);var v=i.ccclass,b=i.property,y=i.disallowMultiple,m=i.requireComponent,L=i.menu;t("default",(c=v("L10nComponent"),p=m(l),u=y(),d=L("hidden:LocalizationEditor/L10nComponent"),h=b({readonly:!0}),c(f=p(f=u(f=d((e((g=function(t){function e(){var e;return(e=t.call(this)||this).label=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.label=this.node.getComponent(l)},r.start=function(){this.render()},r.render=function(){},r.preview=function(t){if(this.label&&s){var e=this.label.string;this.label._string=t,this.label.updateRenderData(!0),cce.Engine.repaintInEditMode(),this.label._string=e}},o(e,[{key:"string",get:function(){var t;return(null==(t=this.label)?void 0:t.string)||""}}]),e}(a)).prototype,"string",[h],Object.getOwnPropertyDescriptor(g.prototype,"string"),g.prototype),f=g))||f)||f)||f)||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n-manager.ts","./l10n-component.ts"],(function(t){var e,n,o,r,i,c,l,u,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){c=t.cclegacy,l=t._decorator,u=t.CCInteger},function(t){a=t.default},function(t){s=t.default}],execute:function(){var p,y,f,d,b,h,v,_,g,k,L;c._RF.push({},"30d83qzRfZHLYMFn4KA9PG4","l10n-label",void 0);var m=l.ccclass,z=l.property,w=l.executeInEditMode,D=l.menu;t("default",(p=m("L10nLabel"),y=w(!0),f=D("LocalizationEditor/L10nLabel"),d=z({visible:!1}),b=z({visible:!0}),h=z({visible:!1}),v=z({type:u,visible:!0}),p(_=y(_=f((k=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,o(e,"_key",k,r(e)),o(e,"_count",L,r(e)),e}n(e,t);var c=e.prototype;return c.onLoad=function(){"function"==typeof t.prototype.onLoad&&t.prototype.onLoad.call(this)},c.render=function(){var t=a.t(this._key,{count:this._count});void 0!==this.label&&void 0!==t&&(this.label.string=t)},i(e,[{key:"key",get:function(){return this._key},set:function(t){this._key=t,this.render()}},{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.render()}}]),e}(s)).prototype,"_key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(g.prototype,"key",[b],Object.getOwnPropertyDescriptor(g.prototype,"key"),g.prototype),L=e(g.prototype,"_count",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(g.prototype,"count",[v],Object.getOwnPropertyDescriptor(g.prototype,"count"),g.prototype),_=g))||_)||_)||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-listen-event.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"34153BqzJ9LR4lhJDevpA4f","l10n-listen-event",void 0);var t=e("default",function(e){return e.languageChanged="languageChanged",e.onMissingKey="missingKey",e}(t||{}));n._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./i18next.js","./resource-data-manager.ts","./localization-global.ts","./L10nUtility.ts"],(function(e){var t,n,r,a,i,l,s,u,o,c,g,h;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime,a=e.extends},function(e){i=e.cclegacy,l=e.assetManager,s=e.game},function(e){u=e.createInstance},function(e){o=e.default},function(e){c=e.mainName,g=e.pluginName},function(e){h=e.L10nUtility}],execute:function(){var f;i._RF.push({},"2856a7GSV9Fbb53nOimJ33J","l10n-manager",void 0);var d=e("L10nManager",function(){function e(){this._intl=void 0,this._options={},this.resourceList=void 0,this.resourceBundle={},this.resourceDataManager=void 0,this.resourceDataManager=new o}var i=e.prototype;return i.isInitialized=function(){var e,t;return null!=(e=null==(t=this._intl)?void 0:t.isInitialized)&&e},i.createIntl=function(){var t=n(r().mark((function t(n){var i,l,s,o,c,g,f,d,L,_,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reloadResourceData();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return this._options=n,this._intl=u(),c=void 0,c=localStorage.getItem(null!=(g=v._options.localStorageLanguageKey)?g:e.LOCAL_STORAGE_LANGUAGE_KEY),c=this.checkLanguage(c),f=this.checkLanguage(h.GetLanguageTag()),console.log("languageTag:",f),d=null!=(i=null!=(l=null!=f?f:c)?l:n.language)?i:this.resourceList.defaultLanguage,L=null!=(s=n.fallbackLanguage)?s:this.resourceList.fallbackLanguage,_=null!=(o=n.resources)?o:this.resourceBundle,console.log("l10n defaultLanguage:",d),p={lng:d,fallbackLng:L,resources:a({},_),ns:e.ALLOW_NAMESPACE,defaultNS:e.DEFAULT_NAMESPACE,initImmediate:!1,load:"currentOnly"},t.next=18,this._intl.init(p);case 18:this.setAssetOverrideMap(_[d][e.ASSET_NAMESPACE]);case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.checkLanguage=function(e){if(e&&0!==e.length&&"null"!==e&&null!==e&&"undefined"!==e&&void 0!==e)return this.resourceList&&this.resourceList.languages.length>0&&this.resourceList.languages.find((function(t){return t===e}))?e:void 0},i.cloneIntl=function(e){if(!this._intl)throw new Error("i18next not init, please use 'l10n.createIntl'");this._intl=this._intl.cloneInstance(e)},i.reloadResourceData=function(){var e=n(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resourceDataManager.readResourceList();case 2:if(this.resourceList=e.sent,this.resourceList){e.next=6;break}return console.log("["+g+"] not found translate language list, skip init l10n"),e.abrupt("return",!1);case 6:return e.next=8,this.resourceDataManager.readResourceBundle(null!=(t=null==(n=this.resourceList)?void 0:n.languages)?t:[]);case 8:if(this.resourceBundle=e.sent,null!=(a=this.resourceList)&&a.defaultLanguage){e.next=12;break}return console.log("["+g+"] not found translate language data, skip init l10n"),e.abrupt("return",!1);case 12:return console.log("["+g+"] reloadResourceData SUCCESS!"),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.config=function(e){this.cloneIntl(e)},i.changeLanguage=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return console.warn("["+g+"] invalid language tag"),t.abrupt("return");case 3:if(console.log("["+g+"] will change language to",n),!this._intl){t.next=12;break}return this.currentLanguage&&this.releaseOverrideMap(this.resourceBundle[this.currentLanguage][e.ASSET_NAMESPACE]),t.next=8,this._intl.changeLanguage(n);case 8:this.setAssetOverrideMap(this.resourceBundle[n][e.ASSET_NAMESPACE]),localStorage.setItem(e.LOCAL_STORAGE_LANGUAGE_KEY,n),console.log("["+g+"] game will restart"),s.restart(),t.next=13;break;case 12:console.log("["+g+"] language data not load, please confirm whether the language data is included in the build");case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.t=function(e,t){var n,r;return null!=(n=null==(r=this._intl)?void 0:r.isInitialized)&&n?this._intl.t(e,t):e},i.tn=function(e,t){var n,r,a;if(null==(n=null==(r=this._intl)?void 0:r.isInitialized)||!n)return e.toString();var i={};Object.assign(i,t);for(var l=0,s=Object.keys(i);l<s.length;l++){var u=s[l];("string"==typeof i[u]&&0===i[u].length||"number"==typeof i[u]&&0===i[u])&&delete i[u]}return new Intl.NumberFormat(null==(a=this._intl)?void 0:a.language,i).format(e)},i.td=function(e,t){var n,r,a;if(null==(n=null==(r=this._intl)?void 0:r.isInitialized)||!n)return e.toString();var i={};Object.assign(i,t);for(var l=0,s=Object.keys(i);l<s.length;l++){var u=s[l];"string"==typeof i[u]&&0===i[u].length&&delete i[u]}return new Intl.DateTimeFormat(null==(a=this._intl)?void 0:a.language,i).format(e)},i.tt=function(e,t,n){var r,a,i;if(null==(r=null==(a=this._intl)?void 0:a.isInitialized)||!r)return e.toString();var l={};Object.assign(l,n);for(var s=0,u=Object.keys(l);s<u.length;s++){var o=u[s];"string"==typeof l[o]&&0===l[o].length&&delete l[o]}return new Intl.RelativeTimeFormat(null==(i=this._intl)?void 0:i.language,l).format(e,t)},i.tl=function(e){var t,n,r;return null!=(t=null==(n=this._intl)?void 0:n.isInitialized)&&t?new Intl.ListFormat(null==(r=this._intl)?void 0:r.language).format(e):e.toString()},i.exists=function(e){var t,n;return null!=(t=null==(n=this._intl)?void 0:n.exists(e))&&t},i.direction=function(e){return(e?new Intl.Locale(e):new Intl.Locale(this._intl.language)).textInfo().direction},i.on=function(e,t){var n;null==(n=this._intl)||n.on(e,t)},i.off=function(e,t){var n;null==(n=this._intl)||n.off(e,t)},i.getResourceBundle=function(e,t){var n;return null==(n=this._intl)?void 0:n.getResourceBundle(e,t)},i.setAssetOverrideMap=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];l.assetsOverrideMap.set(r,e[r])}},i.releaseOverrideMap=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];l.assetsOverrideMap.delete(r)}},t(e,[{key:"currentLanguage",get:function(){var e,t;return null!=(e=null==(t=this._intl)?void 0:t.language)?e:""}},{key:"languages",get:function(){var e,t;return null!=(e=null==(t=this.resourceList)?void 0:t.languages)?e:[]}}]),e}());f=d,d.LOCAL_STORAGE_LANGUAGE_KEY=c+"/language",d.DEFAULT_NAMESPACE="translation",d.ASSET_NAMESPACE="asset",d.ALLOW_NAMESPACE=[f.DEFAULT_NAMESPACE,f.ASSET_NAMESPACE],d.l10n=new f;var v=e("default",d.l10n);i._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-options.ts",["cc"],(function(){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"b4618IbsRtLLbRp2dQrE3EI","l10n-options",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/l10n.ts",["cc","./l10n-manager.ts","./l10n-listen-event.ts","./l10n-label.ts"],(function(n){var t;return{setters:[function(n){t=n.cclegacy},function(t){var e={};e.L10nManager=t.L10nManager,e.l10n=t.default,n(e)},function(t){n("L10nListenEvent",t.default)},function(t){n("L10nLabel",t.default)}],execute:function(){t._RF.push({},"07b54nOFPVJZJ/ENmuVbfjY","l10n",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/L10nKeyConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./l10n.ts","./l10n-manager.ts"],(function(e){var o,n,t,i,r,a,u,l,p;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.Enum},function(e){l=e.SingletonComponent},null,function(e){p=e.default}],execute:function(){var c,s,m,g,f,y,h,d,_,b,P,T,N,R,I,w,F,S,v,z,x,D,C,M,B,L,A,E,K,U,G;r._RF.push({},"284aehnQ+RAv7Poyc14x+HC","L10nKeyConfig",void 0);var j=a.ccclass,k=a.property,J=e("SystemMessageType",function(e){return e[e.generalPopup_RoomDisconnect=0]="generalPopup_RoomDisconnect",e[e.generalPopup_RoomConnectFailure=1]="generalPopup_RoomConnectFailure",e[e.generalPopup_RoomIdleTimeout=2]="generalPopup_RoomIdleTimeout",e[e.generalPopup_JoinRoomFail=3]="generalPopup_JoinRoomFail",e[e.generalPopup_InsufficientBalance=4]="generalPopup_InsufficientBalance",e[e.generalPopup_Maintenance=5]="generalPopup_Maintenance",e[e.generalPopup_UnexpectedError=6]="generalPopup_UnexpectedError",e[e.generalPopup_Title=7]="generalPopup_Title",e[e.generalPopup_DemoInvalid=8]="generalPopup_DemoInvalid",e[e.autoPopup_AutoShoot=9]="autoPopup_AutoShoot",e[e.autoPopup_MoreThan=10]="autoPopup_MoreThan",e[e.autoPopup_LessThan=11]="autoPopup_LessThan",e}({}));u(J);e("L10nKeyConfig",(c=j("L10nKeyConfig"),s=k({group:"魚的名子",displayName:"前綴",tooltip:"中間請放魚的LockGroup"}),m=k({group:"魚的名子",displayName:"後綴",tooltip:"中間請放魚的LockGroup"}),g=k({group:"系統訊息",displayName:"連線中斷",tooltip:"連線中斷，請重新進入遊戲\n({0})"}),f=k({group:"系統訊息",displayName:"連線異常",tooltip:"連線異常，請重新進入遊戲\n({0})"}),y=k({group:"系統訊息",displayName:"閒置過久",tooltip:"閒置過久，請重新進入遊戲\n({0})"}),h=k({group:"系統訊息",displayName:"系統異常",tooltip:"系統異常，請截圖聯繫客服\n({0})"}),d=k({group:"系統訊息",displayName:"餘額不足",tooltip:"餘額不足無法進行遊戲\n({0})"}),_=k({group:"系統訊息",displayName:"系統維護中",tooltip:"系統維護中\n({0})"}),b=k({group:"系統訊息",displayName:"未預期的錯誤",tooltip:"未預期的錯誤，請重新進入遊戲"}),P=k({group:"系統訊息",displayName:"免費仔不能用",tooltip:"免費仔不能用"}),T=k({group:"系統訊息",displayName:"系統提示",tooltip:"系統提示"}),N=k({group:"自動停止",displayName:"射擊次數",tooltip:"已達自動停止選項：\n自動射擊次數= {0} 次\n停止AUTO狀態。"}),R=k({group:"自動停止",displayName:"持有幣大於",tooltip:"已達自動停止選項：\n持有幣≧ {0}\n停止AUTO狀態。"}),I=k({group:"自動停止",displayName:"持有幣小於",tooltip:"已達自動停止選項：\n持有幣≦ {0}\n停止AUTO狀態。"}),c((S=o((F=function(e){function o(){for(var o,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return o=e.call.apply(e,[this].concat(r))||this,t(o,"fishName_prefix",S,i(o)),t(o,"fishName_subfix",v,i(o)),t(o,"roomDisconnect",z,i(o)),t(o,"roomConnectFailure",x,i(o)),t(o,"roomIdleTimeout",D,i(o)),t(o,"joinRoomFail",C,i(o)),t(o,"insufficientBalance",M,i(o)),t(o,"maintenance",B,i(o)),t(o,"unexpectedError",L,i(o)),t(o,"demoInvalid",A,i(o)),t(o,"title",E,i(o)),t(o,"autoShoot",K,i(o)),t(o,"moreThan",U,i(o)),t(o,"lessThan",G,i(o)),o}n(o,e);var r=o.prototype;return r.GetFishName=function(e){var o=this.fishName_prefix+e.LockGroup+this.fishName_subfix,n=this.getTranslatedStringByKey(o);return n===o?null:n},r.GetSystemMsg=function(e){var o=this.getKeyBySystemMessageType(e),n=this.getTranslatedStringByKey(o);return n===o?null:n},r.getKeyBySystemMessageType=function(e){switch(e){case J.autoPopup_AutoShoot:return this.autoShoot;case J.autoPopup_LessThan:return this.lessThan;case J.autoPopup_MoreThan:return this.moreThan;case J.generalPopup_InsufficientBalance:return this.insufficientBalance;case J.generalPopup_JoinRoomFail:return this.joinRoomFail;case J.generalPopup_Maintenance:return this.maintenance;case J.generalPopup_RoomConnectFailure:return this.roomConnectFailure;case J.generalPopup_RoomDisconnect:return this.roomDisconnect;case J.generalPopup_RoomIdleTimeout:return this.roomIdleTimeout;case J.generalPopup_Title:return this.title;case J.generalPopup_UnexpectedError:return this.unexpectedError;case J.generalPopup_DemoInvalid:return this.demoInvalid;default:throw new Error("UnDefined System Message")}},r.getTranslatedStringByKey=function(e){return p.t(e)},o}(l)).prototype,"fishName_prefix",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Fish"}}),v=o(F.prototype,"fishName_subfix",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"_Name"}}),z=o(F.prototype,"roomDisconnect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"RoomDisconnect"}}),x=o(F.prototype,"roomConnectFailure",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"RoomConnectFailure"}}),D=o(F.prototype,"roomIdleTimeout",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"RoomIdleTimeout"}}),C=o(F.prototype,"joinRoomFail",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"JoinRoomFail"}}),M=o(F.prototype,"insufficientBalance",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"InsufficientBalance"}}),B=o(F.prototype,"maintenance",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Maintenance"}}),L=o(F.prototype,"unexpectedError",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"UnexpectedError"}}),A=o(F.prototype,"demoInvalid",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"DemoInvalid"}}),E=o(F.prototype,"title",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Title"}}),K=o(F.prototype,"autoShoot",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"AutoShoot"}}),U=o(F.prototype,"moreThan",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"MoreThan"}}),G=o(F.prototype,"lessThan",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"LessThan"}}),w=F))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/L10nUtility.ts",["cc"],(function(n){var a;return{setters:[function(n){a=n.cclegacy}],execute:function(){a._RF.push({},"d7b06z66iVDQpIxu0cHTulP","L10nUtility",void 0),n("L10nUtility",function(){function n(){}return n.GetLanguageTag=function(){var n=window.location.search,a=new URLSearchParams(n).get("lang");return console.log("lang:",a),null===a?null:this.ToLanguageTag(a)},n.ToLanguageTag=function(n){return n in this.LanguageTable?this.LanguageTable[n]:(console.error("Invalid Language:",n),null)},n}()).LanguageTable={tw:"zh-Hant-TW",cn:"zh-Hans",en:"en",vn:"vi",jp:"ja",th:"th",es:"es",kr:"ko"},a._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientAgent.ts","./GameFlowManager.ts","./ServiceManager.ts","./GMCommandSystem.ts","./GeneralPopup.ts","./UIGeneralPopup.ts","./ConnectManager.ts","./FishGameAck.ts","./GetRoomServiceInfoRequest.ts","./AudioManager.ts","./AudioMixerConfig.ts","./MessageCmd.ts","./MessageManager.ts","./GameConfig.ts","./L10nKeyConfig.ts","./BundleLoader.ts","./SyncEventUtility.ts","./BGController.ts"],(function(e){var n,t,o,i,r,a,s,u,c,l,f,p,g,d,m,h,R,v,w,b,A,y,P,S,I,k,L,C,T,G,F,M,B;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime,s=e.createClass},function(e){u=e.cclegacy,c=e._decorator,l=e.ProgressBar,f=e.Node,p=e.sys,g=e.tween,d=e.director,m=e.Component},function(e){h=e.ClientAgent},function(e){R=e.GameFlowManager},function(e){v=e.ServiceManager},function(e){w=e.GMCommandSystem},function(e){b=e.GeneralPopup},function(e){A=e.GeneralPopupType},function(e){y=e.StopReason},function(e){P=e.FishGameAck},function(e){S=e.GetRoomServiceInfoRequest},function(e){I=e.AudioManager},function(e){k=e.AudioState},function(e){L=e.MessageCmd},function(e){C=e.MessageManager},function(e){T=e.GameConfig},function(e){G=e.SystemMessageType},function(e){F=e.BundleLoader},function(e){M=e.SyncEventUtility},function(e){B=e.BGController}],execute:function(){var E,x,N,_,j,W,O,D,z,U,H,J,q;u._RF.push({},"6744dV63SdKYKccuqaHpHWp","Loading",void 0);var K=c.ccclass,V=c.property,Y=function(){function e(){this.loginResult=void 0,this.joinRoomResult=void 0}return s(e,[{key:"isSuccess",get:function(){return this.loginResult&&this.joinRoomResult==P.Success}}]),e}();e("Loading",(E=K("Loading"),x=V(l),N=V(f),_=V([String]),E((O=n((W=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"progressBar",O,i(n)),o(n,"loadingResourcesPercent",D,i(n)),o(n,"loadingResourcesTime",z,i(n)),o(n,"waitingRoomTime",U,i(n)),o(n,"delayReleaseTime",H,i(n)),o(n,"rootNode",J,i(n)),o(n,"waitingEvents",q,i(n)),n.waitingList=void 0,n.progress=0,n._progressTween=null,n}t(n,e);var s=n.prototype;return s.onLoad=function(){this.onPreloadStartAction=this.onPreloadStartAction.bind(this),this.onWaitingEventInvoked=this.onWaitingEventInvoked.bind(this),C.Instance.on(L.PRELOAD_START,this.onPreloadStartAction),C.Instance.emit(L.OPEN_LOADING_UISCENE),this.checkWebpSupport()},s.start=function(){this.updateProgressBar(this.loadingResourcesPercent,this.loadingResourcesTime),this.waitLoadThenEnterMainFish()},s.onDestroy=function(){C.Instance.off(L.PRELOAD_START,this.onPreloadStartAction)},s.checkWebpSupport=function(){if(p.isBrowser&&p.os===p.OS.IOS&&p.osMainVersion>=14){e=function(e){p.capabilities.webp=e},(n=new Image).onload=n.onerror=function(){var t=2===n.height;e(t)},n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}var e,n},s.waitLoadThenEnterMainFish=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.startWaitingForEvents(),e.next=3,Promise.all([M.waitCallback((function(){return F.IsBundleLoadedFinish})),this.joinRoom()]).then((function(){R.instance().EnterMainFish()})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.startWaitingForEvents=function(){this.waitingList=Object.assign([],this.waitingEvents);for(var e=0;e<this.waitingList.length;e++)C.Instance.on(this.waitingList[e],this.onWaitingEventInvoked)},s.updateProgressBar=function(e,n,t){var o=this;void 0===t&&(t=null);this._progressTween&&this._progressTween.stop(),this._progressTween=g(this).to(n,{progress:e},{onUpdate:function(e,n){o.progressBar.progress=e.progress},onComplete:function(e){t&&t()}}).start()},s.joinRoom=function(){var e=this;return new Promise(r(a().mark((function n(t,o){var i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.joinRoomProcess();case 2:if((i=n.sent).isSuccess){n.next=18;break}if(console.error("join room fail, loginResult: "+i.loginResult+", joinRoomAck: "+i.joinRoomResult),i.loginResult){n.next=9;break}b.open(G.generalPopup_RoomConnectFailure,"H5F/GeneralPopup/RoomConnectFailure",b.defaultTitle,A.NoButton,null,y.ConnectFailure),n.next=16;break;case 9:n.t0=i.joinRoomResult,n.next=n.t0===P.AllRoomFull?12:14;break;case 12:return b.open(G.generalPopup_RoomConnectFailure,"H5F/GeneralPopup/AllRoomFull",b.defaultTitle,A.NoButton,null,i.joinRoomResult),n.abrupt("break",16);case 14:return b.open(G.generalPopup_JoinRoomFail,"H5F/GeneralPopup/JoinRoomFail",b.defaultTitle,A.NoButton,null,i.joinRoomResult),n.abrupt("break",16);case 16:return o(),n.abrupt("return");case 18:w.instance.setService(v.instance().roomService),t();case 20:case"end":return n.stop()}}),n)}))))},s.joinRoomProcess=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(r(a().mark((function e(n,t){var o,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){h.Instance.OnJoinRoom.remove(r),i.joinRoomResult=e.Ack,n(i)},(o=new S).AssignRoomID=T.config.room,o.IsDemo=T.config.demo,i=new Y,e.next=7,v.instance().loginRoomService(o);case 7:if(i.loginResult=e.sent,i.loginResult){e.next=11;break}return n(i),e.abrupt("return");case 11:h.Instance.Init(),h.Instance.OnJoinRoom.add(r),h.Instance.JoinRoom(T.config.room);case 14:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.onPreloadStartAction=function(e){d.addPersistRootNode(this.rootNode),I.instance().SwitchMixerState(k.Loading)},s.onWaitingEventInvoked=function(e){var n=this.waitingList.findIndex((function(n){return n===e}));if(n>=0){var t=this.waitingList.splice(n,1);C.Instance.off(t[0],this.onWaitingEventInvoked),0===this.waitingList.length&&this.finishWaiting()}},s.finishWaiting=function(){var e=r(a().mark((function e(){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitProgressComplete();case 2:setTimeout((function(){n.removeLoadingMask()}),1e3*this.delayReleaseTime);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.removeLoadingMask=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitBGLoaded();case 2:d.removePersistRootNode(this.rootNode),this.rootNode.destroy(),this.rootNode=null,C.Instance.emit(L.CLOSE_LOADING_UISCENE);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.waitBGLoaded=function(){return M.waitCallback((function(){return B.LoadFirstBGFinish}))},s.waitProgressComplete=function(){var e=this;return new Promise((function(n,t){e.updateProgressBar(1,e.waitingRoomTime,n)}))},n}(m)).prototype,"progressBar",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(W.prototype,"loadingResourcesPercent",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),z=n(W.prototype,"loadingResourcesTime",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),U=n(W.prototype,"waitingRoomTime",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),H=n(W.prototype,"delayReleaseTime",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),J=n(W.prototype,"rootNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(W.prototype,"waitingEvents",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=W))||j));u._RF.pop()}}}));

System.register("chunks:///_virtual/Loading2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFlowBase.ts"],(function(n){var e,o,t,i;return{setters:[function(n){e=n.inheritsLoose},function(n){o=n.cclegacy,t=n._decorator},function(n){i=n.GameFlowBase}],execute:function(){var a;o._RF.push({},"e6256pBlTxG/7ME6Ba4KkmR","Loading",void 0);var c=t.ccclass;n("Loading",c("Loading")(a=function(n){function o(){return n.apply(this,arguments)||this}return e(o,n),o}(i))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/Lobby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFlowBase.ts"],(function(t){var o,e,n,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){r=t.GameFlowBase}],execute:function(){var c;e._RF.push({},"13890Bzw5hFAIUvolN/bXHh","Lobby",void 0);var i=n.ccclass;n.property,t("Lobby",i("Lobby")(c=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onMotionStateEnter=function(o,e){t.prototype.onMotionStateEnter.call(this,o,e)},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/localization-global.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"02d9etKgNBGqLPpvU7RX29o","localization-global",void 0);e("pluginName","Localization Editor"),e("mainName","localization-editor"),e("runtimeBundleName","l10n"),e("resourceListPath","resource-list"),e("resourceBundlePath","resource-bundle");t._RF.pop()}}}));

System.register("chunks:///_virtual/LockBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseBullet.ts","./BulletPoolManager.ts"],(function(t){var e,o,i,n,r,a,s,c,l,h,u,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,c=t.UITransform,l=t.Quat,h=t.Vec3,u=t.Vec4},function(t){d=t.BaseBullet},function(t){m=t.BulletPoolManager}],execute:function(){var f,B,p,T,b,g,k,L,_,y;a._RF.push({},"081dfbqpONKuJNAMeusdQbE","LockBullet",void 0);var N=s.ccclass,A=s.property;t("LockBullet",(f=N("LockBullet"),B=A(c),f((b=e((T=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"traceBeamTime",b,n(e)),i(e,"traceBeamTimeRate",g,n(e)),i(e,"traceBeamWidth",k,n(e)),i(e,"traceBeamMaxLength",L,n(e)),i(e,"traceBeamUITransform",_,n(e)),i(e,"traceBeamFrameCount",y,n(e)),e._hitNode=null,e._castNode=null,e}o(e,t);var a=e.prototype;return a.initial=function(e,o){t.prototype.initial.call(this,e,o),this.rotateAnchor(),this.updatePose(),this.updateBeamSpriteSize(),this.updateBeam()},a.release=function(e,o){this.rotateAnchor(),this.updatePose(),this.updateBeam(),t.prototype.release.call(this,e,o)},a.reset=function(){this.traceBeamTime=0,this._castNode&&(this._castNode.forceFinish(),this._castNode=null),this._hitNode&&(this._hitNode.forceFinish(),this._hitNode=null)},a.doCast=function(){var t,e=null!=(t=this._castNode)?t:this._castNode=m.instance().genCastNode(this.Bullet),o=this.genCastRTS(),i=o[0],n=o[1];e.node.setWorldPosition(i),e.node.setWorldRotation(n),e.node.active=this.IsLocked},a.doHit=function(){var t,e=null!=(t=this._hitNode)?t:this._hitNode=m.instance().genHitNode(this.Bullet),o=this.genHitRTS(),i=o[0],n=o[1];e.node.setWorldPosition(i),e.node.setWorldRotation(n)},a.doFinish=function(){},a.genCastRTS=function(){return[this.FromAnchor.worldPosition,this.FromAnchor.worldRotation]},a.genHitRTS=function(){return[this.ToAnchor.worldPosition,this.ToAnchor.worldRotation]},a.genFinishRTS=function(){return[this.node.worldPosition,this.node.worldRotation]},a.onUpdate=function(e){t.prototype.onUpdate.call(this,e),this.traceBeamTime+=e*this.traceBeamTimeRate,this.IsLocked&&(this.rotateAnchor(),this.updatePose(),this.updateBeam())},a.updatePose=function(){var t=this.FromAnchor.worldPosition.clone(),e=this.ToAnchor.worldPosition.clone(),o=e.clone().subtract(t).normalize(),i=t,n=l.rotationTo(new l,h.UNIT_Y,o);this.node.setWorldPosition(i),this.node.setWorldRotation(n),this._castNode&&this._castNode.node.setWorldPosition(t),this._hitNode&&this._hitNode.node.setWorldPosition(e)},a.updateBeam=function(){var t=Math.trunc(this.traceBeamTime*this.traceBeamFrameCount)%this.traceBeamFrameCount*this.TraceBeamOffset;this.BulletSprite.material.setProperty("mainTiling_Offset",new u(1,this.TraceBeamOffset,0,t));var e=this.FromAnchor.worldPosition.clone(),o=this.ToAnchor.worldPosition.clone();this.traceBeamUITransform.setContentSize(h.distance(e,o),this.traceBeamWidth)},a.updateBeamSpriteSize=function(){var t=this.BulletSprite.getComponent(c);t&&t.setContentSize(this.traceBeamMaxLength,this.traceBeamWidth)},a.rotateAnchor=function(){this._castNode&&this._castNode.node.active!=this.IsLocked&&(this._castNode.node.active=this.IsLocked),this.LockBulletable&&(this.LockBulletable.rotateToTarget(this.FromAnchor.parent,this.ToAnchor),this._castNode&&1==this._castNode.node.active&&this.LockBulletable.rotateToTarget(this._castNode.node,this.ToAnchor))},r(e,[{key:"IsReady",get:function(){return t.prototype.IsReady||this.IsLocked}},{key:"LockInfo",get:function(){return this.Bullet.Info}},{key:"LockBulletable",get:function(){return this.Bulletable}},{key:"IsLocked",get:function(){return this.LockBulletable&&this.LockBulletable.IsLocked}},{key:"ToAnchor",get:function(){return this.LockBulletable&&this.LockBulletable.LockAnchor?this.LockBulletable.LockAnchor:this.FromAnchor}},{key:"TraceBeamOffset",get:function(){return 1/this.traceBeamFrameCount}}]),e}(d)).prototype,"traceBeamTime",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=e(T.prototype,"traceBeamTimeRate",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=e(T.prototype,"traceBeamWidth",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),L=e(T.prototype,"traceBeamMaxLength",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1400}}),_=e(T.prototype,"traceBeamUITransform",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(T.prototype,"traceBeamFrameCount",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),p=T))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/LockBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"638b9efPRpJQZR6MZfnSeUs","LockBulletInfo",void 0);e("LockBulletInfo",function(){function e(){this.FishID=void 0,this.FishID=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeUint32(r.FishID)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.FishID=r.readUint32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.FishID=r.readUint32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LockFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./BaseFort.ts","./FishPoolManager.ts","./FishAttribute2.ts","./MessageManager.ts","./MessageCmd.ts","./FishOddsAttribute2.ts","./FishKind.ts"],(function(t){var e,i,o,n,r,s,a,c,l,h,u,p,f,g,d,m,F,I,b,k,y,w,A,L,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,c=t.Node,l=t.Sprite,h=t.CCString,u=t.Vec2,p=t.misc,f=t.macro,g=t.Vec3,d=t.Quat,m=t.resources,F=t.SpriteFrame},function(t){I=t.BulletKind},function(t){b=t.BaseFort},function(t){k=t.FishPoolManager},function(t){y=t.FishAttributeData},function(t){w=t.MessageManager},function(t){A=t.MessageCmd},function(t){L=t.FishOddsAttributeData},function(t){v=t.FishKind}],execute:function(){var _,T,D,C,N,S,B,M,z,P,G,R,U,K,E,O,W;s._RF.push({},"dbcc8M8wqtBJ6MO9E2jWR8c","LockFort",void 0);var x=a.ccclass,H=a.property;t("LockFort",(_=x("LockFort"),T=H(c),D=H(l),C=H(h),N=H(c),S=H(c),B=H(c),_((P=e((z=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"lockNode",P,n(e)),o(e,"lockIcon",G,n(e)),o(e,"iconPath",R,n(e)),o(e,"uiNode",U,n(e)),o(e,"idleCover",K,n(e)),o(e,"fireCover",E,n(e)),o(e,"showTime",O,n(e)),o(e,"rotateAngleLimit",W,n(e)),e._target=null,e._showTimeCache=0,e._lastLockGroupID=0,e}i(e,t);var s=e.prototype;return s.spawnBullet=function(e,i){t.prototype.spawnBullet.call(this,e,i);var o=e.Info;this.lockTarget(o.FishID),this._showTimeCache=this.showTime},s.despawnBullet=function(e,i){t.prototype.despawnBullet.call(this,e,i)},s.set=function(){t.prototype.set.call(this)},s.reset=function(){t.prototype.reset.call(this),this.resetTarget(),this.resetFortUI()},s.rotateToTarget=function(t,e){var i=t.worldPosition,o=e.position.clone().subtract(i).normalize(),n=new u(o.x,o.y).signAngle(u.UNIT_Y),r=p.radiansToDegrees(n);(r<-this.rotateAngleLimit||r>this.rotateAngleLimit)&&(n=(r>this.rotateAngleLimit?-this.rotateAngleLimit:this.rotateAngleLimit)*f.RAD,g.rotateZ(o,g.UNIT_Y,t.position,n));var s=d.rotationTo(new d,g.UNIT_Y,o);t.setRotation(s)},s.setLockIcon=function(t){if(0==t)this.lockIcon.spriteFrame=null,this.lockIcon.node.active=!1;else{var e=y.Instance.Data.get(t);m.load(this.iconPath+e.LockIcon+"/spriteFrame",F,function(t,e){e&&(this.lockIcon.spriteFrame=e,this.lockIcon.node.active=!0)}.bind(this))}},s.setCover=function(t){var e=t>0;this.idleCover.active=!e,this.fireCover.active=e},s.resetTarget=function(){this.lockTarget(0)},s.resetFortUI=function(){this.setLockIcon(0),this.setCover(0)},s.onLoad=function(){t.prototype.onLoad.call(this),this.onDespawnFishAction=this.onDespawnFishAction.bind(this)},s.onEnable=function(){t.prototype.onEnable.call(this),this.uiNode.active=!0,w.Instance.on(A.ON_DESPAWN_FISH,this.onDespawnFishAction)},s.onDisable=function(){w.Instance.off(A.ON_DESPAWN_FISH,this.onDespawnFishAction),this.uiNode.active=!1,t.prototype.onDisable.call(this)},s.onDestroy=function(){this.onDespawnFishAction=null,t.prototype.onDestroy.call(this)},s.onUpdate=function(e){t.prototype.onUpdate.call(this,e),this.IsLocked&&this.rotateToTarget(this.FortAnchor,this._target.node),this._showTimeCache>0&&(this._showTimeCache=Math.max(0,this._showTimeCache-e),this._showTimeCache<=0&&this.resetTarget())},s.lockTarget=function(t){var e=k.instance();e.checkSpawnedFish(t)&&this.changeTarget(e.GetSpawnedFish(t)),0==t&&this.changeTarget(null)},s.changeTarget=function(t){this._target=t,this.IsLocked?(this.playShootAnimWithoutReset(),this.playFortAudio(),this.setCover(this._target.fishSerialNumber),this.IsMainFort||this.setLockIcon(this._target.fishID),this._lastLockGroupID=this._target.fishID):(this.playIdleAnim(),this.stopFortAudio(),this.setCover(0))},s.playShootAnimWithoutReset=function(){this.FortFireAnim.node.active=!0,this.FortIdleAnim.node.active=!1},s.onDespawnFishAction=function(t){this.IsLocked&&(t.SerialNumber==this._target.fishSerialNumber&&L.Instance.GetById(t.FishID).FishKind==v.Gotcha&&this.resetTarget())},r(e,[{key:"IsLocked",get:function(){return this._target&&this._target.isValid}},{key:"LockAnchor",get:function(){return this.IsLocked?this._target.node:this.lockNode}},{key:"BulletKind",get:function(){return I.Lock}},{key:"BulletAnchor",get:function(){return this.lockNode}},{key:"LastLockGroupID",get:function(){return this._lastLockGroupID}},{key:"RotateAngleLimit",get:function(){return this.rotateAngleLimit}}]),e}(b)).prototype,"lockNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(z.prototype,"lockIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"iconPath",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"texture/UI/Game130_Fish/"}}),U=e(z.prototype,"uiNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(z.prototype,"idleCover",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(z.prototype,"fireCover",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(z.prototype,"showTime",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),W=e(z.prototype,"rotateAngleLimit",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),M=z))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/LockShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseShoot.ts","./AutoShootHelper.ts","./PlayerFortManager.ts","./BulletKind.ts","./FishOddsAttribute2.ts","./FishKind.ts","./MessageCmd.ts","./MessageManager.ts","./ClientAgent.ts","./FishPoolManager.ts","./FishHIDManager.ts","./UIAutoShootController.ts","./UIAutoAttribute.ts","./FishAttribute2.ts"],(function(t){var i,o,s,e,n,h,r,u,a,c,l,f,F,I,S,p,D,d,A,k,g,G,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,e=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose,h=t.createClass},function(t){r=t.cclegacy,u=t._decorator,a=t.Button},function(t){c=t.BaseShoot},function(t){l=t.AutoShootHelper},function(t){f=t.PlayerFortManager},function(t){F=t.BulletKind},function(t){I=t.FishOddsAttributeData},function(t){S=t.FishKind},function(t){p=t.MessageCmd},function(t){D=t.MessageManager},function(t){d=t.ClientAgent},function(t){A=t.FishPoolManager},function(t){k=t.FishHIDManager},function(t){g=t.OptionGroupType},function(t){G=t.UIAutoAttributeData},function(t){m=t.FishAttributeData}],execute:function(){var v,b,y,N,C,L,M,B;r._RF.push({},"f945eEwriZFcoCQgKoAKVrA","LockShoot",void 0);var _=u.ccclass,U=u.property;t("LockShoot",(v=_("LockShoot"),b=U(a),v((C=i((N=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),h=0;h<o;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,s(i,"changeBtn",C,e(i)),s(i,"fishSerialNum",L,e(i)),s(i,"lockFishID",M,e(i)),s(i,"lockFishGroup",B,e(i)),i.AutoShootInfo=void 0,i.IsUIAutoShootMode=void 0,i.AutoShootCount=void 0,i._lockFishGroupIDs=[],i._shuffledlockFishGroupIDs=[],i._uiAutoDatas=[],i}o(i,t);var r=i.prototype;return r.set=function(){this._uiAutoDatas.length<=0&&(this._uiAutoDatas=Array.from(G.Instance.Data.values())),this.setChangeBtnInteractable(!0),this.setChangeBtnState(!0),0==this.lockFishID||this.IsUIAutoShootMode||(this.shootable.setAutoShoot(!0),this.setFishIcon(this.lockFishID))},r.reset=function(){f.instance().MainPlayerFort.UsedBulletSpecial?this.setChangeBtnInteractable(!1):(this.resetFishID(),this.resetFishSerialNum(),this.setChangeBtnState(!1))},r.setFishSerialNum=function(t){this.fishSerialNum=t},r.setFishID=function(t){this.lockFishID=t},r.setFishLockGroup=function(t){this.lockFishGroup=t},r.resetFishSerialNum=function(){this.setFishSerialNum(0)},r.resetFishID=function(){this.setFishID(0),this.setFishLockGroup(0)},r.initAutoShoot=function(){this.AutoShootCount=0,this.IsUIAutoShootMode=!1,this.AutoShootInfo=null},r.startAutoShoot=function(){var t=this;if(this.resetFishID(),this.resetFishSerialNum(),this.shootable.setAutoShoot(!1),this._lockFishGroupIDs=this.AutoShootInfo.LockFishGroupIDs,this.AutoShootInfo.LockFishGroupIDs.forEach((function(i){return t._shuffledlockFishGroupIDs.push(i)})),this.shuffleLockFishGroupIDs(),this.tryFindPriorityTarget()||this.tryFindAutoShootTargets())d.Instance.FireLockBullet(this.fishSerialNum),this.updateAutoShootCount();else{var i=m.Instance.DataGroup.get(this.AutoShootInfo.LockFishGroupIDs[0])[0].ID;this.setFishIcon(i)}this.setUICover(this.fishSerialNum),k.instance().reset()},r.stopAutoShoot=function(){this.resetFishID(),this.resetFishSerialNum(),this._lockFishGroupIDs=[],this._shuffledlockFishGroupIDs=[],this.AutoShootCount=0,this.setFishIcon(0),this.setUICover(0),k.instance().reset()},r.updateAutoShoot=function(){(this.IsAutoShoot||this.IsUIAutoShootMode)&&this.checkShoot()&&(this.tryFindPriorityTarget()||this.tryLockSameTarget()||this.tryFindNextTarget())&&(d.Instance.FireLockBullet(this.fishSerialNum),this.updateAutoShootCount())},r.onEnable=function(){t.prototype.onEnable.call(this),this.onDespawnFishAction=this.onDespawnFishAction.bind(this),D.Instance.on(p.ON_DESPAWN_FISH,this.onDespawnFishAction)},r.onDisable=function(){D.Instance.off(p.ON_DESPAWN_FISH,this.onDespawnFishAction),t.prototype.onDisable.call(this)},r.runShoot=function(){if(!this.IsUIAutoShootMode){var t=this.ShootPoint,i=A.instance().HitTest(t.x,t.y,0);i&&i.node.active&&i.fishSerialNumber!=this.fishSerialNum&&(this.setFishSerialNum(i.fishSerialNumber),this.setFishID(i.fishID),this.setFishLockGroup(i.fishAttribute.LockGroup),this.shootable.setAutoShoot(!0),d.Instance.FireLockBullet(i.fishSerialNumber),this.setFishIcon(i.fishID),this.setUICover(i.fishSerialNumber),k.instance().reset())}},r.onDespawnFishAction=function(t){t.SerialNumber==this.fishSerialNum&&(I.Instance.GetById(t.FishID).FishKind==S.Gotcha&&this.resetFishSerialNum())},r.tryFindPriorityTarget=function(){if(this.IsUIAutoShootMode){var t=this.AutoShootInfo.CurrentOptionType,i=!1;if(this.fishSerialNum>0){var o=A.instance().GetSpawnedFish(this.fishSerialNum);if(o&&o.node.active&&A.instance().IsFishInField(o))for(var s,e=n(this._uiAutoDatas);!(s=e()).done;){var h=s.value;if(I.bind(this)(h.GroupSort)&&(i=this.lockFishID==h.ID))return!0}}if(!i&&t>0)for(var r,u=n(this._lockFishGroupIDs);!(r=u()).done;){var a=r.value,c=A.instance().GetFishByFishGroupID(a);if(c&&c.node.active)for(var l,f=n(this._uiAutoDatas);!(l=f()).done;){var F=l.value;if(I(F.GroupSort)&&c.fishID==F.ID)return this.setFishSerialNum(c.fishSerialNumber),this.setFishID(c.fishID),this.setFishLockGroup(c.fishAttribute.LockGroup),this.setFishIcon(c.fishID),!0}}return!1}function I(i){return t==g.Gotcha?i==g.Gotcha||i==g.NewFish:i==t}},r.tryLockSameTarget=function(){if(this.fishSerialNum>0&&0!=this.lockFishID){var t=A.instance().GetSpawnedFish(this.fishSerialNum);if(t&&t.node.active&&A.instance().IsFishInField(t))return!0;this.resetFishSerialNum()}return!1},r.tryFindNextTarget=function(){if(this.fishSerialNum<=0&&(this._lockFishGroupIDs.length>0||0!=this.lockFishGroup)){if(this.IsUIAutoShootMode)return this.tryFindAutoShootTargets();if(this.fishSerialNum<=0&&0!=this.lockFishGroup){var t=A.instance().GetFishByFishGroupID(this.lockFishGroup);if(t&&t.node.active)return this.setFishSerialNum(t.fishSerialNumber),this.setFishIcon(t.fishID),!0}}return!1},r.tryFindAutoShootTargets=function(){var t=this.AutoShootInfo.CurrentOptionType;t<=0&&this.shuffleLockFishGroupIDs();for(var i,o=t>0?this._lockFishGroupIDs:this._shuffledlockFishGroupIDs,s=n(o);!(i=s()).done;){var e=i.value,h=A.instance().GetFishByFishGroupID(e);if(h&&h.node.active)return this.setFishSerialNum(h.fishSerialNumber),this.setFishID(h.fishID),this.setFishLockGroup(h.fishAttribute.LockGroup),this.setFishIcon(h.fishID),!0}return!1},r.updateAutoShootCount=function(){this.IsUIAutoShootMode&&(this.AutoShootCount++,l.instance().updateAutoShootCount())},r.OnGetSpecialBulletRewardAction=function(t){f.instance().checkMainFort(t.CatchInfo.FortID)&&this.setChangeBtnInteractable(!1)},r.setFishIcon=function(t){this.FortManager.MainPlayerFort.getBulletFort(F.Lock).setLockIcon(t)},r.setUICover=function(t){this.FortManager.MainPlayerFort.getBulletFort(F.Lock).setCover(t)},r.setChangeBtnState=function(t){this.changeBtn.node.active=t},r.setChangeBtnInteractable=function(t){this.changeBtn.interactable=t},r.shuffleLockFishGroupIDs=function(){for(var t=this._shuffledlockFishGroupIDs,i=t.length,o=0;0!=i;){o=Math.floor(Math.random()*i),i--;var s=[t[o],t[i]];t[i]=s[0],t[o]=s[1]}},h(i,[{key:"BulletKind",get:function(){return F.Lock}},{key:"FortManager",get:function(){return f.instance()}}]),i}(c)).prototype,"changeBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(N.prototype,"fishSerialNum",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=i(N.prototype,"lockFishID",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=i(N.prototype,"lockFishGroup",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=N))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/LogoController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFlowManager.ts"],(function(n){var i,t,e,o,a,r,l,p,c;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Animation,p=n.Component},function(n){c=n.GameFlowManager}],execute:function(){var s,u,m,f,g;a._RF.push({},"e3e3eWQgnFC6oMHE0w1G0S4","LogoController",void 0);var h=r.ccclass,y=r.property;n("LogoController",(s=h("LogoController"),u=y(l),s((g=i((f=function(n){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=n.call.apply(n,[this].concat(a))||this,e(i,"apexWinAnimation",g,o(i)),i}return t(i,n),i.prototype.start=function(){var n=this;this.apexWinAnimation=this.node.getComponent(l),this.apexWinAnimation.defaultClip=this.apexWinAnimation.clips[0],this.apexWinAnimation.play(),this.apexWinAnimation.once(l.EventType.FINISHED,(function(){n.apexWinAnimation.defaultClip=n.apexWinAnimation.clips[1],n.apexWinAnimation.play(),n.apexWinAnimation.once(l.EventType.FINISHED,(function(){c.instance().EnterLoading()}))}))},i}(p)).prototype,"apexWinAnimation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./SpriteTimePlayer.ts","./Action.ts","./ActionPlayer.ts","./ActionProp.ts","./ActionPropHandler.ts","./BaseAction.ts","./Tools.ts","./Values.ts","./AudioConfig.ts","./AudioManager.ts","./AudioMixerConfig.ts","./AudioPlayer.ts","./BouncyCatchAudioController.ts","./CatchAudioController.ts","./MainFishAudioController.ts","./NormalFishCatchAudioController.ts","./SpecialFishCatchAudioController.ts","./BGController.ts","./BGNode.ts","./ExtendBGController.ts","./ThemeBGAttribute.ts","./ThemeBGController.ts","./BetHistoryController.ts","./CSBetHistoryController.ts","./UIBetData.ts","./UIBetDataGroup.ts","./UIBetHistoryDetailPanel.ts","./UIBetHistoryPanel.ts","./BundleLoader.ts","./CameraManager.ts","./CameraShake.ts","./CameraShakePlayer.ts","./CanvasInitializer.ts","./BGConfig.ts","./GameConfig.ts","./GotchaFishConfig.ts","./JackpotConfig.ts","./L10nKeyConfig.ts","./RuntimeSettingConfig.ts","./ShowCoinConfig.ts","./ShowRewardConfig.ts","./CollisionDebugInfo.ts","./CollisionDebugInfoGenerator.ts","./DebugNodeControl.ts","./DebugUICommandItem.ts","./DebugUICommandItem_FindRoom.ts","./DebugUICommandItem_SpawnFish.ts","./DebugUIController.ts","./FishDebugInfo.ts","./FishDebugInfoGenerator.ts","./GMCommandTester.ts","./ShowTickFPS.ts","./SpawnFishHint.ts","./VersionLabel.ts","./ShadowHelper.ts","./FetchingController.ts","./FishPerform.ts","./Bot.ts","./BaseBullet.ts","./BouncyBullet.ts","./BulletPoolManager.ts","./BulletPoolNode.ts","./LockBullet.ts","./MeteorBullet.ts","./MissileBullet.ts","./NormalBullet.ts","./SpecialBullet.ts","./ThroughBullet.ts","./ClientAgent.ts","./FishPoolManager.ts","./FishPoolNode.ts","./BaseFort.ts","./BetControl.ts","./BouncyFort.ts","./LockFort.ts","./MeteorFort.ts","./MissileFort.ts","./NormalFort.ts","./PlayerFort.ts","./PlayerFortManager.ts","./SpecialFort.ts","./ThroughFort.ts","./GameViewer.ts","./Loading.ts","./PrefabData.ts","./Recorder.ts","./ReplayData.ts","./Replayer.ts","./IReward.ts","./IRewardRule.ts","./RewardManager.ts","./SpecialBulletReward.ts","./SpecialBulletRewardRule.ts","./RoomController.ts","./RoomStatusCheckManager.ts","./RoomStatusChecker.ts","./AutoShootConstraintType.ts","./AutoShootHelper.ts","./BaseShoot.ts","./BouncyShoot.ts","./LockShoot.ts","./MeteorShoot.ts","./MissileShoot.ts","./NormalShoot.ts","./ShootManager.ts","./ShootWarningAdapter.ts","./SpecialShoot.ts","./ThroughShoot.ts","./WeaponShootHelper.ts","./FSUIManager.ts","./UIController.ts","./UIReconnectPopUpController.ts","./UIRoom.ts","./Utility.ts","./ConnectManager.ts","./Constants.ts","./BackgroundTimeAttributeExtension.ts","./ThemeSettingAttributeExtension.ts","./PIayerInfoExtension.ts","./RoundGroupExtension.ts","./RoundInfoExtension.ts","./BackgroundSettingAttribute.ts","./BackgroundTimeAttribute.ts","./BonusFrequencyAttribute2.ts","./BonusWaveAttribute.ts","./FishAttribute2.ts","./FishCollision.ts","./FishOddsAttribute2.ts","./FishOddsAttributeHelper.ts","./FlyPathSizeSettingAttribute.ts","./PathAttribute.ts","./PathAttributeHelper.ts","./PathSpeed2.ts","./PathSpeedHelper.ts","./StringMapAttribute.ts","./ThemeSettingAttribute2.ts","./UIAutoAttribute.ts","./WaveAttribute.ts","./WaveAttributeHelper.ts","./BetLevel.ts","./BetLevelDataLoader.ts","./BetRegion.ts","./Bullet.ts","./BulletInfoPool.ts","./BulletKindHelper.ts","./BulletManager.ts","./BulletParameter.ts","./GotchaFishCatchRule.ts","./NormalFishCatchRule.ts","./SpecialFishCatchRule.ts","./CloneHelper.ts","./Action2.ts","./Queue.ts","./SortedMap.ts","./DirectionHelper.ts","./Fish.ts","./FishManager.ts","./Fort.ts","./FortManager.ts","./RoomBase.ts","./GMFrameRequestProcessor.ts","./IBetRegionInfo.ts","./IFrameRequestProcessor.ts","./KindHelper.ts","./ObjectPool.ts","./PrimaryRoom.ts","./CatchRule.ts","./FishRnd.ts","./FishRndForGotchaServer.ts","./RTPSetting.ts","./ReplicaRoom.ts","./Room.ts","./RoomFactory.ts","./RoundManager.ts","./WaveManager.ts","./SilentUpdateManager.ts","./TypeName.ts","./AuthResponse.ts","./AuthResult.ts","./BackgroundTime.ts","./BackgroundTimeAttribute2.ts","./BetChange.ts","./BetDataRaw.ts","./BetLevelHelper.ts","./BetLevelRange.ts","./BetRegionInfo.ts","./BetRegionType.ts","./BetType.ts","./BetVector2.ts","./BonusFrequencyAttribute.ts","./BonusFrequencyAttributeData.ts","./BonusWaveAttribute2.ts","./BonusWaveFlag.ts","./BouncyBulletInfo.ts","./BulletInfo.ts","./BulletKind.ts","./CatchInfo.ts","./ChangeTickSpeedUp.ts","./Collision.ts","./ControllerState.ts","./EnumWrapper.ts","./EventDataFrameInfo.ts","./EventDataSilentUpdateTime.ts","./ExitRequest.ts","./FireBouncy.ts","./FireLock.ts","./FireMeteor.ts","./FireMissile.ts","./FireNormal.ts","./FireThrough.ts","./FishAttribute.ts","./FishCollision2.ts","./FishData.ts","./FishGameAck.ts","./FishInfo.ts","./FishKind.ts","./FishOddsAttribute.ts","./FishStopReasopn.ts","./FrameInfo.ts","./GMAddCoinReq.ts","./GMChangeTickSpeedUpReq.ts","./GMSpawnFishReq.ts","./GetRoomServiceInfoRequest.ts","./GetRoomServiceInfoResponse.ts","./GetRoomServiceInfoResponseCode.ts","./HoldingSpecialBulletInfo.ts","./IBulletInfo.ts","./IBulletSource.ts","./IFortFireInfo.ts","./IFortFrameInfo.ts","./InRoomPlayerInfo.ts","./InputInfo.ts","./LockBulletInfo.ts","./MemoryPackReader.ts","./MemoryPackWriter.ts","./MeteorBulletInfo.ts","./MissileBulletInfo.ts","./NormalBulletInfo.ts","./PathAttribute2.ts","./PathAttributeData.ts","./PathSpeed.ts","./PathSpeedData.ts","./PlayerInfo.ts","./PlayerLevelBetMax.ts","./PooledObject.ts","./RankData.ts","./ReqDataChangeBet.ts","./ReqDataCheckRoomInfo.ts","./ReqDataExitRoom.ts","./ReqDataFireLockBullet.ts","./ReqDataFireNormalBullet.ts","./ReqDataFireSpecialBullet.ts","./ReqDataGMCommand.ts","./ReqDataGetBetHistory.ts","./ReqDataJoinRoom.ts","./RespDataExitRoom.ts","./RespDataGMCommand.ts","./RespDataGetBetHistory.ts","./RespDataGetPlayerInfo.ts","./RespDataJoinRoom.ts","./RespPlayersInRoom.ts","./RoomData.ts","./RoomInfo.ts","./RoomInfoAck.ts","./RoundGroup.ts","./RoundInfo.ts","./SetActivityRequest.ts","./SettingData.ts","./ThemeSettingAttribute.ts","./ThroughBulletInfo.ts","./TokenAuthInfo.ts","./UIAutoAttribute2.ts","./UIAutoAttributeData.ts","./Vector2.ts","./WaveAttribute2.ts","./WaveData.ts","./WaveInfo.ts","./WaveKind.ts","./WaveType.ts","./Packet.ts","./SubsystemCategory.ts","./HexConvertor.ts","./WebSocketClient.ts","./GameFlowBase.ts","./GameFlowManager.ts","./Loading2.ts","./Lobby.ts","./MainFish.ts","./StartUp.ts","./NumberExtension.ts","./StringExtension.ts","./HttpHelper.ts","./ResourceLoader.ts","./StopwatchHelper.ts","./IdleTimeRefresher.ts","./PerformCurve.ts","./EffectPoolManager.ts","./MapPool.ts","./MatchPool.ts","./FxNode.ts","./Pool.ts","./GeneralPopup.ts","./GeneralPopupController.ts","./UIGeneralPopup.ts","./AbstractGenerator.ts","./NR3Generator.ts","./FishGameAgent.ts","./FishGameCommand.ts","./IFishGameAgent.ts","./GMCommand.ts","./GMCommandAgent.ts","./GMCommandSystem.ts","./IGMCommandAgent.ts","./GetGameDemoLinkRequest.ts","./GetGameLinkRequest.ts","./GetGameLinkRequestBase.ts","./GetGameLinkResponse.ts","./RoomDisconnectHandler.ts","./Service.ts","./ServiceManager.ts","./ShowFPS.ts","./SpriteAnimationPlayer.ts","./StartupLoader.ts","./TickPingHelper.ts","./ConstantNumChangeLevel.ts","./NumChangeLevel.ts","./UIAutoShootController.ts","./UIAutoShootCountSetting.ts","./UIAutoShootSetting.ts","./UIAutoShootUnit.ts","./UIDot.ts","./UIDotGroup.ts","./FishHIDManager.ts","./InRoomHint.ts","./IntroduceController.ts","./UIIntroduceScrollView.ts","./LogoController.ts","./OptionSetting.ts","./PlayerScore.ts","./CoinPool.ts","./Coin.ts","./FishName.ts","./NumberString.ts","./ShowCoin.ts","./SpriteAnimationNode.ts","./UIPoolManager.ts","./RecyclableListItem.ts","./RecyclableScrollView.ts","./ShowGetFish.ts","./ShowReward.ts","./SpriteSettingSetter.ts","./UIOptionSetting.ts","./UIPlayerState.ts","./UIBouncyWeapon.ts","./UIMeteorWeapon.ts","./UIMissileWeapon.ts","./UIThroughWeapon.ts","./UIWeaponBase.ts","./UIWeaponController.ts","./UIWeaponInfo.ts","./UIWeaponReplica.ts","./UIWeaponScreenEffect.ts","./ButtonControll.ts","./CollectionExtension.ts","./ColorChangeHelper.ts","./ColorGroup.ts","./MessageBroadcaster.ts","./MessageCmd.ts","./MessageData.ts","./MessageManager.ts","./MessageReceiver.ts","./MonoEventTrigger.ts","./NodeControll.ts","./NodeKeeper.ts","./OpacityControll.ts","./Singleton.ts","./SingletonComponent.ts","./StringUtility.ts","./SyncEventUtility.ts","./SyncReadyWaiter.ts","./Utility2.ts","./JsonAttribute.ts","./icu-component.ts","./l10n-component.ts","./l10n-label.ts","./L10nUtility.ts","./auto-config-intl-manager.ts","./icu-options.ts","./icu-type.ts","./l10n-listen-event.ts","./l10n-manager.ts","./l10n-options.ts","./localization-global.ts","./resource-data-manager.ts","./l10n.ts","./Intl.PluralRules.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainFish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFlowBase.ts","./AudioManager.ts"],(function(t){var n,o,i,e,a;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator},function(t){e=t.GameFlowBase},function(t){a=t.AudioManager}],execute:function(){var r;o._RF.push({},"0a287qYpGpBCJskDFve3kEy","MainFish",void 0);var s=i.ccclass;i.property,t("MainFish",s("MainFish")(r=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.onMotionStateEnter=function(n,o){t.prototype.onMotionStateEnter.call(this,n,o)},i.onMotionStateExit=function(n,o){a.instance().stopAllSFX(),t.prototype.onMotionStateExit.call(this,n,o)},o}(e))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/MainFishAudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSUIManager.ts","./NormalFishCatchAudioController.ts","./SpecialFishCatchAudioController.ts","./BouncyCatchAudioController.ts","./BulletKind.ts"],(function(o){var i,t,n,e,r,l,a,u,c,s,h,C,d,p;return{setters:[function(o){i=o.applyDecoratedDescriptor,t=o.initializerDefineProperty,n=o.inheritsLoose,e=o.assertThisInitialized},function(o){r=o.cclegacy,l=o._decorator,a=o.CCInteger,u=o.CCString,c=o.Component},function(o){s=o.FSUIManager},function(o){h=o.NormalFishCatchAudioController},function(o){C=o.SpecialFishCatchAudioController},function(o){d=o.BouncyCatchAudioController},function(o){p=o.BulletKind}],execute:function(){var f,y,A,b,F,m,g,w,M,v,B,K,S,z,I,P,L,D;r._RF.push({},"8cd91pfiBhNXIKa6RRPZneu","MainFishAudioController",void 0);var N=l.ccclass,H=l.property;o("FishAudioConfig",(f=N("FishAudioConfig"),y=H(a),A=H(u),b=H(u),f((g=i((m=function(){t(this,"ID",g,this),t(this,"ShowUpAudioKey",w,this),t(this,"OnHitAudioKey",M,this)}).prototype,"ID",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=i(m.prototype,"ShowUpAudioKey",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"defaultKey"}}),M=i(m.prototype,"OnHitAudioKey",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"defaultKey"}}),F=m))||F)),o("MainFishAudioController",(v=N("MainFishAudioController"),B=H(h),K=H(C),S=H(d),v((P=i((I=function(o){function i(){for(var i,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return i=o.call.apply(o,[this].concat(r))||this,t(i,"normalCatchAudioController",P,e(i)),t(i,"specialFishCatchAudioController",L,e(i)),t(i,"bouncyCatchAudioController",D,e(i)),i}n(i,o);var r=i.prototype;return r.playNormalCatchAudio=function(o,i){switch(o){case p.Normal:case p.Lock:this.normalBulletCatchAudio(i);break;case p.Through:case p.Meteor:case p.Missile:case p.Bouncy:this.bouncyCatchAudio()}},r.playSpecialFishHitAudio=function(){this.specialFishCatchAudioController.Play()},r.onLoad=function(){s.Instance.MainFishAudioController=this},r.normalBulletCatchAudio=function(o){o?this.normalCatchAudioController.Play():this.normalCatchAudioController.PlayLevel(0)},r.bouncyCatchAudio=function(){this.bouncyCatchAudioController.PlayLevel(0)},i}(c)).prototype,"normalCatchAudioController",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(I.prototype,"specialFishCatchAudioController",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(I.prototype,"bouncyCatchAudioController",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=I))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/MapPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pool.ts"],(function(o){var t,e,n,a,l;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator},function(o){a=o.PoolInstance,l=o.PoolNode}],execute:function(){e._RF.push({},"1a58aVQKQFOobNH8wg9qm88","MapPool",void 0);n.ccclass,n.property,o("MapPoolNode",function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e}(l)),o("MapPoolInstance",function(o){function e(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=o.call.apply(o,[this].concat(n))||this)._mapPool=new Map,t}t(e,o);var n=e.prototype;return n.GetObject=function(t){var e=null;return this._mapPool.has(t)?e=this._mapPool.get(t):this._mapPool.set(t,e=o.prototype.GetObject.call(this)),e.MapKey=t,e},n.PushToPool=function(t){var e=t.MapKey;this._mapPool.has(e)&&this._mapPool.delete(e),t.MapKey=null,o.prototype.PushToPool.call(this,t)},e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/MatchPool.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"69f32ms/m1FSJwWB1H/DXdR","MatchPool",void 0);t("MatchPool",function(){function t(t,o){this.MatchValue=void 0,this.MatchPool=void 0,this.MismatchPool=void 0,this.MatchPool=t,this.MismatchPool=o}var o=t.prototype;return o.checkMatch=function(t){return t==this.MatchValue},o.getPool=function(t){return this.checkMatch(t)?this.MatchPool:this.MismatchPool},o.getObject=function(t){return this.getPool(t).GetObject(t)},o.setObject=function(t,o){this.getPool(t).PushToPool(o)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/MemoryPackReader.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"801c3h2JxRLLqJ64rpyklAr","MemoryPackReader",void 0);t("MemoryPackReader",function(){function t(t){this.buffer=void 0,this.dataView=void 0,this.utf8Decoder=void 0,this.utf16Decoder=void 0,this.offset=void 0,this.buffer=t,this.dataView=new DataView(this.buffer),this.utf8Decoder=null,this.utf16Decoder=null,this.offset=0}var e=t.prototype;return e.tryReadObjectHeader=function(){var t=this.readUint8();return 255==t?[!1,0]:[!0,t]},e.tryReadUnionHeader=function(){var t=this.readUint8();return t<250?[!0,t]:250==t?[!0,this.readUint16()]:[!1,0]},e.tryReadCollectionHeader=function(){var t=this.readInt32();if(-1==t)return[!1,0];if(this.buffer.byteLength-this.offset<t)throw new Error("header length is too large, length: "+t);return[!0,t]},e.readBoolean=function(){return 0!=this.readUint8()},e.readNullableBoolean=function(){return 0==this.readUint8()?(this.offset+=1,null):1==this.readUint8()},e.readUint8=function(){var t=this.dataView.getUint8(this.offset);return this.offset+=1,t},e.readNullableUint8=function(){return 0==this.readUint8()?(this.offset+=1,null):this.readUint8()},e.readUint16=function(){var t=this.dataView.getUint16(this.offset,!0);return this.offset+=2,t},e.readNullableUint16=function(){return 0==this.readUint16()?(this.offset+=2,null):this.readUint16()},e.readUint32=function(){var t=this.dataView.getUint32(this.offset,!0);return this.offset+=4,t},e.readNullableUint32=function(){return 0==this.readUint32()?(this.offset+=4,null):this.readUint32()},e.readInt8=function(){var t=this.dataView.getInt8(this.offset);return this.offset+=1,t},e.readNullableInt8=function(){return 0==this.readInt8()?(this.offset+=1,null):this.readInt8()},e.readInt16=function(){var t=this.dataView.getInt16(this.offset,!0);return this.offset+=2,t},e.readNullableInt16=function(){return 0==this.readInt16()?(this.offset+=2,null):this.readInt16()},e.readInt32=function(){var t=this.dataView.getInt32(this.offset,!0);return this.offset+=4,t},e.readNullableInt32=function(){return 0==this.readInt32()?(this.offset+=4,null):this.readInt32()},e.readFloat32=function(){var t=this.dataView.getFloat32(this.offset,!0);return this.offset+=4,t},e.readNullableFloat32=function(){return 0==this.readFloat32()?(this.offset+=4,null):this.readFloat32()},e.readFloat64=function(){var t=this.dataView.getFloat64(this.offset,!0);return this.offset+=8,t},e.readNullableFloat64=function(){return 0==this.readFloat64()?(this.offset+=8,null):this.readFloat64()},e.readString=function(){var t=this.tryReadCollectionHeader(),e=t[0],r=t[1];if(!e)return null;if(0==r)return"";if(r>0){null==this.utf16Decoder&&(this.utf16Decoder=new TextDecoder("utf-16",{ignoreBOM:!0,fatal:!0}));var i=2*r,n=new Uint8Array(this.buffer,this.offset,i),a=this.utf16Decoder.decode(n);return this.offset+=i,a}null==this.utf8Decoder&&(this.utf8Decoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}));var f=~r;this.offset+=4;var s=new Uint8Array(this.buffer,this.offset,f),o=this.utf8Decoder.decode(s);return this.offset+=f,o},e.readArray=function(t){var e=this.tryReadCollectionHeader(),r=e[0],i=e[1];if(!r)return null;for(var n=new Array(i),a=0;a<n.length;a++)n[a]=t(this);return n},e.readMap=function(t,e){var r=this.tryReadCollectionHeader(),i=r[0],n=r[1];if(!i)return null;for(var a=new Map,f=0;f<n;f++){var s=t(this),o=e(this);a.set(s,o)}return a},e.readSet=function(t){var e=this.tryReadCollectionHeader(),r=e[0],i=e[1];if(!r)return null;for(var n=new Set,a=0;a<i;a++)n.add(t(this));return n},e.readUint8Array=function(){var t=this.tryReadCollectionHeader(),e=t[0],r=t[1];if(!e)return null;var i=this.buffer.slice(this.offset,this.offset+r);return this.offset+=r,new Uint8Array(i)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/MemoryPackWriter.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"5c87bixz4pOZrHevb9QONhf","MemoryPackWriter",void 0);t("MemoryPackWriter",function(){function t(t){void 0===t&&(t=256),this.buffer=void 0,this.dataView=void 0,this.utf8Encoder=void 0,this.offset=void 0,this.buffer=new Uint8Array(t),this.dataView=new DataView(this.buffer.buffer),this.utf8Encoder=null,this.offset=0}t.getSharedInstance=function(){return null==this.singletonWriter&&(this.singletonWriter=new t),this.singletonWriter.clear(),this.singletonWriter};var i=t.prototype;return i.ensureCapacity=function(t){if(this.buffer.length-this.offset<t){for(var i=this.buffer.length,e=this.offset+t;i<e;)i*=2;var s=new Uint8Array(i);s.set(this.buffer),this.buffer=s,this.dataView=new DataView(this.buffer.buffer)}},i.clearBuffer=function(t){for(this.ensureCapacity(t);t>=4;)this.dataView.setUint32(this.offset,0,!0),this.offset+=4,t-=4;t>=2&&(this.dataView.setUint16(this.offset,0,!0),this.offset+=2,t-=2),t>=1&&(this.dataView.setUint8(this.offset,0),this.offset+=1)},i.writeObjectHeader=function(t){this.writeUint8(t)},i.writeNullObjectHeader=function(){this.writeUint8(255)},i.writeUnionHeader=function(t){t<250?this.writeUint8(t):(this.writeUint8(250),this.writeUint16(t))},i.writeNullUnionHeader=function(){this.writeUint8(255)},i.writeCollectionHeader=function(t){this.writeInt32(t)},i.writeNullCollectionHeader=function(){this.writeInt32(-1)},i.writeBoolean=function(t){this.writeUint8(t?1:0)},i.writeNullableBoolean=function(t){null!=t?this.writeNullableUint8(t?1:0):this.clearBuffer(2)},i.writeUint8=function(t){this.ensureCapacity(1),this.dataView.setUint8(this.offset,t),this.offset+=1},i.writeNullableUint8=function(t){null!=t?(this.writeUint8(1),this.writeUint8(t)):this.clearBuffer(2)},i.writeUint16=function(t){this.ensureCapacity(2),this.dataView.setUint16(this.offset,t,!0),this.offset+=2},i.writeNullableUint16=function(t){null!=t?(this.writeUint16(1),this.writeUint16(t)):this.clearBuffer(4)},i.writeUint32=function(t){this.ensureCapacity(4),this.dataView.setUint32(this.offset,t,!0),this.offset+=4},i.writeNullableUint32=function(t){null!=t?(this.writeUint32(1),this.writeUint32(t)):this.clearBuffer(8)},i.writeInt8=function(t){this.ensureCapacity(1),this.dataView.setInt8(this.offset,t),this.offset+=1},i.writeNullableInt8=function(t){null!=t?(this.writeInt8(1),this.writeInt8(t)):this.clearBuffer(2)},i.writeInt16=function(t){this.ensureCapacity(2),this.dataView.setInt16(this.offset,t,!0),this.offset+=2},i.writeNullableInt16=function(t){null!=t?(this.writeInt16(1),this.writeInt16(t)):this.clearBuffer(4)},i.writeInt32=function(t){this.ensureCapacity(4),this.dataView.setInt32(this.offset,t,!0),this.offset+=4},i.writeNullableInt32=function(t){null!=t?(this.writeInt32(1),this.writeInt32(t)):this.clearBuffer(8)},i.writeFloat32=function(t){this.ensureCapacity(4),this.dataView.setFloat32(this.offset,t,!0),this.offset+=4},i.writeNullableFloat32=function(t){null!=t?(this.writeFloat32(1),this.writeFloat32(t)):this.clearBuffer(8)},i.writeFloat64=function(t){this.ensureCapacity(8),this.dataView.setFloat64(this.offset,t,!0),this.offset+=8},i.writeNullableFloat64=function(t){null!=t?(this.writeFloat64(1),this.writeFloat64(t)):this.clearBuffer(16)},i.writeString=function(t){if(null!=t)if(0!=t.length){this.ensureCapacity(8+3*(t.length+1)),null==this.utf8Encoder&&(this.utf8Encoder=new TextEncoder);for(var i=this.utf8Encoder.encode(t),e=0,s=i.length-1;e<=s;++e)this.buffer[this.offset+8+e]=i[e];this.dataView.setInt32(this.offset,~i.length,!0),this.dataView.setInt32(this.offset+4,i.length,!0),this.offset+=i.length+8}else this.writeCollectionHeader(0);else this.writeNullCollectionHeader()},i.writeArray=function(t,i){if(null!=t){this.writeCollectionHeader(t.length);for(var e=t.length,s=0;s<e;s++)i(this,t[s])}else this.writeNullCollectionHeader()},i.writeMap=function(t,i,e){var s=this;null!=t?(this.writeCollectionHeader(t.size),t.forEach((function(t,n){i(s,n),e(s,t)}))):this.writeNullCollectionHeader()},i.writeSet=function(t,i){var e=this;null!=t?(this.writeCollectionHeader(t.size),t.forEach((function(t){i(e,t)}))):this.writeNullCollectionHeader()},i.writeGuid=function(t){var i=parseInt(t.slice(0,2),16)<<24|parseInt(t.slice(2,4),16)<<16|parseInt(t.slice(4,6),16)<<8|parseInt(t.slice(6,8),16),e=parseInt(t.slice(9,11),16)<<8|parseInt(t.slice(11,13),16),s=parseInt(t.slice(14,16),16)<<8|parseInt(t.slice(16,18),16),n=parseInt(t.slice(19,21),16),r=parseInt(t.slice(21,23),16),f=parseInt(t.slice(24,26),16),a=parseInt(t.slice(26,28),16),h=parseInt(t.slice(28,30),16),l=parseInt(t.slice(30,32),16),o=parseInt(t.slice(32,34),16),u=parseInt(t.slice(34,36),16);this.ensureCapacity(16),this.dataView.setInt32(this.offset,i,!0),this.dataView.setInt16(this.offset+4,e,!0),this.dataView.setInt16(this.offset+6,s,!0),this.dataView.setUint8(this.offset+8,n),this.dataView.setUint8(this.offset+9,r),this.dataView.setUint8(this.offset+10,f),this.dataView.setUint8(this.offset+11,a),this.dataView.setUint8(this.offset+12,h),this.dataView.setUint8(this.offset+13,l),this.dataView.setUint8(this.offset+14,o),this.dataView.setUint8(this.offset+15,u),this.offset+=16},i.writeNullableGuid=function(t){null!=t?(this.writeInt32(1),this.writeGuid(t)):this.clearBuffer(20)},i.writeUint8Array=function(t){null!=t?(this.ensureCapacity(t.length+4),this.dataView.setInt32(this.offset,t.length,!0),this.buffer.set(t,this.offset+4),this.offset+=t.length+4):this.writeNullCollectionHeader()},i.clear=function(){this.offset=0},i.getSpan=function(){return this.buffer.subarray(0,this.offset)},i.toArray=function(){return this.buffer.slice(0,this.offset)},t}()).singletonWriter=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/MessageBroadcaster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts"],(function(e){var r,t,a,s,n,i,o,c,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator,o=e.CCString,c=e.Component},function(e){u=e.MessageManager}],execute:function(){var l,p,g,d,f;n._RF.push({},"1b61df+fcZA8pQMuUNW/bWe","MessageBroadcaster",void 0);var M=i.ccclass,y=i.property;e("MessageBroadcaster",(l=M("MessageBroadcaster"),p=y(o),l((f=r((d=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r=e.call.apply(e,[this].concat(n))||this,a(r,"MessageCmd",f,s(r)),r}return t(r,e),r.prototype.broadcast=function(){u.Instance.emit(this.MessageCmd)},r}(c)).prototype,"MessageCmd",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=d))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageCmd.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"cd6039Kf4dJwoaVi1597uk0","MessageCmd",void 0);var O=_("MessageCmd",(function(){}));O.PRELOAD_START="PRELOAD_START",O.POSTLOAD_START="POSTLOAD_START",O.OPEN_LOADING_UISCENE="OPEN_LOADING_UISCENE",O.CLOSE_LOADING_UISCENE="CLOSE_LOADING_UISCENE",O.FISH_START_UPDATE="FISH_START_UPDATE",O.BG_FIRST_FINISH="BG_FIRST_FINISH",O.JOIN_ROOM="JOIN_ROOM",O.ON_JOIN_ROOM="ON_JOIN_ROOM",O.ON_SPAWN_WAVE="ON_SPAWN_WAVE",O.ON_SPAWN_FISH_NODE="ON_SPAWN_FISH_NODE",O.ON_DESPAWN_FISH="ON_DESPAWN_FISH",O.START_UI_AUTO_SHOOT="START_UI_AUTO_SHOOT",O.START_SPECIAL_AUTO_SHOOT="START_AUTO_SHOOT",O.ON_PLAYER_COIN_CHANGE="ON_PLAYER_COIN_CHANGE",O.ON_SPAWN_BULLET="ON_SPAWN_BULLET",O.ON_DESPAWN_BULLET="ON_DESPAWN_BULLET",O.ON_SPEEDMODE_START="ON_SPEEDMODE_START",O.ON_SPEEDMODE_END="ON_SPEEDMODE_END",O.ON_SWITCH_FORT="ON_SWITCH_FORT",O.ON_BULLET_HIT_FISH="ON_BULLET_HIT_FISH",O.ON_SILENT_UPDATE_SETTING="ON_SILENT_UPDATE_SETTING",O.ON_RECEIVE_FRAME_UPDATE="ON_RECEIVE_FRAME_UPDATE",O.ON_AUTOSHOOT_CONSTRAINT_ARRIVAL="ON_AUTOSHOOT_CONSTRAINT_ARRIVAL",O.ON_COIN_INSUFFICIENT="ON_COIN_INSUFFICIENT",O.ON_SET_ACTIVITY_DATA="ON_SET_ACTIVITY_DATA",O.ON_GET_SPECIAL_BULLET_REWARD="ON_GET_SPECIAL_BULLET_REWARD",O.REFRESH_BG="REFRESH_BG",O.RESET_BG_LOCATION="RESET_BG_LOCATION",O.REINDEX_BG="REINDEX_BG",O.MOVE_BG="MOVE_BG",O.LOCATE_BG="LOCATE_BG",O.ENTER_BOSS_STAGE="ENTER_BOSS_STAGE",O.INIT_BOSS_STAGE="INIT_BOSS_STAGE",O.ON_CHANGE_THEME="ON_CHANGE_THEME",O.ON_FADE_IN_THEME="ON_FADE_IN_THEME",O.PLAY_BG_BGM="PLAY_BG_BGM",O.GM_SPECIFY_ROOM="GM_SPECIFY_ROOM",O.SET_FISHDEBUGINFO_ACTIVE="SET_FISHDEBUGINFO_ACTIVE",O.SET_COLLISIONDEBUGINFO_ACTIVE="SET_COLLISIONDEBUGINFO_ACTIVE",O.OPEN_GENERAL_POPUP="OPEN_GENERAL_POPUP",O.OPEN_FETCHING_HINT="OPEN_FETCHING_HINT",O.CLOSE_FETCHING_HINT="CLOSE_FETCHING_HINT",O.OPEN_GOTCHA_FISH="OPEN_GOTCHA_FISH",O.CLOSE_GOTCHA_FISH="CLOSE_GOTCHA_FISH",O.OPEN_GOTCHA_FISH_FOR_DEBUG="OPEN_GOTCHA_FISH_FOR_DEBUG",E._RF.pop()}}}));

System.register("chunks:///_virtual/MessageData.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"0248apPTXJK0YfVHyaEuaQ/","MessageData",void 0);t("JoinRoomMessage",(function(t){this.roomInfo=void 0,this.roomInfo=t})),t("AutoShootMessage",(function(){this.BulletKind=void 0,this.HasShootCountConstraint=void 0,this.HasMoreThanStopConstraint=void 0,this.HasLessThanStopConstraint=void 0,this.IsShootCountInfinity=void 0,this.ShootCountConstraint=void 0,this.MoreThanStopConstraint=void 0,this.LessThanConstraint=void 0,this.LockFishGroupIDs=void 0,this.CurrentOptionType=void 0,this.IsAutoWeaponMode=void 0})),t("SpecialAutoShootMessage",(function(){this.BulletKind=void 0,this.ShootCountConstraint=void 0})),t("AutoShootConstraintArrivalMessage",(function(t,o){this.constraintType=void 0,this.value=void 0,this.constraintType=t,this.value=o})),t("PlayerCoinChangeMessage",(function(t,o){this.FortID=void 0,this.Coin=void 0,this.FortID=t,this.Coin=o}));o._RF.pop()}}}));

System.register("chunks:///_virtual/MessageManager.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.EventTarget}],execute:function(){n._RF.push({},"963bdIKtAxHNK7YEYUnBoLv","MessageManager",void 0),e("MessageManager",(function(){})).Instance=new t,n._RF.pop()}}}));

System.register("chunks:///_virtual/MessageReceiver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts"],(function(e){var n,t,i,c,o,r,s,a,v,l,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,c=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,a=e.CCString,v=e.EventHandler,l=e.Component},function(e){u=e.MessageManager}],execute:function(){var f,h,p,g,R,d,m,y,b;r._RF.push({},"c1328yD46xCvZKWWknIxYXm","MessageReceiver",void 0);var M=s.ccclass,O=s.property;e("MessageReceiver",(f=M("MessageReceiver"),h=O(a),p=O({type:[v]}),g=O({type:[v],tooltip:"觸發一次事件即刪除註冊"}),f((m=n((d=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,i(n,"MessageCmd",m,c(n)),i(n,"OnReceiveEvent",y,c(n)),i(n,"OnReceiveOnceEvent",b,c(n)),n}t(n,e);var r=n.prototype;return r.onLoad=function(){this.onReceiveOnceAction=this.onReceiveOnceAction.bind(this),this.onReceiveAction=this.onReceiveAction.bind(this),u.Instance.once(this.MessageCmd,this.onReceiveOnceAction),u.Instance.on(this.MessageCmd,this.onReceiveAction)},r.onDestroy=function(){u.Instance.off(this.MessageCmd,this.onReceiveAction),u.Instance.off(this.MessageCmd,this.onReceiveOnceAction)},r.onReceiveOnceAction=function(){this.invokeCallbacks(this.OnReceiveOnceEvent)},r.onReceiveAction=function(){this.invokeCallbacks(this.OnReceiveEvent)},r.invokeCallbacks=function(e){if(null!=e)for(var n,t=o(e);!(n=t()).done;){var i=n.value,c=new Array;0!==i.customEventData.trim().length&&(c=[i.customEventData]),i.emit(c)}},n}(l)).prototype,"MessageCmd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=n(d.prototype,"OnReceiveEvent",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=n(d.prototype,"OnReceiveOnceEvent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=d))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialBullet.ts","./BulletPoolManager.ts","./CameraShakePlayer.ts"],(function(e){var t,n,o,i,r,a,s,l,u,c,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,s=e._decorator,l=e.Vec3,u=e.Quat},function(e){c=e.SpecialBullet},function(e){h=e.BulletPoolManager},function(e){f=e.CameraShakePlayer}],execute:function(){var p,P,d,g,y;a._RF.push({},"3033344ED1NrJsz7qdIbK1g","MeteorBullet",void 0);var S=s.ccclass,B=s.property;e("MeteorBullet",(p=S("MeteorBullet"),P=B(f),p((y=t((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"cameraShakePlayer",y,i(t)),t._targetPos=null,t}n(t,e);var a=t.prototype;return a.initial=function(t,n){e.prototype.initial.call(this,t,n),this._targetPos=new l(this.MeteorInfo.PosX,this.MeteorInfo.PosY),this.updatePose(this._targetPos.x,this._targetPos.y)},a.release=function(t,n){e.prototype.release.call(this,t,n)},a.reset=function(){},a.doCast=function(){},a.doHit=function(){},a.doFinish=function(){var e=h.instance().genFinishNode(this.Bullet),t=this.genFinishRTS(),n=t[0],o=t[1];e.node.setRTS(o,n),this.cameraShakePlayer.shakeCamera()},a.genCastRTS=function(){return[this.node.worldPosition,this.node.worldRotation]},a.genHitRTS=function(){return[this.node.worldPosition,this.node.worldRotation]},a.genFinishRTS=function(){var e=this.calculatePose(this._targetPos.x,this._targetPos.y);return[e[0],e[1]]},a.updatePose=function(e,t){var n=this.calculatePose(e,t),o=n[0],i=n[1];this.node.setRTS(i,o)},a.calculatePose=function(e,t){return[new l(e,t),new u]},r(t,[{key:"MeteorInfo",get:function(){return this.Bullet.Info}}]),t}(c)).prototype,"cameraShakePlayer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./IBulletSource.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.IBulletSource}],execute:function(){r._RF.push({},"03995rQvBhAXKvmiOmiAxnF","MeteorBulletInfo",void 0);e("MeteorBulletInfo",function(){function e(){this.Source=void 0,this.Direction=void 0,this.PosX=void 0,this.PosY=void 0,this.CurrentFixedUpdateCount=void 0,this.Source=null,this.Direction=0,this.PosX=0,this.PosY=0,this.CurrentFixedUpdateCount=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(5),n.serializeCore(e,r.Source),e.writeInt32(r.Direction),e.writeFloat64(r.PosX),e.writeFloat64(r.PosY),e.writeInt32(r.CurrentFixedUpdateCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],o=t[1];if(!i)return null;var a=new e;if(5==o)a.Source=n.deserializeCore(r),a.Direction=r.readInt32(),a.PosX=r.readFloat64(),a.PosY=r.readFloat64(),a.CurrentFixedUpdateCount=r.readInt32();else{if(o>5)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Source=n.deserializeCore(r),1==o)return a;if(a.Direction=r.readInt32(),2==o)return a;if(a.PosX=r.readFloat64(),3==o)return a;if(a.PosY=r.readFloat64(),4==o)return a;if(a.CurrentFixedUpdateCount=r.readInt32(),5==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./SpecialFort.ts","./BulletPoolManager.ts","./DirectionHelper.ts"],(function(t){var e,i,n,o,r,s,l,a,c,h,u,f,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,l=t._decorator,a=t.EventHandler,c=t.Vec3,h=t.Quat},function(t){u=t.BulletKind},function(t){f=t.SpecialFort},function(t){p=t.BulletPoolManager},function(t){d=t.DirectionHelper}],execute:function(){var y,F,v;s._RF.push({},"3fc3eF1y7xF95iiqFUFqReE","MeteorFort",void 0);var g=l.ccclass,_=l.property;t("MeteorFort",g("MeteorFort")((v=e((F=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"startPosOffset",v,o(e)),e._firstShoot=void 0,e._finishCallback=null,e}i(e,t);var s=e.prototype;return s.spawnBullet=function(e,i){t.prototype.spawnBullet.call(this,e,i);var n=e.Info;this.setAnchorAngle(n.Direction),this.showFireNode(e),this._firstShoot&&(this._firstShoot=!1)},s.despawnBullet=function(e,i){t.prototype.despawnBullet.call(this,e,i)},s.set=function(){t.prototype.set.call(this),this._firstShoot=!0},s.reset=function(){this._firstShoot=!0,t.prototype.reset.call(this)},s.onLoad=function(){t.prototype.onLoad.call(this),this._finishCallback=this.genFinishCallback(),this.FortFireAnim.finishEvents.push(this._finishCallback)},s.onDestroy=function(){this.FortFireAnim.finishEvents.splice(this.FortFireAnim.finishEvents.indexOf(this._finishCallback)),this._finishCallback=null,t.prototype.onDestroy.call(this)},s.checkShootAnimAvailable=function(){return t.prototype.checkShootAnimAvailable.call(this)&&this._firstShoot},s.genFinishCallback=function(){var t=new a;return t.target=this.node,t.component="MeteorFort",t.handler="playIdleAnim",t},s.showFireNode=function(t){if(this._firstShoot){var e=p.instance().genCastNode(t),i=this.genFireRTS(t),n=i[0],o=i[1];e.node.setRTS(o,n)}},s.genFireRTS=function(t){var e=t.Info,i=d.DirectionToVector(e.Direction),n=i[0],o=i[1],r=this.node.worldPosition.clone(),s=new c(n,o,0),l=h.rotationTo(new h,c.UNIT_Y,s);return[r.add(s.clone().multiplyScalar(this.startPosOffset)),l]},r(e,[{key:"BulletKind",get:function(){return u.Meteor}},{key:"BulletAnchor",get:function(){return this.node}},{key:"IsReady",get:function(){return null!=this.Info}}]),e}(f)).prototype,"startPosOffset",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),y=F))||y);s._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialShoot.ts","./PlayerFortManager.ts","./BulletKind.ts","./ClientAgent.ts","./Vector2.ts","./MessageManager.ts","./MessageCmd.ts","./Room.ts","./DirectionHelper.ts"],(function(t){var i,e,o,n,r,s,u,a,l,h,c,f,g,d,p,S,M,F,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,u=t._decorator,a=t.CCFloat,l=t.Vec2,h=t.randomRange},function(t){c=t.SpecialShoot},function(t){f=t.PlayerFortManager},function(t){g=t.BulletKind},function(t){d=t.ClientAgent},function(t){p=t.Vector2},function(t){S=t.MessageManager},function(t){M=t.MessageCmd},function(t){F=t.Room},function(t){A=t.DirectionHelper}],execute:function(){var b,I,R,C,D,H,y,B,m,v,_,P;s._RF.push({},"ea52fsNfN9AVbgZk63pu9Z/","MeteorShoot",void 0);var w=u.ccclass,L=u.property;t("MeteorShoot",(b=w("MeteorShoot"),I=L(a),R=L(a),C=L(a),D=L(a),b((B=i((y=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"rotateAngleLimit",B,n(i)),o(i,"fireRangeWidthMin",m,n(i)),o(i,"fireRangeWidthMax",v,n(i)),o(i,"fireRangeHeightMin",_,n(i)),o(i,"fireRangeHeightMax",P,n(i)),i.IsCountDownFinish=void 0,i.IsAutoShootMode=void 0,i.AutoShootInfo=void 0,i.HoldingSpecialBulletInfo=void 0,i.AutoShootCount=void 0,i.FireCenter=void 0,i._bulletDir=0,i}e(i,t);var s=i.prototype;return s.set=function(){},s.reset=function(){},s.initAutoShoot=function(){this.AutoShootCount=0,this.AutoShootInfo=null,this.FireCenter=new l(F.Width/2,F.Height/2)},s.startAutoShoot=function(){this._bulletDir=0,this.runShoot()},s.updateAutoShoot=function(){var t=this.getRandomFirePos();d.Instance.FireSpecialBullet(t,this._bulletDir,this.BulletKind)},s.stopAutoShoot=function(){this.AutoShootCount=0,this.IsAutoShootMode=!1},s.runShoot=function(){if(!this.IsAutoShootMode){var t=f.instance().MainPlayerFort.UsedBulletFort.BulletKind;this._bulletDir=this.transToShootDirection(this.IsCountDownFinish?this.CenterPoint:this.ShootPoint),this.FireCenter=this.IsCountDownFinish?this.CenterPoint:this.ShootPoint;var i=this.getRandomFirePos();d.Instance.FireSpecialBullet(i,this._bulletDir,t),this.IsAutoShootMode=!0,this.IsCountDownFinish=!1}},s.getRandomFirePos=function(){var t=h(this.fireRangeWidthMin,this.fireRangeWidthMax),i=h(this.fireRangeHeightMin,this.fireRangeHeightMax),e=new p;return e.X=t,e.Y=i,e},s.onLoad=function(){this.onBulletHitFishAction=this.onBulletHitFishAction.bind(this),S.Instance.on(M.ON_BULLET_HIT_FISH,this.onBulletHitFishAction)},s.onDestroy=function(){S.Instance.off(M.ON_BULLET_HIT_FISH,this.onBulletHitFishAction)},s.onBulletHitFishAction=function(t,i){this.IsAutoShootMode&&f.instance().checkMainFort(t.FortID)&&t.BulletKind==this.BulletKind&&this.AutoShootCount++},r(i,[{key:"BulletKind",get:function(){return g.Meteor}},{key:"RotateDirectionLimit",get:function(){return this.rotateAngleLimit/A.DegreePerDirection}}]),i}(c)).prototype,"rotateAngleLimit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),m=i(y.prototype,"fireRangeWidthMin",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),v=i(y.prototype,"fireRangeWidthMax",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1180}}),_=i(y.prototype,"fireRangeHeightMin",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),P=i(y.prototype,"fireRangeHeightMax",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 620}}),H=y))||H));s._RF.pop()}}}));

System.register("chunks:///_virtual/MissileBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialBullet.ts","./BulletPoolManager.ts","./CameraShakePlayer.ts","./DirectionHelper.ts","./PlayerFortManager.ts"],(function(e){var t,i,r,n,o,a,l,s,u,c,h,f,p,d,y,b,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,s=e.CurveRange,u=e.CCFloat,c=e.Vec3,h=e.Quat,f=e.macro,p=e.geometry},function(e){d=e.SpecialBullet},function(e){y=e.BulletPoolManager},function(e){b=e.CameraShakePlayer},function(e){v=e.DirectionHelper},function(e){g=e.PlayerFortManager}],execute:function(){var m,P,w,S,T,M,C,_,F,z,B,I,R,Y,D,X,k,x,N,H,U,A,V,K,j,E,L,G,O,Q,W;a._RF.push({},"d7890GzPHRCC6BrWNxj2+V4","MissileBullet",void 0);var Z=l.ccclass,q=l.property;e("MissileBullet",(m=Z("MissileBullet"),P=q({readonly:!0}),w=q({readonly:!0}),S=q({readonly:!0}),T=q({readonly:!0}),M=q(b),C=q(s),_=q(s),F=q(s),z=q(s),B=q(u),I=q(u),R=q(u),Y=q(u),D=q(u),m((x=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"time",x,n(t)),r(t,"posX",N,n(t)),r(t,"posY",H,n(t)),r(t,"dir",U,n(t)),r(t,"cameraShakePlayer",A,n(t)),r(t,"curveX",V,n(t)),r(t,"curveY",K,n(t)),r(t,"accelerationCurve",j,n(t)),r(t,"scaleCurve",E,n(t)),r(t,"xForceScale",L,n(t)),r(t,"yForceScale",G,n(t)),r(t,"forceScaleThreshold",O,n(t)),r(t,"forceScaleMultiplier",Q,n(t)),r(t,"duration",W,n(t)),t._startPos=null,t._castPos=null,t._targetPos=null,t}i(t,e);var a=t.prototype;return a.initial=function(t,i){e.prototype.initial.call(this,t,i);var r=this.FromAnchor.worldPosition.clone();this._targetPos=new c(this.MissileInfo.PosX,this.MissileInfo.PosY),this.dir=this._targetPos.clone().subtract(r).normalize();var n=g.instance().getPlayerFort(t.FortID).getBulletFort(t.BulletKind).FortAnchor.worldPosition.clone(),o=v.DirectionToVector(this.MissileInfo.Direction),a=o[0],l=o[1],s=new c(a,l,0);this._startPos=n.clone(),this._castPos=n.add(s.multiplyScalar(r.clone().subtract(n).length())),this.randomCurve(this.curveX,this._targetPos.x-this._startPos.x,this.xForceScale),this.randomCurve(this.curveY,this._targetPos.y-this._startPos.y,this.yForceScale)},a.release=function(t,i){this.updatePose(9999,9999),e.prototype.release.call(this,t,i)},a.reset=function(){this.time=0},a.doFinish=function(){var e=y.instance().genFinishNode(this.Bullet),t=this.genHitRTS(),i=t[0],r=t[1];e.node.setRTS(r,i),this.cameraShakePlayer.shakeCamera()},a.doCast=function(){var e=y.instance().genCastNode(this.Bullet),t=this.genCastRTS(),i=t[0],r=t[1];e.node.setRTS(r,i)},a.doHit=function(){},a.genCastRTS=function(){var e=v.DirectionToVector(this.MissileInfo.Direction),t=e[0],i=e[1],r=h.rotationTo(new h,c.UNIT_Y,new c(t,i,0));return[this._castPos,r]},a.genHitRTS=function(){var e=this.calculatePose(this.MissileInfo.PosX,this.MissileInfo.PosY),t=e[0],i=e[1];return[t,i=h.rotateZ(i,h.IDENTITY,360*Math.random()*f.RAD)]},a.genFinishRTS=function(){return[this.node.worldPosition,this.node.worldRotation]},a.onUpdate=function(t){e.prototype.onUpdate.call(this,t),this.time+=t;var i=this.time/this.duration,r=this.accelerationCurve.evaluate(i,0)*i;if(!(r>=1)){var n=this.scaleCurve.evaluate(i,0);this.posX=this._startPos.x+this.curveX.evaluate(r,0),this.posY=this._startPos.y+this.curveY.evaluate(r,0),this.node.scale=c.ONE.clone().multiplyScalar(n),this.updatePose(this.posX,this.posY)}},a.updatePose=function(e,t){var i=this.calculatePose(e,t),r=i[0],n=i[1];this.node.setRTS(n,r)},a.calculatePose=function(e,t){var i=new c(e,t);new h;return this.dir=i.clone().subtract(this.node.position).normalize(),[i,h.rotationTo(new h,c.UNIT_X,this.dir)]},a.randomCurve=function(e,t,i){var r=0;Math.abs(t)<this.forceScaleThreshold&&(r=t*this.forceScaleMultiplier);var n=t+r,o=Math.random()*(n- -n)-n,a=new p.Keyframe;a.time=0,a.value=0,a.inTangent=0,a.outTangent=o*i;var l=new p.Keyframe;l.time=this.duration,l.value=t,l.inTangent=t,l.outTangent=0;var s=[a,l];e.curve.keyFrames=s},o(t,[{key:"MissileInfo",get:function(){return this.Bullet.Info}},{key:"MissileBulletable",get:function(){return this.Bulletable}}]),t}(d)).prototype,"time",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=t(k.prototype,"posX",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=t(k.prototype,"posY",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=t(k.prototype,"dir",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.UNIT_Y.clone()}}),A=t(k.prototype,"cameraShakePlayer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(k.prototype,"curveX",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),K=t(k.prototype,"curveY",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),j=t(k.prototype,"accelerationCurve",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),E=t(k.prototype,"scaleCurve",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),L=t(k.prototype,"xForceScale",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=t(k.prototype,"yForceScale",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=t(k.prototype,"forceScaleThreshold",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q=t(k.prototype,"forceScaleMultiplier",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=t(k.prototype,"duration",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),X=k))||X));a._RF.pop()}}}));

System.register("chunks:///_virtual/MissileBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./IBulletSource.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.IBulletSource}],execute:function(){r._RF.push({},"e7dfdF++j9PR6t4XonCEzT3","MissileBulletInfo",void 0);e("MissileBulletInfo",function(){function e(){this.Source=void 0,this.Direction=void 0,this.PosX=void 0,this.PosY=void 0,this.CurrentFixedUpdateCount=void 0,this.Source=null,this.Direction=0,this.PosX=0,this.PosY=0,this.CurrentFixedUpdateCount=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(5),n.serializeCore(e,r.Source),e.writeInt32(r.Direction),e.writeFloat64(r.PosX),e.writeFloat64(r.PosY),e.writeInt32(r.CurrentFixedUpdateCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],o=t[1];if(!i)return null;var a=new e;if(5==o)a.Source=n.deserializeCore(r),a.Direction=r.readInt32(),a.PosX=r.readFloat64(),a.PosY=r.readFloat64(),a.CurrentFixedUpdateCount=r.readInt32();else{if(o>5)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Source=n.deserializeCore(r),1==o)return a;if(a.Direction=r.readInt32(),2==o)return a;if(a.PosX=r.readFloat64(),3==o)return a;if(a.PosY=r.readFloat64(),4==o)return a;if(a.CurrentFixedUpdateCount=r.readInt32(),5==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MissileFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./SpecialFort.ts"],(function(t){var e,i,n,l,s,o,r,a,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,r=t._decorator,a=t.Node,c=t.EventHandler},function(t){u=t.BulletKind},function(t){h=t.SpecialFort}],execute:function(){var p,f,d,y,b;o._RF.push({},"53225X5gE5Nc5O5yvj3twLt","MissileFort",void 0);var F=r.ccclass,v=r.property;t("MissileFort",(p=F("MissileFort"),f=v(a),p((b=e((y=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,n(e,"bulletNode",b,l(e)),e._finishCallback=null,e}i(e,t);var o=e.prototype;return o.spawnBullet=function(e,i){t.prototype.spawnBullet.call(this,e,i);var n=e.Info;this.setAnchorAngle(n.Direction)},o.despawnBullet=function(t,e){this.bulletNodes.splice(this.bulletNodes.indexOf(e),1)},o.set=function(){t.prototype.set.call(this)},o.reset=function(){t.prototype.reset.call(this)},o.onLoad=function(){t.prototype.onLoad.call(this),this._finishCallback=this.genFinishCallback(),this.FortFireAnim.finishEvents.push(this._finishCallback)},o.onDestroy=function(){this.FortFireAnim.finishEvents.splice(this.FortFireAnim.finishEvents.indexOf(this._finishCallback)),this._finishCallback=null,t.prototype.onDestroy.call(this)},o.genFinishCallback=function(){var t=new c;return t.target=this.node,t.component="MissileFort",t.handler="playIdleAnim",t},s(e,[{key:"BulletKind",get:function(){return u.Missile}},{key:"BulletAnchor",get:function(){return null!=this.bulletNode?this.bulletNode:this.node}},{key:"IsReady",get:function(){return null!=this.Info}}]),e}(h)).prototype,"bulletNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/MissileShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialShoot.ts","./PlayerFortManager.ts","./BulletKind.ts","./ClientAgent.ts","./Vector2.ts","./Room.ts","./MessageManager.ts","./MessageCmd.ts","./DirectionHelper.ts"],(function(t){var i,e,n,o,r,s,a,u,h,l,c,f,g,d,M,p,S,R,F,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,u=t.CCFloat,h=t.Vec2,l=t.randomRange,c=t.toRadian},function(t){f=t.SpecialShoot},function(t){g=t.PlayerFortManager},function(t){d=t.BulletKind},function(t){M=t.ClientAgent},function(t){p=t.Vector2},function(t){S=t.Room},function(t){R=t.MessageManager},function(t){F=t.MessageCmd},function(t){A=t.DirectionHelper}],execute:function(){var b,C,H,I,y,B,D,m,v,_,w,P,x,L;s._RF.push({},"c4ddfNMt2xOCKBGdX75dh+B","MissileShoot",void 0);var W=a.ccclass,z=a.property;t("MissileShoot",(b=W("MissileShoot"),C=z(u),H=z(u),I=z(u),y=z(u),B=z(u),b((v=i((m=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"rotateAngleLimit",v,o(i)),n(i,"fireRangeWidthMin",_,o(i)),n(i,"fireRangeWidthMax",w,o(i)),n(i,"fireRangeHeightMin",P,o(i)),n(i,"fireRangeHeightMax",x,o(i)),n(i,"fireRangeRadius",L,o(i)),i.IsCountDownFinish=void 0,i.IsAutoShootMode=void 0,i.AutoShootInfo=void 0,i.HoldingSpecialBulletInfo=void 0,i.AutoShootCount=void 0,i.FireCenter=void 0,i._bulletDir=0,i}e(i,t);var s=i.prototype;return s.set=function(){},s.reset=function(){},s.initAutoShoot=function(){this.AutoShootCount=0,this.AutoShootInfo=null,this.FireCenter=new h(S.Width/2,S.Height/2)},s.startAutoShoot=function(){this.runShoot()},s.updateAutoShoot=function(){var t=this.getRandomFirePos();M.Instance.FireSpecialBullet(t,this._bulletDir,this.BulletKind)},s.stopAutoShoot=function(){this.AutoShootCount=0,this._bulletDir=0,this.IsAutoShootMode=!1},s.runShoot=function(){if(!this.IsAutoShootMode){var t=g.instance().MainPlayerFort.UsedBulletFort.BulletKind;this._bulletDir=this.transToShootDirection(this.IsCountDownFinish?this.CenterPoint:this.ShootPoint),this.FireCenter=this.IsCountDownFinish?this.CenterPoint:this.ShootPoint;var i=this.getRandomFirePos();M.Instance.FireSpecialBullet(i,this._bulletDir,t),this.IsAutoShootMode=!0,this.IsCountDownFinish=!1}},s.getRandomFirePos=function(){var t=l(0,360),i=c(t),e=l(0,this.fireRangeRadius),n=e*Math.cos(i)+this.FireCenter.x,o=e*Math.sin(i)+this.FireCenter.y;n>this.fireRangeWidthMax?n=this.fireRangeWidthMax:n<this.fireRangeWidthMin&&(n=this.fireRangeWidthMin),o>this.fireRangeHeightMax?o=this.fireRangeHeightMax:o<this.fireRangeHeightMin&&(o=this.fireRangeHeightMin);var r=new p;return r.X=n,r.Y=o,r},s.onLoad=function(){this.onBulletHitFishAction=this.onBulletHitFishAction.bind(this),R.Instance.on(F.ON_BULLET_HIT_FISH,this.onBulletHitFishAction)},s.onDestroy=function(){R.Instance.off(F.ON_BULLET_HIT_FISH,this.onBulletHitFishAction)},s.onBulletHitFishAction=function(t,i){this.IsAutoShootMode&&g.instance().checkMainFort(t.FortID)&&t.BulletKind==this.BulletKind&&this.AutoShootCount++},r(i,[{key:"BulletKind",get:function(){return d.Missile}},{key:"RotateDirectionLimit",get:function(){return this.rotateAngleLimit/A.DegreePerDirection}}]),i}(f)).prototype,"rotateAngleLimit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),_=i(m.prototype,"fireRangeWidthMin",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),w=i(m.prototype,"fireRangeWidthMax",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1180}}),P=i(m.prototype,"fireRangeHeightMin",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),x=i(m.prototype,"fireRangeHeightMax",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 620}}),L=i(m.prototype,"fireRangeRadius",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),D=m))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/MonoEventTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,r,o,a,l,c,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,c=e.EventHandler,s=e.Component}],execute:function(){var u,p,b,f,y,v,h,O,g,k,D,d,m,C,E;a._RF.push({},"5dd00VODRpBK4Sj1DSHWN25","MonoEventTrigger",void 0);var w=l.ccclass,z=l.property;e("MonoEventTrigger",(u=w("MonoEventTrigger"),p=z({type:[c]}),b=z({type:[c]}),f=z({type:[c]}),y=z({type:[c]}),v=z({type:[c]}),h=z({type:[c]}),u((k=n((g=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"OnCall",k,r(n)),i(n,"OnLoad",D,r(n)),i(n,"OnEnable",d,r(n)),i(n,"OnStart",m,r(n)),i(n,"OnDisable",C,r(n)),i(n,"OnDestroy",E,r(n)),n}t(n,e);var a=n.prototype;return a.onCall=function(){this.invokeCallbacks(this.OnCall)},a.onLoad=function(){this.invokeCallbacks(this.OnLoad)},a.onEnable=function(){this.invokeCallbacks(this.OnEnable)},a.start=function(){this.invokeCallbacks(this.OnStart)},a.onDisable=function(){this.invokeCallbacks(this.OnDisable)},a.onDestroy=function(){this.invokeCallbacks(this.OnDestroy)},a.invokeCallbacks=function(e){if(null!=e)for(var n,t=o(e);!(n=t()).done;){var i=n.value,r=new Array;0!==i.customEventData.trim().length&&(r=[i.customEventData]),i.emit(r)}},n}(s)).prototype,"OnCall",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=n(g.prototype,"OnLoad",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=n(g.prototype,"OnEnable",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=n(g.prototype,"OnStart",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=n(g.prototype,"OnDisable",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=n(g.prototype,"OnDestroy",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=g))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/NodeControll.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,a,c,i,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,a=t.director,c=t.Director,i=t.log,r=t.Vec3,s=t.Component}],execute:function(){var l;o._RF.push({},"d0d2bDAd7xGWJL+ilVFfTm2","NodeControll",void 0);var u=n.ccclass;t("NodeControll",u("NodeControll")(l=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.SetActive=function(t,e){var o=JSON.parse(e);this.node.active=o},n.DelaySetActive=function(t,e){var o=this;a.once(c.EVENT_AFTER_UPDATE,(function(){o.SetActive(t,e)}),this)},n.SwitchActive=function(t,e){this.node.active=!this.node.active},n.SetLocalPosition=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.position=o},n.SetWorldPosition=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.worldPosition=o},n.SetLocalAngleZ=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.angle=o},n.SetLocalEulerAngles=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.eulerAngles=o},n.SetLocalRotation=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.rotation=o},n.SetWorldRotation=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.worldRotation=o},n.SetLocalScaleUni=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.scale=new r(o,o,o)},n.SetLocalScaleVec3=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.scale=o},n.SetWorldScaleVec3=function(t,e){i("customEventData: "+e);var o=JSON.parse(e);this.node.worldScale=o},n.TestCallback=function(t,e){var o=new Error("CallStack").stack;i(o),i("event: "+t),i("event: "+typeof t),i("customEventData: "+e),i("customEventData: "+typeof e)},o}(s))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/NodeKeeper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,n,c;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,n=e.director,c=e.Component}],execute:function(){var s;o._RF.push({},"538225px8BET7OHc58+NEWr","NodeKeeper",void 0);var i=r.ccclass;e("NodeKeeper",i("NodeKeeper")(s=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.start=function(){n.addPersistRootNode(this.node)},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/NormalBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseBullet.ts","./DirectionHelper.ts","./BulletParameter.ts","./Room.ts","./BulletPoolManager.ts","./FishPoolManager.ts","./ControllerState.ts"],(function(t){var i,e,o,n,s,r,a,l,u,c,h,f,p,d,m,B,N;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,a=t._decorator,l=t.Quat,u=t.macro,c=t.Vec3},function(t){h=t.BaseBullet},function(t){f=t.DirectionHelper},function(t){p=t.NormalBulletParameter},function(t){d=t.Room},function(t){m=t.BulletPoolManager},function(t){B=t.FishPoolManager},function(t){N=t.ControllerState}],execute:function(){var P,g,I,R,T,v,y;r._RF.push({},"9aff3cc/LdB0Ln89pfYcVGI","NormalBullet",void 0);var b=a.ccclass,Y=a.property;t("NormalBullet",b("NormalBullet")(((y=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,o(i,"time",I,n(i)),o(i,"posX",R,n(i)),o(i,"posY",T,n(i)),o(i,"dir",v,n(i)),i}e(i,t);var r=i.prototype;return r.initial=function(i,e){t.prototype.initial.call(this,i,e);var o=[this.NormalInfo.PosX,this.NormalInfo.PosY,this.NormalInfo.Direction];this.posX=o[0],this.posY=o[1],this.dir=o[2],this.updatePose(this.posX,this.posY,this.dir)},r.release=function(i,e){var o=[this.NormalInfo.PosX,this.NormalInfo.PosY,this.NormalInfo.Direction];this.posX=o[0],this.posY=o[1],this.dir=o[2],this.updatePose(this.posX,this.posY,this.dir),t.prototype.release.call(this,i,e)},r.reset=function(){this.time=0},r.doCast=function(){var t=m.instance().genCastNode(this.Bullet),i=this.genCastRTS(),e=i[0],o=i[1];t.node.setRTS(o,e)},r.doHit=function(){var t=m.instance().genHitNode(this.Bullet),i=this.genHitRTS(),e=i[0],o=i[1];t.node.setRTS(o,e)},r.doFinish=function(){},r.genCastRTS=function(){var t=this.calculatePose(this.NormalInfo.PosX,this.NormalInfo.PosY,this.NormalInfo.Direction);return[t[0],t[1]]},r.genHitRTS=function(){return[this.node.position,l.rotateZ(this.node.rotation,l.IDENTITY,360*Math.random()*u.RAD)]},r.genFinishRTS=function(){return[this.node.position,this.node.rotation]},r.onUpdate=function(e){t.prototype.onUpdate.call(this,e),this.time+=e;var o=function(){return this.posX==this.NormalInfo.PosX&&this.posY==this.NormalInfo.PosY}.bind(this)(),n=function(){return this.dir==this.NormalInfo.Direction}.bind(this)();if(!o||!n){var s=[this.NormalInfo.PosX,this.NormalInfo.PosY,this.NormalInfo.Direction];this.posX=s[0],this.posY=s[1],this.dir=s[2],this.time%=m.instance().FixedUpdateTime}var r=f.CalculatePose(this.posX,this.posY,this.dir,this.time,i.BulletSpeed,i.BulletRadius,i.RoomWidth,i.RoomHeight),a=r[0],l=r[1],u=r[2];this.updatePose(a,l,u),o&&n&&this.checkOfflineHitTest()},r.updatePose=function(t,i,e){var o=this.calculatePose(t,i,e),n=o[0],s=o[1];this.node.setRTS(s,n)},r.calculatePose=function(t,i,e){var o=f.DirectionToVector(e),n=o[0],s=o[1],r=l.rotationTo(new l,c.UNIT_Y,new c(n,s,0));return[new c(t,i),r]},r.checkOfflineHitTest=function(){if(this.time>m.instance().FixedUpdateTime){var t=this.node.position,e=B.instance().HitTest(t.x,t.y,i.BulletRadius);e&&e.fish.State===N.FixedUpdate&&(this.onBulletHitFishAction(this.Bullet,e.fish),this.setBulletSpriteActive(!1))}},s(i,[{key:"NormalInfo",get:function(){return this.Bullet.Info}},{key:"NormalBulletable",get:function(){return this.Bulletable}},{key:"ToAnchor",get:function(){return this.node}}]),i}(h)).BulletSpeed=p.Speed,y.BulletRadius=p.Radius,y.RoomWidth=d.Width,y.RoomHeight=d.Height,I=i((g=y).prototype,"time",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=i(g.prototype,"posX",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=i(g.prototype,"posY",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=i(g.prototype,"dir",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=g))||P);r._RF.pop()}}}));

System.register("chunks:///_virtual/NormalBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"9e3b5qx5zVNJq3HG0pmEaQO","NormalBulletInfo",void 0);e("NormalBulletInfo",function(){function e(){this.Direction=void 0,this.PosX=void 0,this.PosY=void 0,this.Direction=0,this.PosX=0,this.PosY=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeInt32(r.Direction),e.writeFloat64(r.PosX),e.writeFloat64(r.PosY)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var o=new e;if(3==n)o.Direction=r.readInt32(),o.PosX=r.readFloat64(),o.PosY=r.readFloat64();else{if(n>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return o;if(o.Direction=r.readInt32(),1==n)return o;if(o.PosX=r.readFloat64(),2==n)return o;if(o.PosY=r.readFloat64(),3==n)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/NormalFishCatchAudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CatchAudioController.ts"],(function(o){var r,t,n,e;return{setters:[function(o){r=o.inheritsLoose},function(o){t=o.cclegacy,n=o._decorator},function(o){e=o.CatchAudioController}],execute:function(){var i;t._RF.push({},"056d87YssxDpZGBT5FN9zXM","NormalFishCatchAudioController",void 0);var l=n.ccclass;n.property,o("NormalFishCatchAudioController",l("NormalFishCatchAudioController")(i=function(o){function t(){return o.apply(this,arguments)||this}return r(t,o),t}(e))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/NormalFishCatchRule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CatchInfo.ts","./CatchRule.ts"],(function(t){var e,s,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy},function(t){n=t.CatchInfo},function(t){i=t.CatchRule}],execute:function(){s._RF.push({},"5582fEU5JNKea0jhjD0oaTD","NormalFishCatchRule",void 0);t("NormalFishCatchRule",function(t){function s(e){var s;return(s=t.call(this,e)||this).fishRnd=e,s}return e(s,t),s.prototype.TryCatch=function(t,e){var s=this.fishRnd.Catch一般(this._idealStandardRTP,e.FishOdds.MinOdds,e.FishOdds.AverageOdds,e.FishOdds.MaxOdds),i=s>0,r=t.Bet*s,a=null;return i&&((a=new n).IsCatch=i,a.PlayerID=t.PlayerID,a.FortID=t.FortID,a.BulletID=t.ID,a.FishID=e.ID,a.Bet=t.Bet,a.Odds=s,a.Score=r),[i,a]},s}(i));s._RF.pop()}}}));

System.register("chunks:///_virtual/NormalFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./BaseFort.ts"],(function(t){var n,i,o,e,l,r,s;return{setters:[function(t){n=t.inheritsLoose,i=t.createClass},function(t){o=t.cclegacy,e=t._decorator,l=t.EventHandler},function(t){r=t.BulletKind},function(t){s=t.BaseFort}],execute:function(){var a;o._RF.push({},"3ff0fQDBxpA6bHaOBRqlqg/","NormalFort",void 0);var c=e.ccclass;e.property,t("NormalFort",c("NormalFort")(a=function(t){function o(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this)._finishCallback=null,n}n(o,t);var e=o.prototype;return e.spawnBullet=function(n,i){t.prototype.spawnBullet.call(this,n,i);var o=n.Info;this.setAnchorAngle(o.Direction),this.playFortAudio(),this.playShootAnim()},e.despawnBullet=function(n,i){t.prototype.despawnBullet.call(this,n,i)},e.onLoad=function(){t.prototype.onLoad.call(this),this._finishCallback=this.genFinishCallback(),this.FortFireAnim.finishEvents.push(this._finishCallback)},e.onDestroy=function(){this.FortFireAnim.finishEvents.splice(this.FortFireAnim.finishEvents.indexOf(this._finishCallback)),this._finishCallback=null,t.prototype.onDestroy.call(this)},e.genFinishCallback=function(){var t=new l;return t.target=this.node,t.component="NormalFort",t.handler="playIdleAnim",t},i(o,[{key:"BulletKind",get:function(){return r.Normal}},{key:"BulletAnchor",get:function(){return this.node}}]),o}(s))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/NormalShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseShoot.ts","./AutoShootHelper.ts","./PlayerFortManager.ts","./BulletKind.ts","./DirectionHelper.ts","./ClientAgent.ts","./UIAutoShootController.ts","./MessageManager.ts","./MessageCmd.ts"],(function(t){var i,n,o,e,r,a,s,h,u,c,l,g,f,d,S,p,A,I,C,b,y,B;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,h=t.Button,u=t.CCInteger,c=t.UITransform,l=t.input,g=t.Input,f=t.math},function(t){d=t.BaseShoot},function(t){S=t.AutoShootHelper},function(t){p=t.PlayerFortManager},function(t){A=t.BulletKind},function(t){I=t.DirectionHelper},function(t){C=t.ClientAgent},function(t){b=t.OptionGroupType},function(t){y=t.MessageManager},function(t){B=t.MessageCmd}],execute:function(){var _,D,v,m,T,w,M,P,E,F,O,k;a._RF.push({},"1e62e0KxFVMgr/tpc6AG+8T","NormalShoot",void 0);var x=s.ccclass,L=s.property;t("NormalShoot",(_=x("NormalShoot"),D=L(h),v=L({type:u,group:"掃射模式"}),m=L({type:u,group:"掃射模式"}),T=L({group:"掃射模式"}),_((P=i((M=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(i=t.call.apply(t,[this].concat(r))||this).AutoShootInfo=void 0,i.IsUIAutoShootMode=void 0,i.AutoShootCount=void 0,o(i,"changeBtn",P,e(i)),o(i,"rotateAngleLimit",E,e(i)),o(i,"strafingBeginAngle",F,e(i)),o(i,"autoShootCountPerRotation",O,e(i)),o(i,"isStrafingBackward",k,e(i)),i._strafingDirs=[],i._curStrafingDirIndex=0,i._curAutoShootCountPerRotation=0,i._isStrafingBackward=!1,i._nodeTransform=null,i}n(i,t);var a=i.prototype;return a.set=function(){this.setChangeBtnInteractable(!0),this.setChangeBtnState(!0)},a.reset=function(){p.instance().MainPlayerFort.UsedBulletSpecial?this.setChangeBtnInteractable(!1):this.setChangeBtnState(!1)},a.initAutoShoot=function(){this.AutoShootCount=0,this.IsUIAutoShootMode=!1,this.AutoShootInfo=null},a.startAutoShoot=function(){this.AutoShootInfo.CurrentOptionType==b.Strafing&&this.initStrafingShootInfo(),this.tryShoot()},a.stopAutoShoot=function(){this.AutoShootCount=0,this._strafingDirs=[]},a.updateAutoShoot=function(){(this.IsAutoShoot||this.IsUIAutoShootMode)&&this.tryShoot()},a.onLoad=function(){var t=this;this.onOpenGotchaFish=this.onOpenGotchaFish.bind(this),this._nodeTransform=this.node.getComponent(c),this.node.layer=1<<25;var i=document.getElementsByTagName("canvas")[0];i.onmouseleave=function(n){i.dispatchEvent(new Event("mousemove",n)),t.onTouchEnd(null)}},a.onEnable=function(){t.prototype.onEnable.call(this),document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this),!1),window.addEventListener("pagehide",this.onVisibilityChange.bind(this),!1),window.addEventListener("pageshow",this.onVisibilityChange.bind(this),!1),l.on(g.EventType.TOUCH_MOVE,this.onTouchMove,this),y.Instance.on(B.OPEN_GOTCHA_FISH,this.onOpenGotchaFish,this)},a.onDisable=function(){l.off(g.EventType.TOUCH_MOVE,this.onTouchMove,this),window.removeEventListener("pagehide",this.onVisibilityChange.bind(this),!1),window.removeEventListener("pageshow",this.onVisibilityChange.bind(this),!1),document.removeEventListener("visibilitychange",this.onVisibilityChange.bind(this),!1),y.Instance.off(B.OPEN_GOTCHA_FISH,this.onOpenGotchaFish,this),t.prototype.onDisable.call(this)},a.runShoot=function(){var t=0;t=this.IsUIAutoShootMode&&this.AutoShootInfo.CurrentOptionType==b.Strafing?this.getStrafingShootDirection():this.transToShootDirection(this.ShootPoint),C.Instance.FireNormalBullet(t),this.IsUIAutoShootMode&&this.updateAutoShootCount()},a.onTouchStart=function(i){p.instance().MainPlayerFort.UsedBulletKind==this.BulletKind&&(this.IsUIAutoShootMode||t.prototype.onTouchStart.call(this,i),this.shootable.checkTouchPoint()&&this.shootable.setAutoShoot(!0))},a.onTouchEnd=function(t){p.instance().MainPlayerFort.UsedBulletKind==this.BulletKind&&this.shootable.setAutoShoot(!1)},a.onTouchMove=function(t){var i=t.getLocation();this._nodeTransform.hitTest(i)&&this.shootable.checkTouchPoint()||p.instance().MainPlayerFort.UsedBulletKind!=this.BulletKind||this.shootable.setAutoShoot(!1)},a.OnGetSpecialBulletRewardAction=function(t){p.instance().checkMainFort(t.CatchInfo.FortID)&&this.setChangeBtnInteractable(!1)},a.updateAutoShootCount=function(){this.IsUIAutoShootMode&&(this.AutoShootCount++,S.instance().updateAutoShootCount())},a.setChangeBtnState=function(t){this.changeBtn.node.active=t},a.setChangeBtnInteractable=function(t){this.changeBtn.interactable=t},a.onOpenGotchaFish=function(){p.instance().MainPlayerFort.UsedBulletKind==this.BulletKind&&this.shootable.setAutoShoot(!1)},a.getStrafingShootDirection=function(){return this._curAutoShootCountPerRotation=Math.floor(this.AutoShootCount/this.autoShootCountPerRotation),0!=this.AutoShootCount&&this.AutoShootCount%this.autoShootCountPerRotation==0&&(!this._isStrafingBackward&&this._curStrafingDirIndex<this._strafingDirs.length-1?this._curStrafingDirIndex++:this._isStrafingBackward||this._curStrafingDirIndex!=this._strafingDirs.length-1?this._isStrafingBackward&&this._curStrafingDirIndex>0?this._curStrafingDirIndex--:this._isStrafingBackward&&0==this._curStrafingDirIndex&&(this._curStrafingDirIndex++,this._isStrafingBackward=!1):(this._curStrafingDirIndex--,this._isStrafingBackward=!0)),this._strafingDirs[this._curStrafingDirIndex]},a.initStrafingShootInfo=function(){this._strafingDirs=[],this._isStrafingBackward=this.isStrafingBackward;for(var t=-this.rotateAngleLimit;t<=this.rotateAngleLimit;){var i=this.transToDir(t);this._strafingDirs.push(i),t+=I.DegreePerDirection}var n=this.transToDir(this.strafingBeginAngle);this._curStrafingDirIndex=this._strafingDirs.indexOf(n),this._curStrafingDirIndex<0&&(this._curStrafingDirIndex=0)},a.transToDir=function(t){var i=t/I.DegreePerDirection,n=this.genClampValue(i),o=n[0],e=n[1];return i=f.clamp(i,o,e),i=I.DirectionConstrain(i)},a.onVisibilityChange=function(){this.onTouchEnd(null)},r(i,[{key:"BulletKind",get:function(){return A.Normal}},{key:"RotateDirectionLimit",get:function(){return this.rotateAngleLimit/I.DegreePerDirection}}]),i}(d)).prototype,"changeBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(M.prototype,"rotateAngleLimit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),F=i(M.prototype,"strafingBeginAngle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-80}}),O=i(M.prototype,"autoShootCountPerRotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=i(M.prototype,"isStrafingBackward",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=M))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/NR3Generator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.js","./AbstractGenerator.ts"],(function(t){var i,s,h,e;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy},function(t){h=t.default},function(t){e=t.AbstractGenerator}],execute:function(){s._RF.push({},"3152dkjC4NAIK3TgqF1WwoA","NR3Generator",void 0);t("NR3Generator",function(t){function s(i){var s;return(s=t.call(this)||this).SeedV=h.fromString("4101842887655102017",!0),s.SeedW=h.fromString("1",!0),s.SeedU1=h.fromString("2862933555777941757",!0),s.SeedU2=h.fromString("7046029254386353087",!0),s.SeedU3=h.fromString("4294957665",!0),s._u=h.fromNumber(0,!0),s._v=h.fromNumber(0,!0),s._w=h.fromNumber(0,!0),s._x=h.fromNumber(0,!0),s._bytesAvailable=!1,s.Seed=i,s.Reset(i),s}i(s,t);var e=s.prototype;return e.Reset=function(i){return t.prototype.Reset.call(this,i),this._v=h.fromString(this.SeedV.toString(0),!0),this._w=h.fromString(this.SeedW.toString(0),!0),this._u=h.fromNumber(i,!0).xor(this._v),this.NextULong(),this._v=h.fromString(this._u.toString(0),!0),this.NextULong(),this._w=h.fromString(this._v.toString(0),!0),this.NextULong(),this._bytesAvailable=!1,!0},e.tmpTool=function(){return this._x.add(this._v).xor(this._w).shiftLeft(this.ULongToIntShift).shiftRightUnsigned(this.ULongToIntShift)},e.NextInclusiveMaxValue=function(){var t;return this._bytesAvailable?(this._bytesAvailable=!1,(t=this.tmpTool()).toNumber()):(this._u=this._u.mul(this.SeedU1).add(this.SeedU2),t=this._v.shiftRightUnsigned(17),this._v=this._v.xor(t),t=this._v.shiftLeft(31),this._v=this._v.xor(t),t=this._v.shiftRightUnsigned(8),this._v=this._v.xor(t),this._w=this.SeedU3.mul(this._w.and(4294967295)).add(this._w.shiftRightUnsigned(32)),t=this._u.shiftLeft(21),this._x=this._u.xor(t),t=this._x.shiftRightUnsigned(35),this._x=this._x.xor(t),t=this._x.shiftLeft(4),this._x=this._x.xor(t),this._bytesAvailable=!0,(t=this._x.add(this._v).xor(this._w).shiftRightUnsigned(this.ULongToIntShift)).toNumber())},e.NextDouble=function(){var t;if(this._bytesAvailable)return this._bytesAvailable=!1,(t=this.tmpTool()).toNumber()*this.IntToDoubleMultiplier;this._u=this._u.mul(this.SeedU1).add(this.SeedU2),t=this._v.shiftRightUnsigned(17),this._v=this._v.xor(t),t=this._v.shiftLeft(31),this._v=this._v.xor(t),t=this._v.shiftRightUnsigned(8),this._v=this._v.xor(t);var i=this._w.and(4294967295),s=this._w.shiftRightUnsigned(32);return this._w=this.SeedU3.mul(i).add(s),t=this._u.shiftLeft(21),this._x=this._u.xor(t),t=this._x.shiftRightUnsigned(35),this._x=this._x.xor(t),t=this._x.shiftLeft(4),this._x=this._x.xor(t),this._bytesAvailable=!0,t=this._x.add(this._v).xor(this._w).shiftRightUnsigned(this.ULongToIntShift),Math.floor(t.toNumber())*this.IntToDoubleMultiplier},e.NextULong=function(){var t;this._u=this._u.mul(this.SeedU1).add(this.SeedU2),t=this._v.shiftRightUnsigned(17),this._v=this._v.xor(t),t=this._v.shiftLeft(31),this._v=this._v.xor(t),t=this._v.shiftRightUnsigned(8),this._v=this._v.xor(t);var i=this._w.and(4294967295),s=this._w.shiftRightUnsigned(32);return this._w=this.SeedU3.mul(i).add(s),t=this._u.shiftLeft(21),this._x=this._u.xor(t),t=this._x.shiftRightUnsigned(35),this._x=this._x.xor(t),t=this._x.shiftLeft(4),this._x=this._x.xor(t),this._bytesAvailable=!1,(t=this._x.add(this._v)).xor(this._w)},s}(e));s._RF.pop()}}}));

System.register("chunks:///_virtual/NumberExtension.ts",["cc","./Utility.ts"],(function(){var t,e;return{setters:[function(e){t=e.cclegacy},function(t){e=t.Utility}],execute:function(){t._RF.push({},"d9352J9wkFPMrJD+uzCn6Be","NumberExtension",void 0),Number.prototype.toLogicValue=function(){return e.ToLogicValue(this)},Number.prototype.toPerformValue=function(){return e.ToPerformValue(this)},t._RF.pop()}}}));

System.register("chunks:///_virtual/NumberString.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pool.ts"],(function(t){var i,e,n,r,o,l,u,s,a,g,h,c,p,f,y,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,u=t._decorator,s=t.CCString,a=t.SpriteFrame,g=t.Prefab,h=t.Sprite,c=t.Layout,p=t.Enum,f=t.UITransform,y=t.instantiate},function(t){b=t.PoolNode}],execute:function(){var d,T,v,S,_,m,E,R,z,C,H,N,k,D,F;l._RF.push({},"a4025fhXTNMTo2HqMaznHbs","NumberString",void 0);var I=u.ccclass,P=u.property,w=t("Align",function(t){return t[t.CENTER=0]="CENTER",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t}({}));t("NumberString",(d=I("NumberString"),T=P([s]),v=P([a]),S=P(g),_=P([h]),m=P(c),E=P({type:p(w)}),d(((F=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return i=t.call.apply(t,[this].concat(o))||this,n(i,"numberSprite",C,r(i)),n(i,"digitPrefab",H,r(i)),n(i,"digits",N,r(i)),n(i,"layout",k,r(i)),n(i,"alignType",D,r(i)),i._uiTransform=null,i._stringVsSprite=null,i._valueString="",i._value=0,i}e(i,t);var l=i.prototype;return l.AdjustDigits=function(){for(var t=0;t<this.digits.length;t++)t<this.string.length?this.digits[t].node.active=!0:this.digits[t].node.active=!1},l.onLoad=function(){this._stringVsSprite={},this._uiTransform=this.getComponent(f);for(var t=0;t<i._keyString.length;t++)this._stringVsSprite[i._keyString[t]]=this.numberSprite[t];this.node.active=!1},o(i,[{key:"numberString",get:function(){return i._keyString}},{key:"isAvailable",get:function(){return!this.node.active},set:function(t){this.node.active=!t}},{key:"string",get:function(){return this._valueString},set:function(t){this._valueString=t;for(var i=0,e=0;e<t.length;e++){var n=null;if(e>=this.digits.length){var r=y(this.digitPrefab);n=r.getComponent(h),this.node.addChild(r),this.digits[e]=n}else n=this.digits[e];var o=this.alignType==w.RIGHT?t.length-1-e:e,l=this._stringVsSprite[t[o]];n.spriteFrame=l,this.alignType==w.CENTER&&(i+=n.node.getComponent(f).width,this._uiTransform.setContentSize(i,this._uiTransform.height))}for(;e<this.digits.length;e++)this.digits[e].spriteFrame=null;0!=t.length?(this._valueString.startsWith("+")&&(t=this._valueString.substring(1)),this._value=+t):this._value=0}},{key:"value",get:function(){return this._value},set:function(t){this.string=t.toString()}},{key:"align",get:function(){return this.alignType},set:function(t){t<w.CENTER||t>w.RIGHT||(t==w.RIGHT?this.layout.horizontalDirection=c.HorizontalDirection.RIGHT_TO_LEFT:this.layout.horizontalDirection=c.HorizontalDirection.LEFT_TO_RIGHT,this.alignType=t)}}]),i}(b))._keyString=["0","1","2","3","4","5","6","7","8","9","+","."],i((z=F).prototype,"numberString",[T],Object.getOwnPropertyDescriptor(z.prototype,"numberString"),z.prototype),C=i(z.prototype,"numberSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null,null,null,null,null,null,null,null,null,null,null,null]}}),H=i(z.prototype,"digitPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(z.prototype,"digits",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=i(z.prototype,"layout",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(z.prototype,"alignType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.CENTER}}),R=z))||R));l._RF.pop()}}}));

System.register("chunks:///_virtual/NumChangeLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,l,n,u,r,s,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,l=e.assertThisInitialized,n=e.createClass},function(e){u=e.cclegacy,r=e._decorator,s=e.CCInteger,h=e.Component}],execute:function(){var c,o,_,d,v,f,m,g;u._RF.push({},"2b7aa1l36dDMqXuh990+9u7","NumChangeLevel",void 0);var p=r.ccclass,V=r.property;e("NumChangeLevel",(c=p("NumChangeLevel"),o=V([s]),c((v=t((d=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),u=0;u<i;u++)n[u]=arguments[u];return t=e.call.apply(e,[this].concat(n))||this,a(t,"levelUpThresholdSingle",v,l(t)),a(t,"levels",f,l(t)),a(t,"defaultAccelerate",m,l(t)),a(t,"defaultValue",g,l(t)),t._nextAddValue=0,t._addValueAccelerate=0,t._curLevel=0,t._changeTimes=0,t._max=0,t._min=0,t._value=0,t}i(t,e);var u=t.prototype;return u.ResetValue=function(){this._value=this.defaultValue},u.ResetLevel=function(){this._curLevel=0,this._changeTimes=0,this._addValueAccelerate=this.defaultAccelerate,this._nextAddValue=this.levels[0]},u.SetValue=function(e){e>=this._max?this._value=this._max:e<=this._min?this._value=this._min:this._value=e},u.SetBound=function(e,t){this._max=t,this._min=e},u.TryIncrease=function(){if(this.IsMax)return!1;var e=this._value;return this._value=Math.min(this._value+this._nextAddValue,this._max),this.AddValue(),this._value!=e},u.TryDecrease=function(){if(this.IsMin)return!1;var e=this._value;return this._value=Math.max(this._value-this._nextAddValue,this._min),this.AddValue(),this._value!=e},u.AddValue=function(){this._changeTimes++,this._changeTimes>=this.levelUpThresholdSingle&&(this._curLevel=Math.min(this._curLevel+1,this.levels.length-1)),this._changeTimes<=this.levelUpThresholdSingle?this._nextAddValue=this.levels[this._curLevel]:(this._addValueAccelerate++,this._nextAddValue+=this._addValueAccelerate)},n(t,[{key:"Max",get:function(){return this._max}},{key:"Min",get:function(){return this._min}},{key:"IsMax",get:function(){return this._value>=this._max}},{key:"IsMin",get:function(){return this._value<=this._min}},{key:"Value",get:function(){return this._value}},{key:"DefaultValue",set:function(e){this.defaultValue=e}}]),t}(h)).prototype,"levelUpThresholdSingle",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),f=t(d.prototype,"levels",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[1,5]}}),m=t(d.prototype,"defaultAccelerate",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),g=t(d.prototype,"defaultValue",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=d))||_));u._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SortedMap.ts"],(function(e){var t,r,s,n,i;return{setters:[function(e){t=e.regeneratorRuntime,r=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){n=e.cclegacy},function(e){i=e.SortedMap}],execute:function(){n._RF.push({},"da4acDiNyJOn4VHa5HUa7bu","ObjectPool",void 0);e("ObjectPool",function(){function e(){this.Objects=[],this._pool=[],this._spawnMap=new i,this.SerialNumber=0}var n=e.prototype;return n.Get=function(e){void 0===e&&(e=0),0===this._pool.length&&this.AddNewObject();var t=this._pool.length-1,r=this._pool[t],s=this.Objects[r];return this._pool.splice(t,1),0===e?(this.SerialNumber++,s.SerialNumber=this.SerialNumber):s.SerialNumber=e,this._spawnMap.set(s.SerialNumber,r),s},n.GetSpawnedObject=function(e){var t=this._spawnMap.get(e);return void 0!==t?this.Objects[t]:null},n.GetSpawnedObjects=function(){return t().mark((function e(){var s,n,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=r(this._spawnMap.values());case 1:if((n=s()).done){e.next=7;break}return i=n.value,e.next=5,this.Objects[i];case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})).call(this)},n.Return=function(e){var t=e,r=this._spawnMap.get(t.SerialNumber);this._pool.push(r),this._spawnMap.delete(t.SerialNumber),t.SerialNumber=0},n.Clear=function(){this.Objects=[],this._pool=[],this._spawnMap.clear()},n.AddNewObject=function(){var e=this.Objects.length,t=this.NewObecject();return this._pool.push(e),this.Objects.push(t),t},s(e,[{key:"Count",get:function(){return this.Objects.length}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/OpacityControll.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,c,i,r,a;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,i=t.UIOpacity,r=t.math,a=t.Component}],execute:function(){var e;n._RF.push({},"e2ae2XbCxJHjLLJtBlajf+u","OpacityControll",void 0);var l=c.ccclass,p=c.requireComponent;t("OpacityControll",l("OpacityControll")(e=p(i)(e=function(t){function n(){for(var o,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(o=t.call.apply(t,[this].concat(c))||this)._uiOpacity=null,o}o(n,t);var c=n.prototype;return c.setOpacity=function(t,o){var n=+o;n=r.clamp(n,0,255),this._uiOpacity.opacity=n},c.onLoad=function(){this._uiOpacity=this.getComponent(i)},n}(a))||e)||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/OptionSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSUIManager.ts"],(function(t){var e,i,n,r,o,s,a,f,c,u,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,a=t._decorator,f=t.Node,c=t.Vec3,u=t.tween,l=t.Component},function(t){h=t.FSUIManager}],execute:function(){var p,b,w,d,O,g,y,_,v,S,D,E,m,z,I,P,T,U,F,M,W,k;s._RF.push({},"f8411Q0YTZCJYWMyEJKTOk0","OptionSetting",void 0);var C=a.ccclass,L=a.property;t("OptionSetting",(p=C("OptionSetting"),b=L(f),w=L(c),d=L(c),O=L(f),g=L(f),y=L(f),_=L([f]),v=L(f),S=L(f),p((m=e((E=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"optionUI",m,r(e)),n(e,"showPosition",z,r(e)),n(e,"hidePosition",I,r(e)),n(e,"renderShadow",P,r(e)),n(e,"renderDistortion",T,r(e)),n(e,"renderWithoutDistortion",U,r(e)),n(e,"bubbles",F,r(e)),n(e,"effectOn",M,r(e)),n(e,"effectOff",W,r(e)),n(e,"tweenDuration",k,r(e)),e._isShow=!1,e._showTween=null,e._hideTween=null,e._isEffectsOn=!0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){h.Instance.OptionSetting=this},s.start=function(){this._showTween=u(this.optionUI).to(this.tweenDuration,{position:this.showPosition}),this._hideTween=u(this.optionUI).to(this.tweenDuration,{position:this.hidePosition})},s.SwitchEffects=function(){var t=this;this._isShow&&(this._isEffectsOn=!this._isEffectsOn,this.renderShadow.active=this._isEffectsOn,this.renderDistortion.active=this._isEffectsOn,this.renderWithoutDistortion.active=!this._isEffectsOn,this._isEffectsOn?(this.effectOn.active=!1,this.effectOff.active=!0):(this.effectOn.active=!0,this.effectOff.active=!1),this.bubbles.forEach((function(e){e.active=t._isEffectsOn})))},o(e,[{key:"isEffectsOn",get:function(){return this._isEffectsOn}}]),e}(l)).prototype,"optionUI",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(E.prototype,"showPosition",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(440,0,0)}}),I=e(E.prototype,"hidePosition",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(500,0,0)}}),P=e(E.prototype,"renderShadow",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(E.prototype,"renderDistortion",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(E.prototype,"renderWithoutDistortion",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(E.prototype,"bubbles",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=e(E.prototype,"effectOn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(E.prototype,"effectOff",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"tweenDuration",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),D=E))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/Packet.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3d553wKeZpNWpjAaX5SshNA","Packet",void 0);var r=e("Packet",function(){function e(){this.Number=void 0,this.Category=void 0,this.Command=void 0,this.Payload=void 0}return e.ReceiveOrderPacket=function(t,r){var a=t.length-6,n=new e;n.Number=t[a]+(t[a+1]<<8),a+=2;var s=e.NextNumber(r);if(n.Number===s){var u=[t[a++],t[a++]];return n.Category=u[0],n.Command=u[1],t.length>6?(t.set(this._resetOrderPacketArray,t.length-6),n.Payload=t):255===t[a]?n.Payload=new Uint8Array(0):n.Payload=null,n}return null},e.ReceiveNoOrderPacket=function(t){var r=t.length-4,a=new e,n=[t[r++],t[r++]];return a.Category=n[0],a.Command=n[1],t.length>4?(t.set(this._resetOrderNoPacketArray,t.length-4),a.Payload=t):255===t[r]?a.Payload=new Uint8Array(0):a.Payload=null,a},e.NextNumber=function(e){return e+1&65535},e.Reset=function(e){e.Payload=null},e}());r.StartNumber=0,r.KeepPacketCount=100,r._resetOrderPacketArray=new Uint8Array(6),r._resetOrderNoPacketArray=new Uint8Array(4);e("Queue",function(){function e(){this._packets=[],this._lastSendNumber=r.StartNumber}var t=e.prototype;return t.Remove=function(e){for(var t=r.NextNumber(e);this._packets.length>0&&this._packets[0].Number!==t;)this._packets.shift()},t.Resend=function(e,t){for(var a=r.NextNumber(e);this._packets.length>0&&this._packets[0].Number!==a;)this._packets.shift();if(this._packets.length>0){if(a!==this._packets[0].Number)throw new Error("Next Number "+a+" is not equal Last Packet Number "+this._packets[0].Number)}else if(e!==this._lastSendNumber)throw new Error("Resend Number "+e+" is not equal Last Send Number "+this._lastSendNumber);t(a,this._packets.slice())},t.Send=function(e,t,a,n){var s=new r;s.Number=r.NextNumber(this._lastSendNumber),this._lastSendNumber=s.Number,s.Category=e,s.Command=t,s.Payload=a,this._packets.push(s),n(s)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PathAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PathAttribute2.ts","./PathAttributeHelper.ts"],(function(t){var i,a,n,o;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy},function(t){n=t.PathAttribute},function(t){o=t.PathAttributeHelper}],execute:function(){var e;a._RF.push({},"d2ce7UFY8RBPIbBZEOHuM0H","PathAttribute",void 0);var r=t("PathAttributeData",function(){function t(){this.Data=new Map,this.Settings={x:0,y:0}}var a=t.prototype;return a.LoadFromJsonAsset=function(t){this.ParseSettings(t.DataScreenSize),this.ParseDataFrom(t.PathDataDic)},a.LoadFromMemoryPack=function(t){this.Settings.x=t.Settings.X,this.Settings.y=t.Settings.Y,this.Data.clear();for(var a,o=i(t.Data.entries());!(a=o()).done;){var e=a.value,r=e[0],s=e[1],c=new n;c.MinStartPosition={X:s.MinStartPosition.X,Y:s.MinStartPosition.Y},c.MaxStartPosition={X:s.MaxStartPosition.X,Y:s.MaxStartPosition.Y},c.StoredPointXs=[].concat(s.StoredPointXs),c.StoredPointYs=[].concat(s.StoredPointYs),c.SinTheta=[].concat(s.SinTheta),c.CosTheta=[].concat(s.CosTheta),this.Data.set(r,c)}},a.ParseSettings=function(t){this.Settings.x=t.X,this.Settings.y=t.Y},a.ParseDataFrom=function(t){for(var i in this.Data.clear(),t){var a=t[i],e=new n;e.MinStartPosition={X:+a.MinStartPosition.X,Y:+a.MinStartPosition.Y},e.MaxStartPosition={X:+a.MaxStartPosition.X,Y:+a.MaxStartPosition.Y},e.StoredPointXs=a.StoredPointXs,e.StoredPointYs=a.StoredPointYs,o.PreCalculate(e),this.Data.set(+i,e)}},t}());e=r,r.Instance=new e,a._RF.pop()}}}));

System.register("chunks:///_virtual/PathAttribute2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./Vector2.ts"],(function(r){var t,e,i,n;return{setters:[function(r){t=r.cclegacy},function(r){e=r.MemoryPackWriter},function(r){i=r.MemoryPackReader},function(r){n=r.Vector2}],execute:function(){t._RF.push({},"fd2a4rApMJNA4IYC7xd6Gsb","PathAttribute",void 0);r("PathAttribute",function(){function r(){this.ID=void 0,this.MinStartPosition=void 0,this.MaxStartPosition=void 0,this.StoredPointXs=void 0,this.StoredPointYs=void 0,this.CosTheta=void 0,this.SinTheta=void 0,this.ID=0,this.MinStartPosition=null,this.MaxStartPosition=null,this.StoredPointXs=null,this.StoredPointYs=null,this.CosTheta=null,this.SinTheta=null}return r.serialize=function(r){var t=e.getSharedInstance();return this.serializeCore(t,r),t.toArray()},r.serializeCore=function(r,t){null!=t?(r.writeObjectHeader(7),r.writeInt32(t.ID),n.serializeCore(r,t.MinStartPosition),n.serializeCore(r,t.MaxStartPosition),r.writeArray(t.StoredPointXs,(function(r,t){return r.writeInt32(t)})),r.writeArray(t.StoredPointYs,(function(r,t){return r.writeInt32(t)})),r.writeArray(t.CosTheta,(function(r,t){return r.writeFloat64(t)})),r.writeArray(t.SinTheta,(function(r,t){return r.writeFloat64(t)}))):r.writeNullObjectHeader()},r.serializeArray=function(r){var t=e.getSharedInstance();return this.serializeArrayCore(t,r),t.toArray()},r.serializeArrayCore=function(t,e){t.writeArray(e,(function(t,e){return r.serializeCore(t,e)}))},r.deserialize=function(r){return this.deserializeCore(new i(r))},r.deserializeCore=function(t){var e=t.tryReadObjectHeader(),i=e[0],a=e[1];if(!i)return null;var o=new r;if(7==a)o.ID=t.readInt32(),o.MinStartPosition=n.deserializeCore(t),o.MaxStartPosition=n.deserializeCore(t),o.StoredPointXs=t.readArray((function(r){return r.readInt32()})),o.StoredPointYs=t.readArray((function(r){return r.readInt32()})),o.CosTheta=t.readArray((function(r){return r.readFloat64()})),o.SinTheta=t.readArray((function(r){return r.readFloat64()}));else{if(a>7)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.ID=t.readInt32(),1==a)return o;if(o.MinStartPosition=n.deserializeCore(t),2==a)return o;if(o.MaxStartPosition=n.deserializeCore(t),3==a)return o;if(o.StoredPointXs=t.readArray((function(r){return r.readInt32()})),4==a)return o;if(o.StoredPointYs=t.readArray((function(r){return r.readInt32()})),5==a)return o;if(o.CosTheta=t.readArray((function(r){return r.readFloat64()})),6==a)return o;if(o.SinTheta=t.readArray((function(r){return r.readFloat64()})),7==a)return o}return o},r.deserializeArray=function(r){return this.deserializeArrayCore(new i(r))},r.deserializeArrayCore=function(t){return t.readArray((function(t){return r.deserializeCore(t)}))},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PathAttributeData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./Vector2.ts","./PathAttribute2.ts"],(function(e){var r,t,i,n,a;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.Vector2},function(e){a=e.PathAttribute}],execute:function(){r._RF.push({},"dfadc4Y1n9FQrv+Lo6NWb+c","PathAttributeData",void 0);e("PathAttributeData",function(){function e(){this.Settings=void 0,this.Data=void 0,this.Settings=null,this.Data=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),n.serializeCore(e,r.Settings),e.writeMap(r.Data,(function(e,r){return e.writeInt32(r)}),(function(e,r){return a.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],u=t[1];if(!i)return null;var o=new e;if(2==u)o.Settings=n.deserializeCore(r),o.Data=r.readMap((function(e){return e.readInt32()}),(function(e){return a.deserializeCore(e)}));else{if(u>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==u)return o;if(o.Settings=n.deserializeCore(r),1==u)return o;if(o.Data=r.readMap((function(e){return e.readInt32()}),(function(e){return a.deserializeCore(e)})),2==u)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/PathAttributeHelper.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"b6b5616I1lH0J+Vek6Q/824","PathAttributeHelper",void 0);t("PathAttributeHelper",function(){function t(){}return t.GetPositionInterpolation_v2=function(t,e,n){var o=1e3*e,i=Math.floor(o),r=o-i,s=1-r;t.StoredPointXs.length<=i?i=t.StoredPointXs.length-1:i<0&&(i=0);var a=i+1,u=t.StoredPointXs[i],h=t.StoredPointYs[i];if(a<t.StoredPointXs.length){var S=t.StoredPointXs[a],P=t.StoredPointYs[a];n.x=u*s+S*r,n.y=h*s+P*r}else n.x=u,n.y=h;return i},t.GetStartOffsetX=function(t,e){return t.MinStartPosition.X+e*(t.MaxStartPosition.X-t.MinStartPosition.X)},t.GetStartOffsetY=function(t,e){return t.MinStartPosition.Y+e*(t.MaxStartPosition.Y-t.MinStartPosition.Y)},t.PreCalculate=function(t){for(var e=0;e<t.StoredPointXs.length-1;e++){var n=t.StoredPointXs[e+1]-t.StoredPointXs[e],o=t.StoredPointYs[e+1]-t.StoredPointYs[e],i=Math.sqrt(n*n+o*o);t.CosTheta.push(o/i),t.SinTheta.push(-n/i)}t.CosTheta.push(t.CosTheta[t.CosTheta.length-1]),t.SinTheta.push(t.SinTheta[t.SinTheta.length-1])},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PathSpeed.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(r){var e,t,n;return{setters:[function(r){e=r.cclegacy},function(r){t=r.MemoryPackWriter},function(r){n=r.MemoryPackReader}],execute:function(){e._RF.push({},"a82baJOQYhA46QFemKRiP97","PathSpeed",void 0);r("PathSpeed",function(){function r(){this.Progress=void 0,this.Progress=null}return r.serialize=function(r){var e=t.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(1),r.writeArray(e.Progress,(function(r,e){return r.writeInt32(e)}))):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=t.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,t){e.writeArray(t,(function(e,t){return r.serializeCore(e,t)}))},r.deserialize=function(r){return this.deserializeCore(new n(r))},r.deserializeCore=function(e){var t=e.tryReadObjectHeader(),n=t[0],i=t[1];if(!n)return null;var a=new r;if(1==i)a.Progress=e.readArray((function(r){return r.readInt32()}));else{if(i>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==i)return a;if(a.Progress=e.readArray((function(r){return r.readInt32()})),1==i)return a}return a},r.deserializeArray=function(r){return this.deserializeArrayCore(new n(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PathSpeed2.ts",["cc","./PathSpeed.ts","./PathSpeedHelper.ts"],(function(t){var e,a,n;return{setters:[function(t){e=t.cclegacy},function(t){a=t.PathSpeed},function(t){n=t.PathSpeedHelper}],execute:function(){var o;e._RF.push({},"e0c91eN061MkpcT+jUX2m0J","PathSpeed",void 0);var r=t("PathSpeedData",function(){function t(){this._data=void 0}var e=t.prototype;return e.LoadFromJsonAsset=function(t){var e=t.PathDataDic[0],n=new a;n.Progress=e.StoredPointXs,this._data=n},e.LoadFromMemoryPack=function(t){var e=new a;e.Progress=t.Data.get(0).Progress,this._data=e},e.GetProgressInterpolation=function(t){return n.GetPositionInterpolation(this._data,t)},t}());o=r,r.Instance=new o,e._RF.pop()}}}));

System.register("chunks:///_virtual/PathSpeedData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./PathSpeed.ts"],(function(e){var r,t,n,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){i=e.PathSpeed}],execute:function(){r._RF.push({},"07d44t5MKhFNYUN+8lsxVUh","PathSpeedData",void 0);e("PathSpeedData",function(){function e(){this.Data=void 0,this.Data=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeMap(r.Data,(function(e,r){return e.writeInt32(r)}),(function(e,r){return i.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),n=t[0],a=t[1];if(!n)return null;var u=new e;if(1==a)u.Data=r.readMap((function(e){return e.readInt32()}),(function(e){return i.deserializeCore(e)}));else{if(a>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return u;if(u.Data=r.readMap((function(e){return e.readInt32()}),(function(e){return i.deserializeCore(e)})),1==a)return u}return u},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/PathSpeedHelper.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"88129TiLuBGyIRSQWQ0GbEF","PathSpeedHelper",void 0);e("PathSpeedHelper",function(){function e(){}return e.GetPositionInterpolation=function(e,r){var t=1e3*r,n=Math.floor(t),o=t-n,s=1-o;return e.Progress.length<=n?n=e.Progress.length-1:n<0&&(n=0),n+1<e.Progress.length?e.Progress[n]*s+e.Progress[n+1]*o:e.Progress[n]},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/PerformCurve.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts"],(function(e){var r,n,t,o,i,u,c,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,u=e._decorator,c=e.CurveRange},function(e){a=e.SingletonComponent}],execute:function(){var l,s,p,f,v,C,g;i._RF.push({},"f496bQIw/RMCo3JwLmTlWd+","PerformCurve",void 0);var d=u.ccclass,m=u.property;e("PerformCurveSingleton",(l=d("PerformCurveSingleton"),s=m(c),p=m(c),l((C=r((v=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return r=e.call.apply(e,[this].concat(i))||this,t(r,"deadCurve",C,o(r)),t(r,"coinBounceCurve",g,o(r)),r}return n(r,e),r}(a)).prototype,"deadCurve",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),g=r(v.prototype,"coinBounceCurve",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),f=v))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/PIayerInfoExtension.ts",["cc","./PlayerInfo.ts"],(function(){var e,n;return{setters:[function(n){e=n.cclegacy},function(e){n=e.PlayerInfo}],execute:function(){e._RF.push({},"84e48pzVSVFwIZsquhY5U09","PIayerInfoExtension",void 0),n.prototype.AddHoldingSpecialBulletInfo=function(e){this.HoldingSpecialBulletInfos.push(e)},n.prototype.RemoveHoldingSpecialBulletInfo=function(){this.TryPeekHoldingSpecialBulletInfo().Success&&this.HoldingSpecialBulletInfos.splice(0,1)},n.prototype.TryPeekHoldingSpecialBulletInfo=function(){return this.HoldingSpecialBulletInfos.length>0?{Success:!0,Info:this.HoldingSpecialBulletInfos[0]}:{Success:!1,Info:null}},e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./PlayerScore.ts","./BetControl.ts","./BaseFort.ts","./UIPlayerState.ts","./MessageManager.ts","./MessageCmd.ts","./KindHelper.ts","./PlayerFortManager.ts","./ActionPlayer.ts"],(function(t){var e,n,i,o,l,r,s,a,u,c,h,f,y,B,p,d,S,g,P,b,F,I,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,l=t.createClass},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,u=t.Label,c=t.Vec3,h=t.Quat,f=t.Component},function(t){y=t.BulletKind},function(t){B=t.PlayerScore},function(t){p=t.BetControl},function(t){d=t.BaseFort},function(t){S=t.UIPlayerState,g=t.PlayerStateType},function(t){P=t.MessageManager},function(t){b=t.MessageCmd},function(t){F=t.KindHelper},function(t){I=t.PlayerFortManager},function(t){_=t.ActionPlayer}],execute:function(){var w,m,D,v,A,N,K,U,E,C,k,L,M,z,R,T,O,W,x,H,V,Z;r._RF.push({},"eedb077xLZJ9aIzODCZafmL","PlayerFort",void 0);var G=s.ccclass,Y=s.property;t("PlayerFort",(w=G("PlayerFort"),m=Y([d]),D=Y(a),v=Y(a),A=Y(p),N=Y(B),K=Y(u),U=Y(S),E=Y(_),w(((Z=function(t){function e(){for(var n,l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,i(n,"bulletForts",L,o(n)),i(n,"gotFishPos",M,o(n)),i(n,"gotScorePos",z,o(n)),i(n,"bet",R,o(n)),i(n,"playerScore",T,o(n)),i(n,"playerName",O,o(n)),i(n,"uiPlayerState",W,o(n)),i(n,"fortActionPlayer",x,o(n)),i(n,"fortShowEventName",H,o(n)),i(n,"fortChangeEventName",V,o(n)),n._fortID=-1,n._playerInfo=null,n._isMainFort=!1,n._isShootable=!0,n._initPosition=c.ZERO.clone(),n._initRotation=h.IDENTITY.clone(),n._usedBulletKind=e.DefaultBulletKind,n._lastBulletKind=e.DefaultBulletKind,n}n(e,t);var r=e.prototype;return r.initial=function(t){var e=this;this.bulletForts.forEach((function(t){return t.initial(e)}))},r.release=function(t){var e=this;this.bulletForts.forEach((function(t){return t.release(e)}))},r.reset=function(t){this.node.setRTS(this._initRotation,this._initPosition)},r.setPlayerInfo=function(t,n,i){this._fortID=t,this._playerInfo=n,this._isMainFort=i,this._isShootable=!0,this.IsActive?(this.playerName.string=n.PlayerName,this.playerName.node.active=!0,this.playerScore.SetScore(n.Coin.toPerformValue()),this.playerScore.node.active=!0,this.bet.SetPlayer(!0,i,n.Bet.toPerformValue()),this.setPlayerStateUI(g.None),this.switchBulletFort(function(t){if(t.CurrentSpecialBulletInfo)return t.CurrentSpecialBulletInfo.BulletKind;var n=t.TryPeekHoldingSpecialBulletInfo();if(n.Success)return n.Info.BulletKind;return e.DefaultBulletKind}(n)),this.fortActionPlayer.PlayActionsByEvent(this,this.fortShowEventName)):(this.playerName.string="",this.playerScore.node.active=!1,this.playerScore.SetScore(0),this.playerName.node.active=!1,this.bet.SetPlayer(!1,i,0),this.setPlayerStateUI(g.Waiting),this.switchBulletFort(e.DefaultBulletKind),this.fortActionPlayer.ResetActionsByEvent(this,this.fortShowEventName))},r.getBulletForts=function(){return this.bulletForts},r.getBulletFort=function(t){return this.bulletForts[this.getFortIndex(t)]},r.setBulletFort=function(t){this.UsedBulletKind!=t&&(this.switchBulletFort(t),this.fortActionPlayer.ReplayActionsByEvent(this,this.fortChangeEventName)),this._isShootable=!0},r.setBet=function(t){this.bet.SetBetValue(t)},r.changeBetState=function(t){this._isShootable=!t,this.bet.ChangeBetState(t)},r.onCoinChange=function(t){this.playerScore.OnScoreChange(t)},r.playBumpCoin=function(t){this.playerScore.PlayBumpTween(t)},r.setPlayerStateUI=function(t){this.uiPlayerState.SetPlayerStateUI(t)},r.onLoad=function(){this._initPosition=this.node.position,this._initRotation=this.node.rotation,this.onSpawnBulletAction=this.onSpawnBulletAction.bind(this),this.onDespawnBulletAction=this.onDespawnBulletAction.bind(this)},r.onEnable=function(){P.Instance.on(b.ON_SPAWN_BULLET,this.onSpawnBulletAction),P.Instance.on(b.ON_DESPAWN_BULLET,this.onDespawnBulletAction)},r.onDisable=function(){P.Instance.off(b.ON_DESPAWN_BULLET,this.onDespawnBulletAction),P.Instance.off(b.ON_SPAWN_BULLET,this.onSpawnBulletAction)},r.onDestroy=function(){this.onDespawnBulletAction=null,this.onSpawnBulletAction=null,this._initRotation=h.IDENTITY.clone(),this._initPosition=c.ZERO.clone()},r.onSpawnBulletAction=function(t,e){t.FortID==this.FortID&&this.spawnBullet(t,e)},r.onDespawnBulletAction=function(t,e){t.FortID==this.FortID&&this.despawnBullet(t,e)},r.switchBulletFort=function(t){this.UsedBulletKind!=y.None&&(this.UsedBulletFort.reset(),this.UsedBulletFort.node.active=!1),F.IsSpecialBullet(t)?this._usedBulletKind=t:this._usedBulletKind=this._lastBulletKind=t,this.UsedBulletKind!=y.None&&(this.UsedBulletFort.node.active=!0,this.UsedBulletFort.set())},r.getFortIndex=function(t){return this.bulletForts.findIndex((function(e){return e.BulletKind===t}))},r.spawnBullet=function(t,e){var n=t.BulletKind;I.instance().checkFortShootable(t.FortID,n)&&(this.IsMainFort||this.setBulletFort(n),this.getBulletFort(n).spawnBullet(t,e))},r.despawnBullet=function(t,e){var n=t.BulletKind;this.getBulletFort(n).despawnBullet(t,e)},l(e,[{key:"FortID",get:function(){return this._fortID}},{key:"PlayerInfo",get:function(){return this._playerInfo}},{key:"IsMainFort",get:function(){return this._isMainFort}},{key:"IsActive",get:function(){return this.PlayerInfo&&0!=this.PlayerInfo.PlayerID}},{key:"UsedBulletKind",get:function(){return this._usedBulletKind}},{key:"UsedBulletFort",get:function(){return this.getBulletFort(this.UsedBulletKind)}},{key:"UsedBulletReady",get:function(){return this.UsedBulletFort&&this.UsedBulletFort.IsReady&&this._isShootable}},{key:"UsedBulletSpecial",get:function(){return F.IsSpecialBullet(this.UsedBulletKind)}},{key:"GotFishPos",get:function(){return this.gotFishPos.getWorldPosition()}},{key:"GotScorePos",get:function(){return this.gotScorePos.getWorldPosition()}},{key:"Coin",get:function(){return this.playerScore?this.playerScore.Score:0}},{key:"LastBulletKind",get:function(){return this._lastBulletKind}}]),e}(f)).DefaultBulletKind=y.Normal,L=e((k=Z).prototype,"bulletForts",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=e(k.prototype,"gotFishPos",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(k.prototype,"gotScorePos",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"bet",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(k.prototype,"playerScore",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(k.prototype,"playerName",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(k.prototype,"uiPlayerState",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(k.prototype,"fortActionPlayer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(k.prototype,"fortShowEventName",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"show"}}),V=e(k.prototype,"fortChangeEventName",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"FortChange"}}),C=k))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerFortManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientAgent.ts","./PlayerFort.ts","./SingletonComponent.ts","./BetLevel.ts","./ServiceManager.ts","./BulletKind.ts","./MessageManager.ts","./MessageCmd.ts","./WeaponShootHelper.ts","./ShootManager.ts","./AutoShootHelper.ts"],(function(e){var t,n,r,i,o,a,s,l,c,u,h,f,y,g,B,F,P,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator},function(e){l=e.ClientAgent},function(e){c=e.PlayerFort},function(e){u=e.SingletonComponent},function(e){h=e.BetLevel},function(e){f=e.ServiceManager},function(e){y=e.BulletKind},function(e){g=e.MessageManager},function(e){B=e.MessageCmd},function(e){F=e.WeaponShootHelper},function(e){P=e.ShootManager},function(e){M=e.AutoShootHelper}],execute:function(){var p,v,I,_,d;a._RF.push({},"a5938Uw+YpFj7571zut5Dd1","PlayerFortManager",void 0);var b=s.ccclass,L=s.property;e("PlayerFortManager",(p=b("PlayerFortManager"),v=L([c]),p((d=t((_=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"playerForts",d,i(t)),t._mainPlayerFortIndex=-1,t._betRregionInfo=null,t._betLevel=null,t}n(t,e);var a=t.prototype;return a.initial=function(e,t){this._mainPlayerFortIndex=e.findIndex((function(e){return f.instance().checkMainPlayer(e.PlayerID)})),this.playerForts.forEach((function(e,t){return e.initial(t)}));var n=e[this._mainPlayerFortIndex];this.initialBet(t,n.Bet,n.BetMax,n.BetMin)},a.release=function(){this.releaseBet(),this.playerForts.forEach((function(e,t){return e.release(t)})),this._mainPlayerFortIndex=-1},a.reset=function(){this.playerForts.forEach((function(e,t){return e.reset(t)})),this.resetBet()},a.setPlayerInfo=function(e,t){this.getPlayerFort(e).setPlayerInfo(e,t,this.checkMainFort(e))},a.getPlayerForts=function(){return this.playerForts},a.getPlayerFort=function(e){return this.playerForts[e]},a.getBulletForts=function(e){return this.getPlayerFort(e).getBulletForts()},a.getBulletFort=function(e,t){return this.getPlayerFort(e).getBulletFort(t)},a.switchFort=function(e,t){var n=this.getPlayerFort(e),r=n.UsedBulletKind,i=t;n.setBulletFort(i),g.Instance.emit(B.ON_SWITCH_FORT,e,r,i)},a.checkMainFort=function(e){return this.MainPlayerFortIndex==e},a.checkFortShootable=function(e,t){var n=!0;if(this.checkMainFort(e))switch(t){case y.Normal:n=this.getPlayerFort(e).UsedBulletKind==y.Normal;break;case y.Lock:var r=F.instance().HasWeaponInfo,i=P.instance().IsAutoShoot||M.instance().IsAutoShootMode;n=this.getPlayerFort(e).UsedBulletKind==y.Lock&&i&&!r}return n},a.setBet=function(e){this._betLevel.SetBetLevelByBet(e),this.changeBet()},a.increaseBet=function(){this._betLevel.IncreaseLevel()&&this.changeBet()},a.reduceBet=function(){this._betLevel.DecreaseLevel()&&this.changeBet()},a.ChangeBetState=function(e,t){this.getPlayerFort(e).changeBetState(t)},a.initialBet=function(e,t,n,r){this._betRregionInfo=e,this._betLevel=new h,this._betLevel.SetBetRegion(n,r,this._betRregionInfo.MaxBet,this._betRregionInfo.MinBet,this._betRregionInfo.BetType),this._betLevel.SetBetLevelByBet(t)},a.releaseBet=function(){this._betLevel=null,this._betRregionInfo=null},a.resetBet=function(){this.MainPlayerFort.setBet(this.MainPlayerBet)},a.changeBet=function(){var e=this._betLevel.GetNowBet();this.MainPlayerFort.setBet(e.toPerformValue()),l.Instance.ChangeBet(e)},o(t,[{key:"MainPlayerFortIndex",get:function(){return this._mainPlayerFortIndex}},{key:"MainPlayerFort",get:function(){return this.getPlayerFort(this.MainPlayerFortIndex)}},{key:"MainPlayerBet",get:function(){return this._betLevel.GetNowBet().toPerformValue()}},{key:"MainPlayerCoin",get:function(){return this.MainPlayerFort.Coin}},{key:"IsMaxBet",get:function(){return this._betLevel.IsRegionBetMax||this._betLevel.IsPlayerBetMax}},{key:"IsMinBet",get:function(){return this._betLevel.IsRegionBetMin||this._betLevel.IsPlayerBetMin}}]),t}(u)).prototype,"playerForts",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=_))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./HoldingSpecialBulletInfo.ts"],(function(e){var r,t,i,a;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){a=e.HoldingSpecialBulletInfo}],execute:function(){r._RF.push({},"0becdobgXBGkaTvdTW/yPtl","PlayerInfo",void 0);e("PlayerInfo",function(){function e(){this.PlayerID=void 0,this.PlayerName=void 0,this.Coin=void 0,this.Bet=void 0,this.BetMax=void 0,this.BetMin=void 0,this.SpecialBulletScore=void 0,this.HoldingSpecialBulletInfos=void 0,this.CurrentSpecialBulletInfo=void 0,this.PlayerID=0,this.PlayerName="",this.Coin=0,this.Bet=0,this.BetMax=0,this.BetMin=0,this.SpecialBulletScore=0,this.HoldingSpecialBulletInfos=null,this.CurrentSpecialBulletInfo=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(9),e.writeUint32(r.PlayerID),e.writeString(r.PlayerName),e.writeFloat64(r.Coin),e.writeFloat64(r.Bet),e.writeFloat64(r.BetMax),e.writeFloat64(r.BetMin),e.writeFloat64(r.SpecialBulletScore),e.writeArray(r.HoldingSpecialBulletInfos,(function(e,r){return a.serializeCore(e,r)})),a.serializeCore(e,r.CurrentSpecialBulletInfo)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var l=new e;if(9==n)l.PlayerID=r.readUint32(),l.PlayerName=r.readString(),l.Coin=r.readFloat64(),l.Bet=r.readFloat64(),l.BetMax=r.readFloat64(),l.BetMin=r.readFloat64(),l.SpecialBulletScore=r.readFloat64(),l.HoldingSpecialBulletInfos=r.readArray((function(e){return a.deserializeCore(e)})),l.CurrentSpecialBulletInfo=a.deserializeCore(r);else{if(n>9)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return l;if(l.PlayerID=r.readUint32(),1==n)return l;if(l.PlayerName=r.readString(),2==n)return l;if(l.Coin=r.readFloat64(),3==n)return l;if(l.Bet=r.readFloat64(),4==n)return l;if(l.BetMax=r.readFloat64(),5==n)return l;if(l.BetMin=r.readFloat64(),6==n)return l;if(l.SpecialBulletScore=r.readFloat64(),7==n)return l;if(l.HoldingSpecialBulletInfos=r.readArray((function(e){return a.deserializeCore(e)})),8==n)return l;if(l.CurrentSpecialBulletInfo=a.deserializeCore(r),9==n)return l}return l},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerLevelBetMax.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"1ffbbRn9fZJKrzM1YIU6K4c","PlayerLevelBetMax",void 0);e("PlayerLevelBetMax",function(){function e(){this.VIPLevel=void 0,this.BetMax=void 0,this.VIPLevel=0,this.BetMax=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeInt32(r.VIPLevel),e.writeFloat64(r.BetMax)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],a=t[1];if(!i)return null;var n=new e;if(2==a)n.VIPLevel=r.readInt32(),n.BetMax=r.readFloat64();else{if(a>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return n;if(n.VIPLevel=r.readInt32(),1==a)return n;if(n.BetMax=r.readFloat64(),2==a)return n}return n},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerScore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility2.ts"],(function(e){var t,r,i,o,c,n,s,a,u,l,h,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,c=e.createClass},function(e){n=e.cclegacy,s=e._decorator,a=e.math,u=e.Label,l=e.Vec3,h=e.tween,p=e.Component},function(e){b=e.Utility}],execute:function(){var S,_,f,m,d,y,L;n._RF.push({},"24b8aIN5ERGSob7wl4b7PFf","PlayerScore",void 0);var g=s.ccclass,w=s.property,v=a.bits.sign;e("PlayerScore",(S=g("PlayerScore"),_=w(u),S((d=t((m=function(e){function t(){for(var t,r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return t=e.call.apply(e,[this].concat(c))||this,i(t,"scoreLabel",d,o(t)),i(t,"bumpDuration",y,o(t)),i(t,"bumpScale",L,o(t)),t._scaleFactor=1,t._score=0,t._trueScore=0,t._bumpScale=new l(1,1,1),t._bumpTween=null,t._addScoreList=[],t}r(t,e);var n=t.prototype;return n.onLoad=function(){this._scaleFactor*=v(this.node.scale.x)},n.start=function(){this._bumpScale=new l(this.bumpScale*this._scaleFactor,this.bumpScale,this.bumpScale),this._bumpTween=h(this.node).to(this.bumpDuration,{scale:this._bumpScale}).to(this.bumpDuration,{scale:new l(l.ONE).multiply3f(this._scaleFactor,1,1)})},n.onDisable=function(){this._addScoreList.length=0},n.SetScore=function(e){this.scoreLabel.string=b.formatLocalizedNumber(e),this._score=e,this._trueScore=e},n.PlayBumpTween=function(e){var t=this._addScoreList.findIndex((function(t){return t===e})),r=-1!==t?this._addScoreList.splice(t,1)[0]:0;this._score+=r,this.scoreLabel.string=b.formatLocalizedNumber(this._score),this._bumpTween.stop(),this._bumpTween.start()},n.OnScoreChange=function(e){this._trueScore>=e?this.SubstractScore(this._trueScore-e):this.AddScore(e-this._trueScore),this._trueScore=e},n.AddScore=function(e){this._addScoreList.push(e)},n.SubstractScore=function(e){this._score-=e,this.scoreLabel.string=b.formatLocalizedNumber(this._score)},c(t,[{key:"Score",get:function(){return this._score}}]),t}(p)).prototype,"scoreLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"bumpDuration",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),L=t(m.prototype,"bumpScale",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),f=m))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action2.ts"],(function(t){var o,e,i,n,r,a,l,s,h,u,c,p;return{setters:[function(t){o=t.inheritsLoose,e=t.createClass,i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,s=t.instantiate,h=t.Prefab,u=t.Node,c=t.Component},function(t){p=t.ActionWithOne}],execute:function(){var b,f,_,d,P,v,w,m,y;a._RF.push({},"97cdd7W0+ZFJ4uLi/nL7wsV","Pool",void 0);var C=l.ccclass,g=l.property;t("PoolNode",function(t){function e(){for(var o,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(o=t.call.apply(t,[this].concat(i))||this).needChangeRoot=!1,o._pushToPoolCallback=void 0,o}o(e,t);var i=e.prototype;return i.setPushToPoolCallback=function(t){null!=t&&(this._pushToPoolCallback=t)},i.pushToPool=function(t){null!=this._pushToPoolCallback&&this._pushToPoolCallback(t)},e}(c)),t("PoolInstance",function(){function t(){this._prefab=null,this._root=null,this._pool=[],this._ctor=void 0,this._maxSize=100,this._objCount=0,this._spawned=[],this.onSpawn=new p,this.onDespawn=new p}var o=t.prototype;return o.InitPool=function(t,o,e,i,n){this._prefab=n,this._root=i,this._ctor=t,this._maxSize=e,this._objCount=0;for(var r=this._pool.length,a=Math.min(o,this._maxSize),l=r;l<a;l++){var s=this.createObj();s.isAvailable=!0,this._pool.push(s)}this.GetObject.bind(this)},o.GetObject=function(t){var o;if(this._pool.length>0)o=this._pool.pop();else if(!(o=this.createObj()))return null;return o.isAvailable=!1,this._spawned.push(o),this.onSpawn.invoke(o),o},o.PushToPool=function(t){t.isAvailable?console.warn("[PoolInstance:PushToPool] object("+this._ctor.name+":"+t.node.uuid+") is already available"):(this.onDespawn.invoke(t),t.isAvailable=!0,this._pool.push(t),t.needChangeRoot&&this._root.addChild(t.node))},o.DespawnAll=function(){for(var t=0,o=this._spawned.length-1;t<=o;++t){var e=this._spawned[t];this.PushToPool(e)}this._spawned.length=0},o.createObj=function(){this._objCount>=this._maxSize&&console.warn("[PoolInstance:createObj] object "+this._prefab.name+" count is already reach max size("+this._maxSize+")");var t=null;if(!this._prefab)throw new Error("[PoolInstance:createObj] prefab is not set");var o=s(this._prefab);return this._root.addChild(o),(t=o.getComponent(this._ctor))||(t=o.addComponent(this._ctor)),this._objCount++,t.setPushToPoolCallback(this.PushToPool.bind(this)),t},e(t,[{key:"poolCount",get:function(){return this._pool.length}}]),t}()),t("Pool",(b=C("Pool"),f=g(h),_=g(u),b((v=i((P=function(t){function e(){for(var o,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return o=t.call.apply(t,[this].concat(i))||this,n(o,"prefab",v,r(o)),n(o,"root",w,r(o)),n(o,"initSize",m,r(o)),n(o,"maxSize",y,r(o)),o}return o(e,t),e.prototype.NewPool=function(t,o){var e=new o;return e.InitPool(t,this.initSize,this.maxSize,this.root,this.prefab),e},e}(c)).prototype,"prefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(P.prototype,"root",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(P.prototype,"initSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=i(P.prototype,"maxSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),d=P))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/PooledObject.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./FishInfo.ts","./BulletInfo.ts"],(function(e){var r,i,n,t,o;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){t=e.FishInfo},function(e){o=e.BulletInfo}],execute:function(){r._RF.push({},"ab51cYsnvdIhZ8iKT+NrmOG","PooledObject",void 0);e("PooledObject",function(){function e(){}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){if(null!=r){if(r instanceof t)return e.writeUnionHeader(0),void t.serializeCore(e,r);if(r instanceof o)return e.writeUnionHeader(1),void o.serializeCore(e,r);throw new Error("Concrete type is not in MemoryPackUnion")}e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(e){var r=e.tryReadUnionHeader(),i=r[0],n=r[1];if(!i)return null;switch(n){case 0:return t.deserializeCore(e);case 1:return o.deserializeCore(e);default:throw new Error("Tag is not found in this MemoryPackUnion")}},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/PrefabData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishAttribute2.ts"],(function(e){var a,r,t,n,s,o,f,i;return{setters:[function(e){a=e.createForOfIteratorHelperLoose,r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){n=e.cclegacy,s=e._decorator,o=e.resources,f=e.assetManager},function(e){i=e.FishAttributeData}],execute:function(){var u;n._RF.push({},"3bd0aU0g05Bl6vv3cK+SQHu","PrefabData",void 0);s.ccclass,s.property;var c=e("FishPrefabData",function(){function e(){this._prefabMap=new Map}var n=e.prototype;return n.LoadPrefab=function(e){var a=this;return new Promise((function(r,t){if(a._prefabMap.has(e))r();else{var n=i.Instance.Data.get(e);if(n){var s=n.PrefabName;o.load("prefabs/fish/"+s,(function(n,s){n?t(n):(a._prefabMap.set(e,s),r())}))}else t(new Error("Fish type "+e+" is not exist."))}}))},n.LoadPrefabs=function(e,r){var t=this;return void 0===r&&(r=null),new Promise((function(n,s){if(0!==e.length){for(var f,u=[],c=new Map,p=a(e);!(f=p()).done;){var l=f.value;if(!t._prefabMap.has(l)){var b=i.Instance.Data.get(l);null!=b?(u.push("prefabs/fish/"+b.PrefabName),c.set(b.PrefabName,l)):console.error("fish<"+l+"> not found")}}0!==u.length?o.load(u,r,(function(e,r){if(e)s(e);else{for(var o,f=a(r);!(o=f()).done;){var i=o.value,u=c.get(i.name);null!=u&&t._prefabMap.set(u,i)}n()}})):n()}else n()}))},n.GetPrefab=function(e){var a=this;return new Promise(r(t().mark((function r(n,s){var o;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a._prefabMap.has(e)){r.next=10;break}return r.prev=1,r.next=4,a.LoadPrefab(e);case 4:r.next=10;break;case 6:return r.prev=6,r.t0=r.catch(1),s(r.t0),r.abrupt("return");case 10:o=a._prefabMap.get(e),n(o);case 12:case"end":return r.stop()}}),r,null,[[1,6]])}))))},n.UnloadPrefab=function(e){var a=this._prefabMap.get(e);f.releaseAsset(a),this._prefabMap.delete(e)},e}());u=c,c.Instance=new u,n._RF.pop()}}}));

System.register("chunks:///_virtual/PrimaryRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishKind.ts","./GotchaFishCatchRule.ts","./NormalFishCatchRule.ts","./SpecialFishCatchRule.ts","./Room.ts","./FishRnd.ts","./FishRndForGotchaServer.ts"],(function(t){var e,n,s,i,c,o,r,a,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.FishKind},function(t){i=t.GotchaFishCatchRule},function(t){c=t.NormalFishCatchRule},function(t){o=t.SpecialFishCatchRule},function(t){r=t.Room},function(t){a=t.FishRnd},function(t){h=t.FishRndForGotchaServer}],execute:function(){n._RF.push({},"f219bKr1BlMnq4LUSbyA5N/","PrimaryRoom",void 0);t("PrimaryRoom",function(t){function n(e,n,r,u,l,R,d){var f;void 0===u&&(u=0),void 0===l&&(l=4),void 0===R&&(R=200),void 0===d&&(d=1),(f=t.call(this,e,r,u,l,R,d)||this)._resetRand=!1,f._catchRules=new Map;var F=n?new h:new a,_=new c(F);_.SetRTP(985e3,1e6),f._catchRules.set(s.Normal,_);var m=new i(F);m.SetRTP(985e3,1e6),f._catchRules.set(s.Gotcha,m);var v=new o(F);return f._catchRules.set(s.Through,v),f._catchRules.set(s.Meteor,v),f._catchRules.set(s.Missile,v),f._catchRules.set(s.Bouncy,v),f._catchRules.set(s.LuckyBag,_),f}e(n,t);var r=n.prototype;return r.PreFrameUpdate=function(){this._resetRand&&(this.ResetRandomSeed(Math.round(1e3*Math.random())),this._resetRand=!1),this._currentInfo.RandomSeed=this._rand.Seed},r.PostFrameUpdate=function(){this._currentInfo.JoinRequests.length>0&&(this._resetRand=!0)},r.GenCatchInfo=function(t,e){this.IncrementCatchSerialnumber();var n=this._catchRules.get(e.FishOdds.FishKind).TryCatch(t,e),s=(n[0],n[1]);return null!=s?(s.HitCount=this.HitCount,this._currentInfo.CatchResults.push(s),s):null},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/Queue.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f7e303Spg1Dn7lnvEUy3gfF","Queue",void 0);e("Queue",function(){function e(){this.elements=[]}var t=e.prototype;return t.enqueue=function(e){this.elements.push(e)},t.dequeue=function(){return this.elements.shift()},t.isEmpty=function(){return 0===this.elements.length},t.size=function(){return this.elements.length},t.peek=function(){return this.isEmpty()?void 0:this.elements[0]},t.clear=function(){this.elements.length=0},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RankData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"35a9emP7OZLsrVR//ylmHP/","RankData",void 0);e("RankData",function(){function e(){this.FishRank=void 0,this.MinOdds=void 0,this.MinLength=void 0,this.MaxLength=void 0,this.MinWeight=void 0,this.MaxWeight=void 0,this.FishRank=0,this.MinOdds=0,this.MinLength=0,this.MaxLength=0,this.MinWeight=0,this.MaxWeight=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeUint8(r.FishRank),e.writeInt32(r.MinOdds),e.writeInt32(r.MinLength),e.writeInt32(r.MaxLength),e.writeInt32(r.MinWeight),e.writeInt32(r.MaxWeight)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(6==n)a.FishRank=r.readUint8(),a.MinOdds=r.readInt32(),a.MinLength=r.readInt32(),a.MaxLength=r.readInt32(),a.MinWeight=r.readInt32(),a.MaxWeight=r.readInt32();else{if(n>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.FishRank=r.readUint8(),1==n)return a;if(a.MinOdds=r.readInt32(),2==n)return a;if(a.MinLength=r.readInt32(),3==n)return a;if(a.MaxLength=r.readInt32(),4==n)return a;if(a.MinWeight=r.readInt32(),5==n)return a;if(a.MaxWeight=r.readInt32(),6==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Recorder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoomInfo.ts","./FrameInfo.ts","./RoomController.ts"],(function(e){var o,r,n,t,i,a,s,l,c,f,u,m;return{setters:[function(e){o=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized,i=e.extends},function(e){a=e.cclegacy,s=e._decorator,l=e.sys,c=e.Component},function(e){f=e.RoomInfo},function(e){u=e.FrameInfo},function(e){m=e.RoomController}],execute:function(){var d,h,p,R,F,I;a._RF.push({},"87d3czUeY1PIp8xJe+7OBAp","Recorder",void 0);var y=s.ccclass,v=s.property;e("Recorder",(d=y("Recorder"),h=v(m),d((F=o((R=function(e){function o(){for(var o,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return o=e.call.apply(e,[this].concat(i))||this,n(o,"PrimaryRoom",F,t(o)),n(o,"RecordFrame",I,t(o)),o._saveRoot="db://assets/record/",o._roomInfos=[],o._frameInfos=[],o._count=0,o.frameUpdate=void 0,o}r(o,e);var a=o.prototype;return a.onLoad=function(){this.frameUpdate=this.onFrameUpdate.bind(this),this.PrimaryRoom.OnFrameUpdate.add(this.frameUpdate)},a.AddRoomInfo=function(e){this._roomInfos.push(this.clone(e))},a.AddFrameInfo=function(e){this._frameInfos.push(this.clone(e))},a.Serialize=function(){var e=f.serializeArray(this._roomInfos),o=u.serializeArray(this._frameInfos),r=JSON.stringify({PerFrameTime:this.PrimaryRoom.PerFrameTime,RoomInfo:e,FrameInfo:o});this._saveRoot;if(l.isBrowser){var n=new Blob([r]),t=document.createElement("a");t.download="record.txt",t.innerHTML="Download File",null!=window.URL?t.href=window.URL.createObjectURL(n):(t.href=window.URL.createObjectURL(n),t.onclick=function(){document.body.removeChild(t)},t.style.display="none",document.body.appendChild(t)),t.click()}},a.clone=function(e){if(e instanceof f){var o=new f;if(o.RandomSeed=e.RandomSeed,o.Frame=e.Frame,o.PlayerInfos=e.PlayerInfos,o.HitCount=e.HitCount,o.BulletSpawnNumber=e.BulletSpawnNumber,o.Bullets=[],null!=e.Bullets)for(var r=0;r<e.Bullets.length;++r){var n=i({},e.Bullets[r]),t=e.Bullets[r].Info.constructor;for(var a in n.Info=new t,e.Bullets[r].Info)n.Info[a]=e.Bullets[r].Info[a];o.Bullets.push(n)}if(o.FishSpawnNumber=e.FishSpawnNumber,o.Fishes=[],null!=e.Fishes)for(var s=0;s<e.Fishes.length;++s){var l=i({},e.Fishes[s]);o.Fishes.push(l)}return o}if(e instanceof u)return i({},e)},a.onFrameUpdate=function(e,o){this.AddRoomInfo(o.RoomInfo),this._count<this.RecordFrame?(this.AddFrameInfo(e),this._count++):(this.PrimaryRoom.OnFrameUpdate.remove(this.frameUpdate),this.Serialize())},o}(c)).prototype,"PrimaryRoom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=o(R.prototype,"RecordFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),p=R))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/RecyclableListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pool.ts"],(function(t){var i,e,n,o,c,s;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,o=t._decorator,c=t.UIOpacity},function(t){s=t.PoolNode}],execute:function(){var u;n._RF.push({},"9456f2lw3xPlLHWPeANiPhl","RecyclableListItem",void 0);var a=o.ccclass,r=o.requireComponent;t("RecyclableListItem",a("RecyclableListItem")(u=r(c)(u=function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this)._posx=0,i._posy=0,i._uiopacity=null,i._index=-1,i}return i(n,t),n.prototype.initData=function(t,i,e){},e(n,[{key:"x",get:function(){return this._posx},set:function(t){this._posx=t}},{key:"y",get:function(){return this._posy},set:function(t){this._posy=t}},{key:"index",get:function(){return this._index},set:function(t){this._index=t}},{key:"opacity",get:function(){return null==this._uiopacity&&(this._uiopacity=this.node.getComponent(c)),this._uiopacity.opacity},set:function(t){null==this._uiopacity&&(this._uiopacity=this.node.getComponent(c)),this._uiopacity.opacity=t}},{key:"isAvailable",get:function(){return!this.node.active},set:function(t){this.node.active=!t}}]),n}(s))||u)||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/RecyclableScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RecyclableListItem.ts","./Pool.ts"],(function(t){var i,e,n,h,s,a,o,c,r,l,m,f,u,_,d,C,y,g,v,p,I;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,h=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,o=t._decorator,c=t.Prefab,r=t.Node,l=t.UITransform,m=t.Layout,f=t.mat4,u=t.Vec3,_=t.v2,d=t.Rect,C=t.v3,y=t.isValid,g=t.ScrollView},function(t){v=t.RecyclableListItem},function(t){p=t.Pool,I=t.PoolInstance}],execute:function(){var x,b,w,T,B,P,R,E;a._RF.push({},"00f3aIl48hN+5pF/3Es505a","RecyclableScrollView",void 0);var S=o.ccclass,L=o.property,Y=t("RecyclableItemData",S("RecyclableItemData")(x=function(t,i){this.item=void 0,this.index=void 0,this.bindIndex=void 0,this.item=t,this.index=i})||x);t("default",(b=S("RecyclableScrollView"),w=L(c),T=L(p),b((R=i((P=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,n(i,"itemPrefab",R,h(i)),n(i,"itemPoolRoot",E,h(i)),i._bindIndexList=void 0,i._contentUITransform=null,i._layout=null,i._mat4=null,i._isInit=null,i._data=null,i._callbackList=null,i._extData=null,i._firstX=null,i._firstY=null,i._itemCache=null,i._itemBuffer=[],i._tmpV2=null,i._viewRect=null,i._itemPool=null,i}e(i,t);var a=i.prototype;return a.start=function(){this.initOnce()},a.onDestroy=function(){var t=this;this.content.off(r.EventType.TRANSFORM_CHANGED,(function(i){i&r.TransformBit.POSITION&&t.scrollEvent()}),this),this.recycle()},a.initOnce=function(){this._bindIndexList={},this._contentUITransform=this.content.getComponent(l),this._layout=this.content.getComponent(m),this._mat4=f(),this.initOnce=function(){}},a.init=function(t,i){var e=this;if(this.initOnce(),this.recycle(),null==t||0==t.length)return this.content.off(r.EventType.TRANSFORM_CHANGED,(function(t){t&r.TransformBit.POSITION&&e.scrollEvent()}),this),this.horizontal&&(this._contentUITransform.width=0),void(this.vertical&&(this._contentUITransform.height=0));i=i||{},this._isInit=!0,this._data=t,this._callbackList=[],this._extData=i.extData,i.onChanged&&this.onItemChanged(i.onChanged),this._layout.enabled=!1,this.stopAutoScroll(),null==this._itemPool&&(this._itemPool=this.itemPoolRoot.NewPool(v,I));var n=this.itemPrefab.data,h=n.getComponent(l),s=this._layout.paddingLeft,a=this._layout.paddingRight,o=this._layout.paddingTop,c=this._layout.paddingBottom,m=this._layout.spacingX,f=this._layout.spacingY,u=n.position.x,_=n.position.y;this.horizontal&&(u=-h.width/2,u-=s),this.vertical&&(_=-h.height/2,_-=o),this._firstX=u,this._firstY=_,this._itemCache=[],this._itemBuffer=this._itemBuffer||[];var d=0;this._itemBuffer.forEach((function(i){i.index=-1,d>=t.length&&(i.item.x=-9999999,i.item.y=-9999999,i.item.opacity=0),d++}));var C=function(t){e._itemCache[t]=e._itemCache[t]||{},e._itemCache[t].x=u,e._itemCache[t].y=_,e._itemCache[t].width=h.width,e._itemCache[t].height=h.height,e._itemCache[t].scaleX=n.scale.x,e._itemCache[t].scaleY=n.scale.y,e._itemCache[t].visible=!1};C(0);for(var y=1;y<this._data.length;y++)C(y),this.horizontal&&(this._itemCache[y].x=this._itemCache[y-1].x-(this._itemCache[y-1].width/2+this._itemCache[y].width/2+m)),this.vertical&&(this._itemCache[y].y=this._itemCache[y-1].y-(this._itemCache[y-1].height/2+this._itemCache[y].height/2+f));var g=this._itemCache[this._itemCache.length-1];this.horizontal&&(this._contentUITransform.width=Math.abs(g.x+g.width/2+a)),this.vertical&&(this._contentUITransform.height=Math.abs(g.y-g.height/2-c)),this.content.on(r.EventType.TRANSFORM_CHANGED,(function(t){t&r.TransformBit.POSITION&&e.scrollEvent()}),this),this.scheduleOnce(this.updateListView)},a.updateItemView=function(t,i){t&&(t.initData(this._data[i],i,this._extData),t.node.setPosition(new u(t.x,t.y,0)))},a.getItem=function(){var t=this,i=this.itemPool.GetObject();i.x=this._firstX,i.y=this._firstY;var e=new Y(i,-1);return this._itemBuffer.push(e),i.node.on(r.EventType.SIZE_CHANGED,this.onItemSizeChanged.bind(this,i),this),i.node.on(r.EventType.TRANSFORM_CHANGED,(function(e){e&r.TransformBit.SCALE&&t.onItemSizeChanged.bind(t,i)}),this),e},a.scrollEvent=function(){this.content&&this._isInit&&this.updateListView()},a.updateListView=function(){var t=this;if(this._itemCache){for(var i=function(i,e){i.index=e,i.item.x=t._itemCache[e].x,i.item.y=t._itemCache[e].y,i.item.scaleX=t._itemCache[e].scaleX,i.item.scaleY=t._itemCache[e].scaleY,i.item.opacity=255,t.horizontal&&(i.item.width=t._itemCache[e].width),t.vertical&&(i.item.height=t._itemCache[e].height),i.item.parent=t.content,t.updateItemView(i.item,e)},e=0;e<this._itemCache.length;e++){var n=this._itemCache[e],h=this.isItemInView(e),s=this._itemBuffer.find((function(t){return t.index==e}));h?(this._bindIndexList[e]&&(s=this._itemBuffer.find((function(t){return t.bindIndex==e}))),s||(s=(s=this._itemBuffer.find((function(t){return-1==t.index&&null==t.bindIndex})))||this.getItem()),s.index!=e&&i(s,e)):s&&(s.index=-1,s.item.x=-9999999,s.item.y=-9999999,s.item.opacity=0),n.visible!=h&&this.runItemChangedCallback(e,h),n.visible=h}this._itemBuffer.sort((function(t,i){return t.index<0||i.index<0?1:t.index-i.index}));for(e=0;e<this._itemBuffer.length;e++)this._itemBuffer[e].item.node.setSiblingIndex(e)}},a.isItemInView=function(t){this._tmpV2=this._tmpV2||_(0,0),this.view.node.getWorldMatrix(this._mat4);var i=this._mat4.m00,e=this._mat4.m12,n=this._mat4.m13,h=this.view.width*i,s=this.view.height*i,a=this.view.convertToWorldSpaceAR(u.ZERO,this._tmpV2);this._viewRect&&1==i&&this._viewRect.x+h/2==e&&this._viewRect.y+s/2==n||(this._viewRect=new d(a.x-h/2,a.y-s/2,h,s));var o=this._itemCache[t],c=this._contentUITransform.convertToWorldSpaceAR(C(o.x,o.y)),r=o.width*o.scaleX,l=o.height*o.scaleY,m=new d(c.x-r/2,c.y-l/2,r,l);return this._viewRect.intersects(m)},a.onItemSizeChanged=function(t){if(this._itemCache){var i=this._itemBuffer.find((function(i){return i.item==t}));if(i&&i.index>=0){var e=this._itemCache[i.index];if(this.horizontal&&e.width==t.width&&e.scaleX==t.scaleX)return;if(this.vertical&&e.height==t.height&&e.scaleY==t.scaleY)return;e.width=t.width,e.scaleX=t.scaleX,e.height=t.height,e.scaleY=t.scaleY,this.updateBuffer(),this.scheduleOnce(this.updateListView)}}},a.setItemProperty=function(t,i,e){if(this._itemCache&&this._itemBuffer){var n=this._itemBuffer.find((function(i){return i.index==t}));if(n)n.item[i]=e;else this._itemCache[t][i]=e;this.updateBuffer(),this.scheduleOnce(this.updateListView)}},a.updateBuffer=function(){var t=this,i=this._itemCache[this._itemCache.length-1];if(this.vertical){this._itemCache[0].y=-this._itemCache[0].height/2-this._layout.paddingTop,1!=this._itemCache[0].scaleY&&(this._itemCache[0].y=-Math.abs(this._itemCache[0].scaleY*this._itemCache[0].height)/2-this._layout.paddingTop),this._itemBuffer.find((function(i){0==i.index&&(i.item.y=t._itemCache[0].y)}));for(var e=1;e<this._data.length;e++){var n=this._itemCache[e-1],h=this._itemCache[e],s=n.height,a=h.height;1!=n.scaleY&&(s=Math.abs(n.scaleY*n.height)),1!=h.scaleY&&(a=Math.abs(h.scaleY*h.height)),h.y=n.y-(s/2+a/2+this._layout.spacingY),this._itemBuffer.find((function(t){t.index==e&&(t.item.y=h.y)}))}var o=i.height/2;1!=i.scaleY&&(o=Math.abs(i.scaleY*i.height)/2),this._contentUITransform.height=Math.abs(i.y-o-this._layout.paddingBottom)}},a.scrollToItem=function(t,i,e){if(this._itemCache&&this._itemCache.length){t<0&&(t=0),t>=this._itemCache.length&&(t=this._itemCache.length-1);var n,h=this._itemCache[t];if(h)i=i||0,(e=e||{}).customTween||(n=-(h.y+Math.abs(h.height*h.scaleY)/2),this.scrollToOffset(_(0,n),i))}},a.getItemByIndex=function(t){if(this._itemBuffer)return this._itemBuffer.find((function(i){return i.index==t})).item},a.removeItemByIndex=function(t){if(this._itemBuffer){var i=this._itemBuffer.findIndex((function(i){return i.index==t}));if(i>=0){var e=this._itemBuffer.splice(i,1);this.itemPool.PushToPool(e[0].item)}}},a.bindItemWithIndex=function(t,i,e){if(this._itemBuffer){e=e||!0;var n=this._itemBuffer.find((function(i){return i.item==t}));n&&(n.bindIndex=i,e?this._bindIndexList[i]=e:(delete this._bindIndexList[i],delete n.bindIndex))}},a.onItemChanged=function(t){"function"==typeof t&&this._callbackList.push(t)},a.runItemChangedCallback=function(t,i){try{for(var e=0;e<this._callbackList.length;e++)this._callbackList[e](t,i)}catch(t){console.error(t)}},a.recycle=function(){var t=this;this._itemBuffer&&this._itemBuffer.forEach((function(i){i&&y(i.item)&&(i.item.node.off(r.EventType.SIZE_CHANGED,t.onItemSizeChanged.bind(t,i.item),t),i.item.node.off(r.EventType.TRANSFORM_CHANGED,(function(e){e&r.TransformBit.SCALE&&t.onItemSizeChanged.bind(t,i.item)}),t),t.itemPool.PushToPool(i.item))})),this._itemCache=null,this._itemBuffer=null},s(i,[{key:"itemPool",get:function(){return null==this._itemPool&&(this._itemPool=this.itemPoolRoot.NewPool(v,I)),this._itemPool}}]),i}(g)).prototype,"itemPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(P.prototype,"itemPoolRoot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=P))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/ReplayData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameInfo.ts","./RoomInfo.ts"],(function(r){var t,e,o,n;return{setters:[function(r){t=r.regeneratorRuntime},function(r){e=r.cclegacy},function(r){o=r.FrameInfo},function(r){n=r.RoomInfo}],execute:function(){e._RF.push({},"a15f0x1H/tM5YYRvJw6lsL5","ReplayData",void 0);r("ReplayData",function(){function r(r){this.PerFrameTime=0,this.RoomInfos=null,this.FrameInfos=null;var t=JSON.parse(r);this.PerFrameTime=t.PerFrameTime;var e=new Uint8Array(this.Iterator(t.RoomInfo)).buffer;this.RoomInfos=n.deserializeArray(e);var a=new Uint8Array(this.Iterator(t.FrameInfo)).buffer;this.FrameInfos=o.deserializeArray(a)}var e=r.prototype;return e.CompareRoomInfo=function(r){var t=a(r,this.RoomInfos[r.Frame]),e=t[0],o=t[1];e||console.error("Frame "+r.Frame+" not equal: RoomInfo"+o)},e.Iterator=t().mark((function r(e){var o;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=t().keys(e);case 1:if((r.t1=r.t0()).done){r.next=7;break}return o=r.t1.value,r.next=5,e[o];case 5:r.next=1;break;case 7:case"end":return r.stop()}}),r)})),r}());function a(r,t){if("object"==typeof r){var e=function(r,t){if(null==r||"Object"==r.constructor.name||null==t||"Object"==t.constructor.name)return 0;if(r.constructor===t.constructor||t.__proto__.__proto__.constructor===r.constructor)return 1;if(r.__proto__.__proto__.constructor===t.constructor)return-1;return 0}(r,t);if(0==e)return[!1,"type error: "+r.constructor.name+" "+t.constructor.name];if(1==e)for(var o in r){var n=a(r[o],t[o]),u=n[0],s=n[1];if(!u)return Array.isArray(r)?[!1,"["+o+"]"+s]:[!1,"."+o+s]}else for(var o in t){var i=a(r[o],t[o]),c=i[0],f=i[1];if(!c)return Array.isArray(r)?[!1,"["+o+"]"+f]:[!1,"."+o+f]}}else if(r!==t)return[!1," val1= "+r+" val2= "+t];return[!0,null]}e._RF.pop()}}}));

System.register("chunks:///_virtual/Replayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ReplayData.ts","./ReplicaRoom.ts"],(function(e){var a,t,o,n,r,l,i,p,s,R;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,i=e.TextAsset,p=e.Component},function(e){s=e.ReplayData},function(e){R=e.ReplicaRoom}],execute:function(){var c,y,f,u,h;r._RF.push({},"fd28dEIhp5NyIGonAbl9A4K","Replayer",void 0);var m=l.ccclass,D=l.property;e("Replayer",(c=m("Replayer"),y=D(i),c((h=a((u=function(e){function a(){for(var a,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return a=e.call.apply(e,[this].concat(r))||this,o(a,"ReplayDataFile",h,n(a)),a.ReplayData=null,a}return t(a,e),a.prototype.start=function(){this.ReplayData=new s(this.ReplayDataFile.text);var e=new R(null,this.ReplayData.FrameInfos.length,this.ReplayData.RoomInfos[0].RoomNo,4,this.ReplayData.PerFrameTime);e.SetRoomInfo(this.ReplayData.RoomInfos[0]);for(var a=0;a<this.ReplayData.FrameInfos.length;a++){e.AddFrameInfo(a,this.ReplayData.FrameInfos[a]),e.FrameUpdate(),e.CompleteFixedUpdate();var t=e.GetRoomInfo();this.ReplayData.CompareRoomInfo(t)}console.log("Replay finished")},a}(p)).prototype,"ReplayDataFile",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=u))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/ReplicaRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Room.ts"],(function(t){var n,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.Room}],execute:function(){o._RF.push({},"a3855x3B0VNLpU79aDEC3Zw","ReplicaRoom",void 0),t("ReplicaRoom",function(t){function o(n,o,e,i,r,c){var u;return void 0===e&&(e=0),void 0===i&&(i=4),void 0===r&&(r=200),void 0===c&&(c=1),(u=t.call(this,n,o,e,i,r,c)||this)._catchInfoIndex=0,u}n(o,t);var e=o.prototype;return e.PreFrameUpdate=function(){this._currentInfo.RandomSeed!=this._rand.Seed&&this.ResetRandomSeed(this._currentInfo.RandomSeed),this._catchInfoIndex=0},e.PostFrameUpdate=function(){},e.GenCatchInfo=function(t,n){if(this.IncrementCatchSerialnumber(),this._currentInfo.CatchResults.length>this._catchInfoIndex){var o=this._currentInfo.CatchResults[this._catchInfoIndex];if(this.checkHitCount(o)&&this.checkCatchInfo(o,t,n))return++this._catchInfoIndex,o}return null},e.checkCatchInfo=function(t,n,o){return t.PlayerID==n.PlayerID&&t.FortID==n.FortID&&t.BulletID==n.SerialNumber&&t.FishID==o.SerialNumber||(console.error("CatchInfo not match!, PlayerID: "+t.PlayerID+"/"+n.PlayerID+", FortID: "+t.FortID+"/"+n.FortID+", BulletID: "+t.BulletID+"/"+n.SerialNumber+", FishID: "+t.FishID+"/"+o.SerialNumber+"."),!1)},e.checkHitCount=function(t){return t.HitCount==this.HitCount||(t.HitCount>this.HitCount?t.HitCount-this.HitCount>o.WarnLogValue&&console.warn("CatchInfo hitCount not match!, HitCount: "+t.HitCount+"/"+this.HitCount+"."):console.error("CatchInfo hitCount not match!, HitCount: "+t.HitCount+"/"+this.HitCount+"."),!1)},o}(e)).WarnLogValue=2,o._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataChangeBet.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"a09b0o/vaJJwITQZQu+qKGl","ReqDataChangeBet",void 0);e("ReqDataChangeBet",function(){function e(){this.Bet=void 0,this.Bet=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeFloat64(r.Bet)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],a=t[1];if(!i)return null;var n=new e;if(1==a)n.Bet=r.readFloat64();else{if(a>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return n;if(n.Bet=r.readFloat64(),1==a)return n}return n},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataCheckRoomInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./RoomInfo.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.RoomInfo}],execute:function(){r._RF.push({},"09a17Hbv9NPBLNES5HLSwab","ReqDataCheckRoomInfo",void 0);e("ReqDataCheckRoomInfo",function(){function e(){this.FixedUpdateCount=void 0,this.RoomInfo=void 0,this.FixedUpdateCount=0,this.RoomInfo=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeUint32(r.FixedUpdateCount),n.serializeCore(e,r.RoomInfo)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],o=t[1];if(!i)return null;var a=new e;if(2==o)a.FixedUpdateCount=r.readUint32(),a.RoomInfo=n.deserializeCore(r);else{if(o>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.FixedUpdateCount=r.readUint32(),1==o)return a;if(a.RoomInfo=n.deserializeCore(r),2==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataExitRoom.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"1f9dbdMvbpFKZBgcmbKeUY8","ReqDataExitRoom",void 0);e("ReqDataExitRoom",function(){function e(){}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?e.writeObjectHeader(0):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(0==n);else{if(n>0)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataFireLockBullet.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"deb63uDKK5CZqhtFuLDKHNR","ReqDataFireLockBullet",void 0);e("ReqDataFireLockBullet",function(){function e(){this.FishSerialNumber=void 0,this.FishSerialNumber=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeUint32(r.FishSerialNumber)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.FishSerialNumber=r.readUint32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.FishSerialNumber=r.readUint32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataFireNormalBullet.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"e6e04WMU4lJFZGvArnv+xOs","ReqDataFireNormalBullet",void 0);e("ReqDataFireNormalBullet",function(){function e(){this.Direction=void 0,this.Direction=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeInt32(r.Direction)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.Direction=r.readInt32();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Direction=r.readInt32(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataFireSpecialBullet.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./Vector2.ts"],(function(e){var r,i,t,n;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){n=e.Vector2}],execute:function(){r._RF.push({},"8bf0evQXvNCG58j0oLO6Xoo","ReqDataFireSpecialBullet",void 0);e("ReqDataFireSpecialBullet",function(){function e(){this.Position=void 0,this.Direction=void 0,this.BulletKind=void 0,this.Position=null,this.Direction=0,this.BulletKind=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),n.serializeCore(e,r.Position),e.writeInt32(r.Direction),e.writeInt32(r.BulletKind)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],o=i[1];if(!t)return null;var a=new e;if(3==o)a.Position=n.deserializeCore(r),a.Direction=r.readInt32(),a.BulletKind=r.readInt32();else{if(o>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Position=n.deserializeCore(r),1==o)return a;if(a.Direction=r.readInt32(),2==o)return a;if(a.BulletKind=r.readInt32(),3==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataGetBetHistory.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"e4c49GD4VNMgJ82pnhM4IOU","ReqDataGetBetHistory",void 0);e("ReqDataGetBetHistory",function(){function e(){this.NowDateTime=void 0,this.QueryStartTime=void 0,this.QueryEndTime=void 0,this.TidThreshold=void 0,this.TimeThreshold=void 0,this.IncludeDailyQuery=void 0,this.NowDateTime=0,this.QueryStartTime=0,this.QueryEndTime=0,this.TidThreshold="",this.TimeThreshold=0,this.IncludeDailyQuery=!1}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeFloat64(r.NowDateTime),e.writeFloat64(r.QueryStartTime),e.writeFloat64(r.QueryEndTime),e.writeString(r.TidThreshold),e.writeFloat64(r.TimeThreshold),e.writeBoolean(r.IncludeDailyQuery)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],a=i[1];if(!t)return null;var n=new e;if(6==a)n.NowDateTime=r.readFloat64(),n.QueryStartTime=r.readFloat64(),n.QueryEndTime=r.readFloat64(),n.TidThreshold=r.readString(),n.TimeThreshold=r.readFloat64(),n.IncludeDailyQuery=r.readBoolean();else{if(a>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return n;if(n.NowDateTime=r.readFloat64(),1==a)return n;if(n.QueryStartTime=r.readFloat64(),2==a)return n;if(n.QueryEndTime=r.readFloat64(),3==a)return n;if(n.TidThreshold=r.readString(),4==a)return n;if(n.TimeThreshold=r.readFloat64(),5==a)return n;if(n.IncludeDailyQuery=r.readBoolean(),6==a)return n}return n},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataGMCommand.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"f6dffO9VilNYJCzCwiE8RL/","ReqDataGMCommand",void 0);e("ReqDataGMCommand",function(){function e(){this.Command=void 0,this.Command=""}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeString(r.Command)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var a=new e;if(1==n)a.Command=r.readString();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Command=r.readString(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ReqDataJoinRoom.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"e0b86x1HYxDdLmNTexTdbhQ","ReqDataJoinRoom",void 0);e("ReqDataJoinRoom",function(){function e(){this.AssignRoomID=void 0,this.Password=void 0,this.BetRegionNumber=void 0,this.AssignRoomID=0,this.Password=0,this.BetRegionNumber=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeInt32(r.AssignRoomID),e.writeUint16(r.Password),e.writeUint8(r.BetRegionNumber)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var o=new e;if(3==n)o.AssignRoomID=r.readInt32(),o.Password=r.readUint16(),o.BetRegionNumber=r.readUint8();else{if(n>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return o;if(o.AssignRoomID=r.readInt32(),1==n)return o;if(o.Password=r.readUint16(),2==n)return o;if(o.BetRegionNumber=r.readUint8(),3==n)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/resource-data-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localization-global.ts"],(function(r){var e,n,t,u,a,s,c,o,i,p,f;return{setters:[function(r){e=r.asyncToGenerator,n=r.regeneratorRuntime},function(r){t=r.cclegacy,u=r.settings,a=r.Settings,s=r.assetManager},function(r){c=r.resourceListPath,o=r.pluginName,i=r.resourceBundlePath,p=r.mainName,f=r.runtimeBundleName}],execute:function(){t._RF.push({},"0a95a0kirtJnJnMnZWSRaFn","resource-data-manager",void 0);r("default",function(){function r(){}var t=r.prototype;return t.readResourceList=function(){var r=e(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=4;break;case 4:return console.log("["+o+"] this is build env"),r.abrupt("return",this.runtimeLoad(c));case 9:return r.abrupt("return",this.previewLoad(c));case 10:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),t.readResourceBundle=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=4;break;case 4:return r.abrupt("return",this.runtimeLoad(i));case 8:return r.abrupt("return",this.previewLoad(i));case 9:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),t.editorLoad=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Editor.Message.request(p,"get-resource-bundle",e));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.runtimeLoad=function(){var r=e(n().mark((function r(e){var t,u;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getBundle(f);case 2:if(t=r.sent){r.next=5;break}return r.abrupt("return",void 0);case 5:return r.next=7,this.getResource(t,e);case 7:if((u=r.sent)&&u.json){r.next=10;break}return r.abrupt("return",void 0);case 10:return r.abrupt("return",u.json);case 11:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),t.previewLoad=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(p+"/"+e);case 3:return r.next=5,r.sent.json();case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",void 0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}(),t.checkBundle=function(){var r=e(n().mark((function r(e){var t,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=u.querySettings(a.Category.ASSETS,"preloadBundles"),s=null==t?void 0:t.find((function(r){return r.bundle===e})),r.abrupt("return",!!s);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.getBundle=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){s.loadBundle(e,(function(e,n){r(e?void 0:n)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.getResource=function(){var r=e(n().mark((function r(e,t){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){e.load(t,(function(e,n){r(e?void 0:n)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceLoader.ts",["cc"],(function(e){var n,r,u,o;return{setters:[function(e){n=e.cclegacy,r=e.resources,u=e.SpriteFrame,o=e.Prefab}],execute:function(){n._RF.push({},"5dbbekRJtlPDIGaEShAeNTU","ResourceLoader",void 0);e("ResourceLoader",function(){function e(){}return e.LoadSpriteFrame=function(e,n){r.load(e+"/spriteFrame",u,(function(e,r){e?n(e,null):n(null,r)}))},e.LoadPrefab=function(e,n){r.load(e,o,(function(e,r){e?n(e,null):n(null,r)}))},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RespDataExitRoom.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"d2596Iy+MNF8ICZc6XBM1fT","RespDataExitRoom",void 0);e("RespDataExitRoom",function(){function e(){this.Ack=void 0,this.Ack=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeUint8(r.Ack)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(1==n)a.Ack=r.readUint8();else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Ack=r.readUint8(),1==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RespDataGetBetHistory.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./BetDataRaw.ts"],(function(e){var r,i,t,a;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){a=e.BetDataRaw}],execute:function(){r._RF.push({},"0e908H36t9GFbubcB6Olys3","RespDataGetBetHistory",void 0);e("RespDataGetBetHistory",function(){function e(){this.Ack=void 0,this.DailyBet=void 0,this.DailyWin=void 0,this.DailyMinTID=void 0,this.IncludeDailyQuery=void 0,this.BetDatas=void 0,this.Ack=0,this.DailyBet=0,this.DailyWin=0,this.DailyMinTID="",this.IncludeDailyQuery=!1,this.BetDatas=null}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeUint8(r.Ack),e.writeUint32(r.DailyBet),e.writeFloat64(r.DailyWin),e.writeString(r.DailyMinTID),e.writeBoolean(r.IncludeDailyQuery),e.writeArray(r.BetDatas,(function(e,r){return a.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],n=i[1];if(!t)return null;var o=new e;if(6==n)o.Ack=r.readUint8(),o.DailyBet=r.readUint32(),o.DailyWin=r.readFloat64(),o.DailyMinTID=r.readString(),o.IncludeDailyQuery=r.readBoolean(),o.BetDatas=r.readArray((function(e){return a.deserializeCore(e)}));else{if(n>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return o;if(o.Ack=r.readUint8(),1==n)return o;if(o.DailyBet=r.readUint32(),2==n)return o;if(o.DailyWin=r.readFloat64(),3==n)return o;if(o.DailyMinTID=r.readString(),4==n)return o;if(o.IncludeDailyQuery=r.readBoolean(),5==n)return o;if(o.BetDatas=r.readArray((function(e){return a.deserializeCore(e)})),6==n)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RespDataGetPlayerInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,i,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"65e39EixnlDeqSMQ+fpqS9H","RespDataGetPlayerInfo",void 0);e("RespDataGetPlayerInfo",function(){function e(){this.PlayerID=void 0,this.PlayerName=void 0,this.Coin=void 0,this.PlayerID=0,this.PlayerName="",this.Coin=0}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeUint32(r.PlayerID),e.writeString(r.PlayerName),e.writeFloat64(r.Coin)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],a=i[1];if(!t)return null;var n=new e;if(3==a)n.PlayerID=r.readUint32(),n.PlayerName=r.readString(),n.Coin=r.readFloat64();else{if(a>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return n;if(n.PlayerID=r.readUint32(),1==a)return n;if(n.PlayerName=r.readString(),2==a)return n;if(n.Coin=r.readFloat64(),3==a)return n}return n},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RespDataGMCommand.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"6f8a00cQc9EpLfz0xfnq/LU","RespDataGMCommand",void 0);e("RespDataGMCommand",function(){function e(){this.Command=void 0,this.IsSuccess=void 0,this.Result=void 0,this.Command="",this.IsSuccess=!1,this.Result=""}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeString(r.Command),e.writeBoolean(r.IsSuccess),e.writeString(r.Result)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(3==n)a.Command=r.readString(),a.IsSuccess=r.readBoolean(),a.Result=r.readString();else{if(n>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.Command=r.readString(),1==n)return a;if(a.IsSuccess=r.readBoolean(),2==n)return a;if(a.Result=r.readString(),3==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RespDataJoinRoom.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./RoomInfo.ts"],(function(e){var r,i,n,t;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){t=e.RoomInfo}],execute:function(){r._RF.push({},"93c2bd3xgZBkYzMBcuialX1","RespDataJoinRoom",void 0);e("RespDataJoinRoom",function(){function e(){this.Ack=void 0,this.RoomInfo=void 0,this.Ack=0,this.RoomInfo=null}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeUint8(r.Ack),t.serializeCore(e,r.RoomInfo)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),n=i[0],o=i[1];if(!n)return null;var a=new e;if(2==o)a.Ack=r.readUint8(),a.RoomInfo=t.deserializeCore(r);else{if(o>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Ack=r.readUint8(),1==o)return a;if(a.RoomInfo=t.deserializeCore(r),2==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RespPlayersInRoom.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./InRoomPlayerInfo.ts"],(function(r){var e,i,t,n;return{setters:[function(r){e=r.cclegacy},function(r){i=r.MemoryPackWriter},function(r){t=r.MemoryPackReader},function(r){n=r.InRoomPlayerInfo}],execute:function(){e._RF.push({},"6c795fviK1Dqoo7FimYa1lN","RespPlayersInRoom",void 0);r("RespPlayersInRoom",function(){function r(){this.Ack=void 0,this.RoomId=void 0,this.Players=void 0,this.Ack=0,this.RoomId=0,this.Players=null}return r.serialize=function(r){var e=i.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(3),r.writeUint8(e.Ack),r.writeInt32(e.RoomId),r.writeArray(e.Players,(function(r,e){return n.serializeCore(r,e)}))):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=i.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,i){e.writeArray(i,(function(e,i){return r.serializeCore(e,i)}))},r.deserialize=function(r){return this.deserializeCore(new t(r))},r.deserializeCore=function(e){var i=e.tryReadObjectHeader(),t=i[0],o=i[1];if(!t)return null;var a=new r;if(3==o)a.Ack=e.readUint8(),a.RoomId=e.readInt32(),a.Players=e.readArray((function(r){return n.deserializeCore(r)}));else{if(o>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Ack=e.readUint8(),1==o)return a;if(a.RoomId=e.readInt32(),2==o)return a;if(a.Players=e.readArray((function(r){return n.deserializeCore(r)})),3==o)return a}return a},r.deserializeArray=function(r){return this.deserializeArrayCore(new t(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/RewardManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishKind.ts","./BulletKind.ts","./Action2.ts","./SpecialBulletRewardRule.ts"],(function(e){var t,n,i,r,u,s;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy},function(e){i=e.FishKind},function(e){r=e.BulletKind},function(e){u=e.ActionWithOne},function(e){s=e.SpecialBulletRewardRule}],execute:function(){n._RF.push({},"be3485XXh9Ko7mXjK5D2r1T","RewardManager",void 0);e("RewardManager",function(){function e(){this.OnGetSpecialBulletReward=new u,this._rules=new Map,this.Rules.set(i.Through,new s(i.Through,r.Through)),this.Rules.set(i.Meteor,new s(i.Meteor,r.Meteor)),this.Rules.set(i.Missile,new s(i.Missile,r.Missile)),this.Rules.set(i.Bouncy,new s(i.Bouncy,r.Bouncy))}var n=e.prototype;return n.TryGetCatchReward=function(e,t){if(this.Rules.has(e)){var n=this.Rules.get(e);if(n instanceof s)return this.TryGetSpecialBulletReward(t,n)}return!1},n.TryGetSpecialBulletReward=function(e,t){var n,i=t.TryGetReward(e);return!!i.Success&&(null==(n=this.OnGetSpecialBulletReward)||n.invoke(i.reward),!0)},t(e,[{key:"Rules",get:function(){return this._rules}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Room.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishManager.ts","./BulletManager.ts","./NR3Generator.ts","./BetChange.ts","./BulletKind.ts","./ExitRequest.ts","./FireNormal.ts","./FireThrough.ts","./FireMeteor.ts","./FireMissile.ts","./FireBouncy.ts","./RoomInfo.ts","./DirectionHelper.ts","./FortManager.ts","./FrameInfo.ts","./BulletParameter.ts","./RoomBase.ts","./Action2.ts","./BetRegion.ts","./RoundManager.ts","./WaveManager.ts","./SilentUpdateManager.ts","./TypeName.ts","./RewardManager.ts","./KindHelper.ts"],(function(e){var t,n,i,o,r,a,s,l,u,h,d,c,f,F,p,g,B,v,C,R,M,S,m,I,O,w,k,D,U,P,y,H,b,x,T,_,W;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,i=e.createClass,o=e.assertThisInitialized},function(e){r=e.cclegacy},function(e){a=e.FishManager},function(e){s=e.BulletManager},function(e){l=e.NR3Generator},function(e){u=e.BetChange},function(e){h=e.BulletKind},function(e){d=e.ExitRequest},function(e){c=e.FireNormal},function(e){f=e.FireThrough},function(e){F=e.FireMeteor},function(e){p=e.FireMissile},function(e){g=e.FireBouncy},function(e){B=e.RoomInfo},function(e){v=e.DirectionHelper},function(e){C=e.FortManager},function(e){R=e.FrameInfo},function(e){M=e.NormalBulletParameter,S=e.ThroughBulletParameter,m=e.MeteorBulletParameter,I=e.MissileBulletParameter,O=e.BouncyBulletParameter},function(e){w=e.RoomBase},function(e){k=e.ActionWithTwo,D=e.ActionWithThree,U=e.Action,P=e.ActionWithOne},function(e){y=e.BetRegion},function(e){H=e.RoundManager},function(e){b=e.WaveManager},function(e){x=e.SilentUpdateManager},function(e){T=e.TypeName},function(e){_=e.RewardManager},function(e){W=e.KindHelper}],execute:function(){var A;r._RF.push({},"61183iw5bFECJGczb49tbvo","Room",void 0);var G=e("Room",function(e){function r(t,n,i,u,d,c){var f;return void 0===i&&(i=0),void 0===u&&(u=4),void 0===d&&(d=200),void 0===c&&(c=1),(f=e.call(this,n,u,d)||this).TickSpeedUp=void 0,f.No=void 0,f.FishMgr=null,f.FortMgr=null,f.BulletMgr=null,f.RoundMgr=null,f.WaveMgr=null,f.RewardMgr=null,f.SilentUpdateMgr=null,f._rand=new l(0),f._currentInfo=void 0,f._fixedUpdateTime=void 0,f._roomInfo=null,f._invalidReqs=[],f._frameRequestProcessors=new Map,f._hitCount=0,f._betRegionInfo=null,f.OnPlayerJoin=new k,f.OnPlayerExit=new D,f.OnResetRoom=new U,f.OnRefreshRoundInfo=new P,f.OnRefreshRoundGroup=new P,f.OnSpawnWave=new k,f.OnStartrWave=new P,f.OnSpawnFish=new P,f.OnDespawnFish=new P,f.OnStartFish=new P,f.OnCatchFish=new P,f.OnBulletHitFish=new D,f.OnBulletCatchFish=new D,f.OnSpawnBullet=new P,f.OnDespawnBullet=new P,f.OnBetChange=new k,f.OnCoinChange=new k,f.OnTickSpeedUp=new P,f.OnFixedUpdateHandler=new U,f.OnSilentUpdate=new U,f.OnUnlockJoinRoom=new U,f.OnGetSpecialBulletReward=new P,f.OnSpecialBulletFinish=new k,f.OnSetActivityData=new P,f.No=i,f.TickSpeedUp=c,f._fixedUpdateTime=d/1e3/u,f.BetRegionInfo=y.GetInfo(0),f.FishMgr=new a(t.FishCollisionDatas,t.FishOddsDatas,t.PathDatas,t.PathSpeedDatas,t.WaveInfos),f.FishMgr.OnSpawnFish.add(f.OnSpawnFishHandler.bind(o(f))),f.FishMgr.OnDespawnFish.add(f.OnDespawnFishHandler.bind(o(f))),f.FishMgr.OnStartFish.add(f.OnStartFishHandler.bind(o(f))),f.FishMgr.OnCatchFish.add(f.OnCatchFishHandler.bind(o(f))),f.FortMgr=new C(r.MaxPlayerCount,r.FortPositions),f.FortMgr.SetBetRegionInfo(o(f)),f.BulletMgr=new s,f.BulletMgr.OnSpawnBullet.add(f.OnSpawnBulletHandler.bind(o(f))),f.BulletMgr.OnDespawnBullet.add(f.OnDespawnBulletHandler.bind(o(f))),f.BulletMgr.registerBulletHandler(h.Normal,f.CheckNormalBulletFire.bind(o(f)),f.OnNormalBulletFire.bind(o(f)),f.OnNormalBulletUpdate.bind(o(f))),f.BulletMgr.registerBulletHandler(h.Lock,f.CheckLockBulletFire.bind(o(f)),f.OnLockBulletFire.bind(o(f)),f.OnLockBulletUpdate.bind(o(f))),f.BulletMgr.registerBulletHandler(h.Through,f.CheckThroughBulletFire.bind(o(f)),f.OnThroughBulletFire.bind(o(f)),f.OnThroughBulletUpdate.bind(o(f))),f.BulletMgr.registerBulletHandler(h.Meteor,f.CheckMeteorBulletFire.bind(o(f)),f.OnMeteorBulletFire.bind(o(f)),f.OnMeteorBulletUpdate.bind(o(f))),f.BulletMgr.registerBulletHandler(h.Missile,f.CheckMissileBulletFire.bind(o(f)),f.OnMissileBulletFire.bind(o(f)),f.OnMissileBulletUpdate.bind(o(f))),f.BulletMgr.registerBulletHandler(h.Bouncy,f.CheckBouncyBulletFire.bind(o(f)),f.OnBouncyBulletFire.bind(o(f)),f.OnBouncyBulletUpdate.bind(o(f))),f.RoundMgr=new H(t.BonusFrequencyDatas,t.ThemeSettingDatas,t.BackgroundTimeDatas),f.RoundMgr.OnRefreshRoundInfo.add(f.OnRefreshRoundInfoAction.bind(o(f))),f.RoundMgr.OnRefreshRoundGroup.add(f.OnRefreshRoundGroupAction.bind(o(f))),f.WaveMgr=new b(t.WaveDatas,t.BgBonusTable,t.WaveTable),f.WaveMgr.OnSpawnWave.add(f.OnSpawnWaveAction.bind(o(f))),f.WaveMgr.OnStartWave.add(f.OnStartWaveAction.bind(o(f))),f.RewardMgr=new _,f.RewardMgr.OnGetSpecialBulletReward.add(f.OnGetSpecialBulletAction.bind(o(f))),f.SilentUpdateMgr=new x,f.SilentUpdateMgr.OnSilentUpdate.add(f.OnSilentUpdateAction.bind(o(f))),f.SilentUpdateMgr.OnUnlockJoinRoom.add(f.OnUnlockJoinRoomAction.bind(o(f))),f}t(r,e);var w=r.prototype;return w.DespawnFort=function(e){var t=this.FortMgr.TryGetFortByFortID(e);if(t.Success){var n=t.Fort;if(n.IsInUse)return this.OnPlayerExit.invoke(n.PlayerID,e,n.Coin),this.FortMgr.Despawn(e),!0}return console.warn("Fort: "+e+" is not in use."),!1},w.RefreshRoomInfo=function(){return this.OnGetRoomInfo()},w.SetDatas=function(e){this.FishMgr.SetDatas(e.FishCollisionDatas,e.FishOddsDatas,e.PathDatas,e.PathSpeedDatas,e.WaveInfos),this.RoundMgr.SetDatas(e.BonusFrequencyDatas,e.ThemeSettingDatas,e.BackgroundTimeDatas),this.WaveMgr.SetDatas(e.WaveDatas,e.BgBonusTable,e.WaveTable),console.info("Room<"+this.No+"> SetDatas")},w.RegisterFrameRequestProcessor=function(e,t){this._frameRequestProcessors.has(e)?console.error(e+" processor already exists !!"):this._frameRequestProcessors.set(e,t)},w.UnregisterFrameRequestProcessor=function(e){this._frameRequestProcessors.delete(e)||console.error(e+" processor does not exists !!")},w.CalculateSilentUpdateFixedUpdateCount=function(e,t){this.SilentUpdateMgr.CalculateSilentUpdateFixedUpdateCount(this.WaveMgr.RoundStartFixedUpdateCount,e,t)},w.SetSilentUpdateFixedUpdateCount=function(e,t){this.SilentUpdateMgr.SetSilentUpdateFixedUpdateCount(e,t)},w.SetTickSpeedUp=function(e){var t;this.TickSpeedUp=e,null==(t=this.OnTickSpeedUp)||t.invoke(this.TickSpeedUp)},w.RandomNext=function(e,t){return this._rand.Next(e,t)},w.RandomDouble=function(){return this._rand.NextDouble()},w.SpawnFish=function(e,t,n,i,o){return this.FishMgr.SpawnFish(e,t,n,i,o)},w.AddCoin=function(e,t){var n;0!==t&&(t<0&&e.Coin<=0||(e.Coin=Math.max(e.Coin+t,0),null==(n=this.OnCoinChange)||n.invoke(e.ID,e.Coin)))},w.FrameInfoCreator=function(){return new R},w.OnFixedUpdate=function(){this.SilentUpdateMgr.FixedUpdate(this.FixedUpdateCount),this.RoundMgr.FixedUpdate(this.FixedUpdateCount),this.WaveMgr.FixedUpdate(this.FixedUpdateCount),this.FishMgr.FixedUpdate(),this.BulletMgr.fixedUpdate(),this.OnFixedUpdateHandler.invoke()},w.OnFrameUpdate=function(e){this._currentInfo=e.Info,this.PreFrameUpdate(),this.SetActivity(e.Info.SetActivityRequest);for(var t=0;t<r.MaxPlayerCount;t++){var i=this.FortMgr.Forts[t],o=this._currentInfo.FortRequests[t];if(null!=o){this._invalidReqs.length=0;for(var a=0,s=o.length-1;a<=s;++a){var l=o[a],h=!1;if(l instanceof d)h=this.DespawnFort(t);else if(l instanceof u){var c,f=l;if(h=this.FortMgr.SetBet(t,f.Bet))null==(c=this.OnBetChange)||c.invoke(i.ID,i.Bet)}else{var F=T.GetName(l),p=this._frameRequestProcessors.get(F);if(null==p)throw new Error(F+" processor not found !!");h=p.Process(l,this)}h||this._invalidReqs.push(a)}for(var g=this._invalidReqs.length-1;g>=0;--g)o.splice(this._invalidReqs[g],1)}var B,v=this._currentInfo.FortFireRequests[t];if(this.BulletMgr.trySpawn(i,v))null==(B=this.OnCoinChange)||B.invoke(i.ID,i.Coin)}for(var C,R=n(this._currentInfo.JoinRequests);!(C=R()).done;){var M=C.value,S=this.FortMgr.Spawn(M),m=this.FortMgr.TryGetFortByFortID(S);m.Success&&this.OnPlayerJoin.invoke(m.Fort,S)}this.PostFrameUpdate()},w.OnGetRoomInfo=function(){return null!=this._roomInfo||(this._roomInfo=new B),this._roomInfo.Frame!==this.Frame&&(this._roomInfo.RoomNo=this.No,this._roomInfo.TickSpeedUp=this.TickSpeedUp,this._roomInfo.RandomSeed=this._rand.Seed,this._roomInfo.Frame=this.Frame,this._roomInfo.HitCount=this.HitCount,this._roomInfo.BetRegionInfo=this.BetRegionInfo,this._roomInfo.RoundInfo=this.RoundMgr.RoundInfo,this._roomInfo.RoundGroup=this.RoundMgr.RoundGroup,this._roomInfo.ActivityData=this.WaveMgr.ActivityData,this._roomInfo.PlayerInfos=[],this.FortMgr.CloneAllForts(this._roomInfo.PlayerInfos),this._roomInfo.FishSpawnNumber=this.FishMgr.SerialNumber,this._roomInfo.Fishes=[],this.FishMgr.GetAllFishInfo(this._roomInfo.Fishes),this._roomInfo.BulletSpawnNumber=this.BulletMgr.SerialNumber,this._roomInfo.Bullets=[],this.BulletMgr.GetAllBulletInfo(this._roomInfo.Bullets)),this._roomInfo},w.OnSetRoomInfo=function(e){e&&(this._roomInfo=e,this.No=e.RoomNo,this.TickSpeedUp=e.TickSpeedUp,e.RandomSeed!=this._rand.Seed&&this._rand.Reset(e.RandomSeed),this.HitCount=e.HitCount,this.BetRegionInfo=e.BetRegionInfo,this.RoundMgr.Init(e.RoundInfo,e.RoundGroup,this._rand),this.WaveMgr.Init(e.RoundInfo,this._rand),this.WaveMgr.ActivityData=e.ActivityData,0!=this.Frame&&(this.FortMgr.Reset(e.PlayerInfos),this.FishMgr.Reset(e.FishSpawnNumber,e.Fishes),this.BulletMgr.reset(e.BulletSpawnNumber,e.Bullets),this.OnResetRoom.invoke()))},w.ResetRandomSeed=function(e){this._rand.Reset(e)},w.IncrementCatchSerialnumber=function(){++this.HitCount},w.TryGetCatchInfo=function(e,t){var n=e.BulletKind==h.Lock?e.CatchInfo:this.GenCatchInfo(e,t);return{catchInfoExist:null!=n,catchInfo:n}},w.CheckFishCatchable=function(e,t){var n=null!=e&&null!=t;return n?(n&&(n=this.FishMgr.CheckFishHitable(t)),e.BulletKind!=h.Lock&&n&&(n=!this.BulletMgr.CheckBulletCatchExist(e.FortID,t.SerialNumber))):(null==e&&console.warn("Bullet is null"),null==t&&console.warn("Fish is null")),n},w.ProcessCatchFish=function(e,t){var n,i=this.TryGetCatchInfo(e,t),o=i.catchInfoExist,r=i.catchInfo;if(null==(n=this.OnBulletHitFish)||n.invoke(e,t,r),o){var a;if(this.RewardMgr.TryGetCatchReward(t.FishOdds.FishKind,r),r.Score>0){var s=this.FortMgr.TryGetFortByPlayerID(e.PlayerID);if(s.Success){var l,u=s.Fort;u.AddCoin(r.PlayerID,r.Score),u.AddSpecialWeaponScore(r.PlayerID,r.Score),null==(l=this.OnCoinChange)||l.invoke(u.ID,u.Coin)}}r.IsCatch&&this.FishMgr.CatchFish(t),null==(a=this.OnBulletCatchFish)||a.invoke(e,t,r)}},w.OnRefreshRoundInfoAction=function(e){var t;null==(t=this.OnRefreshRoundInfo)||t.invoke(e)},w.OnRefreshRoundGroupAction=function(e){var t;null==(t=this.OnRefreshRoundGroup)||t.invoke(e)},w.OnSpawnWaveAction=function(e,t){var n;null==(n=this.OnSpawnWave)||n.invoke(e,t),this.FishMgr.SpawnFishes(e,t,this._rand)},w.OnStartWaveAction=function(e){var t;null==(t=this.OnStartrWave)||t.invoke(e),this.FishMgr.StartFishes(e)},w.OnGetSpecialBulletAction=function(e){var t,n=this.FortMgr.TryGetFortByPlayerID(e.PlayerID);n.Success&&n.Fort.AddHoldingSpecialBulletInfo(e.GenHoldingSpecialBulletInfo());null==(t=this.OnGetSpecialBulletReward)||t.invoke(e)},w.OnSpawnFishHandler=function(e){var t;null==(t=this.OnSpawnFish)||t.invoke(e)},w.OnDespawnFishHandler=function(e){var t;null==(t=this.OnDespawnFish)||t.invoke(e)},w.OnStartFishHandler=function(e){var t;null==(t=this.OnStartFish)||t.invoke(e)},w.OnCatchFishHandler=function(e){var t;null==(t=this.OnCatchFish)||t.invoke(e)},w.OnSpawnBulletHandler=function(e){var t;null==(t=this.OnSpawnBullet)||t.invoke(e)},w.OnDespawnBulletHandler=function(e){var t;null==(t=this.OnDespawnBullet)||t.invoke(e)},w.CheckNormalBulletFire=function(e,t){return t instanceof c},w.CheckLockBulletFire=function(e,t){var n=t;return this.FishMgr.CheckFishIDHitable(n.FishID)},w.CheckThroughBulletFire=function(e,t){return t instanceof f},w.CheckMeteorBulletFire=function(e,t){return t instanceof F},w.CheckMissileBulletFire=function(e,t){return t instanceof p},w.CheckBouncyBulletFire=function(e,t){return t instanceof g},w.OnNormalBulletFire=function(e){e.Info},w.OnLockBulletFire=function(e){var t=e.Info,n=this.FishMgr.GetSpawnedObject(t.FishID);e.CatchInfo=this.GenCatchInfo(e,n)},w.OnThroughBulletFire=function(e){e.Info},w.OnMeteorBulletFire=function(e){e.Info},w.OnMissileBulletFire=function(e){e.Info},w.OnBouncyBulletFire=function(e){e.Info},w.OnNormalBulletUpdate=function(e){var t=e.Info,i=v.CalculatePose(t.PosX,t.PosY,t.Direction,this.FixedUpdateTime,M.Speed,M.Radius,r.Width,r.Height);t.PosX=i[0],t.PosY=i[1],t.Direction=i[2];for(var o,a=this.FishMgr.GetSpawnedObjects(),s=n(a);!(o=s()).done;){var l=o.value;if(this.CheckFishCatchable(e,l)&&l.HitTest(t.PosX,t.PosY,M.Radius)){this.ProcessCatchFish(e,l),this.BulletMgr.despawn(e);break}}},w.OnLockBulletUpdate=function(e){var t=e.Info,n=this.FishMgr.GetSpawnedObject(t.FishID);this.CheckFishCatchable(e,n)?this.ProcessCatchFish(e,n):null==n&&console.error("OnLockBulletUpdate. Frame: "+this.Frame+", BulletID: "+e.SerialNumber+" FortID: "+e.FortID+" FishID: "+t.FishID+" not found."),this.BulletMgr.despawn(e)},w.OnThroughBulletUpdate=function(e){var t=e.Info,i=t.Source,o=v.CalculatePose(t.PosX,t.PosY,t.Direction,this.FixedUpdateTime,S.Speed,S.Radius,r.Width,r.Height);t.PosX=o[0],t.PosY=o[1],t.Direction=o[2];var a=this.FortMgr.Forts[e.FortID],s=a.CurrentSpecialBulletInfo;if(null!=a&&null!=s&&null!=i){for(var l,u=this.FishMgr.GetSpawnedObjects(),h=n(u);!(l=h()).done;){var d=l.value;if(!(i.RemainHitCount>=s.RemainHitCount&&s.RemainHitCount>0))break;W.IsSpecialFish(d.FishOdds.FishKind)||this.CheckFishCatchable(e,d)&&d.HitTest(t.PosX,t.PosY,S.Radius)&&(s.RemainHitCount--,this.ProcessCatchFish(e,d))}s.RemainHitCount<=0&&(this.ProcessHoldSpecialBullet(e),this.BulletMgr.despawn(e))}else this.BulletMgr.despawn(e)},w.OnMeteorBulletUpdate=function(e){var t=e.Info,i=t.Source;if(t.CurrentFixedUpdateCount++,!(t.CurrentFixedUpdateCount<=m.DelayMaxFixedUpdate)){var o=this.FortMgr.Forts[e.FortID],r=o.CurrentSpecialBulletInfo;if(null!=o&&null!=r&&null!=i){for(var a,s=r.RemainHitCount<m.MaxHitPerFixedUpdate?r.RemainHitCount:m.MaxHitPerFixedUpdate,l=this.FishMgr.GetSpawnedObjects(),u=n(l);!(a=u()).done;){var h=a.value;if(!(i.RemainHitCount>=r.RemainHitCount&&r.RemainHitCount>0&&s>0))break;W.IsSpecialFish(h.FishOdds.FishKind)||this.CheckFishCatchable(e,h)&&h.HitTest(t.PosX,t.PosY,m.Radius)&&(r.RemainHitCount--,s--,this.ProcessCatchFish(e,h))}r.RemainHitCount<=0&&this.ProcessHoldSpecialBullet(e),this.BulletMgr.despawn(e)}else this.BulletMgr.despawn(e)}},w.OnMissileBulletUpdate=function(e){var t=e.Info,i=t.Source;if(t.CurrentFixedUpdateCount++,!(t.CurrentFixedUpdateCount<=I.DelayMaxFixedUpdate)){var o=this.FortMgr.Forts[e.FortID],r=o.CurrentSpecialBulletInfo;if(null!=o&&null!=r&&null!=i){for(var a,s=r.RemainHitCount<I.MaxHitPerFixedUpdate?r.RemainHitCount:I.MaxHitPerFixedUpdate,l=this.FishMgr.GetSpawnedObjects(),u=n(l);!(a=u()).done;){var h=a.value;if(!(i.RemainHitCount>=r.RemainHitCount&&r.RemainHitCount>0&&s>0))break;W.IsSpecialFish(h.FishOdds.FishKind)||this.CheckFishCatchable(e,h)&&h.HitTest(t.PosX,t.PosY,I.Radius)&&(r.RemainHitCount--,s--,this.ProcessCatchFish(e,h))}r.RemainHitCount<=0&&this.ProcessHoldSpecialBullet(e),this.BulletMgr.despawn(e)}else this.BulletMgr.despawn(e)}},w.OnBouncyBulletUpdate=function(e){var t=e.Info,i=t.Source,o=v.CalculatePose(t.PosX,t.PosY,t.Direction,this.FixedUpdateTime,O.Speed,O.Radius,r.Width,r.Height);t.PosX=o[0],t.PosY=o[1],t.Direction=o[2];var a=this.FortMgr.Forts[e.FortID],s=a.CurrentSpecialBulletInfo;if(null!=a&&null!=s&&null!=i){for(var l,u=this.FishMgr.GetSpawnedObjects(),h=n(u);!(l=h()).done;){var d=l.value;if(!(i.RemainHitCount>=s.RemainHitCount&&s.RemainHitCount>0))break;if(!W.IsSpecialFish(d.FishOdds.FishKind)&&this.CheckFishCatchable(e,d)&&d.HitTest(t.PosX,t.PosY,O.Radius)){if(s.RemainHitCount--,d.Rank>=O.HitRank){var c=v.ReflectDirection(t.Direction,d.Direction);t.Direction=c}this.ProcessCatchFish(e,d)}}s.RemainHitCount<=0&&(this.ProcessHoldSpecialBullet(e),this.BulletMgr.despawn(e))}else this.BulletMgr.despawn(e)},w.ProcessHoldSpecialBullet=function(e){var t=this.FortMgr.TryGetFortByPlayerID(e.PlayerID);if(t.Success){var n=t.Fort;if(n.UsingSpecialBullet){var i,o=n.CurrentSpecialBulletInfo;if(o.BulletKind==e.BulletKind)n.SpecialBulletScore=0,n.CurrentSpecialBulletInfo=null,null==(i=this.OnSpecialBulletFinish)||i.invoke(e,o);else console.error("Hold BulletKind: "+o.BulletKind+" not equal to BulletKind: "+e.BulletKind+".")}else console.error("Fort: "+n.ID+" is not using special bullet or bullet kind not equal to current special bullet kind.")}else console.error("Fort: "+e.FortID+" not found.")},w.OnSilentUpdateAction=function(){var e;console.info("Room<"+this.No+"> Silent Update Room Data, FixedUpdateCount: "+this.FixedUpdateCount),null==(e=this.OnSilentUpdate)||e.invoke()},w.OnUnlockJoinRoomAction=function(){var e;console.info("Room<"+this.No+"> Player can join this room now, FixedUpdateCount: "+this.FixedUpdateCount),null==(e=this.OnUnlockJoinRoom)||e.invoke()},w.SetActivity=function(e){var t;if(null!=e){for(var i,o=n(e.ActivityData);!(i=o()).done;){var r=i.value;null==r[1]?this.WaveMgr.ActivityData.delete(r[0])||console.info("WaveIndex : "+r[0]+" Can Not Remove"):this.WaveMgr.ActivityData.has(r[0])?console.info("WaveIndex : "+r[0]+" Is Already On"):this.WaveMgr.ActivityData.set(r[0],r[1])}null==(t=this.OnSetActivityData)||t.invoke(this.WaveMgr.ActivityData)}},i(r,[{key:"CurrentPlayerCount",get:function(){return this.FortMgr.CurrentPlayerCount}},{key:"EmptyFort",get:function(){return r.MaxPlayerCount-this.CurrentPlayerCount}},{key:"HitCount",get:function(){return this._hitCount},set:function(e){this._hitCount=e}},{key:"BetRegionInfo",get:function(){return this._betRegionInfo},set:function(e){this._betRegionInfo=e}},{key:"FixedUpdateTime",get:function(){return this._fixedUpdateTime}},{key:"ScaledFixedUpdateTime",get:function(){return this._fixedUpdateTime*this.TickSpeedUp}},{key:"WaveDatas",get:function(){return this.WaveMgr.WaveDatas}},{key:"WaveTable",get:function(){return this.WaveMgr.WaveTable}},{key:"BgBonusTable",get:function(){return this.WaveMgr.BgBonusTable}},{key:"ActivityData",get:function(){return this.WaveMgr.ActivityData}}]),r}(w));A=G,G.MaxPlayerCount=3,G.Width=1280,G.Height=720,G.Center={X:A.Width/2,Y:A.Height/2},G.FortOffset={X:350,Y:340},G.FortPositions=[{X:A.Center.X-A.FortOffset.X,Y:A.Center.Y-A.FortOffset.Y},{X:A.Center.X,Y:A.Center.Y-A.FortOffset.Y},{X:A.Center.X+A.FortOffset.X,Y:A.Center.Y-A.FortOffset.Y}],r._RF.pop()}}}));

System.register("chunks:///_virtual/RoomBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action2.ts"],(function(e){var t,i,a,n,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,i=e.createClass},function(e){a=e.cclegacy},function(e){n=e.ActionWithOne,r=e.Action}],execute:function(){a._RF.push({},"4723fTwSrlEeI5CewoPOOWo","RoomBase",void 0);e("RoomBase",function(){function e(e,t,i){void 0===t&&(t=5),void 0===i&&(i=100),this.PerFrameTime=void 0,this.MaxFrameCount=void 0,this.FixedUpdateCountPerFrame=void 0,this.OnPreFrameUpdate=new n,this.OnPostFrameUpdate=new n,this.OnFinish=new r,this._playFrames=new Map,this._frame=0,this._maxFixedUpdateCount=0,this._fixedUpdateCount=0,this.PerFrameTime=i,this.MaxFrameCount=e,this.FixedUpdateCountPerFrame=t}var a=e.prototype;return a.Dispose=function(){this.OnDispose(),this.Reset(),this.OnPostFrameUpdate=null,this.OnPreFrameUpdate=null,this.OnFinish=null},a.SetRoomInfo=function(e){if(this.Frame=e.Frame,this.FixedUpdateCount!==this.MaxFixedUpdateCount)throw new Error("FixedUpdateCount("+this.FixedUpdateCount+") is not equal MaxFixedUpdateCount("+this.MaxFixedUpdateCount+")");this.OnSetRoomInfo(e)},a.GetRoomInfo=function(){if(this.FixedUpdateCount===this.MaxFixedUpdateCount){var e=this.OnGetRoomInfo();return e.Frame=this.Frame,e}throw new Error("FixedUpdateCount("+this.FixedUpdateCount+") is not equal MaxFixedUpdateCount("+this.MaxFixedUpdateCount+")")},a.AddFrameInfo=function(e,t){null!=t&&this._playFrames.set(e,t)},a.AddFrameInfos=function(e){for(var i,a=t(e);!(i=a()).done;){var n=i.value,r=n[0],s=n[1];this._playFrames.set(r,s)}},a.GetFrameInfos=function(){return new Map(this._playFrames)},a.ClearFrameInfos=function(){this._playFrames.clear()},a.GetNextFrameInfo=function(){var e=null;return this._playFrames.has(this._frame)?e=this._playFrames.get(this._frame):((e=this.FrameInfoCreator()).Frame=this._frame,this._playFrames.set(this._frame,e)),e},a.Reset=function(){this.Frame=0,this._playFrames.clear()},a.PlayTo=function(e){for(;this.Frame<e;)this.FrameUpdate();this.CompleteFixedUpdate()},a.FixedUpdate=function(){if(this.FixedUpdateCount<this.MaxFixedUpdateCount){try{this.OnFixedUpdate()}catch(e){console.error(e)}finally{this.FixedUpdateCount++}return!0}return!1},a.CompleteFixedUpdate=function(){for(;this.FixedUpdate(););},a.FrameUpdate=function(){this.CompleteFixedUpdate(),this.IsFinished&&this.OnFinish.invoke();var e=this._frame,t=null;this._playFrames.has(e)?(t=this._playFrames.get(e),this._playFrames.delete(e)):(t=this.FrameInfoCreator()).Frame=this._frame;try{var i;null==(i=this.OnPreFrameUpdate)||i.invoke(t),this.OnFrameUpdate(t)}catch(e){console.error(e)}finally{var a;this._frame++,this.MaxFixedUpdateCount+=this.FixedUpdateCountPerFrame,null==(a=this.OnPostFrameUpdate)||a.invoke(t)}},a.OnDispose=function(){},i(e,[{key:"IsFinished",get:function(){return!(this._frame<this.MaxFrameCount)}},{key:"Frame",get:function(){return this._frame},set:function(e){this._frame=e,this.FixedUpdateCount=this.MaxFixedUpdateCount=e*this.FixedUpdateCountPerFrame}},{key:"MaxFixedUpdateCount",get:function(){return this._maxFixedUpdateCount},set:function(e){this._maxFixedUpdateCount=e}},{key:"FixedUpdateCount",get:function(){return this._fixedUpdateCount},set:function(e){this._fixedUpdateCount=e}},{key:"HavePlayFrame",get:function(){return this._playFrames.size>0}},{key:"EndPlayFrame",get:function(){if(this._playFrames.size>0){for(var e,i=-1,a=t(this._playFrames.keys());!(e=a()).done;){var n=e.value;n>i&&(i=n)}return i}return-1}}]),e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/RoomController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Room.ts","./InputInfo.ts","./BetChange.ts","./ExitRequest.ts","./FireLock.ts","./FireNormal.ts","./PlayerInfo.ts","./Action2.ts","./BetRegion.ts","./GMChangeTickSpeedUpReq.ts","./GMSpawnFishReq.ts"],(function(e){var t,o,n,i,r,s,a,u,l,h,c,p,f,m,d,F,R,I,y,_,v,x,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){a=e.cclegacy,u=e._decorator,l=e.TextAsset,h=e.Node,c=e.Component},function(e){p=e.Room},function(e){f=e.InputInfo},function(e){m=e.BetChange},function(e){d=e.ExitRequest},function(e){F=e.FireLock},function(e){R=e.FireNormal},function(e){I=e.PlayerInfo},function(e){y=e.ActionWithTwo,_=e.ActionWithThree},function(e){v=e.BetRegion},function(e){x=e.GMChangeTickSpeedUpReq},function(e){C=e.GMSpawnFishReq}],execute:function(){var P,g,S,T,U,w,q,k,b,A,G;a._RF.push({},"a59981x2pRJyb3jdZcInB3M","RoomController",void 0);var M=u.ccclass,D=u.property;e("RoomController",(P=M("RoomController"),g=D(l),S=D(h),P((w=t((U=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"IsGotchRoom",w,i(t)),n(t,"FixedUpdateCountPerFrame",q,i(t)),n(t,"PerFrameTime",k,i(t)),n(t,"TickSpeedUp",b,i(t)),n(t,"ReplayDataFile",A,i(t)),n(t,"ActiveAfterStart",G,i(t)),t.OnFrameUpdate=new y,t.OnJoinRoom=new y,t.OnExitRoom=new _,t.ReplayData=null,t.Password=void 0,t.RoomInfo=null,t._room=void 0,t._lastFrameInfo=void 0,t._lastInputInfo=void 0,t._joinRequestCount=0,t._playerToFortIndex=new Map,t._isRunning=!1,t._roomStatusChecker=null,t._no=void 0,t}o(t,e);var a=t.prototype;return a.onLoad=function(){for(var e,t=r(this.ActiveAfterStart);!(e=t()).done;){e.value.active=!1}},a.start=function(){this.node.active=!1},a.StartRoom=function(e){if(void 0===e&&(e=.1),!this._isRunning){this._isRunning=!0;var t=this.PerFrameTime*this.TickSpeedUp/1e3;this.schedule(this.FixedUpdate,t/this.FixedUpdateCountPerFrame,Number.MAX_SAFE_INTEGER,e),console.log("RoomController.StartRoom")}},a.StopRoom=function(){this._isRunning&&(this.unschedule(this.FixedUpdate),console.log("RoomController.StopRoom"))},a.TryJoinRoom=function(e,t,o){if(this.IsEmpty&&(this.Room.BetRegionInfo=v.GetInfo(o)),this._room.EmptyFort<this._joinRequestCount)return console.warn("Room has no more forts for player: "+e+"."),!1;if(this._playerToFortIndex.has(e))return console.warn("PlayerID: "+e+" already exists."),!1;this.StartRoom();var n=new I;return n.PlayerID=e,n.Coin=t,this._lastInputInfo.JoinRequests.push(n),this._joinRequestCount++,!0},a.ExitRoom=function(e){var t=this;this.PlayerInput(e,(function(e){t.AddFortRequest(e,new d)}))},a.ChangeBet=function(e,t){var o=this;this.PlayerInput(e,(function(e){var n=new m;n.Bet=t,o.AddFortRequest(e,n)}))},a.FireLockBullet=function(e,t){var o=this;this.PlayerInput(e,(function(e){var n=new F;n.FishID=t,o.SetFortFireRequest(e,n)}))},a.FireNormalBullet=function(e,t){var o=this;this.PlayerInput(e,(function(e){var n=new R;n.Direction=t,o.SetFortFireRequest(e,n)}))},a.GMGMChangeTickSpeedUp=function(e,t){this.PlayerInput(e,function(e){var o=new x;o.TickSpeedUp=t,this.SetFortFireRequest(e,o)}.bind(this))},a.GMSpawnFish=function(e,t,o){this.PlayerInput(e,function(e){var n=new C;n.FishType=t,n.PathIndex=o,this.SetFortFireRequest(e,n)}.bind(this))},a.AddFortRequest=function(e,t){var o,n;(null!=(n=(o=this._lastInputInfo.FortRequests)[e])?n:o[e]=[]).push(t)},a.SetFortFireRequest=function(e,t){null!=this._lastInputInfo.FortFireRequests[e]&&console.warn("Fort: "+e+" fire request is not null."),this._lastInputInfo.FortFireRequests[e]=t},a.PlayerInput=function(e,t){if(null==this.ReplayData){var o=this._playerToFortIndex.get(e);null!=o?t(o):console.error("Player: "+e+" exits failed")}else console.warn("Try to input in replay mode")},a.AddNextFrameInfo=function(){this._lastFrameInfo=this._room.GetNextFrameInfo(),this._lastFrameInfo.Frame=this._room.Frame;var e=new f;e.FortRequests=[null,null,null,null],e.FortFireRequests=[null,null,null,null],e.CatchResults=[],e.JoinRequests=[],this._lastFrameInfo.Info=e,this._lastInputInfo=e},a.FixedUpdate=function(){if(!this._room.IsFinished){if(this._room.FixedUpdateCount==this._room.MaxFixedUpdateCount)if(null==this.ReplayData){this.RoomInfo=this._room.GetRoomInfo(),this._room.FrameUpdate();var e=this._lastFrameInfo;this.AddNextFrameInfo(),this.OnFrameUpdate.invoke(e,this)}else{this.RoomInfo=this._room.GetRoomInfo();var t=this._room.Frame,o=this.ReplayData.FrameInfos[t];this._room.AddFrameInfo(t,o),this._room.FrameUpdate(),this.OnFrameUpdate.invoke(o,this)}this._room.FixedUpdateCount<this._room.MaxFixedUpdateCount&&this._room.FixedUpdate()}},a.OnPlayerJoin=function(e,t){this._joinRequestCount--,-1!=t?(this._playerToFortIndex.set(e.PlayerID,t),console.log("Player: "+e.PlayerID+" joins on fort: "+t),this.OnJoinRoom.invoke(e,t)):console.error("Player: "+e.PlayerID+" joins failed")},a.OnPlayerExit=function(e,t,o){this._playerToFortIndex.delete(e),console.log("Player: "+e+" exits from fort: "+t),0==this._playerToFortIndex.size&&(this.Password=0),this.OnExitRoom.invoke(e,t,o)},a.OnTickSpeedUp=function(e){this.GMOnTickSpeedUp(e)},a.GMOnTickSpeedUp=function(e){this.unschedule(this.FixedUpdate),this.TickSpeedUp=e;var t=this.PerFrameTime*this.TickSpeedUp/1e3;this.schedule(this.FixedUpdate,t/this.FixedUpdateCountPerFrame,Number.MAX_SAFE_INTEGER)},s(t,[{key:"Room",get:function(){return this._room}},{key:"IsFull",get:function(){return this.Room.CurrentPlayerCount+this._joinRequestCount>=p.MaxPlayerCount}},{key:"IsEmpty",get:function(){return this.Room.CurrentPlayerCount+this._joinRequestCount==0}},{key:"No",get:function(){return this._no},set:function(e){this._no=e}},{key:"BetRegionInfo",get:function(){return this.Room.BetRegionInfo}}]),t}(c)).prototype,"IsGotchRoom",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=t(U.prototype,"FixedUpdateCountPerFrame",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),k=t(U.prototype,"PerFrameTime",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),b=t(U.prototype,"TickSpeedUp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=t(U.prototype,"ReplayDataFile",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(U.prototype,"ActiveAfterStart",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=U))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/RoomData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./FishAttribute.ts","./FishCollision2.ts","./FishOddsAttribute.ts","./PathAttributeData.ts","./PathSpeedData.ts","./WaveAttribute2.ts"],(function(e){var r,t,i,a,n,o,s,u,l;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){a=e.FishAttribute},function(e){n=e.FishCollision},function(e){o=e.FishOddsAttribute},function(e){s=e.PathAttributeData},function(e){u=e.PathSpeedData},function(e){l=e.WaveAttribute}],execute:function(){r._RF.push({},"2c068Klz7pLIas9DywiE9hS","RoomData",void 0);e("RoomData",function(){function e(){this.FishData=void 0,this.CollisionData=void 0,this.OddsData=void 0,this.PathData=void 0,this.SpeedData=void 0,this.WaveAttribute=void 0,this.FishData=null,this.CollisionData=null,this.OddsData=null,this.PathData=null,this.SpeedData=null,this.WaveAttribute=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeArray(r.FishData,(function(e,r){return a.serializeCore(e,r)})),e.writeMap(r.CollisionData,(function(e,r){return e.writeInt32(r)}),(function(e,r){return n.serializeCore(e,r)})),e.writeArray(r.OddsData,(function(e,r){return o.serializeCore(e,r)})),s.serializeCore(e,r.PathData),u.serializeCore(e,r.SpeedData),l.serializeCore(e,r.WaveAttribute)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],d=t[1];if(!i)return null;var c=new e;if(6==d)c.FishData=r.readArray((function(e){return a.deserializeCore(e)})),c.CollisionData=r.readMap((function(e){return e.readInt32()}),(function(e){return n.deserializeCore(e)})),c.OddsData=r.readArray((function(e){return o.deserializeCore(e)})),c.PathData=s.deserializeCore(r),c.SpeedData=u.deserializeCore(r),c.WaveAttribute=l.deserializeCore(r);else{if(d>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==d)return c;if(c.FishData=r.readArray((function(e){return a.deserializeCore(e)})),1==d)return c;if(c.CollisionData=r.readMap((function(e){return e.readInt32()}),(function(e){return n.deserializeCore(e)})),2==d)return c;if(c.OddsData=r.readArray((function(e){return o.deserializeCore(e)})),3==d)return c;if(c.PathData=s.deserializeCore(r),4==d)return c;if(c.SpeedData=u.deserializeCore(r),5==d)return c;if(c.WaveAttribute=l.deserializeCore(r),6==d)return c}return c},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RoomDisconnectHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ServiceManager.ts","./ConnectManager.ts","./GeneralPopup.ts","./UIGeneralPopup.ts","./L10nKeyConfig.ts","./FishStopReasopn.ts"],(function(n){var e,o,t,c,i,s,a,r,u,p;return{setters:[function(n){e=n.inheritsLoose},function(n){o=n.cclegacy,t=n._decorator,c=n.Component},function(n){i=n.ServiceManager},function(n){s=n.StopReason},function(n){a=n.GeneralPopup},function(n){r=n.GeneralPopupType},function(n){u=n.SystemMessageType},function(n){p=n.FishStopReasopn}],execute:function(){var l;o._RF.push({},"f05fd8elypF06PEaMSCPhUy","RoomDisconnectHandler",void 0);var d=t.ccclass;n("RoomDisconnectedHandler",d("RoomDisconnectedHandler")(l=function(n){function o(){return n.apply(this,arguments)||this}e(o,n);var t=o.prototype;return t.onLoad=function(){this.onDisconnectedAction=this.onDisconnectedAction.bind(this),i.instance().roomService.onDisconnected(this.onDisconnectedAction)},t.onDestroy=function(){i.instance().roomService.offDisconnected(this.onDisconnectedAction)},t.start=function(){i.instance().roomService.isDisconnected&&this.onDisconnectedAction(i.instance().roomService.LastStopReason)},t.onDisconnectedAction=function(n){var e,o;switch(console.warn("RoomService disconnected: "+n),n){case s.Disconnect:e=u.generalPopup_Maintenance,o="H5F/GeneralPopup/Maintenance";break;case p.IdleTimeout:e=u.generalPopup_RoomIdleTimeout,o="H5F/GeneralPopup/RoomIdleTimeout";break;default:e=u.generalPopup_RoomDisconnect,o="H5F/GeneralPopup/RoomDisconnect"}a.open(e,o,a.defaultTitle,r.NoButton,null,n)},o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/RoomFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BetLevel.ts","./BetRegion.ts"],(function(t){var e,a,s,n;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy},function(t){s=t.BetLevel},function(t){n=t.BetRegion}],execute:function(){a._RF.push({},"5117aTuE0xBqqImBjHG7pGX","RoomFactory",void 0);t("RoomFactory",function(){function t(t,e){this._payload=null,this._fishCollisionDatas=null,this._pathDatas=null,this._pathSpeedDatas=null,this._waveDatas=null,this._waveInfos=null,this._waveTable=null,this._bgBonusTable=null,this._bonusFrequencyDatas=null,this._themeSettingDatas=null,this._backgroundTimeDatas=null,this._fishOddsDatas=null,this._uiAutoDatas=null,this._betLevelHelper=null,this._payload=e,this._pathDatas=t.PathDatas,this._pathSpeedDatas=t.PathSpeedDatas,this._betLevelHelper=t.BetLevelHelper,this._fishCollisionDatas=t.FishCollisionDatas,this._fishOddsDatas=t.FishOddsDatas,this._uiAutoDatas=t.UIAutoDatas,this._bonusFrequencyDatas=t.BonusFrequencyDatas,this._themeSettingDatas=t.ThemeSettingDatas,this._backgroundTimeDatas=t.BackgroundTimeDatas,this._waveDatas=t.WaveDatas,this._waveInfos=t.WaveInfos,this._waveTable=t.WaveTable,this._bgBonusTable=t.BgBonusTable,s.LoadBetInfo(this.BetLevelHelper),n.LoadRegionInfo(this.BetLevelHelper)}return e(t,[{key:"Payload",get:function(){return this._payload}},{key:"FishCollisionDatas",get:function(){return this._fishCollisionDatas}},{key:"PathDatas",get:function(){return this._pathDatas}},{key:"PathSpeedDatas",get:function(){return this._pathSpeedDatas}},{key:"WaveDatas",get:function(){return this._waveDatas}},{key:"WaveInfos",get:function(){return this._waveInfos}},{key:"WaveTable",get:function(){return this._waveTable}},{key:"BgBonusTable",get:function(){return this._bgBonusTable}},{key:"BonusFrequencyDatas",get:function(){return this._bonusFrequencyDatas}},{key:"ThemeSettingDatas",get:function(){return this._themeSettingDatas}},{key:"BackgroundTimeDatas",get:function(){return this._backgroundTimeDatas}},{key:"FishOddsDatas",get:function(){return this._fishOddsDatas}},{key:"UIAutoDatas",get:function(){return this._uiAutoDatas}},{key:"BetLevelHelper",get:function(){return this._betLevelHelper}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/RoomInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./RoundInfo.ts","./RoundGroup.ts","./PlayerInfo.ts","./FishInfo.ts","./BulletInfo.ts","./BetRegionInfo.ts"],(function(e){var r,i,t,n,o,a,u,s,d;return{setters:[function(e){r=e.cclegacy},function(e){i=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){n=e.RoundInfo},function(e){o=e.RoundGroup},function(e){a=e.PlayerInfo},function(e){u=e.FishInfo},function(e){s=e.BulletInfo},function(e){d=e.BetRegionInfo}],execute:function(){r._RF.push({},"42473BPRpBEr5NCeiwdqDgi","RoomInfo",void 0);e("RoomInfo",function(){function e(){this.RoomNo=void 0,this.Password=void 0,this.TickSpeedUp=void 0,this.RandomSeed=void 0,this.HitCount=void 0,this.Frame=void 0,this.RoundInfo=void 0,this.RoundGroup=void 0,this.PlayerInfos=void 0,this.FishSpawnNumber=void 0,this.Fishes=void 0,this.BulletSpawnNumber=void 0,this.Bullets=void 0,this.BetRegionInfo=void 0,this.ActivityData=void 0,this.RoomNo=0,this.Password=0,this.TickSpeedUp=0,this.RandomSeed=0,this.HitCount=0,this.Frame=0,this.RoundInfo=null,this.RoundGroup=null,this.PlayerInfos=null,this.FishSpawnNumber=0,this.Fishes=null,this.BulletSpawnNumber=0,this.Bullets=null,this.BetRegionInfo=null,this.ActivityData=null}return e.serialize=function(e){var r=i.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(15),e.writeUint16(r.RoomNo),e.writeUint16(r.Password),e.writeFloat32(r.TickSpeedUp),e.writeUint32(r.RandomSeed),e.writeUint32(r.HitCount),e.writeUint32(r.Frame),n.serializeCore(e,r.RoundInfo),o.serializeCore(e,r.RoundGroup),e.writeArray(r.PlayerInfos,(function(e,r){return a.serializeCore(e,r)})),e.writeUint32(r.FishSpawnNumber),e.writeArray(r.Fishes,(function(e,r){return u.serializeCore(e,r)})),e.writeUint32(r.BulletSpawnNumber),e.writeArray(r.Bullets,(function(e,r){return s.serializeCore(e,r)})),d.serializeCore(e,r.BetRegionInfo),e.writeMap(r.ActivityData,(function(e,r){return e.writeInt32(r)}),(function(e,r){return e.writeArray(r,(function(e,r){return e.writeInt32(r)}))}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=i.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,i){r.writeArray(i,(function(r,i){return e.serializeCore(r,i)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var i=r.tryReadObjectHeader(),t=i[0],l=i[1];if(!t)return null;var f=new e;if(15==l)f.RoomNo=r.readUint16(),f.Password=r.readUint16(),f.TickSpeedUp=r.readFloat32(),f.RandomSeed=r.readUint32(),f.HitCount=r.readUint32(),f.Frame=r.readUint32(),f.RoundInfo=n.deserializeCore(r),f.RoundGroup=o.deserializeCore(r),f.PlayerInfos=r.readArray((function(e){return a.deserializeCore(e)})),f.FishSpawnNumber=r.readUint32(),f.Fishes=r.readArray((function(e){return u.deserializeCore(e)})),f.BulletSpawnNumber=r.readUint32(),f.Bullets=r.readArray((function(e){return s.deserializeCore(e)})),f.BetRegionInfo=d.deserializeCore(r),f.ActivityData=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return e.readInt32()}))}));else{if(l>15)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==l)return f;if(f.RoomNo=r.readUint16(),1==l)return f;if(f.Password=r.readUint16(),2==l)return f;if(f.TickSpeedUp=r.readFloat32(),3==l)return f;if(f.RandomSeed=r.readUint32(),4==l)return f;if(f.HitCount=r.readUint32(),5==l)return f;if(f.Frame=r.readUint32(),6==l)return f;if(f.RoundInfo=n.deserializeCore(r),7==l)return f;if(f.RoundGroup=o.deserializeCore(r),8==l)return f;if(f.PlayerInfos=r.readArray((function(e){return a.deserializeCore(e)})),9==l)return f;if(f.FishSpawnNumber=r.readUint32(),10==l)return f;if(f.Fishes=r.readArray((function(e){return u.deserializeCore(e)})),11==l)return f;if(f.BulletSpawnNumber=r.readUint32(),12==l)return f;if(f.Bullets=r.readArray((function(e){return s.deserializeCore(e)})),13==l)return f;if(f.BetRegionInfo=d.deserializeCore(r),14==l)return f;if(f.ActivityData=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return e.readInt32()}))})),15==l)return f}return f},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RoomInfoAck.ts",["cc"],(function(c){var o;return{setters:[function(c){o=c.cclegacy}],execute:function(){o._RF.push({},"d69b3/s6sxCyo0Ht6cHBSI4","RoomInfoAck",void 0);c("RoomInfoAck",{Success:0,Fail:1});o._RF.pop()}}}));

System.register("chunks:///_virtual/RoomStatusChecker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WaveKind.ts"],(function(o){var i,t,n;return{setters:[function(o){i=o.createForOfIteratorHelperLoose},function(o){t=o.cclegacy},function(o){n=o.WaveKind}],execute:function(){t._RF.push({},"043faElUOlOP71QBfqaZA7M","RoomStatusChecker",void 0);o("RoomStatusChecker",function(){function o(o){this._bgFishTable=null,this._room=null,this.onSpawnFishAction=this.onSpawnFishAction.bind(this),this.onStartFishAction=this.onStartFishAction.bind(this),this._room=o,this._room.OnSpawnFish.add(this.onSpawnFishAction),this._room.OnStartFish.add(this.onStartFishAction),this.InitBgFishTable()}var t=o.prototype;return t.InitBgFishTable=function(){this._bgFishTable=new Map;for(var o,t=i(this._room.BgBonusTable);!(o=t()).done;){var n=o.value,s=n[0],e=new Set;this._bgFishTable.set(s,e);for(var a,r=i(n[1]);!(a=r()).done;)for(var h,l=a.value,u=i(l[1]);!(h=u()).done;){var c=h.value,v=this._room.WaveTable.get(c);if(null!=v)for(var f,F=i(v.Infos);!(f=F()).done;)for(var d,p=f.value,g=i(p.Fishs);!(d=g()).done;){var b=d.value;e.has(b.FishType)||e.add(b.FishType)}}}},t.onSpawnFishAction=function(o){},t.onStartFishAction=function(o){if(o.WaveKind!==n.Normal&&null!=this._room.WaveMgr&&null!=this._room.WaveMgr.Info){var i=this._room.WaveMgr.Info.ID;this._bgFishTable.get(i).has(o.FishID)||console.error("fish<"+o.FishID+"> appear in wrong bg, "+o.WaveKind)}},o}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RoomStatusCheckManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./RoomStatusChecker.ts","./FishDebugInfoGenerator.ts","./Action2.ts","./CollisionDebugInfoGenerator.ts","./ClientAgent.ts","./GameConfig.ts"],(function(n){var o,t,e,i,s,c,u,a,l,h,f,r,I,D,g,_,A,b,S;return{setters:[function(n){o=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized,s=n.createClass},function(n){c=n.cclegacy,u=n._decorator,a=n.Prefab,l=n.find,h=n.Component},function(n){f=n.MessageManager},function(n){r=n.MessageCmd},function(n){I=n.RoomStatusChecker},function(n){D=n.FishDebugInfoGenerator},function(n){g=n.ActionWithOne,_=n.ActionWithTwo},function(n){A=n.CollisionDebugInfoGenerator},function(n){b=n.ClientAgent},function(n){S=n.GameConfig}],execute:function(){var p,w,F,v,d,C,N;c._RF.push({},"032e5UO/hNDzJBu+b4mgn1f","RoomStatusCheckManager",void 0);var m=u.ccclass,B=u.property;n("RoomStatusCheckManager",(p=m("RoomStatusCheckManager"),w=B({type:a,visible:!0}),F=B({type:a,visible:!0}),p((C=o((d=function(n){function o(){for(var o,t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return o=n.call.apply(n,[this].concat(s))||this,e(o,"_fishDebugInfoPrefab",C,i(o)),e(o,"_collisionDebugInfoPrefab",N,i(o)),o._onSpawnFishNode=new g,o._onDespawnFish=new g,o._onSpawnBullet=new _,o._onDespawnBullet=new _,o._onSetFishDebugInfoActive=new g,o._onSetCollisionDebugInfoActive=new g,o._room=null,o._roomStatusChecker=null,o._fishDebugInfoGenerator=null,o._fishDebugInfoRoot=null,o._collisionDebugInfoGenerator=null,o._collisionDebugInfoRoot=null,o}t(o,n);var c=o.prototype;return c.onLoad=function(){this.onJoinRoomAction=this.onJoinRoomAction.bind(this),this.onSpawnFishNodeAction=this.onSpawnFishNodeAction.bind(this),this.onDespawnFishAction=this.onDespawnFishAction.bind(this),this.onSpawnBulletAction=this.onSpawnBulletAction.bind(this),this.onDespawnBulletAction=this.onDespawnBulletAction.bind(this),this.onSetFishDebugInfoActiveAction=this.onSetFishDebugInfoActiveAction.bind(this),this.onSetCollisionDebugInfoActiveAction=this.onSetCollisionDebugInfoActiveAction.bind(this),this.onFixedUpdateAction=this.onFixedUpdateAction.bind(this),this._fishDebugInfoGenerator=new D(this),this._collisionDebugInfoGenerator=new A(this),f.Instance.on(r.ON_JOIN_ROOM,this.onJoinRoomAction),f.Instance.on(r.ON_SPAWN_FISH_NODE,this.onSpawnFishNodeAction),f.Instance.on(r.ON_DESPAWN_FISH,this.onDespawnFishAction),f.Instance.on(r.ON_SPAWN_BULLET,this.onSpawnBulletAction),f.Instance.on(r.ON_DESPAWN_BULLET,this.onDespawnBulletAction),f.Instance.on(r.SET_FISHDEBUGINFO_ACTIVE,this.onSetFishDebugInfoActiveAction),f.Instance.on(r.SET_COLLISIONDEBUGINFO_ACTIVE,this.onSetCollisionDebugInfoActiveAction)},c.onDestroy=function(){f.Instance.off(r.SET_COLLISIONDEBUGINFO_ACTIVE,this.onSetCollisionDebugInfoActiveAction),f.Instance.off(r.SET_FISHDEBUGINFO_ACTIVE,this.onSetFishDebugInfoActiveAction),f.Instance.off(r.ON_DESPAWN_BULLET,this.onDespawnBulletAction),f.Instance.off(r.ON_SPAWN_BULLET,this.onSpawnBulletAction),f.Instance.off(r.ON_DESPAWN_FISH,this.onDespawnFishAction),f.Instance.off(r.ON_SPAWN_FISH_NODE,this.onSpawnFishNodeAction),f.Instance.off(r.ON_JOIN_ROOM,this.onJoinRoomAction)},c.start=function(){this._fishDebugInfoRoot=l("DebugScene/Canvas/Layer(DEBUG)/FishDebugInfo_Root"),this._collisionDebugInfoRoot=l("DebugScene/Canvas/Layer(DEBUG)/CollisionDebugInfo_Root")},c.onJoinRoomAction=function(n){this._room=n,this._roomStatusChecker=new I(this._room),S.config.checkRoomInfo&&this._room.OnFixedUpdateHandler.add(this.onFixedUpdateAction)},c.onSpawnFishNodeAction=function(n){var o;null==(o=this._onSpawnFishNode)||o.invoke(n)},c.onDespawnFishAction=function(n){var o;null==(o=this._onDespawnFish)||o.invoke(n)},c.onSpawnBulletAction=function(n,o){var t;null==(t=this._onSpawnBullet)||t.invoke(n,o)},c.onDespawnBulletAction=function(n,o){var t;null==(t=this._onDespawnBullet)||t.invoke(n,o)},c.onSetFishDebugInfoActiveAction=function(n){var o;null==(o=this._onSetFishDebugInfoActive)||o.invoke(n)},c.onSetCollisionDebugInfoActiveAction=function(n){var o;null==(o=this._onSetCollisionDebugInfoActive)||o.invoke(n)},c.onFixedUpdateAction=function(){var n=this._room.RefreshRoomInfo();b.Instance.CheckRoomInfo(this._room.FixedUpdateCount,n)},s(o,[{key:"onSpawnFishNode",get:function(){return this._onSpawnFishNode}},{key:"onDespawnFish",get:function(){return this._onDespawnFish}},{key:"onSpawnBullet",get:function(){return this._onSpawnBullet}},{key:"onDespawnBullet",get:function(){return this._onDespawnBullet}},{key:"onSetFishDebugInfoActive",get:function(){return this._onSetFishDebugInfoActive}},{key:"onSetCollisionDebugInfoActive",get:function(){return this._onSetCollisionDebugInfoActive}},{key:"fishDebugInfoPrefab",get:function(){return this._fishDebugInfoPrefab}},{key:"fishDebugInfoRoot",get:function(){return this._fishDebugInfoRoot}},{key:"collisionDebugInfoPrefab",get:function(){return this._collisionDebugInfoPrefab}},{key:"collisionDebugInfoRoot",get:function(){return this._collisionDebugInfoRoot}}]),o}(h)).prototype,"_fishDebugInfoPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=o(d.prototype,"_collisionDebugInfoPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/RoundGroup.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./RoundInfo.ts"],(function(e){var r,n,t,i;return{setters:[function(e){r=e.cclegacy},function(e){n=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){i=e.RoundInfo}],execute:function(){r._RF.push({},"a067aHCuMxDQJ5TKcJxqPK9","RoundGroup",void 0);e("RoundGroup",function(){function e(){this.ID=void 0,this.PrevID=void 0,this.NextID=void 0,this.RoundIndex=void 0,this.RoundInfos=void 0,this.TransFixedUpdateCount=void 0,this.ID=0,this.PrevID=0,this.NextID=0,this.RoundIndex=0,this.RoundInfos=null,this.TransFixedUpdateCount=0}return e.serialize=function(e){var r=n.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeInt32(r.ID),e.writeInt32(r.PrevID),e.writeInt32(r.NextID),e.writeInt32(r.RoundIndex),e.writeArray(r.RoundInfos,(function(e,r){return i.serializeCore(e,r)})),e.writeUint32(r.TransFixedUpdateCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=n.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,n){r.writeArray(n,(function(r,n){return e.serializeCore(r,n)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var n=r.tryReadObjectHeader(),t=n[0],o=n[1];if(!t)return null;var a=new e;if(6==o)a.ID=r.readInt32(),a.PrevID=r.readInt32(),a.NextID=r.readInt32(),a.RoundIndex=r.readInt32(),a.RoundInfos=r.readArray((function(e){return i.deserializeCore(e)})),a.TransFixedUpdateCount=r.readUint32();else{if(o>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.ID=r.readInt32(),1==o)return a;if(a.PrevID=r.readInt32(),2==o)return a;if(a.NextID=r.readInt32(),3==o)return a;if(a.RoundIndex=r.readInt32(),4==o)return a;if(a.RoundInfos=r.readArray((function(e){return i.deserializeCore(e)})),5==o)return a;if(a.TransFixedUpdateCount=r.readUint32(),6==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RoundGroupExtension.ts",["cc","./RoundGroup.ts"],(function(){var t,n;return{setters:[function(n){t=n.cclegacy},function(t){n=t.RoundGroup}],execute:function(){t._RF.push({},"2b10cjT2HhMab138ER9M4+U","RoundGroupExtension",void 0),n.prototype.GenStartFixedUpdateCount=function(){var t=this.RoundInfos;return null!=t&&t.length>0?t[0].StartFixedUpdateCount:0},n.prototype.GenEndFixedUpdateCount=function(){var t=this.RoundInfos;return null!=t&&t.length>0?t[t.length-1].EndFixedUpdateCount:0},n.prototype.GenNextFixedUpdateCount=function(){return this.GenEndFixedUpdateCount()+this.TransFixedUpdateCount},t._RF.pop()}}}));

System.register("chunks:///_virtual/RoundInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){n=e.MemoryPackReader}],execute:function(){r._RF.push({},"ef7f27LfMZAj7EmQCHChbKt","RoundInfo",void 0);e("RoundInfo",function(){function e(){this.ID=void 0,this.StartFixedUpdateCount=void 0,this.EndFixedUpdateCount=void 0,this.BonusIndex=void 0,this.BonusFixedUpdateDeltas=void 0,this.BonusStatus=void 0,this.ID=0,this.StartFixedUpdateCount=0,this.EndFixedUpdateCount=0,this.BonusIndex=0,this.BonusFixedUpdateDeltas=null,this.BonusStatus=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),e.writeInt32(r.ID),e.writeUint32(r.StartFixedUpdateCount),e.writeUint32(r.EndFixedUpdateCount),e.writeInt32(r.BonusIndex),e.writeArray(r.BonusFixedUpdateDeltas,(function(e,r){return e.writeUint32(r)})),e.writeArray(r.BonusStatus,(function(e,r){return e.writeUint8(r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),n=t[0],i=t[1];if(!n)return null;var a=new e;if(6==i)a.ID=r.readInt32(),a.StartFixedUpdateCount=r.readUint32(),a.EndFixedUpdateCount=r.readUint32(),a.BonusIndex=r.readInt32(),a.BonusFixedUpdateDeltas=r.readArray((function(e){return e.readUint32()})),a.BonusStatus=r.readArray((function(e){return e.readUint8()}));else{if(i>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==i)return a;if(a.ID=r.readInt32(),1==i)return a;if(a.StartFixedUpdateCount=r.readUint32(),2==i)return a;if(a.EndFixedUpdateCount=r.readUint32(),3==i)return a;if(a.BonusIndex=r.readInt32(),4==i)return a;if(a.BonusFixedUpdateDeltas=r.readArray((function(e){return e.readUint32()})),5==i)return a;if(a.BonusStatus=r.readArray((function(e){return e.readUint8()})),6==i)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/RoundInfoExtension.ts",["cc","./RoundInfo.ts"],(function(){var t,n;return{setters:[function(n){t=n.cclegacy},function(t){n=t.RoundInfo}],execute:function(){t._RF.push({},"682d6Pu1lZAlrqoOQ+TJvA3","RoundInfoExtension",void 0),n.prototype.GenBonusFixedUpdateCount=function(t){return null!=this.BonusFixedUpdateDeltas&&t>=0&&t<this.BonusFixedUpdateDeltas.length?this.StartFixedUpdateCount+this.BonusFixedUpdateDeltas[t]:0},t._RF.pop()}}}));

System.register("chunks:///_virtual/RoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BonusWaveFlag.ts","./RoundInfo.ts","./ThemeSettingAttribute2.ts","./Action2.ts"],(function(n){var t,o,e,u,s,i;return{setters:[function(n){t=n.createClass},function(n){o=n.cclegacy},function(n){e=n.BonusWaveFlag},function(n){u=n.RoundInfo},function(n){s=n.ThemeSettingAttributeData},function(n){i=n.ActionWithOne}],execute:function(){o._RF.push({},"f33e3kkvAZCsbcqIXa1Xt/o","RoundManager",void 0);n("RoundManager",function(){function n(n,t,o){this.OnRefreshRoundInfo=new i,this.OnRefreshRoundGroup=new i,this._roundInfo=null,this._roundGroup=null,this._rand=null,this._bonusFrequencyDatas=null,this._themeSettingDatas=null,this._backgroundTimeDatas=null,this.SetDatas(n,t,o)}var o=n.prototype;return o.Init=function(n,t,o){this._roundInfo=n,this._roundGroup=t,this._rand=o},o.Release=function(){this._rand=null,this._roundGroup=null,this._roundInfo=null},o.FixedUpdate=function(n){this.IsReady&&(n==this.RoundGroup.GenNextFixedUpdateCount()&&(this.RefreshRoundGroup(this.RoundGroup,n),this.RoundGroup.RoundIndex<this.RoundGroup.RoundInfos.length&&this.RefreshRoundInfo(this.RoundGroup.RoundInfos[this.RoundGroup.RoundIndex])),n==this.RoundInfo.EndFixedUpdateCount&&(this.RoundGroup.RoundIndex++,this.RoundGroup.RoundIndex<this.RoundGroup.RoundInfos.length&&this.RefreshRoundInfo(this.RoundGroup.RoundInfos[this.RoundGroup.RoundIndex])))},o.SetDatas=function(n,t,o){this._bonusFrequencyDatas=n,this._themeSettingDatas=t,this._backgroundTimeDatas=o},o.RefreshRoundInfo=function(n){var t;this.RoundInfo.ID=n.ID,this.RoundInfo.StartFixedUpdateCount=n.StartFixedUpdateCount,this.RoundInfo.EndFixedUpdateCount=n.EndFixedUpdateCount,this.RoundInfo.BonusIndex=n.BonusIndex,this.RoundInfo.BonusFixedUpdateDeltas=n.BonusFixedUpdateDeltas,this.RoundInfo.BonusStatus=n.BonusStatus,null==(t=this.OnRefreshRoundInfo)||t.invoke(this.RoundInfo)},o.RefreshRoundGroup=function(n,t){var o,e=n.ID,u=n.NextID>0?n.NextID:R.bind(this)(e),i=R.bind(this)(u),a=f.bind(this)(n.NextID),d=a.GetAllBGID();this.RoundGroup.PrevID=e,this.RoundGroup.ID=u,this.RoundGroup.NextID=i,this.RoundGroup.RoundIndex=0,this.RoundGroup.RoundInfos=[],this.RoundGroup.TransFixedUpdateCount=a.GetTransFixedUpdateCount();for(var r=0;r<d.length;++r){var h=d[r],l=this.GetRoundInfo(h,t);this.RoundGroup.RoundInfos.push(l),t=l.EndFixedUpdateCount}function f(n){return this._themeSettingDatas.has(n)?this._themeSettingDatas.get(n):null}function R(n){var t,o,e=s.Instance.DataGroup,u=(null!=(t=null==(o=f.bind(this)(n))?void 0:o.GroupID)?t:0)%e.size+1,i=e.get(u);return i[this._rand.Next(0,i.length)].ID}null==(o=this.OnRefreshRoundGroup)||o.invoke(this.RoundGroup)},o.GetRoundInfo=function(n,t){var o=this._backgroundTimeDatas.get(n).GetTotalFixedUpdateCount(),e=new u;return e.ID=n,e.StartFixedUpdateCount=t,e.EndFixedUpdateCount=t+o,e.BonusIndex=0,e.BonusFixedUpdateDeltas=this.GenBonusFixedUpdateDeltas(n),e.BonusStatus=this.GenBonusStatus(n),e},o.GenBonusFixedUpdateDeltas=function(n){for(var t=this._bonusFrequencyDatas.get(n),o=this._backgroundTimeDatas.get(n).GetTotalFixedUpdateCount(),e=2*t.WaveCount,u=o/e,s=new Array(e),i=0;i<e;i++)s[i]=i*u;return s},o.GenBonusStatus=function(n){var t=this._bonusFrequencyDatas.get(n),o=t.WaveCount,u=new Array(o).fill(0);return this.PickWavesRandomly(e.Middle,t.WaveKind0,{bonusStatus:u}),this.PickWavesRandomly(e.Gotcha,t.WaveKind1,{bonusStatus:u}),this.PickWavesRandomly(e.Weapon,t.WaveKind2,{bonusStatus:u}),this.PickWavesRandomly(e.GotchaLow,t.WaveKind3,{bonusStatus:u}),this.PickWavesRandomly(e.Boss,t.WaveKind4,{bonusStatus:u}),this.GenerateTotalWaveFlags(u)},o.PickWavesRandomly=function(n,t,o){if(0!==t)if(o.bonusStatus.length===t)for(var e=0;e<t;e++)o.bonusStatus[e]|=n;else{for(var u=Math.min(t,o.bonusStatus.length),s=[],i=0;i<u;i++)s.push(i);for(var a=0;a<u;a++){var d=this._rand.Next(0,s.length),r=s[d];o.bonusStatus[r]|=n,s.splice(d,1)}}},o.GenerateTotalWaveFlags=function(n){return this.ExtendWaveFlags(n)},o.SplitGotchaWaveFlags=function(n){for(var t=new Array(2*n.length).fill(0),o=0;o<n.length;++o)if(0!=(n[o]&e.Gotcha)&&0!=(n[o]&e.GotchaLow)){var u=0===this._rand.Next(0,2)?e.Gotcha:e.GotchaLow;t[2*o]=n[o]^u,t[2*o+1]=u}else t[2*o]=n[o];return t},o.ExtendWaveFlags=function(n){for(var t=new Array(2*n.length).fill(0),o=0;o<n.length;++o)t[2*o]=n[o];return t},t(n,[{key:"IsReady",get:function(){return null!=this._roundInfo&&null!=this._roundGroup&&null!=this._rand}},{key:"RoundInfo",get:function(){return this._roundInfo}},{key:"RoundGroup",get:function(){return this._roundGroup}}]),n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/RTPSetting.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3f66eQThJNCJrPd/da6sLLt","RTPSetting",void 0);t("RTPSetting",{Precision:1e6});e._RF.pop()}}}));

System.register("chunks:///_virtual/RuntimeSettingConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./Constants.ts","./MessageCmd.ts","./MessageManager.ts"],(function(e){var t,i,n,o,r,c,s,a,p,u,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){c=e.cclegacy,s=e._decorator,a=e.CCInteger},function(e){p=e.SingletonComponent},function(e){u=e.Constants},function(e){l=e.MessageCmd},function(e){d=e.MessageManager}],execute:function(){var f,g,m,S,M,T,h,y,b;c._RF.push({},"637198LN7FKOaq65HNO71JQ","RuntimeSettingConfig",void 0);var k=s.ccclass,C=s.property;e("RuntimeSettingConfig",(f=k("RuntimeSettingConfig"),g=C({type:a}),m=C({type:a}),S=C({type:a}),f((h=t((T=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,n(t,"ShowPopUpTick",h,o(t)),n(t,"AccelTickLimit",y,o(t)),n(t,"IdleTimeoutTick",b,o(t)),t.MuteTick=1e3/u.PerTickTime*60,t._isSpeedUpMode=!1,t}i(t,e);var c=t.prototype;return c.onSpeedUpModeDisabled=function(){d.Instance.emit(l.ON_SPEEDMODE_END)},c.onSpeedUpModeEnabled=function(){d.Instance.emit(l.ON_SPEEDMODE_START)},r(t,[{key:"IsSpeedUpMode",get:function(){return this._isSpeedUpMode},set:function(e){this._isSpeedUpMode!=e&&(this._isSpeedUpMode=e,this._isSpeedUpMode?this.onSpeedUpModeEnabled():this.onSpeedUpModeDisabled())}}]),t}(p)).prototype,"ShowPopUpTick",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3/u.PerTickTime*3}}),y=t(T.prototype,"AccelTickLimit",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3/u.PerTickTime*20}}),b=t(T.prototype,"IdleTimeoutTick",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3/u.PerTickTime*120}}),M=T))||M));c._RF.pop()}}}));

System.register("chunks:///_virtual/Service.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConnectManager.ts","./SubsystemCategory.ts","./TokenAuthInfo.ts","./AuthResponse.ts","./AuthResult.ts"],(function(e){var n,t,i,o,s,c,a,u,r;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,i=e.EventTarget},function(e){o=e.StopReason,s=e.ConnectState},function(e){c=e.SubsystemCategory},function(e){a=e.TokenAuthInfo},function(e){u=e.AuthResponse},function(e){r=e.AuthResult}],execute:function(){t._RF.push({},"26541f0zQRLRpba29BoIUpk","Service",void 0);var h=function(e){return e[e.Connected=0]="Connected",e[e.Disconnected=1]="Disconnected",e[e.Paused=2]="Paused",e[e.Resumed=3]="Resumed",e[e.Authed=4]="Authed",e}(h||{}),d=function(e){return e[e.AuthenticationRPC=0]="AuthenticationRPC",e[e.DisconnectRequest=1]="DisconnectRequest",e[e.DisconnectResponse=2]="DisconnectResponse",e[e.Discard=3]="Discard",e[e.ClientException=4]="ClientException",e[e.LogDB=5]="LogDB",e[e.LivingSeconds=6]="LivingSeconds",e}(d||{});e("Service",function(){var e=t.prototype;function t(e){this._connectManager=null,this._eventTarget=new i,this._isAuthenticating=!1,this._token=null,this._playerID=0,this._lastStopReason=o.ByClient,this._connectManager=e,this._connectManager.OnConnected=this.onConnectedAction.bind(this),this._connectManager.OnDisconnected=this.onDisconnectedAction.bind(this),this._connectManager.OnPause=this.onPausedAction.bind(this),this._connectManager.OnResume=this.onResumedAction.bind(this),this.registerReceiveCommand(c.ServiceSystem,d.AuthenticationRPC,this.onAuthenticationRPC.bind(this)),this.registerReceiveCommand(c.ServiceSystem,d.DisconnectResponse,this.onDisconnectResponse.bind(this))}return e.onConnected=function(e){this._eventTarget.on(h.Connected,e)},e.offConnected=function(e){this._eventTarget.off(h.Connected,e)},e.onDisconnected=function(e){this._eventTarget.on(h.Disconnected,e)},e.offDisconnected=function(e){this._eventTarget.off(h.Disconnected,e)},e.onPaused=function(e){this._eventTarget.on(h.Paused,e)},e.offPaused=function(e){this._eventTarget.off(h.Paused,e)},e.onResumed=function(e){this._eventTarget.on(h.Resumed,e)},e.offResumed=function(e){this._eventTarget.off(h.Resumed,e)},e.onAuthed=function(e){this._eventTarget.on(h.Authed,e)},e.offAuthed=function(e){this._eventTarget.off(h.Authed,e)},e.startAuth=function(e,n){this.HasAuthed||this._isAuthenticating||(this._isAuthenticating=!0,this._token=e,this._connectManager.Url=n,this._connectManager.StartConnect())},e.disconnect=function(){this.sendCommand(c.ServiceSystem,d.DisconnectRequest,null),this._connectManager.OnDisconnect(o.ByClient,"")},e.sendCommand=function(e,n,t){this._connectManager.SendCommand(e,n,t)},e.sendNoOrderCommand=function(e,n,t){this._connectManager.SendNoOrderCommand(e,n,t)},e.registerReceiveCommand=function(e,n,t){this._connectManager.RegisterReceiveCommand(e,n,t)},e.unregisterReceiveCommand=function(e,n){this._connectManager.UnregisterReceiveCommand(e,n)},e.onConnectedAction=function(){this._eventTarget.emit(h.Connected);var e=new a;e.Token=this._token,this.sendCommand(c.ServiceSystem,d.AuthenticationRPC,a.serialize(e))},e.onDisconnectedAction=function(e){this._playerID=0,this._lastStopReason=e,this._eventTarget.emit(h.Disconnected,this._lastStopReason),this._isAuthenticating&&(this._isAuthenticating=!1,this._eventTarget.emit(h.Authed,!1,this._playerID))},e.onPausedAction=function(){this._eventTarget.emit(h.Paused)},e.onResumedAction=function(){this._eventTarget.emit(h.Resumed)},e.onAuthenticationRPC=function(e){var n=u.deserialize(e.buffer);this._isAuthenticating=!1;var t=n.AuthResult==r.Success;t?this._playerID=+n.Id:(this._playerID=0,this._connectManager.OnDisconnect(o.AuthFailure,"")),this._eventTarget.emit(h.Authed,t,this._playerID)},e.onDisconnectResponse=function(e){var n=Buffer.from(e).readInt32LE();this._connectManager.OnDisconnect(n,"")},n(t,[{key:"HasAuthed",get:function(){return this._playerID>0}},{key:"IsAuthencating",get:function(){return this._isAuthenticating}},{key:"isConnected",get:function(){return this._connectManager.State==s.Online}},{key:"isDisconnected",get:function(){return this._connectManager.State==s.Offline}},{key:"isConnecting",get:function(){return this._connectManager.State==s.Connect}},{key:"isReconnecting",get:function(){return this._connectManager.State==s.Reconnect}},{key:"playerID",get:function(){return this._playerID}},{key:"LastStopReason",get:function(){return this._lastStopReason}}]),t}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ServiceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Service.ts","./SingletonComponent.ts","./GameConfig.ts","./GetRoomServiceInfoResponseCode.ts","./GetRoomServiceInfoResponse.ts","./ConnectManager.ts","./HttpHelper.ts","./GetGameDemoLinkRequest.ts","./GetGameLinkRequest.ts"],(function(e){var n,r,o,t,i,c,s,a,u,f,l,p,g,m,v,S,h,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,t=e.assertThisInitialized,i=e.createClass,c=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,u=e._decorator},function(e){f=e.Service},function(e){l=e.SingletonComponent},function(e){p=e.GameConfig},function(e){g=e.GetRoomServiceInfoResponseCode},function(e){m=e.GetRoomServiceInfoResponse},function(e){v=e.ConnectManager},function(e){S=e.HttpHelper},function(e){h=e.GetGameDemoLinkRequest},function(e){d=e.GetGameLinkRequest}],execute:function(){var k,R,y,w,b;a._RF.push({},"c0442WOVrJMP4NnNdEFf+rU","ServiceManager",void 0);var _=u.ccclass,x=u.property;e("ServiceManager",(k=_("ServiceManager"),R=x({type:v,visible:!0}),k((b=n((w=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return n=e.call.apply(e,[this].concat(i))||this,o(n,"_roomConnectManager",b,t(n)),n._roomService=null,n}r(n,e);var a=n.prototype;return a.loginRoomService=function(){var e=c(s().mark((function e(n){var r,o,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){return(t=c(s().mark((function e(){var n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){n._roomService.onAuthed((function r(o){n._roomService.offAuthed(r),o?console.info("login RoomService success"):console.error("login RoomService fail"),e(o)})),console.info("start login RoomService, token: "+p.config.token+", url: "+r.ServiceUrl),n._roomService.startAuth(p.config.token,r.ServiceUrl)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(){return t.apply(this,arguments)},!this._roomService.HasAuthed){e.next=5;break}return console.warn("RoomService has logined"),e.abrupt("return",!1);case 5:if(!this._roomService.IsAuthencating){e.next=8;break}return console.warn("RoomService is logining"),e.abrupt("return",!1);case 8:if(!String.isNullOrEmpty(p.config.token)||p.config.useTestCenter){e.next=14;break}return e.next=11,this.getToken();case 11:if(p.config.token=e.sent,!String.isNullOrEmpty(p.config.token)){e.next=14;break}return e.abrupt("return",!1);case 14:return e.next=16,this.getRoomServiceInfo(n);case 16:if((r=e.sent).Ack==g.Success){e.next=19;break}return e.abrupt("return",!1);case 19:return e.next=21,o.bind(this)();case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),a.disconnectRoomService=function(){this._roomService.isDisconnected?console.warn("RoomService is disconnected"):(console.info("disconnect RoomService"),this._roomService.disconnect())},a.checkMainPlayer=function(e){return e==this.playerID},a.onLoad=function(){e.prototype.onLoad.call(this),this._roomService=new f(this._roomConnectManager)},a.getToken=function(){var e=c(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(c(s().mark((function e(n,r){var o,t,i,c,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.config.platformURL+"/"+(p.config.demo?p.config.platformApiGetGameDemoLink:p.config.platformApiGetGameLink),t=p.config.demo?new h(p.config.game_code,p.config.lang,p.config.mobild,p.config.defaultUserName):new d(p.config.game_code,p.config.lang,p.config.mobild,p.config.defaultUserName,p.config.defaultCoin,p.config.defaultBetMax,p.config.defaultBetMin),console.info("get game link start, url: "+o),e.next=5,S.postAsync(o,t);case 5:(i=e.sent).Success?(c=new URL(i.Result.url),a=c.searchParams.get("token"),console.info("get game link success, url: "+c.href+", token: "+a),n(a)):(console.error("get game link fail, error: "+i.ErrorMsg),n(null));case 7:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.getRoomServiceInfo=function(){var e=c(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(c(s().mark((function e(r,o){var t,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("get room serviceinfo start, url: "+p.config.gameurl),e.next=3,S.postAsync(p.config.gameurl,n);case 3:(t=e.sent).Success?(console.info("get room serviceinfo success, Ack: "+t.Result.Ack+", ServiceUrl: "+t.Result.ServiceUrl),r(t.Result)):(console.error("get room serviceinfo fail, error: "+t.ErrorMsg),(i=new m).Ack=g.Exception,r(i));case 5:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i(n,[{key:"roomService",get:function(){return this._roomService}},{key:"playerID",get:function(){return this._roomService.playerID}}]),n}(l)).prototype,"_roomConnectManager",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=w))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/SetActivityRequest.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(r){var e,t,i;return{setters:[function(r){e=r.cclegacy},function(r){t=r.MemoryPackWriter},function(r){i=r.MemoryPackReader}],execute:function(){e._RF.push({},"b842bVUmeBIGZknfiqroF4X","SetActivityRequest",void 0);r("SetActivityRequest",function(){function r(){this.ActivityData=void 0,this.ActivityData=null}return r.serialize=function(r){var e=t.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(1),r.writeMap(e.ActivityData,(function(r,e){return r.writeInt32(e)}),(function(r,e){return r.writeArray(e,(function(r,e){return r.writeInt32(e)}))}))):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=t.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,t){e.writeArray(t,(function(e,t){return r.serializeCore(e,t)}))},r.deserialize=function(r){return this.deserializeCore(new i(r))},r.deserializeCore=function(e){var t=e.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new r;if(1==n)a.ActivityData=e.readMap((function(r){return r.readInt32()}),(function(r){return r.readArray((function(r){return r.readInt32()}))}));else{if(n>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.ActivityData=e.readMap((function(r){return r.readInt32()}),(function(r){return r.readArray((function(r){return r.readInt32()}))})),1==n)return a}return a},r.deserializeArray=function(r){return this.deserializeArrayCore(new i(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SettingData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./FishOddsAttribute.ts","./WaveData.ts","./WaveInfo.ts","./PathAttribute2.ts","./PathSpeed.ts","./FishCollision2.ts","./BonusFrequencyAttribute.ts","./ThemeSettingAttribute.ts","./BackgroundTimeAttribute2.ts","./UIAutoAttribute2.ts","./BetLevelHelper.ts"],(function(e){var r,t,n,i,a,u,o,s,c,d,f,l,h,p;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){i=e.FishOddsAttribute},function(e){a=e.WaveData},function(e){u=e.WaveInfo},function(e){o=e.PathAttribute},function(e){s=e.PathSpeed},function(e){c=e.FishCollision},function(e){d=e.BonusFrequencyAttribute},function(e){f=e.ThemeSettingAttribute},function(e){l=e.BackgroundTimeAttribute},function(e){h=e.UIAutoAttribute},function(e){p=e.BetLevelHelper}],execute:function(){r._RF.push({},"ddcb7YOURhBlIOAXbGL9pyq","SettingData",void 0);e("SettingData",function(){function e(){this.FishOddsDatas=void 0,this.WaveDatas=void 0,this.WaveInfos=void 0,this.WaveTable=void 0,this.BgBonusTable=void 0,this.PathDatas=void 0,this.PathSpeedDatas=void 0,this.FishCollisionDatas=void 0,this.BonusFrequencyDatas=void 0,this.ThemeSettingDatas=void 0,this.BackgroundTimeDatas=void 0,this.UIAutoDatas=void 0,this.BetLevelHelper=void 0,this.FishOddsDatas=null,this.WaveDatas=null,this.WaveInfos=null,this.WaveTable=null,this.BgBonusTable=null,this.PathDatas=null,this.PathSpeedDatas=null,this.FishCollisionDatas=null,this.BonusFrequencyDatas=null,this.ThemeSettingDatas=null,this.BackgroundTimeDatas=null,this.UIAutoDatas=null,this.BetLevelHelper=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(13),e.writeMap(r.FishOddsDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return i.serializeCore(e,r)})),e.writeMap(r.WaveDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return e.writeArray(r,(function(e,r){return a.serializeCore(e,r)}))})),e.writeMap(r.WaveInfos,(function(e,r){return e.writeInt32(r)}),(function(e,r){return u.serializeCore(e,r)})),e.writeMap(r.WaveTable,(function(e,r){return e.writeString(r)}),(function(e,r){return a.serializeCore(e,r)})),e.writeMap(r.BgBonusTable,(function(e,r){return e.writeInt32(r)}),(function(e,r){return e.writeMap(r,(function(e,r){return e.writeInt32(r)}),(function(e,r){return e.writeArray(r,(function(e,r){return e.writeString(r)}))}))})),e.writeMap(r.PathDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return o.serializeCore(e,r)})),e.writeMap(r.PathSpeedDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return s.serializeCore(e,r)})),e.writeMap(r.FishCollisionDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return c.serializeCore(e,r)})),e.writeMap(r.BonusFrequencyDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return d.serializeCore(e,r)})),e.writeMap(r.ThemeSettingDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return f.serializeCore(e,r)})),e.writeMap(r.BackgroundTimeDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return l.serializeCore(e,r)})),e.writeMap(r.UIAutoDatas,(function(e,r){return e.writeInt32(r)}),(function(e,r){return h.serializeCore(e,r)})),p.serializeCore(e,r.BetLevelHelper)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),n=t[0],C=t[1];if(!n)return null;var I=new e;if(13==C)I.FishOddsDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return i.deserializeCore(e)})),I.WaveDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return a.deserializeCore(e)}))})),I.WaveInfos=r.readMap((function(e){return e.readInt32()}),(function(e){return u.deserializeCore(e)})),I.WaveTable=r.readMap((function(e){return e.readString()}),(function(e){return a.deserializeCore(e)})),I.BgBonusTable=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return e.readString()}))}))})),I.PathDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return o.deserializeCore(e)})),I.PathSpeedDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return s.deserializeCore(e)})),I.FishCollisionDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return c.deserializeCore(e)})),I.BonusFrequencyDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return d.deserializeCore(e)})),I.ThemeSettingDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return f.deserializeCore(e)})),I.BackgroundTimeDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return l.deserializeCore(e)})),I.UIAutoDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return h.deserializeCore(e)})),I.BetLevelHelper=p.deserializeCore(r);else{if(C>13)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==C)return I;if(I.FishOddsDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return i.deserializeCore(e)})),1==C)return I;if(I.WaveDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return a.deserializeCore(e)}))})),2==C)return I;if(I.WaveInfos=r.readMap((function(e){return e.readInt32()}),(function(e){return u.deserializeCore(e)})),3==C)return I;if(I.WaveTable=r.readMap((function(e){return e.readString()}),(function(e){return a.deserializeCore(e)})),4==C)return I;if(I.BgBonusTable=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return e.readString()}))}))})),5==C)return I;if(I.PathDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return o.deserializeCore(e)})),6==C)return I;if(I.PathSpeedDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return s.deserializeCore(e)})),7==C)return I;if(I.FishCollisionDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return c.deserializeCore(e)})),8==C)return I;if(I.BonusFrequencyDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return d.deserializeCore(e)})),9==C)return I;if(I.ThemeSettingDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return f.deserializeCore(e)})),10==C)return I;if(I.BackgroundTimeDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return l.deserializeCore(e)})),11==C)return I;if(I.UIAutoDatas=r.readMap((function(e){return e.readInt32()}),(function(e){return h.deserializeCore(e)})),12==C)return I;if(I.BetLevelHelper=p.deserializeCore(r),13==C)return I}return I},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ShadowHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,i,n,a,u,l,p,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,u=e._decorator,l=e.SpriteFrame,p=e.Node,c=e.Component}],execute:function(){var d,s,h,f,y,b,w,m,g,v,S,R,z;a._RF.push({},"ebebcpayVBC56JgB9SxdZt2","ShadowHelper",void 0);var F=u.ccclass,H=u.property;e("ShadowHelper",(d=F("ShadowHelper"),s=H({type:l}),h=H({type:p}),f=H({type:p}),y=H({type:p}),b=H({tooltip:"開啟後，影子會隨著上層物件動作而縮放"}),d((g=t((m=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"shadowSF",g,i(t)),r(t,"shadowNode",v,i(t)),r(t,"deathRoot",S,i(t)),r(t,"moveRoot",R,i(t)),r(t,"updateMode",z,i(t)),t.updateShadow=function(){},t}return o(t,e),t.prototype.update=function(e){this.updateMode&&this.updateShadow()},n(t,[{key:"currentRoot",get:function(){return this.moveRoot.active?this.moveRoot:this.deathRoot}}]),t}(c)).prototype,"shadowSF",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"shadowNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(m.prototype,"deathRoot",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(m.prototype,"moveRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(m.prototype,"updateMode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=m))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShootManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AutoShootHelper.ts","./SingletonComponent.ts","./PlayerFortManager.ts","./PlayerFort.ts","./BaseShoot.ts","./MessageManager.ts","./MessageCmd.ts","./Room.ts","./KindHelper.ts","./WeaponShootHelper.ts","./ServiceManager.ts"],(function(t){var o,n,e,i,r,s,h,a,c,u,l,S,f,p,P,d,y,g,T,I,M,v,_;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){h=t.cclegacy,a=t._decorator,c=t.Vec2,u=t.CCBoolean,l=t.input,S=t.Input},function(t){f=t.AutoShootHelper},function(t){p=t.SingletonComponent},function(t){P=t.PlayerFortManager},function(t){d=t.PlayerFort},function(t){y=t.BaseShoot},function(t){g=t.MessageManager},function(t){T=t.MessageCmd},function(t){I=t.Room},function(t){M=t.KindHelper},function(t){v=t.WeaponShootHelper},function(t){_=t.ServiceManager}],execute:function(){var H,A,C,F,E,m,b,B,O,w,U,L,N;h._RF.push({},"cbcd0NuvPJPx6MZuZVw67In","ShootManager",void 0);var W=a.ccclass,k=a.property;t("ShootManager",(H=W("ShootManager"),A=k(f),C=k(v),F=k([y]),E=k(c),m=k(u),H((O=o((B=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,e(o,"AutoShootHelper",O,i(o)),e(o,"WeaponShootHelper",w,i(o)),e(o,"shoots",U,i(o)),e(o,"shootPoint",L,i(o)),e(o,"isAutoShoot",N,i(o)),o._isLoadingCompleted=!1,o._mainShoot=null,o._touchPoint=void 0,o}n(o,t);var h=o.prototype;return h.initial=function(){var t=this;this.shoots.forEach((function(o){return o.initial(t)})),this.AutoShootHelper.initial(),this.WeaponShootHelper.initial()},h.release=function(){var t=this;this.AutoShootHelper.release(),this.WeaponShootHelper.release(),this.shoots.forEach((function(o){return o.release(t)}))},h.reset=function(){this.initShootPoint(),this.AutoShootHelper.reset(),this.WeaponShootHelper.reset()},h.setAutoShoot=function(t){this.isAutoShoot=t},h.checkShoot=function(){if(!this._isLoadingCompleted)return!1;var t=P.instance();return!!t.MainPlayerFort&&(!!t.MainPlayerFort.IsActive&&(!!t.MainPlayerFort.UsedBulletReady&&(!(t.MainPlayerBet<=0)&&(t.MainPlayerCoin<t.MainPlayerBet?(g.Instance.emit(T.ON_COIN_INSUFFICIENT),!1):!(this.ShootPoint.x<0||this.ShootPoint.x>I.Width||this.ShootPoint.y<0||this.ShootPoint.y>I.Height)))))},h.checkConnection=function(){return!!_.instance().roomService.isConnected},h.checkTouchPoint=function(){return!(this._touchPoint.x<0||this._touchPoint.x>I.Width||this._touchPoint.y<0||this._touchPoint.y>I.Height)&&(this.shootPoint=this._touchPoint,!0)},h.switchMainShooter=function(t,o){var n=+o,e=P.instance().MainPlayerFort;M.IsSpecialBullet(n)||M.IsSpecialBullet(e.UsedBulletKind)||P.instance().switchFort(e.FortID,n)},h.setHoldingSpecialBulletInfo=function(t,o){this.WeaponShootHelper.setHoldingSpecialBulletInfo(t,o)},h.onEnable=function(){this.onSwitchFortAction=this.onSwitchFortAction.bind(this),l.on(S.EventType.TOUCH_START,this.onTouchStart,this),l.on(S.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(S.EventType.TOUCH_END,this.onTouchEnd,this),g.Instance.on(T.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene,this),g.Instance.on(T.ON_SWITCH_FORT,this.onSwitchFortAction)},h.onDisable=function(){g.Instance.off(T.ON_SWITCH_FORT,this.onSwitchFortAction),g.Instance.off(T.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene,this),l.off(S.EventType.TOUCH_END,this.onTouchEnd,this),l.off(S.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(S.EventType.TOUCH_START,this.onTouchStart,this)},h.onTouchStart=function(t){this.onTouchEventAction(t)},h.onTouchMove=function(t){this.onTouchEventAction(t)},h.onTouchEnd=function(t){this.onTouchEventAction(t)},h.onCloseLoadingUIScene=function(){this._isLoadingCompleted=!0},h.onSwitchFortAction=function(t,o,n){if(P.instance().checkMainFort(t)){this.setAutoShoot(!1);for(var e,i=r(this.shoots);!(e=i()).done;){var s=e.value;s.BulletKind==o&&s.reset(),s.BulletKind==n&&(s.set(),M.IsSpecialBullet(n)||(this._mainShoot=s))}M.IsSpecialBullet(n)||M.IsSpecialBullet(o)||this.initShootPoint()}},h.transToShootPoint=function(t){return t},h.initShootPoint=function(){this.shootPoint=this.FortPoint},h.onTouchEventAction=function(t){this._touchPoint=t.getUILocation(),this.checkTouchPoint(),this.transToShootPoint(this.shootPoint)},s(o,[{key:"MainIndex",get:function(){return P.instance().MainPlayerFortIndex}},{key:"MainShoot",get:function(){var t;return null!=(t=this._mainShoot)?t:this._mainShoot=this.shoots.find((function(t){return t.BulletKind==d.DefaultBulletKind}))}},{key:"FortPoint",get:function(){return new c(I.FortPositions[this.MainIndex].X,I.FortPositions[this.MainIndex].Y)}},{key:"ShootPoint",get:function(){return this.shootPoint}},{key:"IsAutoShoot",get:function(){return this.isAutoShoot}}]),o}(p)).prototype,"AutoShootHelper",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(B.prototype,"WeaponShootHelper",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=o(B.prototype,"shoots",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),L=o(B.prototype,"shootPoint",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=o(B.prototype,"isAutoShoot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=B))||b));h._RF.pop()}}}));

System.register("chunks:///_virtual/ShootWarningAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./AutoShootConstraintType.ts","./GeneralPopup.ts","./FishGameAck.ts","./L10nKeyConfig.ts"],(function(n){var t,o,i,a,s,e,r,h,u,c;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,a=n.Component},function(n){s=n.MessageManager},function(n){e=n.MessageCmd},function(n){r=n.AutoShootConstraintType},function(n){h=n.GeneralPopup},function(n){u=n.FishGameAck},function(n){c=n.SystemMessageType}],execute:function(){var g;o._RF.push({},"f2e5cEgTKBBC6y4sdbrhOyB","ShootWarningAdapter",void 0);var p=i.ccclass;i.property,n("ShootWarningAdapter",p("ShootWarningAdapter")(g=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))||this)._isWarningShowing=!1,t}t(o,n);var i=o.prototype;return i.onLoad=function(){this.stopShowingWarning=this.stopShowingWarning.bind(this),s.Instance.on(e.ON_AUTOSHOOT_CONSTRAINT_ARRIVAL,this.onAutoShootConstraintArrivalAction,this),s.Instance.on(e.ON_COIN_INSUFFICIENT,this.onCoinInsufficientAction,this)},i.onDestroy=function(){s.Instance.off(e.ON_COIN_INSUFFICIENT,this.onCoinInsufficientAction,this),s.Instance.off(e.ON_AUTOSHOOT_CONSTRAINT_ARRIVAL,this.onAutoShootConstraintArrivalAction,this)},i.onAutoShootConstraintArrivalAction=function(n){if(!this._isWarningShowing)switch(n.constraintType){case r.ShootCountEqual:this.startShowingWarning(c.autoPopup_AutoShoot,"H5F/AutoPopup/AutoShoot",n.value);break;case r.CoinMoreThan:this.startShowingWarning(c.autoPopup_MoreThan,"H5F/AutoPopup/MoreThan",n.value);break;case r.CoinLessThan:this.startShowingWarning(c.autoPopup_LessThan,"H5F/AutoPopup/LessThan",n.value);break;default:console.warn("warning not implement !! type "+n.constraintType)}},i.onCoinInsufficientAction=function(){this._isWarningShowing||this.startShowingWarning(c.generalPopup_InsufficientBalance,"H5F/GeneralPopup/InsufficientBalance",u.CoinInsufficient)},i.startShowingWarning=function(n,t){this._isWarningShowing=!0;for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];h.openDefault(n,t,this.stopShowingWarning,i)},i.stopShowingWarning=function(){this._isWarningShowing=!1},o}(a))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/ShowCoin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioPlayer.ts","./PerformCurve.ts","./UIPoolManager.ts","./Pool.ts","./ShowCoinConfig.ts","./FishKind.ts","./ShowRewardConfig.ts","./Utility2.ts","./RuntimeSettingConfig.ts"],(function(t){var n,i,e,o,a,s,r,u,c,l,h,g,p,f,d,C,b,_,w,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,u=t.Vec2,c=t.randomRange,l=t.Vec3,h=t.tween},function(t){g=t.AudioPlayer},function(t){p=t.PerformCurveSingleton},function(t){f=t.UIPoolManager},function(t){d=t.PoolNode},function(t){C=t.ShowCoinConfig},function(t){b=t.FishKind},function(t){_=t.ShowRewardConfig},function(t){w=t.Utility},function(t){y=t.RuntimeSettingConfig}],execute:function(){var P,S,v,D,R,m,z,T,A,I,x,F,G;s._RF.push({},"247aab0nwlBzoMybJ+TcKK9","ShowCoin",void 0);var H=r.ccclass,U=r.property;t("ShowCoin",(P=H("ShowCoin"),S=U(u),v=U(g),P((m=n((R=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=t.call.apply(t,[this].concat(a))||this,e(n,"bounceHeight",m,o(n)),e(n,"bounceDurationRange",z,o(n)),e(n,"pauseDuration",T,o(n)),e(n,"gotchaPauseDuration",A,o(n)),e(n,"getHeight",I,o(n)),e(n,"beforeGetDuration",x,o(n)),e(n,"getSpeed",F,o(n)),e(n,"audioPlayer",G,o(n)),n._isSpawnCoin=!1,n._startPos=null,n._getPos=null,n._coinCount=0,n._playCount=0,n._coinType=0,n._setting=null,n._catchInfo=null,n._fish=null,n._scheduledCallback=null,n._bounceDuration=1,n}i(n,t);var s=n.prototype;return s.ShowCoin=function(t,n,i,e,o){this._setting=C.instance().GetShowCoinSetting(t),this._catchInfo=o,this._startPos=n,this._getPos=i,this._playCount=0,this._coinCount=0;var a=_.instance().GetShowRewardSetting(e.FishType);this._coinType=a.CoinCategory,this._fish=e,this._isSpawnCoin=!0},s.update=function(t){this._isSpawnCoin&&(this.startSpawning(this._setting.SpawnInterval,this._setting.CountAndRange.x),this._isSpawnCoin=!1)},s.onLoad=function(){this.spawnCoin=this.spawnCoin.bind(this)},s.onDisable=function(){this._scheduledCallback&&this.unschedule(this._scheduledCallback)},s.startSpawning=function(t,n){w.scheduler(this.spawnCoin,this,t/1e3,n)},s.spawnCoin=function(){var t=this,n=f.instance().coinPool.GetObject(this._coinType);if(n){var i=n.node,e=c(this.bounceDurationRange.x,this.bounceDurationRange.y);n.SetDuration(e);var o=c(-this._setting.CountAndRange.y,this._setting.CountAndRange.y),a=c(-this._setting.CountAndRange.y,this._setting.CountAndRange.y),s=new l(this._startPos.x,this._startPos.y,0);i.setWorldPosition(s);var r=new l(o,a,0);r.add(s);var u=new l,g=new l(0,this.getHeight,0),d=new l(this._getPos.x-r.x,this._getPos.y-r.y,0).length()/this.getSpeed,C=this.getPauseTime(),b=y.instance().IsSpeedUpMode;h(i).to(e,{},{onUpdate:function(n,i){l.lerp(u,s,r,i);var e=p.instance().coinBounceCurve.evaluate(i,0)*t.bounceHeight;u.y+=e,n.setWorldPosition(u)}}).to(C,{}).by(this.beforeGetDuration,{position:g}).to(d,{worldPosition:this._getPos},{easing:"circIn"}).call((function(){f.instance().coinPool.PushToPool(t._coinType,n),t._playCount++,t._playCount>=t._setting.CountAndRange.x&&t.pushToPool(t),b||t.audioPlayer.play()})).start(),this._coinCount++}else console.warn("[ShowCoin:spawnCoin] Coin object is null")},s.getPauseTime=function(){return this._catchInfo.IsCatch&&this._fish.FishOdds.FishKind==b.Gotcha?this.gotchaPauseDuration:this.pauseDuration},a(n,[{key:"isAvailable",get:function(){return!this.node.active},set:function(t){this.node.active=!t}}]),n}(d)).prototype,"bounceHeight",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),z=n(R.prototype,"bounceDurationRange",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(.42,.75)}}),T=n(R.prototype,"pauseDuration",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),A=n(R.prototype,"gotchaPauseDuration",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),I=n(R.prototype,"getHeight",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),x=n(R.prototype,"beforeGetDuration",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),F=n(R.prototype,"getSpeed",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),G=n(R.prototype,"audioPlayer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/ShowCoinConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts"],(function(n){var i,t,e,o,r,a,u,l,s,c;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.initializerDefineProperty,e=n.inheritsLoose,o=n.assertThisInitialized,r=n.createForOfIteratorHelperLoose},function(n){a=n.cclegacy,u=n._decorator,l=n.CCInteger,s=n.Vec2},function(n){c=n.SingletonComponent}],execute:function(){var f,h,p,C,g,w,S,d,b,y,v,m,z;a._RF.push({},"86dddNqJWFNMbytk4UXPcLJ","ShowCoinConfig",void 0);var I=u.ccclass,F=u.property,L=n("ShowCoinSetting",(f=I("ShowCoinSetting"),h=F(l),p=F(s),f((w=i((g=function(){t(this,"Odds",w,this),t(this,"CountAndRange",S,this),t(this,"SpawnInterval",d,this)}).prototype,"Odds",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=i(g.prototype,"CountAndRange",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(1,1)}}),d=i(g.prototype,"SpawnInterval",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),C=g))||C));n("ShowCoinConfig",(b=I("ShowCoinConfig"),y=F([L]),b((z=i((m=function(n){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=n.call.apply(n,[this].concat(r))||this,t(i,"ShowCoinConfigs",z,o(i)),i}return e(i,n),i.prototype.GetShowCoinSetting=function(n){for(var i,t=r(this.ShowCoinConfigs);!(i=t()).done;){var e=i.value;if(n<e.Odds)return e}return this.ShowCoinConfigs[this.ShowCoinConfigs.length-1]},i}(c)).prototype,"ShowCoinConfigs",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=m))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShowFPS.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,o,n,a,l,s,c,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.Label,s=t.CCFloat,c=t.Director,u=t.macro,p=t.Component}],execute:function(){var f,h,b,v,y,d,S;n._RF.push({},"3db7aRI4wBHtKCOFXaMbTfy","ShowFPS",void 0);var F=a.ccclass,g=a.property;t("ShowFPS",(f=F("ShowFPS"),h=g(l),b=g(s),f((d=e((y=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"fpsLabel",d,o(e)),i(e,"interval",S,o(e)),e.root=void 0,e}r(e,t);var n=e.prototype;return n.start=function(){var t=this;this.root=c.instance.root,this.schedule((function(){t.updateUI()}),this.interval,u.REPEAT_FOREVER)},n.updateUI=function(){this.fpsLabel.string=this.root.fps.toString()},e}(p)).prototype,"fpsLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(y.prototype,"interval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),v=y))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShowGetFish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSUIManager.ts","./NumberString.ts","./FishAttribute2.ts","./CameraManager.ts","./GotchaFishConfig.ts","./AudioPlayer.ts","./ActionPlayer.ts","./L10nKeyConfig.ts","./MessageManager.ts","./MessageCmd.ts","./PlayerFortManager.ts","./AudioManager.ts","./AudioMixerConfig.ts"],(function(e){var t,i,n,r,a,s,o,h,l,c,u,f,g,p,d,_,m,b,y,w,v,C,S,F,k,I,T,P,x,R,G,D,L,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){h=e.cclegacy,l=e._decorator,c=e.Node,u=e.UIOpacity,f=e.Label,g=e.CCFloat,p=e.Layers,d=e.Vec3,_=e.tween,m=e.ParticleSystem,b=e.macro,y=e.instantiate,w=e.Component},function(e){v=e.FSUIManager},function(e){C=e.NumberString},function(e){S=e.FishAttributeData},function(e){F=e.CameraManager,k=e.CameraType},function(e){I=e.GotchaFishConfig},function(e){T=e.AudioPlayer},function(e){P=e.ActionPlayer},function(e){x=e.L10nKeyConfig},function(e){R=e.MessageManager},function(e){G=e.MessageCmd},function(e){D=e.PlayerFortManager},function(e){L=e.AudioManager},function(e){z=e.AudioState}],execute:function(){var A,M,N,V,U,O,W,E,H,B,j,K,X,Z,q,J,Q,Y,$,ee,te,ie,ne,re,ae,se,oe,he,le,ce,ue,fe,ge,pe,de,_e,me,be,ye;h._RF.push({},"1c3edjTexpFPa1ZcgIef7IW","ShowGetFish",void 0);var we=l.ccclass,ve=l.property;e("ShowGetFish",(A=we("ShowGetFish"),M=ve(c),N=ve(c),V=ve(c),U=ve(C),O=ve(c),W=ve(c),E=ve([u]),H=ve(f),B=ve(f),j=ve(f),K=ve(u),X=ve(T),Z=ve(g),q=ve(T),J=ve(T),Q=ve([g]),Y=ve([g]),A((te=t((ee=function(e){function t(){for(var t,i,a,s,o,h=arguments.length,l=new Array(h),c=0;c<h;c++)l[c]=arguments[c];return o=e.call.apply(e,[this].concat(l))||this,n(o,"root",te,r(o)),n(o,"fxRoot",ie,r(o)),n(o,"fishParent",ne,r(o)),n(o,"scoreString",re,r(o)),n(o,"scoreStringRoot",ae,r(o)),n(o,"recordFrame",se,r(o)),n(o,"star",oe,r(o)),n(o,"fishLength",he,r(o)),n(o,"fishWeight",le,r(o)),n(o,"fishName",ce,r(o)),n(o,"renderSprite",ue,r(o)),n(o,"bgmPlayer",fe,r(o)),n(o,"bgmDelayTime",ge,r(o)),n(o,"getcoinPlayer",pe,r(o)),n(o,"coinFinishPlayer",de,r(o)),n(o,"closeDelayTime",_e,r(o)),n(o,"showStarTimes",me,r(o)),n(o,"totalScoreTime",be,r(o)),n(o,"clickCloseDelayTime",ye,r(o)),o._startRank=2,o._getFishUILayer=1<<p.nameToLayer("UI_GOTCHA"),o._fps=60,o._udpateInterval=1/o._fps,o._score="score",o._length="length",o._weight="weight",o._indexGap=2,o.renderCamera=null,o.rankFx=[],o._udpateCount=0,o._updateTime=0,o._valueString=((t={})[o._score]=null,t[o._length]=null,t[o._weight]=null,t),o._value=((i={})[o._score]=0,i[o._length]=0,i[o._weight]=0,i),o._updateValue=((a={})[o._score]=0,a[o._length]=0,a[o._weight]=0,a),o._finalValue=((s={})[o._score]=0,s[o._length]=0,s[o._weight]=0,s),o._getFishInfo=[],o._isShowing=!1,o._performComplete=!1,o._isClickClosable=!1,o.scheduledCallback=null,o._fishInfo=void 0,o.endCallback=void 0,o}i(t,e);var h=t.prototype;return h.onLoad=function(){v.Instance.ShowGetFish=this,this.renderCamera=F.instance().GetCameraByIndex(k.UIGotcha)},h.start=function(){this._valueString[this._score]=this.scoreString,this._valueString[this._length]=this.fishLength,this._valueString[this._weight]=this.fishWeight,this.updateNumber.bind(this),this.root.active=!1},h.onDisable=function(){this.getcoinPlayer.stop()},h.playGetCoinAudio=function(){this.getcoinPlayer.play()},h.onClickCLoseUI=function(){this._performComplete&&this._isClickClosable&&(this._performComplete=!1,this.cancelScheduledTask())},h.ShowByCatchInfo=function(e,t,i,n){this.root.active=!0,this._getFishInfo.push({fish:e,fishType:t,score:i.Score.toPerformValue(),rank:i.FishRank,length:i.Length,weight:i.Weight,fortID:i.FortID,endCallback:n}),this._isShowing||this.showGetFish()},h.RecordTweenComplete=function(){this.showRank(this._fishInfo.rank,this._fishInfo.endCallback),this.showRecord()},h.showGetFish=function(){var e;this._isClickClosable=!0,this._isShowing=!0,this._performComplete=!1,this.renderCamera.node.active=!0,this.renderSprite.opacity=255,this.renderSprite.node.active=!0;var t=this._getFishInfo.shift();this._fishInfo=t,this.rankFx=this.instantiatePrefabs(I.instance().GetShowRewardSetting(t.fishType).FxPrefab),t.fish.active=!0,this._finalValue[this._score]=t.score,this._finalValue[this._length]=t.length,this._finalValue[this._weight]=t.weight,this.fishLength.node.active=!1,this.fishWeight.node.active=!1,this.changeLayer(t.fish,this._getFishUILayer),this.fishParent.addChild(t.fish),t.fish.setPosition(d.ZERO),this.fishParent.getComponent(P).ReplayAllActions(),this.showRecordFrame(),L.instance().mixerState==z.Normal&&L.instance().SwitchMixerState(z.Gotcha),this.bgmPlayer.play(),this.playGetCoinAudio();var i,n=S.Instance.Data.get(t.fishType);i=null!=(e=x.instance().GetFishName(n))?e:n.FishName,this.showFishDescription(i)},h.showRank=function(){var e=s(o().mark((function e(t,i){var n,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showStar(this._startRank-1),e.next=3,this.waitTimeOut(this.showStarTimes[this._startRank-1]);case 3:n=this._startRank;case 4:if(!(n<=t)){e.next=12;break}return this.showStar(n),this.showFX(n),e.next=9,this.waitTimeOut(this.showStarTimes[n]);case 9:n++,e.next=4;break;case 12:this.endCallback=i,this.scheduledCallback=function(){r._isClickClosable=!1,r.CloseGotchaUI()},this.scheduleOnce(this.scheduledCallback,this.closeDelayTime);case 15:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),h.CloseGotchaUI=function(){var e=this;_(this.renderSprite).to(.3,{opacity:0}).call((function(){D.instance().getPlayerFort(e._fishInfo.fortID).playBumpCoin(e._fishInfo.score),e.releaseInstantiatedNodes(),e.hideRecord(),e.endCallback(),e.NextGetFish()})).start()},h.NextGetFish=function(){this._getFishInfo.length>0?this.showGetFish():(this.renderCamera.node.active=!1,this.renderSprite.node.active=!1,this._isShowing=!1,this.root.active=!1,L.instance().mixerState==z.Gotcha&&L.instance().SwitchMixerState(z.Normal),R.Instance.emit(G.CLOSE_GOTCHA_FISH))},h.showStar=function(e){this.star[e].node.active=!0,this.star[e].node.getComponentInChildren(m).play()},h.showFX=function(e){this.rankFx[e-this._indexGap].active=!0,this.rankFx[e-1-this._indexGap]&&(this.rankFx[e-1-this._indexGap].active=!1)},h.showRecordFrame=function(){for(var e in this._valueString)this._value[e]=0,e==this._score?this._valueString[e].string="0":this._valueString[e].string="0.00";for(var t=this._startRank-1;t<this.star.length;t++)this.star[t].node.getComponentInChildren(m).stop(),this.star[t].node.active=!1;this.recordFrame.active=!0,this.setUpdateValue(),this.scoreString.string=this._updateValue[this._score].toString()},h.showRecord=function(){this.fishLength.node.active=!0,this.fishWeight.node.active=!0,this._updateTime=Date.now(),this.schedule(this.updateNumber,this._udpateInterval,b.REPEAT_FOREVER),this.scoreString.node.active=!0,this.scoreStringRoot.getComponent(P).ReplayAllActions()},h.hideRecord=function(){this.scoreString.node.active=!1,this.recordFrame.active=!1},h.updateNumber=function(){var e=this,t=Date.now(),i=.001*(t-this._updateTime),n=!0;for(var r in this._value){var a=Math.round(this._updateValue[r]*(i/this._udpateInterval));this._value[r]+=a,this._value[r]>this._finalValue[r]?this._value[r]=this._finalValue[r]:n=!1,r==this._score?this._valueString[r].string=this._value[r].toString():this._valueString[r].string=(.01*this._value[r]).toFixed(2)}this._updateTime=t,n&&(this.getcoinPlayer.stop(),this.coinFinishPlayer.play(),this._fishInfo.rank>2?this.bgmPlayer.stop():this.scheduleOnce((function(){e.bgmPlayer.stop()}),this.bgmDelayTime),this.scheduleOnce((function(){e._performComplete=!0}),this.clickCloseDelayTime),this.unschedule(this.updateNumber))},h.showFishDescription=function(e){this.fishName.string=e},h.setUpdateValue=function(){for(var e in this._udpateCount=this.getUpdateDuration(this._fishInfo.rank)*this._fps,this._updateValue){var t=Math.round(this._finalValue[e]/this._udpateCount);t%10==0&&t++,this._updateValue[e]=t}},h.waitTimeOut=function(e){return new Promise((function(t){setTimeout((function(){t()}),1e3*e)}))},h.changeLayer=function(e,t){e.layer=t;for(var i=0;i<e.children.length;i++)this.changeLayer(e.children[i],t)},h.instantiatePrefabs=function(e){for(var t,i=[],n=a(e);!(t=n()).done;){var r=t.value,s=y(r);this.fxRoot.addChild(s),i.push(s)}return i},h.releaseInstantiatedNodes=function(){for(var e,t=a(this.rankFx);!(e=t()).done;){e.value.destroy()}this.rankFx=[]},h.cancelScheduledTask=function(){this.scheduledCallback&&(this.unschedule(this.scheduledCallback),this.scheduledCallback=null,this.CloseGotchaUI())},h.getUpdateDuration=function(e){return this.totalScoreTime[e]},t}(w)).prototype,"root",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(ee.prototype,"fxRoot",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(ee.prototype,"fishParent",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(ee.prototype,"scoreString",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(ee.prototype,"scoreStringRoot",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ee.prototype,"recordFrame",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ee.prototype,"star",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),he=t(ee.prototype,"fishLength",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ee.prototype,"fishWeight",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ee.prototype,"fishName",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ee.prototype,"renderSprite",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ee.prototype,"bgmPlayer",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ee.prototype,"bgmDelayTime",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=t(ee.prototype,"getcoinPlayer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ee.prototype,"coinFinishPlayer",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(ee.prototype,"closeDelayTime",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),me=t(ee.prototype,"showStarTimes",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=t(ee.prototype,"totalScoreTime",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=t(ee.prototype,"clickCloseDelayTime",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.8}}),$=ee))||$));h._RF.pop()}}}));

System.register("chunks:///_virtual/ShowReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FSUIManager.ts","./BulletPoolManager.ts","./UIPoolManager.ts","./EffectPoolManager.ts","./FishKind.ts"],(function(e){var o,t,n,r,i,a,c,s,u,l,h,d,f,g,w;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.view,s=e.Vec3,u=e.tween,l=e.Component},function(e){h=e.FSUIManager},function(e){d=e.BulletPoolManager},function(e){f=e.UIPoolManager},function(e){g=e.EffectPoolManager},function(e){w=e.FishKind}],execute:function(){var p,P,b,S,y,D,v,G,A,M;i._RF.push({},"6e2dfyLzMZMxo4KAyqROzGy","ShowReward",void 0);var j=a.ccclass,z=a.property;e("ShowReward",j("ShowReward")((b=o((P=function(e){function o(){for(var o,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return o=e.call.apply(e,[this].concat(i))||this,n(o,"scoreShowDuration",b,r(o)),n(o,"scoreMoveDuration",S,r(o)),n(o,"scorePauseDuration",y,r(o)),n(o,"scoreGotchaPauseDuration",D,r(o)),n(o,"scoreGetDuration",v,r(o)),n(o,"scoreGetHeight",G,r(o)),n(o,"scoreAnchorAdjustOnLeft",A,r(o)),n(o,"scoreAnchorAdjustOnRight",M,r(o)),o}t(o,e);var i=o.prototype;return i.onLoad=function(){h.Instance.ShowReward=this},i.ShowRewardCoin=function(e,o,t,n,r){var i=f.instance().showCoinPool.GetObject();i&&i.ShowCoin(e,o,t,n,r)},i.ShowExpload=function(e,o,t){if(o){var n=g.instance().SmallGotchaPool.GetObject();n&&n.node.setWorldPosition(e)}else{var r=g.instance().GetGotchaPoolByGroupID(t).GetObject();r&&r.node.setWorldPosition(e)}},i.ShowScore=function(e,o,t,n,r,i){var a=null;if(t&&(a=f.instance().goldScorePool.GetObject()),a){var l=r.Score.toPerformValue();a.node.setWorldPosition(e),a.string="+"+l,a.node.active=!1,a.string.length>7&&o.add(this.adjustShowScoreEndPos(o.x>c.getDesignResolutionSize().x,a));var h=new s(a.node.getWorldPosition().x-o.x,a.node.getWorldPosition().y-o.y,0),d=h.length()/1e3>this.scoreMoveDuration?h.length()/1e3:this.scoreMoveDuration,g=new s(0,-this.scoreGetHeight,0),p=r.IsCatch&&n.FishOdds.FishKind==w.Gotcha?this.scoreGotchaPauseDuration:this.scoreShowDuration;u(a.node).delay(this.scoreShowDuration).call((function(){a.node.active=!0,a.AdjustDigits()})).delay(p).to(d,{worldPosition:o}).delay(this.scorePauseDuration).by(this.scoreGetDuration,{worldPosition:g}).call((function(){t&&f.instance().goldScorePool.PushToPool(a),i()})).start()}},i.ShowNet=function(e,o){d.instance().spawnNet(e,o)},i.adjustShowScoreEndPos=function(e,o){var t=o.string.length-7,n=e?-t*this.scoreAnchorAdjustOnRight:t*this.scoreAnchorAdjustOnLeft;return new s(n,0,0)},o}(l)).prototype,"scoreShowDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),S=o(P.prototype,"scoreMoveDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),y=o(P.prototype,"scorePauseDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),D=o(P.prototype,"scoreGotchaPauseDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),v=o(P.prototype,"scoreGetDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),G=o(P.prototype,"scoreGetHeight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),A=o(P.prototype,"scoreAnchorAdjustOnLeft",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),M=o(P.prototype,"scoreAnchorAdjustOnRight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),p=P))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/ShowRewardConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./CollectionExtension.ts"],(function(t){var e,n,i,o,r,a,s,l,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,i=t.inheritsLoose,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Enum,l=t.CCInteger},function(t){u=t.SingletonComponent},function(t){c=t.CollectionExtension}],execute:function(){var p,h,w,g,f,d,S,y,C,R,b,D,_;r._RF.push({},"2db72pMGd1Gwbn6jhBw2Aqw","ShowRewardConfig",void 0);var M=a.ccclass,v=a.property,m=t("CoinType",function(t){return t[t.GOLD=0]="GOLD",t}({}));s(m);var I=t("ShowRewardSetting",(p=M("ShowRewardSetting"),h=v({type:l}),w=v({type:m}),p((d=e((f=function(){n(this,"Id",d,this),n(this,"CoinCategory",S,this)}).prototype,"Id",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=e(f.prototype,"CoinCategory",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.GOLD}}),g=f))||g));t("ShowRewardConfig",(y=M("ShowRewardConfig"),C=v({type:[I]}),y(((_=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"Settings",D,o(e)),e._showRewardSettingMap=null,e}i(e,t);var r=e.prototype;return r.GetShowRewardSetting=function(t){return this._showRewardSettingMap.has(t)?this._showRewardSettingMap.get(t):this._showRewardSettingMap.get(e.DefaultId)},r.onLoad=function(){t.prototype.onLoad.call(this),this._showRewardSettingMap=c.toMap(this.Settings,(function(t){return t.Id}))},r.onDestroy=function(){this._showRewardSettingMap=null,t.prototype.onDestroy.call(this)},e}(u)).DefaultId=-1,D=e((b=_).prototype,"Settings",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=b))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShowTickFPS.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./Constants.ts"],(function(e){var t,i,n,a,o,r,s,c,u,h,l,f,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.CCFloat,c=e.Label,u=e.macro,h=e.director,l=e.Component},function(e){f=e.MessageManager},function(e){p=e.MessageCmd},function(e){m=e.Constants}],execute:function(){var d,v,_,T,g,C,F;o._RF.push({},"d89famqhmRATKANX8M30s/Z","ShowTickFPS",void 0);var R=r.ccclass,E=r.property;e("ShowTickFPS",(d=R("ShowTickFPS"),v=E(s),_=E({type:c,visible:!0}),d((C=t((g=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"interval",C,a(t)),n(t,"_fps",F,a(t)),t._frameTimeCache=[],t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.onReceiveFrameUodateAction=this.onReceiveFrameUodateAction.bind(this),this.updateUI=this.updateUI.bind(this),f.Instance.on(p.ON_RECEIVE_FRAME_UPDATE,this.onReceiveFrameUodateAction)},o.start=function(){this.schedule(this.updateUI,this.interval,u.REPEAT_FOREVER)},o.onDestroy=function(){f.Instance.off(p.ON_RECEIVE_FRAME_UPDATE,this.onReceiveFrameUodateAction)},o.onReceiveFrameUodateAction=function(e){var t=h.root.cumulativeTime;this._frameTimeCache.push(t)},o.updateUI=function(){for(var e=h.root.cumulativeTime,t=-1,i=0,n=this._frameTimeCache.length-1;i<=n;++i)if(e-this._frameTimeCache[i]<=1){t=i;break}t>0&&this._frameTimeCache.splice(0,t);var a=this._frameTimeCache.length*m.FixedUpdateCountPerTick;this._fps.string=a.toString()},t}(l)).prototype,"interval",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),F=t(g.prototype,"_fps",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=g))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/SilentUpdateManager.ts",["cc","./Constants.ts","./Action2.ts"],(function(t){var n,e,o;return{setters:[function(t){n=t.cclegacy},function(t){e=t.Constants},function(t){o=t.Action}],execute:function(){n._RF.push({},"45b75UQFX9NgLg6qfo0GuoZ","SilentUpdateManager",void 0);t("SilentUpdateManager",function(){function t(){this.OnSilentUpdate=new o,this.OnUnlockJoinRoom=new o,this._silentUpdateFixedUpdateCount=0,this._unlockJoinRoomFixedUpdateCount=0}var n=t.prototype;return n.FixedUpdate=function(t){this.CheckSilentUpdate(t),this.CheckUnlockJoinRoom(t)},n.CalculateSilentUpdateFixedUpdateCount=function(t,n,o){n.value=t+2*e.RoundTotalFixedUpdateCount-e.FixedUpdateCountPerHalfMinute,o.value=t+3*e.RoundTotalFixedUpdateCount-e.FixedUpdateCountPerHalfMinute},n.SetSilentUpdateFixedUpdateCount=function(t,n){this._silentUpdateFixedUpdateCount=t,this._unlockJoinRoomFixedUpdateCount=n},n.CheckSilentUpdate=function(t){var n;this._silentUpdateFixedUpdateCount>0&&this._silentUpdateFixedUpdateCount==t&&(this._silentUpdateFixedUpdateCount=0,null==(n=this.OnSilentUpdate)||n.invoke())},n.CheckUnlockJoinRoom=function(t){var n;this._unlockJoinRoomFixedUpdateCount>0&&this._unlockJoinRoomFixedUpdateCount==t&&(this._unlockJoinRoomFixedUpdateCount=0,null==(n=this.OnUnlockJoinRoom)||n.invoke())},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc"],(function(n){var t,e;return{setters:[function(n){t=n.cclegacy,e=n._decorator}],execute:function(){t._RF.push({},"a5d57Rd2VhDPaC1FrnIXrDH","Singleton",void 0);e.ccclass,e.property;n("Singleton",function(){function n(){}return n.instance=function(){return this._instance||(this._instance=new this)},n}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,o,e,c;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,e=n._decorator,c=n.Component}],execute:function(){o._RF.push({},"b151b1hH21LTqElNsGFT17P","SingletonComponent",void 0);e.ccclass,e.property;n("SingletonComponent",function(n){function o(){return n.apply(this,arguments)||this}t(o,n),o.instance=function(){return this._instance};var e=o.prototype;return e.onLoad=function(){this.constructor._instance=this},e.onDestroy=function(){this.constructor._instance=null},o}(c))._instance=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/SortedMap.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,s,n,i,o;return{setters:[function(e){t=e.inheritsLoose,r=e.regeneratorRuntime,s=e.createForOfIteratorHelperLoose,n=e.createClass,i=e.wrapNativeSuper},function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"65f9dRYcMtMIbFplmt7TCQ0","SortedMap",void 0);e("SortedMap",function(e){function i(){for(var t,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this)._keys=[],t}t(i,e);var o=i.prototype;return o.set=function(t,r){return this.has(t)||(this._keys.push(t),this._keys.sort((function(e,t){return e<t?-1:e>t?1:0}))),e.prototype.set.call(this,t,r)},o.delete=function(t){if(this.has(t)){var r=this._keys.indexOf(t);this._keys.splice(r,1)}return e.prototype.delete.call(this,t)},o.clear=function(){this._keys=[],e.prototype.clear.call(this)},o.values=r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s(this._keys);case 1:if((n=t()).done){e.next=7;break}return i=n.value,e.next=5,this.get(i);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})),n(i,[{key:"size",get:function(){return this._keys.length}}]),i}(i(Map)));o._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnFishHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageCmd.ts","./MessageManager.ts"],(function(t){var n,i,e,o,a,s,r,c,p,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.CCFloat,c=t.Component},function(t){p=t.MessageCmd},function(t){u=t.MessageManager}],execute:function(){var h,l,f,v,w;a._RF.push({},"96ba3ZxQOJM6IfwOYdeRtBG","SpawnFishHint",void 0);var _=s.ccclass,d=s.property;t("SpawnFishHint",(h=_("SpawnFishHint"),l=d({type:r,visible:!0}),h((w=n((v=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=t.call.apply(t,[this].concat(a))||this,e(n,"_showTime",w,o(n)),n._timer=0,n}i(n,t);var a=n.prototype;return a.onLoad=function(){this.onSpawnWaveAction=this.onSpawnWaveAction.bind(this),u.Instance.on(p.ON_SPAWN_WAVE,this.onSpawnWaveAction)},a.start=function(){this.node.active=!1},a.update=function(t){this._timer+=t,this._timer>=this._showTime&&(this.node.active=!1)},a.onDestroy=function(){u.Instance.off(p.ON_SPAWN_WAVE,this.onSpawnWaveAction)},a.onSpawnWaveAction=function(t,n){this._timer=0,this.node.active=!0},n}(c)).prototype,"_showTime",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseBullet.ts"],(function(e){var t,l,c,n,u;return{setters:[function(e){t=e.inheritsLoose,l=e.createClass},function(e){c=e.cclegacy,n=e._decorator},function(e){u=e.BaseBullet}],execute:function(){var r;c._RF.push({},"5e895uMB6ZKL5+Oj9je52+R","SpecialBullet",void 0);var i=n.ccclass;n.property,e("SpecialBullet",i("SpecialBullet")(r=function(e){function c(){return e.apply(this,arguments)||this}return t(c,e),l(c,[{key:"ToAnchor",get:function(){return this.node}}]),c}(u))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialBulletReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HoldingSpecialBulletInfo.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){i=t.HoldingSpecialBulletInfo}],execute:function(){e._RF.push({},"59c4dg/v3BHXpkK/Svv0kAe","SpecialBulletReward",void 0);t("SpecialBulletReward",function(){function t(t,n,e){this._fishKind=void 0,this._bulletKind=void 0,this._catchInfo=void 0,this._fishKind=t,this._bulletKind=n,this._catchInfo=e}return t.prototype.GenHoldingSpecialBulletInfo=function(){var t=new i;return t.BulletKind=this.BulletKind,t.MaxHitCount=this.CatchInfo.Odds,t.RemainHitCount=this.CatchInfo.Odds,t.Bet=this.CatchInfo.Bet,t},n(t,[{key:"FishKind",get:function(){return this._fishKind}},{key:"BulletKind",get:function(){return this._bulletKind}},{key:"CatchInfo",get:function(){return this._catchInfo}},{key:"PlayerID",get:function(){return this.CatchInfo.PlayerID}},{key:"Odds",get:function(){return this.CatchInfo.Odds}},{key:"Bet",get:function(){return this.CatchInfo.Bet}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialBulletRewardRule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialBulletReward.ts"],(function(e){var t,i,n;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){n=e.SpecialBulletReward}],execute:function(){i._RF.push({},"02f629a2tZI05AeRs8m3yP+","SpecialBulletRewardRule",void 0);e("SpecialBulletRewardRule",function(){function e(e,t){this._fishKind=void 0,this._bulletKind=void 0,this._fishKind=e,this._bulletKind=t}return e.prototype.TryGetReward=function(e){return e.IsCatch?{Success:!0,reward:new n(this.FishKind,this.BulletKind,e)}:{Success:!1,reward:null}},t(e,[{key:"FishKind",get:function(){return this._fishKind}},{key:"BulletKind",get:function(){return this._bulletKind}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialFishCatchAudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CatchAudioController.ts"],(function(o){var t,r,c,e;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,c=o._decorator},function(o){e=o.CatchAudioController}],execute:function(){var i;r._RF.push({},"302c5MADKFBOZ3lWAGG7FU8","SpecialFishCatchAudioController",void 0);var l=c.ccclass;c.property,o("SpecialFishCatchAudioController",l("SpecialFishCatchAudioController")(i=function(o){function r(){return o.apply(this,arguments)||this}return t(r,o),r}(e))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialFishCatchRule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CatchInfo.ts","./CatchRule.ts","./FishRndForGotchaServer.ts"],(function(t){var e,i,s,c,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){s=t.CatchInfo},function(t){c=t.CatchRule},function(t){n=t.FishRndForGotchaServer}],execute:function(){i._RF.push({},"53bca+5xiVBg4LMzODmxLia","SpecialFishCatchRule",void 0);t("SpecialFishCatchRule",function(t){function i(e){var i;return(i=t.call(this,e)||this)._rtp=1,e instanceof n&&(i._rtp=10),i}return e(i,t),i.prototype.TryCatch=function(t,e){var i=this._fishRnd.Catch一般(this._rtp,e.FishOdds.MinOdds,e.FishOdds.AverageOdds,e.FishOdds.MaxOdds),c=i>0,n=void 0;return c&&((n=new s).IsCatch=c,n.PlayerID=t.PlayerID,n.FortID=t.FortID,n.BulletID=t.ID,n.FishID=e.ID,n.Bet=t.Bet,n.Odds=i,n.Score=0),[c,n]},i}(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseFort.ts"],(function(t){var e,l,i,n,o;return{setters:[function(t){e=t.inheritsLoose,l=t.createClass},function(t){i=t.cclegacy,n=t._decorator},function(t){o=t.BaseFort}],execute:function(){var r;i._RF.push({},"57e7cUPwhlDFKLkgMoJUEMv","SpecialFort",void 0);var c=n.ccclass;n.property,t("SpecialFort",c("SpecialFort")(r=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.spawnBullet=function(e,l){t.prototype.spawnBullet.call(this,e,l),this.playFortAudio(),this.checkShootAnimAvailable()&&this.playShootAnim()},n.despawnBullet=function(e,l){t.prototype.despawnBullet.call(this,e,l),this.checkIdleAnimAvailable()&&this.playIdleAnim()},n.set=function(){t.prototype.set.call(this)},n.reset=function(){t.prototype.reset.call(this)},n.checkShootAnimAvailable=function(){var t;return null==(t=this.Fort)?void 0:t.UsingSpecialBullet},n.checkIdleAnimAvailable=function(){var t;return!(null!=(t=this.Fort)&&t.UsingSpecialBullet)},l(i,[{key:"IsReady",get:function(){return null!=this.Info&&!this.Fort.UsingSpecialBullet}}]),i}(o))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/SpecialShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseShoot.ts","./FSUIManager.ts"],(function(e){var t,o,n,c,r,i,s;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){n=e.cclegacy,c=e._decorator,r=e.Vec2},function(e){i=e.BaseShoot},function(e){s=e.FSUIManager}],execute:function(){var a;n._RF.push({},"08becYsdf1LxowTc6YTq9kz","SpecialShoot",void 0);var u=c.ccclass;c.property,e("SpecialShoot",u("SpecialShoot")(a=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),o(n,[{key:"CenterPoint",get:function(){return new r(s.PoolCenter.x,s.PoolCenter.y)}}]),n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteAnimationNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteAnimationPlayer.ts","./Pool.ts"],(function(i){var n,t,e,o,r,a,s,l,c,h;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized,r=i.createClass},function(i){a=i.cclegacy,s=i._decorator,l=i.EventHandler},function(i){c=i.SpriteAnimationPlayer},function(i){h=i.PoolNode}],execute:function(){var p,u,f,y,d;a._RF.push({},"2f579KivcNACZj7/3iJAlIM","SpriteAnimationNode",void 0);var A=s.ccclass,m=s.property;i("SpriteAnimationNode",(p=A("SpriteAnimationNode"),u=m(c),p((d=n((y=function(i){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=i.call.apply(i,[this].concat(r))||this,e(n,"spriteAnimationPlayer",d,o(n)),n._finishCallback=null,n}t(n,i);var a=n.prototype;return a.forceFinish=function(){this.spriteAnimationPlayer.reset(),this.pushToPool(this)},a.onLoad=function(){this._finishCallback=this.genFinishCallback(),this.spriteAnimationPlayer.finishEvents.push(this._finishCallback)},a.onEnable=function(){this.spriteAnimationPlayer.node.active=!0},a.onDisable=function(){this.spriteAnimationPlayer.node.active=!1},a.onDestroy=function(){this.spriteAnimationPlayer.finishEvents.splice(this.spriteAnimationPlayer.finishEvents.indexOf(this._finishCallback)),this._finishCallback=null},a.genFinishCallback=function(){var i=new l;return i.target=this.node,i.component="SpriteAnimationNode",i.handler="checkFinish",i},a.checkFinish=function(){this.spriteAnimationPlayer.Loop||this.forceFinish()},r(n,[{key:"isAvailable",get:function(){return!this.node.active},set:function(i){this.node.active=!i}}]),n}(h)).prototype,"spriteAnimationPlayer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteAnimationPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,a,s,o,p,h,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.SpriteFrame,p=t.EventHandler,h=t.Sprite,l=t.Component}],execute:function(){var u,c,m,f,F,S,_,d,y,b;a._RF.push({},"f0eb7XjzpdAqoZIrwOf3igG","SpriteAnimationPlayer",void 0);var g=s.ccclass,v=s.property,T=s.executeInEditMode;t("SpriteAnimationPlayer",(u=g("SpriteAnimationPlayer"),c=v([o]),m=v({type:[p],tooltip:"完成事件"}),u(f=T((S=e((F=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,r(e,"FPS",S,n(e)),r(e,"Loop",_,n(e)),r(e,"RandomStartFrame",d,n(e)),r(e,"SpriteFrames",y,n(e)),r(e,"finishEvents",b,n(e)),e._outputSprite=void 0,e._secondsToWait=0,e._currentFrame=0,e._deltaTime=0,e._frameDelta=0,e._frameOffset=0,e}i(e,t);var a=e.prototype;return a.playFrame=function(){this._currentFrame%=this.SpriteFrames.length,this.SpriteFrames.length>0&&this.setSpriteFrame(this._currentFrame)},a.playFinish=function(){this.finishEvents&&p.emitEvents(this.finishEvents),this.Loop?this.playFrame():this.reset()},a.reset=function(){this._deltaTime=0,this._currentFrame=0,this.setSpriteFrame(0)},a.Init=function(){this.calculateSecondsToWait(),this._frameOffset=this.RandomStartFrame?Math.floor(Math.random()*this.SpriteFrames.length):0,this.reset()},a.onLoad=function(){this._outputSprite=this.getComponent(h)},a.onEnable=function(){this.Init(),this.playFrame()},a.update=function(t){this._deltaTime+=t,this._deltaTime>=this._secondsToWait&&(this._frameDelta=Math.floor(this._deltaTime/this._secondsToWait),this._deltaTime%=this._secondsToWait,this.updateFrame())},a.onDisable=function(){this.reset()},a.onDestroy=function(){this._outputSprite=null},a.updateFrame=function(){this._currentFrame+=this._frameDelta,this._currentFrame<this.SpriteFrames.length?this.playFrame():this.playFinish()},a.setSpriteFrame=function(t){0<=(t=(t+this._frameOffset)%this.SpriteFrames.length)&&t<this.SpriteFrames.length&&this._outputSprite&&(this._outputSprite.spriteFrame=this.SpriteFrames[t])},a.setUpSpriteFrames=function(t){for(var e=0;e<t.length;e++)this.SpriteFrames[e]=t[e]},a.calculateSecondsToWait=function(){this.FPS>0?this._secondsToWait=1/this.FPS:this._secondsToWait=0},e}(l)).prototype,"FPS",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),_=e(F.prototype,"Loop",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=e(F.prototype,"RandomStartFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=e(F.prototype,"SpriteFrames",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=e(F.prototype,"finishEvents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=F))||f)||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteSettingSetter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,s,a,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Enum,c=e.Sprite,u=e.Component}],execute:function(){var p,l,S,M,d,f,h,z;o._RF.push({},"6dc61WGaoxEC4/7NzKzYUkl","SpriteSettingSetter",void 0);var E=s.ccclass,g=s.property,_=s.requireComponent,A=function(e){return e[e.ON_CALL=0]="ON_CALL",e[e.ON_ENABLE=1]="ON_ENABLE",e[e.ON_DISABLE=2]="ON_DISABLE",e}(A||{}),L=e("SizeMode",function(e){return e[e.CUSTOM=0]="CUSTOM",e[e.TRIMMED=1]="TRIMMED",e[e.RAW=2]="RAW",e}({}));a(A);e("SpriteSettingSetter",(p=E("SpriteSettingSetter"),l=_(c),S=g({type:A}),M=g({type:a(L)}),p(d=l((h=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"timing",h,r(t)),n(t,"sizeMode",z,r(t)),t._sprite=null,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this._sprite=this.node.getComponent(c)},o.onEnable=function(){this.timing===A.ON_ENABLE&&this.setSetting()},o.onDisable=function(){this.timing===A.ON_DISABLE&&this.setSetting()},o.setSetting=function(){this.setSizeMode()},o.setSizeMode=function(){switch(this.sizeMode){case L.CUSTOM:this._sprite.sizeMode=c.SizeMode.CUSTOM;break;case L.TRIMMED:this._sprite.sizeMode=c.SizeMode.TRIMMED;break;case L.RAW:this._sprite.sizeMode=c.SizeMode.RAW;break;default:console.warn("Unknown size mode:")}},t}(u)).prototype,"timing",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.ON_ENABLE}}),z=t(f.prototype,"sizeMode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.TRIMMED}}),d=f))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteTimePlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,o,n,a,p,u,s,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,p=e.Sprite,u=e.CCBoolean,s=e.CCFloat,l=e.SpriteFrame,c=e.CCInteger,h=e.Component}],execute:function(){var m,f,b,y,_,S,T,d,F,g,v,P,w,C,L,z;n._RF.push({},"907037fQjJPtoTsokihoUDT","SpriteTimePlayer",void 0);var D=a.ccclass,N=a.property,A=a.requireComponent;e("SpriteTimePlayer",(m=D("SpriteTimePlayer"),f=A(p),b=N(u),y=N({type:s,range:[.01,100],step:.01}),_=N({type:s,range:[0,100],step:.01}),S=N({type:s,slide:!0,range:[0,1],step:.01}),T=N({type:[l],tooltip:"=> frame per second"}),d=N({type:c,visible:!1}),m(F=f((v=t((g=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"IsLoop",v,o(t)),r(t,"DurationForNonLoop",P,o(t)),r(t,"PlaySpeed",w,o(t)),r(t,"StartTimeShift",C,o(t)),r(t,"SpriteFrameGroup",L,o(t)),t._spriteNow=void 0,t._countTime=void 0,r(t,"_id_SpriteFrame",z,o(t)),t._countAbsoluteTime=0,t}i(t,e);var n=t.prototype;return n.onEnable=function(){this.IsLoop||(this._countTime=0)},n.start=function(){this._spriteNow=this.getComponent(p),null!=this._spriteNow?this._countTime=0:this.enabled=!1},n.update=function(e){if(this._countTime+=e,!this.IsLoop&&this._countTime>this.DurationForNonLoop)this.enabled=!1;else{var t=this.SpriteFrameGroup.length;this.absoluteTimePlay(t,e)}},n.mathRepeat=function(e,t){var i=e;e>t&&(i=e-Math.floor(e/t)*t);return i},n.absoluteTimePlay=function(e,t){this._countAbsoluteTime+=t*this.PlaySpeed,this._countAbsoluteTime=this.mathRepeat(this._countAbsoluteTime,1);var i=this._countAbsoluteTime+this.StartTimeShift,r=(i=this.mathRepeat(i,1))/1,o=Math.floor(r*e);this._id_SpriteFrame!=o&&(this._id_SpriteFrame=o,this._spriteNow.spriteFrame=this.SpriteFrameGroup[this._id_SpriteFrame])},t}(h)).prototype,"IsLoop",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=t(g.prototype,"DurationForNonLoop",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=t(g.prototype,"PlaySpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=t(g.prototype,"StartTimeShift",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=t(g.prototype,"SpriteFrameGroup",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(g.prototype,"_id_SpriteFrame",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=g))||F)||F));n._RF.pop()}}}));

System.register("chunks:///_virtual/StartUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFlowBase.ts"],(function(t){var o,e,n,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){r=t.GameFlowBase}],execute:function(){var a;e._RF.push({},"b0c15DxhaFEwZIl6pGsLWD8","StartUp",void 0);var c=n.ccclass;n.property,t("StartUp",c("StartUp")(a=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onMotionStateEnter=function(o,e){t.prototype.onMotionStateEnter.call(this,o,e)},e}(r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/StartupLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringMapAttribute.ts"],(function(t){var r,e,n,i,a,o,s,p,u;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.JsonAsset,p=t.Component},function(t){u=t.StringMapAttributeData}],execute:function(){var c,l,f,d,g;a._RF.push({},"a88a7nXF31KeIvornnGRpe2","StartupLoader",void 0);var y=o.ccclass,h=o.property;t("StartupLoader",(c=y("StartupLoader"),l=h(s),c((g=r((d=function(t){function r(){for(var r,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,n(r,"stringMapFile",g,i(r)),r}return e(r,t),r.prototype.start=function(){u.Instance.LoadFromJsonAsset(this.stringMapFile.json)},r}(p)).prototype,"stringMapFile",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/StopwatchHelper.ts",["cc","./Constants.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.Constants}],execute:function(){n._RF.push({},"fa66eaXLoxF7ayRRBFKx66Y","StopwatchHelper",void 0);var o=t("StopwatchUnitType",function(t){return t[t.Seconds=0]="Seconds",t[t.MilliSeconds=1]="MilliSeconds",t}({}));t("StopwatchHelper",function(){function t(){}return t.start=function(n,e){void 0===e&&(e=""),t._timers.has(n)?console.warn("duplicate key<"+n+">"):(t._timers.set(n,Date.now()),String.isNullOrEmpty(e)||console.info(e))},t.stop=function(n,s,i){void 0===s&&(s=""),void 0===i&&(i=o.Seconds);var c=t._timers.get(n);if(null!=c){t._timers.delete(n);var r=Date.now()-c;i===o.Seconds&&(r/=e.MilliSecondsPerSecond);var a=i===o.Seconds?"s":"ms";return String.isNullOrEmpty(s)||(s+=" "),console.info(""+s+r.toFixed(2)+" "+a),r}console.warn("key<"+n+"> not found")},t}())._timers=new Map,n._RF.pop()}}}));

System.register("chunks:///_virtual/StringExtension.ts",["cc"],(function(){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"bc68cF5saVNjLnDdL1luRj4","StringExtension",void 0),String.isNullOrEmpty=function(n){return null==n||n===String.empty()},String.empty=function(){return""},n._RF.pop()}}}));

System.register("chunks:///_virtual/StringMapAttribute.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var r;n._RF.push({},"1a8f6BxdN1FuqUYcv4JSk2N","StringMapAttribute",void 0);var i=t("StringMapAttribute",(function(){this.Id=void 0,this.StringId=void 0,this.String=void 0})),a=(t("StringMap",function(){function t(){}return t.GetString=function(t){return a.Instance.GetString(t)},t}()),t("StringMapAttributeData",function(){function t(){this.Data=new Map}var n=t.prototype;return n.GetString=function(t){var n=this.Data.get(t);return null!=n?n.String:(console.error(t+" not found"),t)},n.LoadFromJsonAsset=function(t){for(var n in this.Data.clear(),t.Data){var r=t.Data[n],a=new i;a.Id=+r.Id,a.StringId=r.StringId,a.String=r.String,this.Data.set(a.StringId,a)}},t}()));r=a,a.Instance=new r,n._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtility.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"0c1bbKXGNBALanjrquXzbgq","StringUtility",void 0);t("StringUtility",function(){function t(){}return t.replaceAll=function(t,n,r){return t.replace(new RegExp(r,"gm"),n)},t.format=function(n){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];if(e.length<1)return n;var c=e;for(var u in 1==e.length&&"object"==typeof e[0]&&(c=e[0]),c){var l=c[u];null!=l&&(n=t.replaceAll(n,l,"\\{"+u+"\\}"))}return n},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SubsystemCategory.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4324dU94RRDk7o2U/smHA6Y","SubsystemCategory",void 0);e("SubsystemCategory",function(e){return e[e.None=0]="None",e[e.RoomInfoSystem=1]="RoomInfoSystem",e[e.MatchManager=2]="MatchManager",e[e.FishGameManager=3]="FishGameManager",e[e.GMCommandSubsystem=100]="GMCommandSubsystem",e[e.ServiceSystem=255]="ServiceSystem",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SyncEventUtility.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e,u;return{setters:[function(t){n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){e=t.cclegacy,u=t._decorator}],execute:function(){var a;e._RF.push({},"2499dUhvsJJk4ohwE54U3hn","SyncEventUtility",void 0);var c=u.ccclass;u.property,t("SyncEventUtility",c("SyncEventUtility")(a=function(){function t(){}return t.waitReadys=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(this.waitReady));case 2:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),t.waitReady=function(){var e=n(r().mark((function n(e){var u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){return e.isReady},n.next=3,t.waitCallback(u);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(t){return e.apply(this,arguments)}}(),t.waitCallback=function(){var t=n(r().mark((function t(n,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var r=setInterval((function(){n()&&(t(),clearInterval(r))}),e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(n,r){return t.apply(this,arguments)}}(),t.delay=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,n)})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),t.delayBySec=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.delay(1e3*n));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),t}())||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/SyncReadyWaiter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SyncEventUtility.ts","./MessageManager.ts"],(function(e){var n,t,r,a,c,o,i;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,c=e.Pool},function(e){o=e.SyncEventUtility},function(e){i=e.MessageManager}],execute:function(){var s,u;r._RF.push({},"c68aapZYmhLWp36+i7dmHdt","SyncReadyWaiter",void 0);var y=a.ccclass;a.property,e("SyncReadyWaiter",y("SyncReadyWaiter")(((u=function(){function e(){}return e.waitMessageReady=function(){var r=n(t().mark((function n(r,a){var c;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(c=e.syncablePool.alloc()).splice(0),i.Instance.emit(r,c,a),n.next=5,o.waitReadys(c);case 5:e.syncablePool.free(c);case 6:case"end":return n.stop()}}),n)})));return function(e,n){return r.apply(this,arguments)}}(),e}()).syncablePool=new c((function(){return[]}),5),s=u))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/ThemeBGAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,c,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){c=e.cclegacy,u=e._decorator,a=e.Component}],execute:function(){var f,s,l,p,y,b;c._RF.push({},"789a3onI71PHZdGCZhZ9wUU","ThemeBGAttribute",void 0);var h=u.ccclass,g=u.property;e("ThemeBGAttribute",h("ThemeBGAttribute")((l=t((s=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,n(t,"startPercent",l,i(t)),n(t,"endPercent",p,i(t)),n(t,"xOffset",y,i(t)),n(t,"yOffset",b,i(t)),t}return r(t,e),o(t,[{key:"StartPercent",get:function(){return this.startPercent}},{key:"EndPercent",get:function(){return this.endPercent}},{key:"XOffset",get:function(){return this.xOffset}},{key:"YOffset",get:function(){return this.yOffset}}]),t}(a)).prototype,"startPercent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=t(s.prototype,"endPercent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=t(s.prototype,"xOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(s.prototype,"yOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=s))||f);c._RF.pop()}}}));

System.register("chunks:///_virtual/ThemeBGController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./BGConfig.ts","./ThemeSettingAttribute2.ts","./Constants.ts","./ThemeBGAttribute.ts"],(function(t){var e,n,r,i,o,u,c,s,h,a,d,l,g,_,p,B,f,m,G,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){c=t.cclegacy,s=t._decorator,h=t.Node,a=t.tween,d=t.Component,l=t.instantiate,g=t.UIOpacity,_=t.UITransform},function(t){p=t.MessageManager},function(t){B=t.MessageCmd},function(t){f=t.BGConfig},function(t){m=t.ThemeSettingAttributeData},function(t){G=t.Constants},function(t){C=t.ThemeBGAttribute}],execute:function(){var I,T,x,k,D,b,v,R,y;c._RF.push({},"3e07fNU8nRGupuNsg0uynwo","ThemeBGController",void 0);var S=s.ccclass,P=s.property;t("ThemeBGController",(I=S("ThemeBGController"),T=P(h),x=P(h),k=P(h),I((v=e((b=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,r(e,"themeSprite",v,i(e)),r(e,"currentBackground",R,i(e)),r(e,"_nextBackground",y,i(e)),e._currentRoundGroup=null,e._currentDirection=-1,e._currentLength=-1,e._currentThemeIndex=-1,e._themeBGAttribute=null,e._isThemeChanging=!1,e._width=-1,e._height=-1,e._isThemeBGInit=!1,e}n(e,t);var c=e.prototype;return c.onLoad=function(){p.Instance.on(B.RESET_BG_LOCATION,this.MoveBackground,this),p.Instance.on(B.ON_CHANGE_THEME,this.RefreshTheme,this),p.Instance.on(B.BG_FIRST_FINISH,this.InitThemeBG,this)},c.onDestroy=function(){p.Instance.off(B.RESET_BG_LOCATION,this.MoveBackground,this),p.Instance.off(B.ON_CHANGE_THEME,this.RefreshTheme,this),p.Instance.off(B.BG_FIRST_FINISH,this.InitThemeBG,this)},c.RefreshTheme=function(){var t=o(u().mark((function t(e,n){var r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._currentRoundGroup=e,this._isThemeBGInit){t.next=5;break}this._currentThemeIndex=e.ID,t.next=10;break;case 5:if(this._currentThemeIndex==e.ID){t.next=10;break}return r=this.CalculateProgress(n),i=m.Instance.Data.get(this._currentRoundGroup.ID).Direction,t.next=10,this.FadeInBG(0,i,this._currentRoundGroup.ID,r);case 10:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),c.MoveBackground=function(t,e){if(this._isThemeBGInit)if(t>=this._currentRoundGroup.GenEndFixedUpdateCount()&&t<=this._currentRoundGroup.GenNextFixedUpdateCount()&&!this._isThemeChanging)this.FadeInNextTheme(t,e);else if(!this._isThemeChanging&&0!=this.currentBackground.children.length){var n=m.Instance.Data.get(this._currentRoundGroup.ID).Direction,r=this.CalculateDirection(n),i=G.PerTickTime/G.MilliSecondsPerSecond*e,o=this.CalculateProgress(t);this.MoveBG(r,n,o,i)}},c.FadeInNextTheme=function(t,e){var n=m.Instance.Data.get(this._currentRoundGroup.NextID).Direction,r=(this._currentRoundGroup.GenNextFixedUpdateCount()-t)/G.FixedUpdateCountPerSecond*e;this._isThemeChanging=!0,this._currentThemeIndex=this._currentRoundGroup.NextID,this.FadeInBG(r,n,this._currentThemeIndex)},c.CalculateDirection=function(t){return t%2==0?1:-1},c.CalculateLength=function(t){return t<=1?this._width:this._height},c.CalculateProgress=function(t){return(t-this._currentRoundGroup.GenStartFixedUpdateCount())/(this._currentRoundGroup.GenEndFixedUpdateCount()-2400-this._currentRoundGroup.GenStartFixedUpdateCount())},c.CalculatePosition=function(t){var e=0;return t<=0?e=-1*this._currentLength/2+this._themeBGAttribute.StartPercent/100*this._currentLength:t>=1?e=-1*this._currentLength/2+this._themeBGAttribute.EndPercent/100*this._currentLength:(t=this._themeBGAttribute.StartPercent+(this._themeBGAttribute.EndPercent-this._themeBGAttribute.StartPercent)*t,e=-1*this._currentLength/2+t/100*this._currentLength),e},c.LocateBG=function(t,e,n,r){if(void 0===r&&(r=this.currentBackground.children[0]),null!=r){var i=this.CalculatePosition(n);e<=1?r.setPosition(i*t,this._themeBGAttribute.YOffset):r.setPosition(this._themeBGAttribute.XOffset,i*t)}},c.MoveBG=function(t,e,n,r){var i=this.currentBackground.children[0].getPosition().clone();e<=1?(i.x=this.CalculatePosition(n)*t,a(this.currentBackground.children[0]).to(r,{position:i}).start()):(i.y=this.CalculatePosition(n)*t,a(this.currentBackground.children[0]).to(r,{position:i}).start())},c.InitThemeBG=function(){var t=o(u().mark((function t(){var e,n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.instance().getThemeBGPrefab(this._currentRoundGroup.ID);case 2:e=t.sent,(n=l(e)).parent=this.themeSprite,n.getComponent(g).opacity=255,this.currentBackground=n,this._width=this.currentBackground.getComponent(_).contentSize.width,this._height=this.currentBackground.getComponent(_).contentSize.height,this._themeBGAttribute=this.currentBackground.getComponentInChildren(C),this._currentLength=this.CalculateLength(m.Instance.Data.get(this._currentRoundGroup.ID).Direction),r=m.Instance.Data.get(this._currentRoundGroup.ID).Direction,this._currentDirection=this.CalculateDirection(r),this.LocateBG(this._currentDirection,r,0),this._isThemeBGInit=!0;case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.FadeInBG=function(){var t=o(u().mark((function t(e,n,r,i){var o,c=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===i&&(i=0),t.next=3,f.instance().getThemeBGPrefab(r);case 3:o=t.sent,this._nextBackground=l(o),this._nextBackground.parent=this.themeSprite,this._width=this._nextBackground.getComponent(_).contentSize.width,this._height=this._nextBackground.getComponent(_).contentSize.height,this._themeBGAttribute=this._nextBackground.getComponentInChildren(C),this._currentDirection=this.CalculateDirection(n),this._currentLength=this.CalculateLength(n),0!=this._nextBackground.children.length&&this.LocateBG(this._currentDirection,n,i,this._nextBackground.children[0]),a(this.currentBackground.getComponent(g)).to(e,{opacity:0}).start(),a(this._nextBackground.getComponent(g)).to(e,{opacity:255}).call((function(){var t=[c._nextBackground,c.currentBackground];c.currentBackground=t[0],c._nextBackground=t[1],c.DestroyBG(c._nextBackground),c._nextBackground=null,c._isThemeChanging=!1})).start();case 14:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),c.DestroyBG=function(t){null!=t&&(t.destroy(),t=null)},e}(d)).prototype,"themeSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(b.prototype,"currentBackground",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(b.prototype,"_nextBackground",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=b))||D));c._RF.pop()}}}));

System.register("chunks:///_virtual/ThemeSettingAttribute.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"13238iuokxAmYO3xN6C4OKd","ThemeSettingAttribute",void 0);e("ThemeSettingAttribute",function(){function e(){this.ID=void 0,this.GroupID=void 0,this.ThemeBG=void 0,this.StartBleed=void 0,this.BG1=void 0,this.BG2=void 0,this.BG3=void 0,this.EndBleed=void 0,this.Direction=void 0,this.TransTime=void 0,this.ID=0,this.GroupID=0,this.ThemeBG=0,this.StartBleed=0,this.BG1=0,this.BG2=0,this.BG3=0,this.EndBleed=0,this.Direction=0,this.TransTime=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(10),e.writeInt32(r.ID),e.writeInt32(r.GroupID),e.writeInt32(r.ThemeBG),e.writeInt32(r.StartBleed),e.writeInt32(r.BG1),e.writeInt32(r.BG2),e.writeInt32(r.BG3),e.writeInt32(r.EndBleed),e.writeInt32(r.Direction),e.writeInt32(r.TransTime)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(10==n)a.ID=r.readInt32(),a.GroupID=r.readInt32(),a.ThemeBG=r.readInt32(),a.StartBleed=r.readInt32(),a.BG1=r.readInt32(),a.BG2=r.readInt32(),a.BG3=r.readInt32(),a.EndBleed=r.readInt32(),a.Direction=r.readInt32(),a.TransTime=r.readInt32();else{if(n>10)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.ID=r.readInt32(),1==n)return a;if(a.GroupID=r.readInt32(),2==n)return a;if(a.ThemeBG=r.readInt32(),3==n)return a;if(a.StartBleed=r.readInt32(),4==n)return a;if(a.BG1=r.readInt32(),5==n)return a;if(a.BG2=r.readInt32(),6==n)return a;if(a.BG3=r.readInt32(),7==n)return a;if(a.EndBleed=r.readInt32(),8==n)return a;if(a.Direction=r.readInt32(),9==n)return a;if(a.TransTime=r.readInt32(),10==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ThemeSettingAttribute2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ThemeSettingAttribute.ts"],(function(t){var e,a,r;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy},function(t){r=t.ThemeSettingAttribute}],execute:function(){var i;a._RF.push({},"b80cceQ30ROrKkgOmocdMit","ThemeSettingAttribute",void 0);var o=t("ThemeSettingAttributeData",function(){function t(){this.Data=new Map,this.DataArray=[],this.DataGroup=new Map}var a=t.prototype;return a.LoadFromJsonAsset=function(t){this.Data.clear(),this.DataGroup.clear();var e=0;for(var a in t.Data){var i=t.Data[a],o=new r;o.ID=+i.ID,o.GroupID=+i.GroupID,o.ThemeBG=+i.ThemeBG,o.StartBleed=+i.StartBleed,o.BG1=+i.BG1,o.BG2=+i.BG2,o.BG3=+i.BG3,o.EndBleed=+i.EndBleed,o.Direction=+i.Direction,o.TransTime=+i.TransTime,this.Data.set(o.ID,o),this.DataArray[e]=o,this.DataGroup.has(o.GroupID)||this.DataGroup.set(o.GroupID,[]),this.DataGroup.get(o.GroupID).push(o),e++}},a.LoadFromMemoryPack=function(t){this.Data.clear(),this.DataGroup.clear();for(var a,i=0,o=e(t);!(a=o()).done;){var n=a.value,s=new r;s.ID=+n.ID,s.GroupID=+n.GroupID,s.ThemeBG=+n.ThemeBG,s.StartBleed=+n.StartBleed,s.BG1=+n.BG1,s.BG2=+n.BG2,s.BG3=+n.BG3,s.EndBleed=+n.EndBleed,s.Direction=+n.Direction,s.TransTime=+n.TransTime,this.Data.set(s.ID,s),this.DataArray[i]=s,this.DataGroup.has(s.GroupID)||this.DataGroup.set(s.GroupID,[]),this.DataGroup.get(s.GroupID).push(s),i++}},t}());i=o,o.Instance=new i,a._RF.pop()}}}));

System.register("chunks:///_virtual/ThemeSettingAttributeExtension.ts",["cc","./ThemeSettingAttribute.ts","./Constants.ts"],(function(){var t,e,n;return{setters:[function(e){t=e.cclegacy},function(t){e=t.ThemeSettingAttribute},function(t){n=t.Constants}],execute:function(){t._RF.push({},"5c13aNnvaRFPp7NaboU2AKG","ThemeSettingAttributeExtension",void 0),e.prototype.GetAllBGID=function(){return[this.BG1,this.BG2,this.BG3]},e.prototype.GetTransFixedUpdateCount=function(){return this.TransTime*n.FixedUpdateCountPerSecond},e.prototype.TryGetBGIDByIndex=function(t){switch(t){case 0:return{result:!0,bgID:this.BG1};case 1:return{result:!0,bgID:this.BG2};case 2:return{result:!0,bgID:this.BG3};default:return{result:!1,bgID:0}}},t._RF.pop()}}}));

System.register("chunks:///_virtual/ThroughBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialBullet.ts","./BulletParameter.ts","./Room.ts","./BulletPoolManager.ts","./DirectionHelper.ts","./CameraShakePlayer.ts","./AudioPlayer.ts"],(function(t){var e,i,o,n,r,s,h,a,u,l,c,f,p,d,g,T,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,h=t._decorator,a=t.Quat,u=t.macro,l=t.Vec3},function(t){c=t.SpecialBullet},function(t){f=t.ThroughBulletParameter},function(t){p=t.Room},function(t){d=t.BulletPoolManager},function(t){g=t.DirectionHelper},function(t){T=t.CameraShakePlayer},function(t){P=t.AudioPlayer}],execute:function(){var m,y,I,b,S,R,B,v,Y,D,X,A;s._RF.push({},"ba83bg2KR1MBqyu5Naz5g2w","ThroughBullet",void 0);var w=h.ccclass,H=h.property;t("ThroughBullet",(m=w("ThroughBullet"),y=H(T),I=H(P),m(((A=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"cameraShakePlayer",R,n(e)),o(e,"reflectAudioPlayer",B,n(e)),o(e,"time",v,n(e)),o(e,"posX",Y,n(e)),o(e,"posY",D,n(e)),o(e,"dir",X,n(e)),e}i(e,t);var s=e.prototype;return s.initial=function(e,i){t.prototype.initial.call(this,e,i);var o=[this.ThroughInfo.PosX,this.ThroughInfo.PosY,this.ThroughInfo.Direction];this.posX=o[0],this.posY=o[1],this.dir=o[2],this.updatePose(this.posX,this.posY,this.dir)},s.release=function(e,i){var o=[this.ThroughInfo.PosX,this.ThroughInfo.PosY,this.ThroughInfo.Direction];this.posX=o[0],this.posY=o[1],this.dir=o[2],this.updatePose(this.posX,this.posY,this.dir),t.prototype.release.call(this,e,i)},s.reset=function(){this.time=0},s.doCast=function(){var t=d.instance().genCastNode(this.Bullet),e=this.genCastRTS(),i=e[0],o=e[1];t.node.setRTS(o,i)},s.doHit=function(){var t=d.instance().genHitNode(this.Bullet),e=this.genHitRTS(),i=e[0],o=e[1];t.node.setRTS(o,i)},s.doFinish=function(){var t=d.instance().genFinishNode(this.Bullet),e=this.genFinishRTS(),i=e[0],o=e[1];t.node.setRTS(o,i)},s.playShootAudio=function(t){this.ShootAudio&&(t?this.ShootAudio.play():this.ShootAudio.stop())},s.genCastRTS=function(){var t=this.calculatePose(this.ThroughInfo.PosX,this.ThroughInfo.PosY,this.ThroughInfo.Direction);return[t[0],t[1]]},s.genHitRTS=function(){var t=this.calculatePose(this.ThroughInfo.PosX,this.ThroughInfo.PosY,this.ThroughInfo.Direction),e=t[0],i=t[1];return[e,i=a.rotateZ(i,a.IDENTITY,360*Math.random()*u.RAD)]},s.genFinishRTS=function(){var t=this.calculatePose(this.ThroughInfo.PosX,this.ThroughInfo.PosY,this.ThroughInfo.Direction),e=t[0],i=t[1];return[e,i=a.rotateZ(i,a.IDENTITY,360*Math.random()*u.RAD)]},s.onUpdate=function(i){t.prototype.onUpdate.call(this,i),this.time+=i;var o=function(){return this.posX==this.ThroughInfo.PosX&&this.posY==this.ThroughInfo.PosY}.bind(this)(),n=function(){return this.dir==this.ThroughInfo.Direction}.bind(this)();if(o&&n)this.time=Math.min(this.time,d.instance().FixedUpdateTime);else{var r=[this.ThroughInfo.PosX,this.ThroughInfo.PosY,this.ThroughInfo.Direction];this.posX=r[0],this.posY=r[1],this.dir=r[2],this.time%=d.instance().FixedUpdateTime}n||(this.cameraShakePlayer.shakeCamera(),this.reflectAudioPlayer.play());var s=g.CalculatePose(this.posX,this.posY,this.dir,this.time,e.BulletSpeed,e.BulletRadius,e.RoomWidth,e.RoomHeight),h=s[0],a=s[1],u=s[2];this.updatePose(h,a,u)},s.updatePose=function(t,e,i){var o=this.calculatePose(t,e,i),n=o[0],r=o[1];this.node.setRTS(r,n)},s.calculatePose=function(t,e,i){var o=g.DirectionToVector(i),n=o[0],r=o[1],s=a.rotationTo(new a,l.UNIT_Y,new l(n,r,0));return[new l(t,e),s]},r(e,[{key:"ThroughInfo",get:function(){return this.Bullet.Info}},{key:"ThroughBulletable",get:function(){return this.Bulletable}}]),e}(c)).BulletSpeed=f.Speed,A.BulletRadius=f.Radius,A.RoomWidth=p.Width,A.RoomHeight=p.Height,R=e((S=A).prototype,"cameraShakePlayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(S.prototype,"reflectAudioPlayer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(S.prototype,"time",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=e(S.prototype,"posX",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=e(S.prototype,"posY",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=e(S.prototype,"dir",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=S))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/ThroughBulletInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./IBulletSource.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.IBulletSource}],execute:function(){r._RF.push({},"19bff2nPR5GLIW7TVTrpiV8","ThroughBulletInfo",void 0);e("ThroughBulletInfo",function(){function e(){this.Source=void 0,this.Direction=void 0,this.PosX=void 0,this.PosY=void 0,this.MaxHitCount=void 0,this.RemainHitCount=void 0,this.Source=null,this.Direction=0,this.PosX=0,this.PosY=0,this.MaxHitCount=0,this.RemainHitCount=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(6),n.serializeCore(e,r.Source),e.writeInt32(r.Direction),e.writeFloat64(r.PosX),e.writeFloat64(r.PosY),e.writeUint32(r.MaxHitCount),e.writeUint32(r.RemainHitCount)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],o=t[1];if(!i)return null;var a=new e;if(6==o)a.Source=n.deserializeCore(r),a.Direction=r.readInt32(),a.PosX=r.readFloat64(),a.PosY=r.readFloat64(),a.MaxHitCount=r.readUint32(),a.RemainHitCount=r.readUint32();else{if(o>6)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return a;if(a.Source=n.deserializeCore(r),1==o)return a;if(a.Direction=r.readInt32(),2==o)return a;if(a.PosX=r.readFloat64(),3==o)return a;if(a.PosY=r.readFloat64(),4==o)return a;if(a.MaxHitCount=r.readUint32(),5==o)return a;if(a.RemainHitCount=r.readUint32(),6==o)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ThroughFort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./SpecialFort.ts"],(function(t){var e,n,o,r,l,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,r=t._decorator},function(t){l=t.BulletKind},function(t){u=t.SpecialFort}],execute:function(){var c;o._RF.push({},"db6f3UDxR9EeaZlAYDn/FrM","ThroughFort",void 0);var i=r.ccclass;r.property,t("ThroughFort",i("ThroughFort")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.spawnBullet=function(e,n){t.prototype.spawnBullet.call(this,e,n);var o=e.Info;this.setAnchorAngle(o.Direction)},r.despawnBullet=function(e,n){t.prototype.despawnBullet.call(this,e,n)},r.set=function(){t.prototype.set.call(this)},r.reset=function(){t.prototype.reset.call(this)},n(o,[{key:"BulletKind",get:function(){return l.Through}},{key:"BulletAnchor",get:function(){return this.node}}]),o}(u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/ThroughShoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpecialShoot.ts","./PlayerFortManager.ts","./BulletKind.ts","./ClientAgent.ts","./Vector2.ts","./DirectionHelper.ts"],(function(t){var o,n,i,e,r,u,c,l,s,h,a,f,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized,r=t.createClass},function(t){u=t.cclegacy,c=t._decorator},function(t){l=t.SpecialShoot},function(t){s=t.PlayerFortManager},function(t){h=t.BulletKind},function(t){a=t.ClientAgent},function(t){f=t.Vector2},function(t){p=t.DirectionHelper}],execute:function(){var S,g,d;u._RF.push({},"01f9bsnEZNPRaYDhycz9LNP","ThroughShoot",void 0);var A=c.ccclass,y=c.property;t("ThroughShoot",A("ThroughShoot")((d=o((g=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return o=t.call.apply(t,[this].concat(r))||this,i(o,"rotateAngleLimit",d,e(o)),o.IsCountDownFinish=void 0,o.IsAutoShootMode=void 0,o.AutoShootInfo=void 0,o.HoldingSpecialBulletInfo=void 0,o.AutoShootCount=void 0,o}n(o,t);var u=o.prototype;return u.set=function(){},u.reset=function(){},u.initAutoShoot=function(){this.AutoShootCount=0,this.AutoShootInfo=null},u.startAutoShoot=function(){this.tryShoot()},u.updateAutoShoot=function(){},u.stopAutoShoot=function(){this.AutoShootCount=0},u.runShoot=function(){var t=s.instance().MainPlayerFort.UsedBulletFort,o=t.BulletKind,n=this.transToShootDirection(this.IsCountDownFinish?this.CenterPoint:this.ShootPoint),i=new f;i.X=t.BulletAnchor.position.x,i.Y=t.BulletAnchor.position.y,a.Instance.FireSpecialBullet(i,n,o),this.IsCountDownFinish=!1},r(o,[{key:"BulletKind",get:function(){return h.Through}},{key:"RotateDirectionLimit",get:function(){return this.rotateAngleLimit/p.DegreePerDirection}}]),o}(l)).prototype,"rotateAngleLimit",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),S=g))||S);u._RF.pop()}}}));

System.register("chunks:///_virtual/TickPingHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./ServiceManager.ts"],(function(e){var i,t,n,r,o,a,s,c,l,p,u,h,g,f,m;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,n=e.inheritsLoose,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,c=e.Color,l=e.CCFloat,p=e.Label,u=e.macro,h=e.Component},function(e){g=e.MessageManager},function(e){f=e.MessageCmd},function(e){m=e.ServiceManager}],execute:function(){var d,_,b,v,y,T,R,I,U,P,E,A,C,F,M,S,k,w;a._RF.push({},"b8638jbJKhIqJpX4pBUtVB/","TickPingHelper",void 0);var z=s.ccclass,D=s.property,x=e("PingTypeSetting",(d=z("PingTypeSetting"),_=D(c),b=D(l),d((T=i((y=function(){t(this,"Color",T,this),t(this,"TickInterval",R,this)}).prototype,"Color",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),R=i(y.prototype,"TickInterval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=y))||v));e("TickPingHelper",(I=z("TickPingHelper"),U=D([x]),P=D(l),E=D(p),A=D(p),I((M=i((F=function(e){function i(){for(var i,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,t(i,"pingTypeSetting",M,r(i)),t(i,"refreshUiInterval",S,r(i)),t(i,"pingTitle",k,r(i)),t(i,"pingNumber",w,r(i)),i._timer=0,i._maxPing=0,i._isReady=!1,i._isRefreshedUI=!1,i}n(i,e);var a=i.prototype;return a.onJoinRoomAction=function(){this.onReceiveFrameUpdateAction=this.onReceiveFrameUpdateAction.bind(this),this.updateUI=this.updateUI.bind(this),g.Instance.on(f.ON_RECEIVE_FRAME_UPDATE,this.onReceiveFrameUpdateAction),this.refreshTimer(),this.schedule(this.updateUI,this.refreshUiInterval,u.REPEAT_FOREVER),this._isReady=!0,this.pingTitle.node.active=!0},a.update=function(e){this._timer+=e},a.onDestroy=function(){g.Instance.off(f.ON_RECEIVE_FRAME_UPDATE,this.onReceiveFrameUpdateAction)},a.updateUI=function(){if(this._isReady&&!m.instance().roomService.isDisconnected){var e=Math.floor(this._isRefreshedUI?100*this._timer:100*this._maxPing);this.pingNumber.string=e.toString()+" ms";for(var i,t=this.pingTypeSetting[0].Color,n=o(this.pingTypeSetting);!(i=n()).done;){var r=i.value;e>=r.TickInterval&&(t=r.Color)}this.pingNumber.color=t,this.pingTitle.color=t,this._isRefreshedUI=!0}},a.onReceiveFrameUpdateAction=function(){this.refreshTimer()},a.refreshTimer=function(){this._isRefreshedUI&&(this._isRefreshedUI=!1,this._maxPing=0),this._timer>this._maxPing&&(this._maxPing=this._timer),this._timer=0},i}(h)).prototype,"pingTypeSetting",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=i(F.prototype,"refreshUiInterval",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),k=i(F.prototype,"pingTitle",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(F.prototype,"pingNumber",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=F))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/TokenAuthInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,n,t;return{setters:[function(e){r=e.cclegacy},function(e){n=e.MemoryPackWriter},function(e){t=e.MemoryPackReader}],execute:function(){r._RF.push({},"411e58DOopGKq/Ds9890aLe","TokenAuthInfo",void 0);e("TokenAuthInfo",function(){function e(){this.Token=void 0,this.Token=""}return e.serialize=function(e){var r=n.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(1),e.writeString(r.Token)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=n.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,n){r.writeArray(n,(function(r,n){return e.serializeCore(r,n)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var n=r.tryReadObjectHeader(),t=n[0],i=n[1];if(!t)return null;var a=new e;if(1==i)a.Token=r.readString();else{if(i>1)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==i)return a;if(a.Token=r.readString(),1==i)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["cc"],(function(n){var t,e;return{setters:[function(n){t=n.cclegacy,e=n.Vec3}],execute:function(){t._RF.push({},"44045XCiABCUrEabTEAjLAl","Tools",void 0);n("default",function(){function n(){}return n.getClone=function(n){return n.clone?n.clone():n},n.add=function(n,t){return n instanceof e?e.add(new e,n,t):n+t},n.sub=function(n,t){return n instanceof e?e.subtract(new e,n,t):n-t},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/TypeName.ts",["cc","./GMAddCoinReq.ts","./GMChangeTickSpeedUpReq.ts","./GMSpawnFishReq.ts"],(function(e){var n,i,t,c;return{setters:[function(e){n=e.cclegacy},function(e){i=e.GMAddCoinReq},function(e){t=e.GMChangeTickSpeedUpReq},function(e){c=e.GMSpawnFishReq}],execute:function(){n._RF.push({},"f5a92nh9spEybZuA30kXlz4","TypeName",void 0);var a=e("TypeName",function(){function e(){}return e.GetName=function(n){return n instanceof t?e.GMChangeTickSpeedUpReq:n instanceof c?e.GMSpawnFishReq:n instanceof i?e.GMAddCoinReq:void 0},e}());a.GMChangeTickSpeedUpReq="GMChangeTickSpeedUpReq",a.GMSpawnFishReq="GMSpawnFishReq",a.GMAddCoinReq="GMAddCoinReq",n._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIAutoAttribute2.ts"],(function(t){var o,r,e,a;return{setters:[function(t){o=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,e=t.Enum},function(t){a=t.UIAutoAttribute}],execute:function(){var u;r._RF.push({},"db8b9Jv60NJ2b4j226eh78Z","UIAutoAttribute",void 0);var n=t("GroupSortType",function(t){return t[t.None=0]="None",t[t.NewFish=1]="NewFish",t[t.Weapon=2]="Weapon",t[t.Gotcha=3]="Gotcha",t[t.Normal=4]="Normal",t}({}));e(n);var c=t("UIAutoAttributeData",function(){function t(){this.Data=new Map}var r=t.prototype;return r.LoadFromJsonAsset=function(t){for(var o in this.Data.clear(),t.Data){var r=t.Data[o],e=new a;e.ID=+r.ID,e.LockGroup=r.LockGroup,e.UIAutoShow=r.UIAutoShow,e.Sort=r.Sort,e.GroupSort=r.GroupSort,this.Data.set(e.ID,e)}},r.LoadFromMemoryPack=function(t){this.Data.clear();for(var r,e=o(t);!(r=e()).done;){var u=r.value,n=new a;n.ID=+u.ID,n.LockGroup=u.LockGroup,n.UIAutoShow=u.UIAutoShow,n.Sort=u.Sort,n.GroupSort=u.GroupSort,this.Data.set(n.ID,n)}},t}());u=c,c.Instance=new u,r._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoAttribute2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(r){var e,t,i;return{setters:[function(r){e=r.cclegacy},function(r){t=r.MemoryPackWriter},function(r){i=r.MemoryPackReader}],execute:function(){e._RF.push({},"e90a8Kk+wNPXbCpT/WHooKH","UIAutoAttribute",void 0);r("UIAutoAttribute",function(){function r(){this.ID=void 0,this.LockGroup=void 0,this.UIAutoShow=void 0,this.Sort=void 0,this.GroupSort=void 0,this.ID=0,this.LockGroup=0,this.UIAutoShow=0,this.Sort=0,this.GroupSort=0}return r.serialize=function(r){var e=t.getSharedInstance();return this.serializeCore(e,r),e.toArray()},r.serializeCore=function(r,e){null!=e?(r.writeObjectHeader(5),r.writeInt32(e.ID),r.writeInt32(e.LockGroup),r.writeInt32(e.UIAutoShow),r.writeInt32(e.Sort),r.writeInt32(e.GroupSort)):r.writeNullObjectHeader()},r.serializeArray=function(r){var e=t.getSharedInstance();return this.serializeArrayCore(e,r),e.toArray()},r.serializeArrayCore=function(e,t){e.writeArray(t,(function(e,t){return r.serializeCore(e,t)}))},r.deserialize=function(r){return this.deserializeCore(new i(r))},r.deserializeCore=function(e){var t=e.tryReadObjectHeader(),i=t[0],o=t[1];if(!i)return null;var n=new r;if(5==o)n.ID=e.readInt32(),n.LockGroup=e.readInt32(),n.UIAutoShow=e.readInt32(),n.Sort=e.readInt32(),n.GroupSort=e.readInt32();else{if(o>5)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==o)return n;if(n.ID=e.readInt32(),1==o)return n;if(n.LockGroup=e.readInt32(),2==o)return n;if(n.UIAutoShow=e.readInt32(),3==o)return n;if(n.Sort=e.readInt32(),4==o)return n;if(n.GroupSort=e.readInt32(),5==o)return n}return n},r.deserializeArray=function(r){return this.deserializeArrayCore(new i(r))},r.deserializeArrayCore=function(e){return e.readArray((function(e){return r.deserializeCore(e)}))},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoAttributeData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./UIAutoAttribute2.ts"],(function(e){var r,t,i,a;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){a=e.UIAutoAttribute}],execute:function(){r._RF.push({},"97842LjJzhOKLt0bFt0x38q","UIAutoAttributeData",void 0);e("UIAutoAttributeData",function(){function e(){this.Data=void 0,this.DataTable=void 0,this.Data=null,this.DataTable=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeArray(r.Data,(function(e,r){return a.serializeCore(e,r)})),e.writeMap(r.DataTable,(function(e,r){return e.writeInt32(r)}),(function(e,r){return a.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var u=new e;if(2==n)u.Data=r.readArray((function(e){return a.deserializeCore(e)})),u.DataTable=r.readMap((function(e){return e.readInt32()}),(function(e){return a.deserializeCore(e)}));else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return u;if(u.Data=r.readArray((function(e){return a.deserializeCore(e)})),1==n)return u;if(u.DataTable=r.readMap((function(e){return e.readInt32()}),(function(e){return a.deserializeCore(e)})),2==n)return u}return u},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoShootController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIAutoShootUnit.ts","./FishAttribute2.ts","./UIAutoAttribute.ts","./KindHelper.ts","./MessageManager.ts","./MessageCmd.ts","./FishOddsAttribute2.ts","./UIAutoShootSetting.ts","./PlayerFortManager.ts","./MessageData.ts","./UIAutoShootCountSetting.ts","./BulletKind.ts","./NodeControll.ts"],(function(t){var e,i,o,n,s,a,r,h,l,u,c,p,f,g,d,S,I,D,A,_,T,C,y,b,w,O,m,F,v,k,P,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,o=t.inheritsLoose,n=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,l=t.Enum,u=t.CCBoolean,c=t.Node,p=t.Button,f=t.Toggle,g=t.Label,d=t.Vec3,S=t.UIOpacity,I=t.Layout,D=t.Component},function(t){A=t.UIAutoShootUnit},function(t){_=t.FishAttributeData},function(t){T=t.UIAutoAttributeData,C=t.GroupSortType},function(t){y=t.KindHelper},function(t){b=t.MessageManager},function(t){w=t.MessageCmd},function(t){O=t.FishOddsAttributeData},function(t){m=t.UIAutoShootSetting},function(t){F=t.PlayerFortManager},function(t){v=t.AutoShootMessage},function(t){k=t.UIAutoShootCountSetting},function(t){P=t.BulletKind},function(t){R=t.NodeControll}],execute:function(){var U,G,M,N,L,B,x,z,E,V,W,H,J,K,Y,j,q,Q,X,Z,$,tt,et,it,ot,nt,st,at,rt,ht,lt,ut,ct,pt,ft,gt,dt,St,It,Dt,At,_t,Tt,Ct,yt,bt,wt,Ot,mt,Ft,vt,kt,Pt,Rt,Ut,Gt,Mt,Nt,Lt,Bt,xt,zt,Et,Vt;r._RF.push({},"f4222mI6ylNIIrMzJIeWypq","UIAutoShootController",void 0);var Wt=h.ccclass,Ht=h.property,Jt=t("SelectedFishData",(function(){this.AttrData=void 0,this.IsSelected=void 0,this.Page=void 0,this.MaxOdd=void 0,this.MinOdd=void 0,this.IsNew=void 0,this.Sort=void 0})),Kt=t("LockGroupType",function(t){return t[t.None=0]="None",t[t.All=1]="All",t[t.OnlyGotcha=2]="OnlyGotcha",t[t.WeaponAndGotcha=3]="WeaponAndGotcha",t}({}));l(Kt);var Yt=t("OptionGroupType",function(t){return t[t.None=0]="None",t[t.NewFish=1]="NewFish",t[t.Weapon=2]="Weapon",t[t.Gotcha=3]="Gotcha",t[t.Strafing=4]="Strafing",t}({}));l(Kt);var jt=t("AutoShootDefaultSetting",(U=Wt("AutoShootDefaultSetting"),G=Ht({type:l(Kt)}),M=Ht(u),U((B=e((L=function(){i(this,"LockGroupType",B,this),i(this,"HasDefaultShootCount",x,this)}).prototype,"LockGroupType",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Kt.All}}),x=e(L.prototype,"HasDefaultShootCount",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=L))||N));t("UIAutoShootController",(z=Wt("UIAutoShootController"),E=Ht(c),V=Ht(c),W=Ht(p),H=Ht(p),J=Ht([A]),K=Ht(c),Y=Ht(f),j=Ht({type:c,group:"鎖定優先選項"}),q=Ht({type:f,group:"鎖定優先選項"}),Q=Ht({type:f,group:"鎖定優先選項"}),X=Ht({type:f,group:"鎖定優先選項"}),Z=Ht({type:f,group:"鎖定優先選項"}),$=Ht({type:g,group:"鎖定優先選項"}),tt=Ht({type:c,group:"鎖定優先選項"}),et=Ht({type:R,group:"鎖定優先選項"}),it=Ht({type:R,group:"鎖定優先選項"}),ot=Ht(f),nt=Ht(k),st=Ht(m),at=Ht(m),rt=Ht(p),ht=Ht({type:jt,group:"預設設定"}),lt=Ht(d),ut=Ht(d),ct=Ht(S),pt=Ht({type:g,tooltip:"需要強制刷新渲染的Label"}),ft=Ht({type:I,tooltip:"需要強制刷新的Layout"}),z((St=e((dt=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,i(e,"topRoot",St,n(e)),i(e,"bottomRoot",It,n(e)),i(e,"previousBtn",Dt,n(e)),i(e,"nextBtn",At,n(e)),i(e,"units",_t,n(e)),i(e,"strafingNode",Tt,n(e)),i(e,"strafingToggle",Ct,n(e)),i(e,"dropDownGroup",yt,n(e)),i(e,"randomToggle",bt,n(e)),i(e,"newFishToggle",wt,n(e)),i(e,"gotchaToggle",Ot,n(e)),i(e,"weaponToggle",mt,n(e)),i(e,"dropDownSelectedLabel",Ft,n(e)),i(e,"dropDownArrow",vt,n(e)),i(e,"dropDownNormalSprite",kt,n(e)),i(e,"dropDownSelectedSprite",Pt,n(e)),i(e,"autoWeapon",Rt,n(e)),i(e,"autoShoot",Ut,n(e)),i(e,"moreThan",Gt,n(e)),i(e,"lessThan",Mt,n(e)),i(e,"startAutoShoot",Nt,n(e)),i(e,"autoShootDefaultSetting",Lt,n(e)),i(e,"bottomWithoutTopPos",Bt,n(e)),i(e,"bottomWithTopPos",xt,n(e)),i(e,"uiOpacity",zt,n(e)),i(e,"label",Et,n(e)),i(e,"layouts",Vt,n(e)),e._isLock=!1,e._selectedFishDatas=new Set,e._pageIndex=0,e._unitsPerPage=0,e._allFishDatas=[],e._activityDatas=null,e._fishDatasPageMap=new Map,e._lastPageIndex=0,e._isInit=!1,e._playerCoin=0,e._currentPriorityType=Yt.None,e}o(e,t);var r=e.prototype;return r.OnSelectAll=function(t,e){JSON.parse(e)?this._selectedFishDatas=new Set(this._allFishDatas):this._selectedFishDatas.clear(),this.RefreshAutoShootUnits(this._pageIndex),this.UpdateStartBtn(this.IsAnySettingCheck)},r.OnSelectGotcha=function(t,e){this.selectFish(Kt.OnlyGotcha)},r.OnClickPrevPage=function(){this._pageIndex--,this._pageIndex<0&&(this._pageIndex=0),this.refreshArrowBtn(),this.RefreshAutoShootUnits(this._pageIndex)},r.OnClickNextPage=function(){this._pageIndex++,this._pageIndex>this._lastPageIndex&&(this._pageIndex=this._lastPageIndex),this.refreshArrowBtn(),this.RefreshAutoShootUnits(this._pageIndex)},r.OnClickUnit=function(t){this._selectedFishDatas.has(t.SelectedFishData)?this._selectedFishDatas.delete(t.SelectedFishData):this._selectedFishDatas.add(t.SelectedFishData),t.RefreshUnit(t.SelectedFishData,this._selectedFishDatas.has(t.SelectedFishData)),this.UpdateStartBtn(this.IsAnySettingCheck)},r.OnClearAutoShootSetting=function(){this.autoShoot.Reset(!0),this.moreThan.Reset(!0),this.lessThan.Reset(!0),this.strafingToggle.isChecked=!1,this.autoWeapon.isChecked=!1},r.OnStartAutoShoot=function(){var t=new v;t.BulletKind=this._isLock?P.Lock:P.Normal,t.HasShootCountConstraint=this.autoShoot.IsCheck,t.HasMoreThanStopConstraint=this.moreThan.IsCheck,t.HasLessThanStopConstraint=this.lessThan.IsCheck,t.IsShootCountInfinity=this.autoShoot.IsCheck&&this.autoShoot.IsOverflowMax,t.ShootCountConstraint=this.autoShoot.IsCheck?this.autoShoot.Value:this.autoShoot.Max,t.MoreThanStopConstraint=this.moreThan.IsCheck?this.moreThan.Value:this.moreThan.Max,t.LessThanConstraint=this.lessThan.IsCheck?this.lessThan.Value:this.lessThan.Max,t.LockFishGroupIDs=this.GetSelectedFishsGroupIDs(),t.CurrentOptionType=this._isLock?this._currentPriorityType:this.IsStrafingMode?Yt.Strafing:Yt.None,t.IsAutoWeaponMode=this.autoWeapon.isChecked,b.Instance.emit(w.START_UI_AUTO_SHOOT,t),this.CloseUI()},r.OnUIAutoOn=function(){this._isLock=F.instance().MainPlayerFort.UsedBulletKind==P.Lock,this.bottomRoot.active?this.CloseUI():(this.OpenUI(this._isLock),this._isInit?this.ResetConstraintDefaultValue(!0):(this.InitSetting(),this._isInit=!0),this.UpdateStartBtn(this.IsAnySettingCheck))},r.rotateDropDownArrow=function(){var t=this.dropDownArrow.angle+=180;t%=360,this.dropDownArrow.angle=t},r.GetSelectedFishsGroupIDs=function(){var t=[],e=[];return this._selectedFishDatas.forEach((function(t){return e.push(t)})),e.sort((function(t,e){return t.Sort-e.Sort})),e.forEach((function(e){return t.push(e.AttrData.LockGroup)})),t},r.UpdateStartBtn=function(t){if(this._isInit){var e,i=!0;e=t,this._isLock&&(i=this._selectedFishDatas.size>0),this.startAutoShoot.interactable=i&&e}},r.switchOptionGroup=function(t){this.strafingNode.active=!t,this.dropDownGroup.active=!1,this.dropDownArrow.angle=0,this.refreshDropDownSprite()},r.onRandomToggleCheckAction=function(){if(this.randomToggle.isChecked){this._currentPriorityType=Yt.None;var t=this.randomToggle.getComponentInChildren(g);this.refreshDropDownSelected(t.string),this.refreshDropDownSprite()}},r.onNewFishToggleCheckAction=function(){if(this.newFishToggle.isChecked){this._currentPriorityType=this.newFishToggle.isChecked?Yt.NewFish:Yt.None;var t=this.newFishToggle.getComponentInChildren(g);this.refreshDropDownSelected(t.string),this.refreshDropDownSprite()}},r.onGotchaToggleCheckAction=function(){if(this.gotchaToggle.isChecked){this._currentPriorityType=this.gotchaToggle.isChecked?Yt.Gotcha:Yt.None;var t=this.gotchaToggle.getComponentInChildren(g);this.refreshDropDownSelected(t.string),this.refreshDropDownSprite()}},r.onWeaponToggleCheckAction=function(){if(this.weaponToggle.isChecked){this._currentPriorityType=this.weaponToggle.isChecked?Yt.Weapon:Yt.None;var t=this.weaponToggle.getComponentInChildren(g);this.refreshDropDownSelected(t.string),this.refreshDropDownSprite()}},r.onStrafingToggleCheckAction=function(){},r.refreshDropDownSelected=function(t){this.dropDownSelectedLabel.string=t,this.rotateDropDownArrow(),this.dropDownGroup.active=!1},r.refreshDropDownSprite=function(){this.dropDownNormalSprite.node.active=!0,this.dropDownSelectedSprite.node.active=!1},r.OnAutoShootToggleAction=function(t){this.UpdateStartBtn(this.IsAnySettingCheck)},r.OnMoreThanToggleAction=function(t){this.UpdateStartBtn(this.IsAnySettingCheck),t||this.moreThan.IsValueValid||this.moreThan.Reset(!1)},r.OnLessThanToggleAction=function(t){this.UpdateStartBtn(t||this.moreThan.IsCheck||this.autoShoot.IsCheck||this.moreThan.IsCheck),t||this.lessThan.IsValueValid||this.lessThan.Reset(!1)},r.ResetConstraintDefaultValue=function(t){this._playerCoin=F.instance().MainPlayerCoin,this.autoShoot.SetValueBound(1,9999),t&&!this.autoShoot.IsCheck&&this.autoShoot.Reset(!this.autoShoot.IsCheck),this.moreThan.SetValueBound(this._playerCoin+1,999999999),this.moreThan.SetDefaultValue(this._playerCoin+1),(t&&this._playerCoin>=this.moreThan.Value||!this.moreThan.IsCheck)&&this.moreThan.Reset(!this.moreThan.IsCheck),this.lessThan.SetValueBound(0,Math.max(0,this._playerCoin-1)),this.lessThan.SetDefaultValue(Math.max(0,this._playerCoin-1)),(t&&this._playerCoin<=this.lessThan.Value||!this.lessThan.IsCheck)&&this.lessThan.Reset(!this.lessThan.IsCheck)},r.OpenUI=function(t){var e=this;if(this._isInit)this.switchOptionGroup(t);else{this.uiOpacity.opacity=0,this.strafingNode.active=!0,this.topRoot.active=!0,this.label.updateRenderData(!0);for(var i,o=s(this.layouts);!(i=o()).done;){i.value.updateLayout()}this.scheduleOnce((function(){e.switchOptionGroup(t),e.uiOpacity.opacity=255}),.05)}t?(this._pageIndex=0,this.refreshArrowBtn(),this.RefreshAutoShootUnits(this._pageIndex),this.bottomRoot.position=this.bottomWithTopPos):this.bottomRoot.position=this.bottomWithoutTopPos,this.topRoot.active=t,this.bottomRoot.active=!0},r.CloseUI=function(){this.topRoot.active=!1,this.bottomRoot.active=!1},r.RefreshAutoShootUnits=function(t){for(var e=0;e<this._unitsPerPage;e++)if(e<this._fishDatasPageMap.get(t).length){var i=this._selectedFishDatas.has(this._fishDatasPageMap.get(t)[e]),o=this._fishDatasPageMap.get(t)[e];this.units[e].RefreshUnit(o,i)}else this.units[e].node.active=!1},r.refreshArrowBtn=function(){this.previousBtn.interactable=this._pageIndex>0,this.nextBtn.interactable=this._pageIndex<this._lastPageIndex},r.InitFishDatas=function(){this._allFishDatas=[],this._fishDatasPageMap.clear();var t=Array.from(T.Instance.Data.values());t.sort((function(t,e){return t.GroupSort!=e.GroupSort?t.GroupSort-e.GroupSort:t.Sort-e.Sort}));for(var e=0,i=t;e<i.length;e++){var o=i[e];if(!o.UIAutoShow){var n=!1;if(this._activityDatas)for(var a,r=s(this._activityDatas);!(a=r()).done;)for(var h,l=a.value,u=s(l[1]);!(h=u()).done;){h.value==o.LockGroup&&(n=!0)}if(!n)continue}var c=this.createSelectedFishData(o);this._allFishDatas.push(c)}for(var p,f=s(this._allFishDatas);!(p=f()).done;){var g=p.value;this._fishDatasPageMap.has(g.Page)?this._fishDatasPageMap.get(g.Page).push(g):this._fishDatasPageMap.set(g.Page,[g])}},r.createSelectedFishData=function(t){var e=_.Instance.Data.get(t.ID);if(!e)return console.error("[UIAutoShootController:InitFishDatas] fish("+e.ID+") attribute is not exist."),null;var i=O.Instance.GetById(t.ID);if(!i)return console.error("[UIAutoShootController:InitFishDatas] fish("+e.ID+") OddAttribute is not exist."),null;var o=new Jt;return o.AttrData=e,o.IsSelected=!1,o.Page=Math.floor(this._allFishDatas.length/this._unitsPerPage),o.MaxOdd=i.MaxOdds,o.MinOdd=i.MinOdds,o.IsNew=t.GroupSort==C.NewFish,o.Sort=t.Sort,o},r.InitUnits=function(){for(var t,e=s(this.units);!(t=e()).done;){var i=t.value;this.OnClickUnit=this.OnClickUnit.bind(this),i.InitUnit(this.OnClickUnit)}},r.InitSetting=function(){this.OnAutoShootToggleAction=this.OnAutoShootToggleAction.bind(this),this.OnMoreThanToggleAction=this.OnMoreThanToggleAction.bind(this),this.OnLessThanToggleAction=this.OnLessThanToggleAction.bind(this),this.UpdateStartBtn=this.UpdateStartBtn.bind(this),this._playerCoin=F.instance().MainPlayerCoin,this.autoShoot.SetValueBound(1,9999),this.autoShoot.Reset(),this.autoShoot.InitCallBack(this.OnAutoShootToggleAction,null),this.autoShoot.setToggle(this.autoShootDefaultSetting.HasDefaultShootCount),this.moreThan.SetValueBound(this._playerCoin+1,999999999),this.moreThan.SetDefaultValue(this._playerCoin+1),this.moreThan.Reset(),this.moreThan.InitCallBack(this.OnMoreThanToggleAction,null),this.lessThan.SetValueBound(0,Math.max(0,this._playerCoin-1)),this.lessThan.SetDefaultValue(Math.max(0,this._playerCoin-1)),this.lessThan.Reset(),this.lessThan.InitCallBack(this.OnLessThanToggleAction,null)},r.InitDefaultSetting=function(){this.selectFish(this.autoShootDefaultSetting.LockGroupType)},r.onLoad=function(){this.OnJoinRoomAction=this.OnJoinRoomAction.bind(this),this.OnPlayerCoinChange=this.OnPlayerCoinChange.bind(this),this.onSwitchFortAction=this.onSwitchFortAction.bind(this),this.OnSilentUpdateSettingAction=this.OnSilentUpdateSettingAction.bind(this),this.onOpenGotchaFish=this.onOpenGotchaFish.bind(this),this.onCloseGotchaFish=this.onCloseGotchaFish.bind(this),this.OnGetSpecialBulletRewardAction=this.OnGetSpecialBulletRewardAction.bind(this),this.onSetActivityDataAction=this.onSetActivityDataAction.bind(this),b.Instance.on(w.JOIN_ROOM,this.OnJoinRoomAction),b.Instance.on(w.ON_PLAYER_COIN_CHANGE,this.OnPlayerCoinChange),b.Instance.on(w.ON_SWITCH_FORT,this.onSwitchFortAction),b.Instance.on(w.ON_SILENT_UPDATE_SETTING,this.OnSilentUpdateSettingAction),b.Instance.on(w.OPEN_GOTCHA_FISH,this.onOpenGotchaFish,this),b.Instance.on(w.CLOSE_GOTCHA_FISH,this.onCloseGotchaFish,this),b.Instance.on(w.ON_GET_SPECIAL_BULLET_REWARD,this.OnGetSpecialBulletRewardAction),b.Instance.on(w.ON_SET_ACTIVITY_DATA,this.onSetActivityDataAction)},r.onDestroy=function(){b.Instance.off(w.JOIN_ROOM,this.OnJoinRoomAction),b.Instance.off(w.ON_PLAYER_COIN_CHANGE,this.OnPlayerCoinChange),b.Instance.off(w.ON_SWITCH_FORT,this.onSwitchFortAction),b.Instance.off(w.ON_SILENT_UPDATE_SETTING,this.OnSilentUpdateSettingAction),b.Instance.off(w.OPEN_GOTCHA_FISH,this.onOpenGotchaFish,this),b.Instance.off(w.CLOSE_GOTCHA_FISH,this.onCloseGotchaFish,this),b.Instance.off(w.ON_GET_SPECIAL_BULLET_REWARD,this.OnGetSpecialBulletRewardAction),b.Instance.off(w.ON_SET_ACTIVITY_DATA,this.onSetActivityDataAction)},r.OnJoinRoomAction=function(t){this.resetActivityDatas(t.roomInfo.ActivityData),this._unitsPerPage=this.units.length,this.InitFishDatas(),this.InitUnits(),this.initPagesCount(),this.InitDefaultSetting(),this.RefreshAutoShootUnits(this._pageIndex)},r.OnPlayerCoinChange=function(t){this._isInit&&F.instance().checkMainFort(t.FortID)&&this.ResetConstraintDefaultValue(!1)},r.onSwitchFortAction=function(t,e,i){F.instance().checkMainFort(t)&&this.bottomRoot.active&&(this._isLock=i==P.Lock,this.topRoot.active=this._isLock,this.UpdateStartBtn(this.IsAnySettingCheck),this._isLock?(this._pageIndex=0,this.refreshArrowBtn(),this.RefreshAutoShootUnits(this._pageIndex),this.bottomRoot.position=this.bottomWithTopPos):this.bottomRoot.position=this.bottomWithoutTopPos,this.switchOptionGroup(this._isLock))},r.OnSilentUpdateSettingAction=function(){this.InitFishDatas(),this.resetSelectedFishDatas(),this.initPagesCount(),this.RefreshAutoShootUnits(this._pageIndex)},r.onOpenGotchaFish=function(){this.bottomRoot.active&&(this.uiOpacity.opacity=0)},r.onCloseGotchaFish=function(){this.bottomRoot.active&&(this.uiOpacity.opacity=255)},r.OnGetSpecialBulletRewardAction=function(t){F.instance().checkMainFort(t.CatchInfo.FortID)&&this.CloseUI()},r.onSetActivityDataAction=function(t){this.resetActivityDatas(t),this.InitFishDatas(),this.resetSelectedFishDatas(),this.initPagesCount(),this.RefreshAutoShootUnits(this._pageIndex)},r.resetActivityDatas=function(t){if(null!=t){this._activityDatas=new Map;for(var e,i=s(t);!(e=i()).done;){var o=e.value;this._activityDatas.set(o[0],o[1])}}else this._activityDatas=null},r.resetSelectedFishDatas=function(){var t=this,e=[];this._selectedFishDatas.forEach((function(t){return e.push(t)})),this._selectedFishDatas.clear();for(var i,o=function(){var o=i.value;e.find((function(t){return t.AttrData.ID==o.AttrData.ID}))&&t._selectedFishDatas.add(o)},n=s(this._allFishDatas);!(i=n()).done;)o()},r.initPagesCount=function(){this._lastPageIndex=Math.floor(this._allFishDatas.length/this._unitsPerPage),this._allFishDatas.length%this._unitsPerPage==0&&this._lastPageIndex--},r.selectFish=function(t){var e;switch(t){case Kt.All:e=function(t){return!0};break;case Kt.OnlyGotcha:e=function(t){return y.IsGotchaFish(t)};break;case Kt.WeaponAndGotcha:e=function(t){return y.IsGotchaFish(t)||y.IsSpecialFish(t)};break;default:e=function(t){return!1}}this._selectedFishDatas.clear();for(var i,o=s(this._allFishDatas);!(i=o()).done;){var n=i.value;e(n.AttrData.FishKind)&&this._selectedFishDatas.add(n)}this.RefreshAutoShootUnits(this._pageIndex),this.UpdateStartBtn(this.IsAnySettingCheck)},a(e,[{key:"IsAnySettingCheck",get:function(){return this.autoShoot.IsCheck||this.moreThan.IsCheck||this.lessThan.IsCheck}},{key:"IsStrafingMode",get:function(){return this.strafingToggle.isChecked&&!this._isLock}}]),e}(D)).prototype,"topRoot",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(dt.prototype,"bottomRoot",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=e(dt.prototype,"previousBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(dt.prototype,"nextBtn",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=e(dt.prototype,"units",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Tt=e(dt.prototype,"strafingNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(dt.prototype,"strafingToggle",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(dt.prototype,"dropDownGroup",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(dt.prototype,"randomToggle",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(dt.prototype,"newFishToggle",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(dt.prototype,"gotchaToggle",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(dt.prototype,"weaponToggle",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=e(dt.prototype,"dropDownSelectedLabel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(dt.prototype,"dropDownArrow",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=e(dt.prototype,"dropDownNormalSprite",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(dt.prototype,"dropDownSelectedSprite",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(dt.prototype,"autoWeapon",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(dt.prototype,"autoShoot",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=e(dt.prototype,"moreThan",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(dt.prototype,"lessThan",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(dt.prototype,"startAutoShoot",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(dt.prototype,"autoShootDefaultSetting",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(dt.prototype,"bottomWithoutTopPos",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(dt.prototype,"bottomWithTopPos",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=e(dt.prototype,"uiOpacity",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(dt.prototype,"label",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vt=e(dt.prototype,"layouts",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gt=dt))||gt));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoShootCountSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIAutoShootSetting.ts"],(function(e){var t,i,n,r,s,l,o,a,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){l=e.cclegacy,o=e._decorator,a=e.CCString},function(e){u=e.LevelChangeResult,h=e.UIAutoShootSetting}],execute:function(){var v,p,c,f,I,g;l._RF.push({},"d48630nWB1Fb7evV6u1+uCx","UIAutoShootCountSetting",void 0);var m=o.ccclass,d=o.property;e("UIAutoShootCountSetting",(v=m("UIAutoShootCountSetting"),p=d(a),v((I=t((f=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return t=e.call.apply(e,[this].concat(s))||this,n(t,"overflowMaxString",I,r(t)),n(t,"overflowMaxCount",g,r(t)),t._overflowTimes=0,t}i(t,e);var l=t.prototype;return l.IncreaseLevel=function(){this.ParseInputNumber(),this.LevelHelper.IsMax&&!this._isAdding?this._overflowTimes=this.overflowMaxCount:this.LevelHelper.IsMax&&this._overflowTimes++,this.LevelHelper.TryIncrease();var e=u.Normal;this.LevelHelper.IsMax&&(e=u.IsMax),this.ChangeLevel(e)},l.DecreaseLevel=function(){this.ParseInputNumber(),this.IsOverflowMax?(this._overflowTimes=0,this.LevelHelper.SetValue(this.LevelHelper.ConstantNums[this.LevelHelper.ConstantNums.length-1])):this.LevelHelper.TryDecrease();var e=u.Normal;this.LevelHelper.IsMin&&(e=u.IsMin),this.ChangeLevel(e)},l.ParseInputNumber=function(){var e=parseInt(this.numberInputField.string);isNaN(e)||e!=this.LevelHelper.Value&&(this.LevelHelper.setFinalValue(e),this.UpdateNumber())},l.UpdateNumber=function(){var e=this.IsOverflowMax?this.overflowMaxString:this.LevelHelper.Value.toString();this.numberInputField.string=e,this.numberInputField.textLabel.color=this.toggle.isChecked?this.checkedColor:this.uncheckedColor},l.UpdateBtnState=function(){this.IsInteractable&&((this._isMinusClick||this._isMinusing)&&(this._overflowTimes=0),this.minusBtn.interactable=!this.LevelHelper.IsMin,this.addBtn.interactable=!this.IsOverflowMax)},l.Reset=function(t){this._overflowTimes=0,e.prototype.Reset.call(this)},l.OnInputValueChange=function(){var e=this.SetNumWithTypingLimit();this.LevelHelper.setFinalValue(e),this._overflowTimes=this.LevelHelper.IsMax?1:0,this.UpdateBtnState(),this.UpdateNumber()},l.PressingBet=function(e,t){var i=this;return new Promise((function(n,r){var s=setInterval((function(){e?i._isAdding&&!i.IsOverflowMax||(n(null),clearInterval(s)):i._isMinusing&&!i.LevelHelper.IsMin||(n(null),clearInterval(s)),t.call(i)}),1e3*i.continueChangeBetInterval)}))},l.SetNumWithTypingLimit=function(){var e=0;e=(e=this.numberInputField.string?this.numberInputField.string.match("^[0-9]+$")?parseInt(this.numberInputField.string):this.LevelHelper.Value:0)>9999?9999:e;var t=this.numberInputField.string?e.toString():"";return this.numberInputField.string=t,this.numberInputField._impl._updateStyleSheet(),e},s(t,[{key:"IsOverflowMax",get:function(){return this._overflowTimes>=this.overflowMaxCount}},{key:"LevelHelper",get:function(){return this.levelHelper}}]),t}(h)).prototype,"overflowMaxString",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=t(f.prototype,"overflowMaxCount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoShootSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumChangeLevel.ts","./AudioPlayer.ts"],(function(e){var t,i,n,l,s,r,o,u,a,h,c,d,g,p,v,C,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createClass,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,a=e._decorator,h=e.Color,c=e.Button,d=e.Toggle,g=e.EditBox,p=e.Node,v=e.Component},function(e){C=e.NumChangeLevel},function(e){b=e.AudioPlayer}],execute:function(){var f,I,m,_,k,T,y,B,H,M,S,L,E,A,U,N,P,V,x,F,R;u._RF.push({},"57124N+LF5D9rtdhXVyZT7v","UIAutoShootSetting",void 0);var w=a.ccclass,z=a.property,D=e("LevelChangeResult",function(e){return e[e.Normal=1]="Normal",e[e.IsMax=2]="IsMax",e[e.IsMin=4]="IsMin",e}({}));e("UIAutoShootSetting",(f=w("UIAutoShootSetting"),I=z(h),m=z(h),_=z(c),k=z(c),T=z(d),y=z(g),B=z(C),H=z(b),f((L=t((S=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"pressChangeBetInterval",L,l(t)),n(t,"continueChangeBetInterval",E,l(t)),n(t,"checkedColor",A,l(t)),n(t,"uncheckedColor",U,l(t)),n(t,"addBtn",N,l(t)),n(t,"minusBtn",P,l(t)),n(t,"toggle",V,l(t)),n(t,"numberInputField",x,l(t)),n(t,"levelHelper",F,l(t)),n(t,"audioPlayer",R,l(t)),t._pressTime=0,t._isAdding=!1,t._isMinusing=!1,t._isAddClick=!1,t._isMinusClick=!1,t._isInteractable=!0,t._onToggle=void 0,t._onLevelChangeResult=void 0,t}i(t,e);var u=t.prototype;return u.OnToggleChange=function(){null!=this._onToggle&&this._onToggle(this.toggle.isChecked),this.numberInputField.textLabel.color=this.toggle.isChecked?this.checkedColor:this.uncheckedColor},u.OnClickInputField=function(){this.IsInteractable&&(this.toggle.isChecked||(null!=this._onToggle&&this._onToggle(this.toggle.isChecked),this.toggle.isChecked=!0),this.OnInputValueChange())},u.setToggle=function(e){this.toggle.isChecked!=e&&(null!=this._onToggle&&this._onToggle(this.toggle.isChecked),this.toggle.isChecked=e,this.numberInputField.textLabel.color=this.toggle.isChecked?this.checkedColor:this.uncheckedColor)},u.InitCallBack=function(e,t){this._onToggle=e,this._onLevelChangeResult=t},u.SetValueBound=function(e,t){this.levelHelper.SetBound(e,t),this.UpdateBtnState()},u.SetDefaultValue=function(e){this.levelHelper.DefaultValue=e},u.Reset=function(e){void 0===e&&(e=!0),this.levelHelper.ResetValue(),this.levelHelper.ResetLevel(),this.UpdateBtnState(),this.UpdateNumber(),e&&this.toggle.isChecked&&(null!=this._onToggle&&this._onToggle(this.toggle.isChecked),this.toggle.isChecked=!1)},u.UpdateBtnState=function(){this.IsInteractable&&(this.addBtn.interactable=!this.levelHelper.IsMax,this.minusBtn.interactable=!this.levelHelper.IsMin)},u.UpdateNumber=function(){var e=this.levelHelper.Value.toString();this.numberInputField.string=e,this.numberInputField.textLabel.color=this.toggle.isChecked?this.checkedColor:this.uncheckedColor},u.OnInputValueChange=function(){var e=this.SetNumWithTypingLimit();this.levelHelper.SetValue(e),this.UpdateBtnState(),this.UpdateNumber()},u.IncreaseLevel=function(){this.ParseInputNumber();var e=D.Normal;this.levelHelper.IsMax&&(e=D.IsMax),this.levelHelper.TryIncrease(),this.ChangeLevel(e)},u.DecreaseLevel=function(){this.ParseInputNumber();var e=D.Normal;this.levelHelper.IsMin&&(e=D.IsMin),this.levelHelper.TryDecrease(),this.ChangeLevel(e)},u.changeInteraction=function(e){this._isInteractable=e,e?(this.UpdateBtnState(),this.UpdateNumber()):(this.addBtn.interactable=!1,this.minusBtn.interactable=!1,this.numberInputField.textLabel.color=this.uncheckedColor),this.toggle.interactable=e,this.numberInputField.enabled=e},u.onLoad=function(){var e=this;this.addBtn.node.on(p.EventType.TOUCH_START,(function(){return e.TouchBtnStart(!0)}),this),this.addBtn.node.on(p.EventType.TOUCH_END,this.TouchBtnEnd,this),this.addBtn.node.on(p.EventType.TOUCH_CANCEL,this.TouchBtnEnd,this),this.addBtn.node.on(p.EventType.MOUSE_LEAVE,this.TouchBtnEnd,this),this.minusBtn.node.on(p.EventType.TOUCH_START,(function(){return e.TouchBtnStart(!1)}),this),this.minusBtn.node.on(p.EventType.TOUCH_END,this.TouchBtnEnd,this),this.minusBtn.node.on(p.EventType.TOUCH_CANCEL,this.TouchBtnEnd,this),this.minusBtn.node.on(p.EventType.MOUSE_LEAVE,this.TouchBtnEnd,this),this.audioPlayer=this.node.getComponent(b),this.toggle.isChecked=!1},u.update=function(e){!this.IsBtnClick||this._isAdding||this._isMinusing||(this._pressTime+=e,this._pressTime>=this.pressChangeBetInterval&&this._isAddClick?(this._isAdding=!0,this._isAddClick=!1,this.RunPressHold(!0,this.IncreaseLevel),this._pressTime=0):this._pressTime>=this.pressChangeBetInterval&&this._isMinusClick&&(this._isMinusing=!0,this._isMinusClick=!1,this.RunPressHold(!1,this.DecreaseLevel),this._pressTime=0))},u.ChangeLevel=function(e){null!=this._onLevelChangeResult&&this._onLevelChangeResult(e,this.levelHelper.Value),this.toggle.isChecked||(null!=this._onToggle&&this._onToggle(this.toggle.isChecked),this.toggle.isChecked=!0),this.UpdateBtnState(),this.UpdateNumber()},u.ParseInputNumber=function(){var e=parseInt(this.numberInputField.string);e!=this.levelHelper.Value&&(this.levelHelper.SetValue(e),this.UpdateNumber())},u.TouchBtnStart=function(e){!this.IsInteractable||e&&!this.addBtn.interactable||!e&&!this.minusBtn.interactable||(this._isAddClick=e,this._isMinusClick=!e,this.levelHelper.ResetLevel(),e?(this.audioPlayer&&this.addBtn.interactable&&this.toggle.isChecked&&this.audioPlayer.play(),this.IncreaseLevel()):(this.audioPlayer&&this.minusBtn.interactable&&this.toggle.isChecked&&this.audioPlayer.play(),this.DecreaseLevel()))},u.TouchBtnEnd=function(){this._isAddClick=!1,this._isMinusClick=!1,this._isAdding=!1,this._isMinusing=!1,this._pressTime=0},u.RunPressHold=function(){var e=r(o().mark((function e(t,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.PressingBet(t,i);case 2:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),u.PressingBet=function(e,t){var i=this;return new Promise((function(n,l){var s=setInterval((function(){e?i._isAdding&&!i.levelHelper.IsMax||(n(null),clearInterval(s)):i._isMinusing&&!i.levelHelper.IsMin||(n(null),clearInterval(s)),t.call(i)}),1e3*i.continueChangeBetInterval)}))},u.SetNumWithTypingLimit=function(){var e=0;e=(e=this.numberInputField.string?this.numberInputField.string.match("^[0-9]+$")?parseInt(this.numberInputField.string):this.levelHelper.Value:0)>this.levelHelper.Max?this.levelHelper.Max:e;var t=this.numberInputField.string?e.toString():"";return this.numberInputField.string=t,this.numberInputField._impl._updateStyleSheet(),e},s(t,[{key:"IsBtnClick",get:function(){return this._isAddClick||this._isMinusClick}},{key:"IsCheck",get:function(){return this.toggle.isChecked}},{key:"IsInteractable",get:function(){return this._isInteractable}},{key:"Max",get:function(){return this.levelHelper.Max}},{key:"Min",get:function(){return this.levelHelper.Min}},{key:"Value",get:function(){return this.levelHelper.Value}},{key:"IsValueValid",get:function(){return this.levelHelper.Value<=this.levelHelper.Max&&this.levelHelper.Value>=this.levelHelper.Min}},{key:"AudioPlayer",get:function(){return this.audioPlayer}}]),t}(v)).prototype,"pressChangeBetInterval",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),E=t(S.prototype,"continueChangeBetInterval",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),A=t(S.prototype,"checkedColor",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),U=t(S.prototype,"uncheckedColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),N=t(S.prototype,"addBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(S.prototype,"minusBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(S.prototype,"toggle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(S.prototype,"numberInputField",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(S.prototype,"levelHelper",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(S.prototype,"audioPlayer",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=S))||M));u._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoShootUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KindHelper.ts"],(function(e){var t,i,r,n,a,o,l,u,c,s,h,p,f,m,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,u=e.Sprite,c=e.Label,s=e.Node,h=e.Button,p=e.SpriteFrame,f=e.resources,m=e.Component,b=e.Color},function(e){g=e.KindHelper}],execute:function(){var F,y,d,S,w,I,z,L,v,B,C,U,D,N,k,A,R,_,O,E,G,T,K,x,H,M,P,W,j;o._RF.push({},"91380O2V1lGLYofmUWQN5ZW","UIAutoShootUnit",void 0);var Q=l.ccclass,V=l.property;e("UIAutoShootUnit",(F=Q("UIAutoShootUnit"),y=V(u),d=V(u),S=V(u),w=V(c),I=V(s),z=V(s),L=V(h),v=V({type:p,group:{name:"NormalFish"}}),B=V({type:p,group:{name:"NormalFish"}}),C=V({group:{name:"NormalFish"}}),U=V({type:p,group:{name:"GotchaFish"}}),D=V({type:p,group:{name:"GotchaFish"}}),N=V({group:{name:"GotchaFish"}}),F((R=t((A=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"fishImage",R,n(t)),r(t,"fishLabel",_,n(t)),r(t,"fishBg",O,n(t)),r(t,"fishRatio",E,n(t)),r(t,"checkFrame",G,n(t)),r(t,"newTag",T,n(t)),r(t,"bgBtn",K,n(t)),r(t,"normalBgSpriteFrame",x,n(t)),r(t,"normalLabelSpriteFrame",H,n(t)),r(t,"normalNumEffectColor",M,n(t)),r(t,"gotchaBgSpriteFrame",P,n(t)),r(t,"gotchaLabelSpriteFrame",W,n(t)),r(t,"gotchaNumEffectColor",j,n(t)),t._fishType=0,t._selectedFishData=null,t.OnClick=void 0,t}i(t,e);var o=t.prototype;return o.InitUnit=function(e){this.OnClick=e},o.OnClickBg=function(){this.OnClick(this)},o.RefreshUnit=function(e,t){this._fishType=e.AttrData.ID,this._selectedFishData=e,this.RefreshUI(e),this.checkFrame.active=t,this.node.active=!0},o.RefreshUI=function(e){var t=g.IsGotchaFish(e.AttrData.FishKind);f.load("texture/UI/Game130_Fish/"+e.AttrData.LockIcon+"/spriteFrame",p,function(e,t){this.fishImage.spriteFrame=t}.bind(this)),this.fishBg.spriteFrame=t?this.gotchaBgSpriteFrame:this.normalBgSpriteFrame,this.fishLabel.spriteFrame=t?this.gotchaLabelSpriteFrame:this.normalLabelSpriteFrame,this.fishLabel.node.active=!g.IsSpecialFish(e.AttrData.FishKind),this.fishRatio.outlineColor=t?this.gotchaNumEffectColor:this.normalNumEffectColor,this.fishRatio.string=e.MinOdd+"~"+e.MaxOdd,this.fishRatio.node.active=!g.IsSpecialFish(e.AttrData.FishKind),this.newTag.active=e.IsNew},a(t,[{key:"SelectedFishData",get:function(){return this._selectedFishData}}]),t}(m)).prototype,"fishImage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(A.prototype,"fishLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"fishBg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(A.prototype,"fishRatio",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(A.prototype,"checkFrame",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(A.prototype,"newTag",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(A.prototype,"bgBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(A.prototype,"normalBgSpriteFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(A.prototype,"normalLabelSpriteFrame",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(A.prototype,"normalNumEffectColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),P=t(A.prototype,"gotchaBgSpriteFrame",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(A.prototype,"gotchaLabelSpriteFrame",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(A.prototype,"gotchaNumEffectColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),k=A))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIBetData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishAttribute2.ts","./RecyclableListItem.ts","./Utility2.ts"],(function(t){var i,e,n,r,a,o,l,s,u,c,h,p,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Label,s=t.Sprite,u=t.resources,c=t.SpriteFrame},function(t){h=t.FishAttributeData},function(t){p=t.RecyclableListItem},function(t){b=t.Utility}],execute:function(){var f,d,m,F,y,_,L,g,I,D,v,w,z;a._RF.push({},"c602fyFRRlJdpiA4L8vfRUN","UIBetData",void 0);var A=o.ccclass,S=o.property;t("UIBetData",(f=A("UIBetData"),d=S(l),m=S(s),F=S(s),y=S(l),_=S(l),f((I=i((g=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,n(i,"tid",I,r(i)),n(i,"fish",D,r(i)),n(i,"bullet",v,r(i)),n(i,"bet",w,r(i)),n(i,"win",z,r(i)),i._data=null,i._iconName=null,i}e(i,t);var a=i.prototype;return a.initData=function(t){this._data=t,this.tid.string=this._data.TID;var i=h.Instance.Data.get(this._data.FishID);this._iconName=i.LockIcon,this.fish.spriteFrame=null,u.load("texture/UI/Game130_Fish/"+i.LockIcon+"/spriteFrame",c,this.onFishSpriteLoadFinishAction),this.bullet.spriteFrame=this._data.Setting.bulletKindSpriteFrames[this._data.BulletKind],this.bet.string=b.formatLocalizedNumber(this._data.Bet),this.win.string=b.formatLocalizedNumber(this._data.Win)},a.onLoad=function(){this.onFishSpriteLoadFinishAction=this.onFishSpriteLoadFinishAction.bind(this)},a.onFishSpriteLoadFinishAction=function(t,i){null==t?this.isAvailable||i.name==this._iconName&&(this.fish.spriteFrame=i):console.error(t)},i}(p)).prototype,"tid",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(g.prototype,"fish",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(g.prototype,"bullet",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(g.prototype,"bet",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(g.prototype,"win",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=g))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIBetDataGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action2.ts","./Utility2.ts","./RecyclableListItem.ts"],(function(t){var i,e,n,r,a,o,l,c,u,s,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,l=t._decorator,c=t.Label},function(t){u=t.ActionWithOne},function(t){s=t.Utility},function(t){p=t.RecyclableListItem}],execute:function(){var f,h,b,d,m,y,g,w,_,v,z;o._RF.push({},"6807asLlhhEnrSv71N+sRq8","UIBetDataGroup",void 0);var D=l.ccclass,L=l.property;t("UIBetDataGroup",(f=D("UIBetDataGroup"),h=L(c),b=L(c),d=L(c),m=L(c),f((w=i((g=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,n(i,"tid",w,r(i)),n(i,"time",_,r(i)),n(i,"bet",v,r(i)),n(i,"win",z,r(i)),i.onClick=new u,i._data=null,i}e(i,t);var o=i.prototype;return o.initData=function(t){this._data=t,this.tid.string=this._data.tid,s.unixTimeSecondsToLocaleDateAndTime(this._data.time,null,this.time,!0,this._data.Setting.timezoneOffset),this.bet.string=s.formatLocalizedNumber(this.data.bet),this.win.string=s.formatLocalizedNumber(this.data.win)},o.click=function(){this.onClick.invoke(this)},a(i,[{key:"data",get:function(){return this._data}}]),i}(p)).prototype,"tid",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(g.prototype,"time",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(g.prototype,"bet",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(g.prototype,"win",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIBetHistoryDetailPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility2.ts","./RecyclableScrollView.ts"],(function(t){var e,i,a,l,r,n,o,c,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,o=t.Label,c=t.Component},function(t){u=t.Utility},function(t){s=t.default}],execute:function(){var p,y,f,D,h,d,B;r._RF.push({},"a3618K5vPhGyJ2+/Eyqj9HL","UIBetHistoryDetailPanel",void 0);var b=n.ccclass,m=n.property;t("UIBetHistoryDetailPanel",(p=b("UIBetHistoryDetailPanel"),y=m(s),f=m(o),p((d=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,a(e,"uiBetDataScrollView",d,l(e)),a(e,"dateTime",B,l(e)),e}i(e,t);var r=e.prototype;return r.setDatas=function(t,e){u.unixTimeSecondsToLocaleDateAndTime(t.time,this.dateTime,null,!0,e,!0),this.uiBetDataScrollView.init(t.betDatas),this.uiBetDataScrollView.stopAutoScroll(),this.uiBetDataScrollView.scrollToTop()},r.unsetDatas=function(){this.uiBetDataScrollView.init()},e}(c)).prototype,"uiBetDataScrollView",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(h.prototype,"dateTime",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=h))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIBetHistoryPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action2.ts","./Utility2.ts","./RecyclableScrollView.ts"],(function(t){var i,e,n,o,a,r,l,c,u,s,p,h,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Label,c=t.Button,u=t.Component},function(t){s=t.ActionWithOne,p=t.Action},function(t){h=t.Utility},function(t){f=t.default}],execute:function(){var g,B,m,b,k,P,y,T,d,D,v,w,C,I,G,L,A,U,S,x,z;a._RF.push({},"867532Sx1RJxqu4YAcAz9ci","UIBetHistoryPanel",void 0);var E=r.ccclass,R=r.property;t("UIBetHistoryPanel",(g=E("UIBetHistoryPanel"),B=R(l),m=R(l),b=R(f),k=R(c),P=R(c),y=R(l),T=R(c),d=R(c),D=R(l),g((C=i((w=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"dailyBet",C,o(i)),n(i,"dailyWin",I,o(i)),n(i,"uiBetDataGroupScrollView",G,o(i)),n(i,"leftPageButton",L,o(i)),n(i,"rightPageButton",A,o(i)),n(i,"page",U,o(i)),n(i,"previousTimeButton",S,o(i)),n(i,"nextTimeButton",x,o(i)),n(i,"time",z,o(i)),i.onClickUIBetDataGroup=new s,i.onClickLeftPage=new p,i.onClickRightPage=new p,i.onClickPreviousTime=new p,i.onClickNextTime=new p,i}e(i,t);var a=i.prototype;return a.setDailyBetAndDailyWin=function(t,i){this.dailyBet.string=-1!=t?h.formatLocalizedNumber(t):"",this.dailyWin.string=-1!=i?h.formatLocalizedNumber(i):""},a.setDatas=function(t){this.uiBetDataGroupScrollView.init(t),this.uiBetDataGroupScrollView.stopAutoScroll(),this.uiBetDataGroupScrollView.scrollToTop()},a.unsetDatas=function(){this.uiBetDataGroupScrollView.init()},a.setLeftPageButtonEnable=function(t){this.leftPageButton.interactable=t},a.setRightPageButtonEnable=function(t){this.rightPageButton.interactable=t},a.setPage=function(t){this.page.string=-1!=t?t.toString():""},a.setPreviousTimeButtonEnable=function(t){this.previousTimeButton.interactable=t},a.setNextTimeButtonEnable=function(t){this.nextTimeButton.interactable=t},a.setTime=function(t){-1!=t?h.unixTimeSecondsToLocaleDateAndTime(t,this.time):this.time.string=""},a.onLoad=function(){this.onSpwanUIBetDataGroupAction=this.onSpwanUIBetDataGroupAction.bind(this),this.onDespawnUIBetDataGroupAction=this.onDespawnUIBetDataGroupAction.bind(this),this.onClickUIBetDataGroupAction=this.onClickUIBetDataGroupAction.bind(this),this.clickLeftPage=this.clickLeftPage.bind(this),this.clickRightPage=this.clickRightPage.bind(this),this.clickPreviousTime=this.clickPreviousTime.bind(this),this.clickNextTime=this.clickNextTime.bind(this),this.uiBetDataGroupScrollView.itemPool.onSpawn.add(this.onSpwanUIBetDataGroupAction),this.uiBetDataGroupScrollView.itemPool.onDespawn.add(this.onDespawnUIBetDataGroupAction),this.leftPageButton.node.on(c.EventType.CLICK,this.clickLeftPage),this.rightPageButton.node.on(c.EventType.CLICK,this.clickRightPage),this.previousTimeButton.node.on(c.EventType.CLICK,this.clickPreviousTime),this.nextTimeButton.node.on(c.EventType.CLICK,this.clickNextTime)},a.onDestroy=function(){this.nextTimeButton.node.off(c.EventType.CLICK,this.clickNextTime),this.previousTimeButton.node.off(c.EventType.CLICK,this.clickPreviousTime),this.rightPageButton.node.off(c.EventType.CLICK,this.clickRightPage),this.leftPageButton.node.off(c.EventType.CLICK,this.clickLeftPage)},a.onSpwanUIBetDataGroupAction=function(t){t.onClick.add(this.onClickUIBetDataGroupAction)},a.onDespawnUIBetDataGroupAction=function(t){t.onClick.remove(this.onClickUIBetDataGroupAction)},a.onClickUIBetDataGroupAction=function(t){this.onClickUIBetDataGroup.invoke(t)},a.clickLeftPage=function(){this.onClickLeftPage.invoke()},a.clickRightPage=function(){this.onClickRightPage.invoke()},a.clickPreviousTime=function(){this.onClickPreviousTime.invoke()},a.clickNextTime=function(){this.onClickNextTime.invoke()},i}(u)).prototype,"dailyBet",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(w.prototype,"dailyWin",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(w.prototype,"uiBetDataGroupScrollView",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(w.prototype,"leftPageButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(w.prototype,"rightPageButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(w.prototype,"page",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(w.prototype,"previousTimeButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(w.prototype,"nextTimeButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(w.prototype,"time",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIBouncyWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWeaponBase.ts","./BulletKind.ts"],(function(n){var e,t,o,c,u,r;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){o=n.cclegacy,c=n._decorator},function(n){u=n.UIWeaponBase},function(n){r=n.BulletKind}],execute:function(){var s;o._RF.push({},"15aedSPIzBK36h4z42TXk0/","UIBouncyWeapon",void 0);var a=c.ccclass;c.property,n("UIBouncyWeapon",a("UIBouncyWeapon")(s=function(n){function o(){return n.apply(this,arguments)||this}return e(o,n),t(o,[{key:"Kind",get:function(){return r.Bouncy}}]),o}(u))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageManager.ts","./MessageCmd.ts","./UIRoom.ts"],(function(o){var n,t,e,r,i,s,a,c,l,u;return{setters:[function(o){n=o.applyDecoratedDescriptor,t=o.inheritsLoose,e=o.initializerDefineProperty,r=o.assertThisInitialized},function(o){i=o.cclegacy,s=o._decorator,a=o.Component},function(o){c=o.MessageManager},function(o){l=o.MessageCmd},function(o){u=o.UIRoom}],execute:function(){var f,p,m,h,R;i._RF.push({},"9d34cSUhDJHXoBJQJqmHGc8","UIController",void 0);var g=s.ccclass,I=s.property;o("UIController",(f=g("UIController"),p=I(u),f((R=n((h=function(o){function n(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return n=o.call.apply(o,[this].concat(i))||this,e(n,"uiRoom",R,r(n)),n}t(n,o);var i=n.prototype;return i.onLoad=function(){this.onJoinRoom=this.onJoinRoom.bind(this),c.Instance.on(l.JOIN_ROOM,this.onJoinRoom)},i.onDestroy=function(){c.Instance.off(l.JOIN_ROOM,this.onJoinRoom)},i.onJoinRoom=function(o){},n}(a)).prototype,"uiRoom",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=h))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIDot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,l,o,a,p,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Sprite,p=e.SpriteFrame,s=e.Component}],execute:function(){var u,c,b,f,y,_,h,v,S;l._RF.push({},"24583POQC5AV47kgnhGwpir","UIDot",void 0);var d=o.ccclass,g=o.property;e("UIDot",(u=d("UIDot"),c=g({type:a,visible:!0}),b=g({type:p,visible:!0}),f=g({type:p,visible:!0}),u((h=t((_=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,r(t,"_sprite",h,n(t)),r(t,"_enableSprite",v,n(t)),r(t,"_disableSprite",S,n(t)),t}return i(t,e),t.prototype.setEnable=function(e){this._sprite.spriteFrame=e?this._enableSprite:this._disableSprite},t}(s)).prototype,"_sprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(_.prototype,"_enableSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(_.prototype,"_disableSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=_))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIDotGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDot.ts"],(function(t){var e,o,i,n,r,s,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Component},function(t){u=t.UIDot}],execute:function(){var a,p,l,d,f;r._RF.push({},"80572wokyJPe7nIsxzbTV8D","UIDotGroup",void 0);var h=s.ccclass,_=s.property;t("UIDotGroup",(a=h("UIDotGroup"),p=_({type:[u],visible:!0}),a((f=e((d=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"_dots",f,n(e)),e._index=0,e}return o(e,t),e.prototype.setIndex=function(t){this._dots[this._index].setEnable(!1),this._index=t,this._dots[this._index].setEnable(!0)},e}(c)).prototype,"_dots",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=d))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIGeneralPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utility2.ts","./ActionPlayer.ts"],(function(t){var e,n,i,o,r,l,a,c,u,s,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,c=t.Node,u=t.EventHandler,s=t.Component},function(t){p=t.Utility},function(t){f=t.ActionPlayer}],execute:function(){var y,_,b,h,v,B,m,A,P,g,d,w,k;r._RF.push({},"2ac11r39zFETZVriBU8pXc5","UIGeneralPopup",void 0);var z=l.ccclass,R=l.property,T=t("GeneralPopupType",function(t){return t[t.NoButton=0]="NoButton",t[t.OneButton=1]="OneButton",t[t.TwoButton=2]="TwoButton",t}({}));t("UIGeneralPopup",(y=z("UIGeneralPopup"),_=R({type:a,visible:!0}),b=R({type:a,visible:!0}),h=R({type:c,visible:!0}),v=R({type:[u],visible:!0}),B=R({type:[f],visible:!0}),y((P=e((A=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"_content",P,o(e)),i(e,"_title",g,o(e)),i(e,"_confirmButton",d,o(e)),i(e,"_onOpen",w,o(e)),i(e,"_actionPlayers",k,o(e)),e._callback=null,e._isAllActionReady=!1,e}n(e,t);var r=e.prototype;return r.open=function(t,e,n,i){this._content.string=t,this._title.string=e,this._callback=i,this.setButtons(n),this.resetAllActions(),p.emitEventHandlers(this._onOpen)},r.executeCallback=function(){var t;null==(t=this._callback)||t.call(this),this._callback=null},r.setButtons=function(t){switch(t){case T.NoButton:this._confirmButton.active=!1;break;case T.OneButton:this._confirmButton.active=!0;break;case T.TwoButton:console.error("TwoButton not implement"),this._confirmButton.active=!0}},r.resetAllActions=function(){if(!this._isAllActionReady){for(var t=0,e=this._actionPlayers.length-1;t<=e;++t)if(!this._actionPlayers[t].isReady)return;this._isAllActionReady=!0}for(var n=0,i=this._actionPlayers.length-1;n<=i;++n)this._actionPlayers[n].ResetAllActions()},e}(s)).prototype,"_content",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(A.prototype,"_title",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=e(A.prototype,"_confirmButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(A.prototype,"_onOpen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=e(A.prototype,"_actionPlayers",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=A))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIIntroduceScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionPlayer.ts"],(function(e){var t,i,n,r,o,s,c,h,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,n=e.inheritsLoose,r=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,c=e._decorator,h=e.Node,l=e.Component},function(e){a=e.ActionPlayer}],execute:function(){var m,u,v,f,_,I,g,p,w,b,d,y,x,M,D,A,N,R;s._RF.push({},"0a6e4nK2jBC2IvbIEoCiW5s","UIIntroduceScrollView",void 0);var T=c.ccclass,z=c.property,P=e("MoveDirection",function(e){return e[e.none=0]="none",e[e.left=1]="left",e[e.right=2]="right",e}({})),L=function(e){return e[e.left=0]="left",e[e.current=1]="current",e[e.right=2]="right",e}(L||{}),B=(m=T("IntroduceAnchor"),u=z({type:h,visible:!0}),m((_=t((f=function(){i(this,"anchor",_,this),this.item=null}).prototype,"anchor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=f))||v);e("UIIntroduceScrollView",(I=T("UIIntroduceScrollView"),g=z({type:a,visible:!0}),p=z({visible:!0}),w=z({visible:!0}),b=z({type:[B],visible:!0}),d=z({type:[h],visible:!0}),I((M=t((x=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"_tweenMover",M,r(t)),i(t,"_moveLeftTweenName",D,r(t)),i(t,"_moveRightTweenName",A,r(t)),i(t,"_anchors",N,r(t)),i(t,"_items",R,r(t)),t._itemIndex=0,t._moveDirection=P.none,t}n(t,e);var s=t.prototype;return s.setItemIndex=function(e){this.setItemsActive(!1),this.unsetItem(L.left),this.unsetItem(L.right),this._itemIndex=e,this.setItem(L.current,this._itemIndex)},s.move=function(e){switch(this.finishMoving(),e){case P.left:--this._itemIndex,this._itemIndex<0&&(this._itemIndex=this._items.length-1),this.setItem(L.left,this._itemIndex),this._moveDirection=P.left,this._tweenMover.PlayActionsByEvent(this,this._moveLeftTweenName);break;case P.right:++this._itemIndex,this._itemIndex>=this._items.length&&(this._itemIndex=0),this.setItem(L.right,this._itemIndex),this._moveDirection=P.right,this._tweenMover.PlayActionsByEvent(this,this._moveRightTweenName)}},s.finishMoving=function(){if(this.isMoving)switch(this._moveDirection){case P.left:this._moveDirection=P.none,this._tweenMover.ResetActionsByEvent(this,this._moveLeftTweenName),this.unsetItem(L.left),this.setItem(L.current,this._itemIndex);break;case P.right:this._moveDirection=P.none,this._tweenMover.ResetActionsByEvent(this,this._moveRightTweenName),this.unsetItem(L.right),this.setItem(L.current,this._itemIndex)}},s.setItemsActive=function(e){for(var t=0,i=this._items.length-1;t<=i;++t)this._items[t].active=e},s.setItem=function(e,t){var i=this._anchors[e];null!=i.item&&this.unsetItem(e),i.item=this._items[t],i.item.worldPosition=i.anchor.worldPosition,i.item.active=!0},s.unsetItem=function(e){var t=this._anchors[e];null!=t.item&&(t.item.active=!1,t.item=null)},o(t,[{key:"isMoving",get:function(){return this._moveDirection!=P.none}}]),t}(l)).prototype,"_tweenMover",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(x.prototype,"_moveLeftTweenName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"MoveLeft"}}),A=t(x.prototype,"_moveRightTweenName",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"MoveRight"}}),N=t(x.prototype,"_anchors",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(x.prototype,"_items",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=x))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIMeteorWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWeaponBase.ts","./BulletKind.ts"],(function(e){var t,n,o,r,c,s;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,r=e._decorator},function(e){c=e.UIWeaponBase},function(e){s=e.BulletKind}],execute:function(){var u;o._RF.push({},"27ffbkG9xZBtoPUFH+CJ/F0","UIMeteorWeapon",void 0);var i=r.ccclass;r.property,e("UIMeteorWeapon",i("UIMeteorWeapon")(u=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),n(o,[{key:"Kind",get:function(){return s.Meteor}}]),o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIMissileWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWeaponBase.ts","./BulletKind.ts"],(function(e){var n,t,i,r,s,c,o,a,f,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){c=e.cclegacy,o=e._decorator,a=e.Node},function(e){f=e.UIWeaponBase},function(e){l=e.BulletKind}],execute:function(){var u,p,h,g,W;c._RF.push({},"370232DuMVMzplPiOmvQ6FD","UIMissileWeapon",void 0);var y=o.ccclass,I=o.property;e("UIMissileWeapon",(u=y("UIMissileWeapon"),p=I(a),u((W=n((g=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return n=e.call.apply(e,[this].concat(s))||this,i(n,"screenWarningEffect",W,r(n)),n}t(n,e);var c=n.prototype;return c.ShowUI=function(n){e.prototype.ShowUI.call(this,n),this.showWarningEffect()},c.ShowUsedUI=function(n){e.prototype.ShowUsedUI.call(this,n),this.showWarningEffect()},c.switchScreenEffect=function(n){e.prototype.switchScreenEffect.call(this,n),this.IsMain&&this.screenWarningEffect&&(this.screenWarningEffect.active=!1)},c.showWarningEffect=function(){this.IsMain&&this.screenWarningEffect&&(this.screenWarningEffect.active=!0)},s(n,[{key:"Kind",get:function(){return l.Missile}}]),n}(f)).prototype,"screenWarningEffect",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));c._RF.pop()}}}));

System.register("chunks:///_virtual/UIOptionSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ServiceManager.ts","./AudioManager.ts","./FSUIManager.ts","./MessageManager.ts","./MessageCmd.ts","./GameConfig.ts"],(function(t){var i,e,n,o,a,s,r,c,h,f,u,l,_,I,g,p,b,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,h=t.WebView,f=t.UIOpacity,u=t.view,l=t.Component},function(t){_=t.ServiceManager},function(t){I=t.AudioManager},function(t){g=t.FSUIManager},function(t){p=t.MessageManager},function(t){b=t.MessageCmd},function(t){v=t.GameConfig}],execute:function(){var O,m,w,S,d,y,R,A,M,U,D,W,L,T,E,G,P,k;s._RF.push({},"b6cf85GrdZImooM19bz13Rd","UIOptionSetting",void 0);var C=r.ccclass,F=r.property;t("UIOptionSetting",(O=C("UIOptionSetting"),m=F(c),w=F(c),S=F(c),d=F(c),y=F(c),R=F(h),A=F(f),O((D=i((U=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,n(i,"btn_audio_on",D,o(i)),n(i,"btn_audio_off",W,o(i)),n(i,"btn_shake_on",L,o(i)),n(i,"btn_shake_off",T,o(i)),n(i,"UIInfo",E,o(i)),n(i,"gameInfo_WebView",G,o(i)),n(i,"origin_gameInfoURL",P,o(i)),n(i,"uiOpacity",k,o(i)),i.isWaitToOpenGameInfo=!1,i.AudioManager=I.instance(),i.CameraShake=g.Instance.CameraShake,i._activityDatas=null,i}e(i,t);var s=i.prototype;return s.ExitRoom=function(){_.instance().disconnectRoomService()},s.MuteSwitch=function(){this.AudioManager.MuteSwitch(),this.SwitchMuteIcon()},s.ShakableSwitch=function(){this.CameraShake.ShakableSwitch(),this.SwitchShakeIcon()},s.OpenWebView=function(){this.UIInfo.active=!0,this.gameInfo_WebView.evaluateJS('window.postMessage("scrollToTop", "*");');var t=document.querySelector("#webview-wrapper");if(t){var i=window.innerWidth/u.getDesignResolutionSize().x,e=window.innerHeight/u.getDesignResolutionSize().y,n=Math.min(i,e),o=(window.innerWidth-t.offsetWidth*n)/2,a=(window.innerHeight-t.offsetHeight*n)/2,s=this.gameInfo_WebView.node.position,r=o+s.x*n,c=-a-s.y*n;t.style.transform="matrix("+n+", 0, 0, "+n+", "+r+", "+c+")",t.style.opacity="1",t.style.pointerEvents="auto"}},s.CloseWebView=function(){this.UIInfo.active=!1;var t=document.querySelector("#webview-wrapper");t&&(t.style.transform="matrix(0, 0, 0, 0, 0, 0)",t.style.opacity="0",t.style.pointerEvents="none")},s.SwitchMuteIcon=function(){this.btn_audio_on.active?(this.btn_audio_off.active=!0,this.btn_audio_on.active=!1):(this.btn_audio_on.active=!0,this.btn_audio_off.active=!1)},s.SwitchShakeIcon=function(){this.btn_shake_on.active?(this.btn_shake_off.active=!0,this.btn_shake_on.active=!1):(this.btn_shake_on.active=!0,this.btn_shake_off.active=!1)},s.OnCloseGotchaFish=function(){this.isWaitToOpenGameInfo&&(this.UIInfo.active=!0,this.isWaitToOpenGameInfo=!1),this.uiOpacity.opacity=255},s.OnOpenGotchaFish=function(){this.UIInfo.active&&(this.UIInfo.active=!1,this.isWaitToOpenGameInfo=!0),this.uiOpacity.opacity=0},s.OnOpenGeneralPopUp=function(){this.UIInfo.active=!1},s.OnJoinRoomAction=function(t){this.ResetActivityDatas(t.roomInfo.ActivityData)},s.OnSetActivityDataAction=function(t){this.ResetActivityDatas(t)},s.InRoomSettings=function(){this.AudioManager.isMute&&this.SwitchMuteIcon(),this.CameraShake.isShakable||this.SwitchShakeIcon()},s.ResetActivityDatas=function(t){if(t.size>0){this._activityDatas=new Map;for(var i,e=a(t);!(i=e()).done;){var n=i.value;this._activityDatas.set(n[0],n[1])}this.switchInfoPageURL(!0)}else this._activityDatas=null,this.switchInfoPageURL(!1)},s.switchInfoPageURL=function(t){var i=new URL(this.origin_gameInfoURL);if(t){var e=Array.from(this._activityDatas.keys()).join(",");i.searchParams.set("activity",e),this.gameInfo_WebView.url=i.toString()}else this.gameInfo_WebView.url=this.origin_gameInfoURL},s.onReceiveWebMessage=function(t){t.data&&"infourl"===t.data.type?(this.origin_gameInfoURL=t.data.url,this.gameInfo_WebView.url=this.origin_gameInfoURL,console.log("成功跳轉，現在info頁面網址 "+this.gameInfo_WebView.url)):console.warn("沒有收到跳轉後的URL")},s.OnSpeedModeStart=function(){this.UIInfo.active&&(this.UIInfo.active=!1)},s.onLoad=function(){this.InRoomSettings(),this.OnJoinRoomAction=this.OnJoinRoomAction.bind(this),this.OnSetActivityDataAction=this.OnSetActivityDataAction.bind(this),p.Instance.on(b.OPEN_GOTCHA_FISH,this.OnOpenGotchaFish,this),p.Instance.on(b.CLOSE_GOTCHA_FISH,this.OnCloseGotchaFish,this),p.Instance.on(b.OPEN_GENERAL_POPUP,this.OnOpenGeneralPopUp,this),p.Instance.on(b.JOIN_ROOM,this.OnJoinRoomAction),p.Instance.on(b.ON_SET_ACTIVITY_DATA,this.OnSetActivityDataAction),p.Instance.on(b.ON_SPEEDMODE_START,this.OnSpeedModeStart,this),this.onReceiveWebMessage=this.onReceiveWebMessage.bind(this),window.addEventListener("message",this.onReceiveWebMessage)},s.start=function(){var t=v.config.lang,i=v.config.infourl,e=new URL(i);e.searchParams.set("lang",t),this.origin_gameInfoURL=e.toString(),this.gameInfo_WebView.url=this.origin_gameInfoURL},s.onDestroy=function(){p.Instance.off(b.OPEN_GOTCHA_FISH,this.OnOpenGotchaFish,this),p.Instance.off(b.CLOSE_GOTCHA_FISH,this.OnCloseGotchaFish,this),p.Instance.off(b.OPEN_GENERAL_POPUP,this.OnOpenGeneralPopUp,this),p.Instance.off(b.JOIN_ROOM,this.OnJoinRoomAction),p.Instance.off(b.ON_SET_ACTIVITY_DATA,this.OnSetActivityDataAction),p.Instance.off(b.ON_SPEEDMODE_START,this.OnSpeedModeStart,this),window.removeEventListener("message",this.onReceiveWebMessage)},i}(l)).prototype,"btn_audio_on",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(U.prototype,"btn_audio_off",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(U.prototype,"btn_shake_on",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(U.prototype,"btn_shake_off",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(U.prototype,"UIInfo",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(U.prototype,"gameInfo_WebView",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(U.prototype,"origin_gameInfoURL",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://dev.apex-win.com/Webview/WTF002/index_tw.html"}}),k=i(U.prototype,"uiOpacity",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=U))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIPlayerState.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,i,o,n,l,c,p,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,a=e.inheritsLoose,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){l=e.cclegacy,c=e._decorator,p=e.Enum,s=e.Node,u=e.Component}],execute:function(){var y,S,f,h,g,v,d,b,P,T,N,I;l._RF.push({},"357cc1RfuJDKrNTpZi/9Mls","UIPlayerState",void 0);var _=c.ccclass,m=c.property,w=e("PlayerStateType",function(e){return e[e.None=0]="None",e[e.AutoShooting=1]="AutoShooting",e[e.Waiting=2]="Waiting",e}({})),z=e("PlayerState",(y=_("PlayerState"),S=m({type:p(w)}),f=m(s),y((v=t((g=function(){r(this,"Type",v,this),r(this,"Node",d,this)}).prototype,"Type",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(g.prototype,"Node",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=g))||h));e("UIPlayerState",(b=_("UIPlayerState"),P=m([z]),b((I=t((N=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(t,"playerStates",I,i(t)),t._playerStateType=w.Waiting,t}return a(t,e),t.prototype.SetPlayerStateUI=function(e){switch(this._playerStateType=e,e){case w.None:for(var t,r=o(this.playerStates);!(t=r()).done;){t.value.Node.active=!1}break;case w.AutoShooting:case w.Waiting:for(var a,i=o(this.playerStates);!(a=i()).done;){var n=a.value;n.Node.active=n.Type==e}}},n(t,[{key:"PlayerStateType",get:function(){return this._playerStateType}}]),t}(u)).prototype,"playerStates",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=N))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIPoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./CoinPool.ts","./FishName.ts","./NumberString.ts","./ShowCoin.ts","./Pool.ts","./MapPool.ts"],(function(o){var t,n,i,e,r,l,s,c,u,a,h,f,P,g,p;return{setters:[function(o){t=o.applyDecoratedDescriptor,n=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized,r=o.createClass},function(o){l=o.cclegacy,s=o._decorator},function(o){c=o.SingletonComponent},function(o){u=o.CoinPool},function(o){a=o.FishName},function(o){h=o.NumberString},function(o){f=o.ShowCoin},function(o){P=o.Pool,g=o.PoolInstance},function(o){p=o.MapPoolInstance}],execute:function(){var m,R,w,y,S,b,C,N,_,d,I;l._RF.push({},"302ccFKOfZEeKstAutSYccG","UIPoolManager",void 0);var v=s.ccclass,M=s.property;o("UIPoolManager",(m=v("UIPoolManager"),R=M(P),w=M(P),y=M(P),S=M(u),m((N=t((C=function(o){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=o.call.apply(o,[this].concat(r))||this,i(t,"fishNameRoot",N,e(t)),i(t,"goldScoreRoot",_,e(t)),i(t,"showCoinRoot",d,e(t)),i(t,"coinRoot",I,e(t)),t._fishNamePool=null,t._goldScorePool=null,t._showCoinPool=null,t._netPool=null,t}n(t,o);var l=t.prototype;return l.start=function(){this.init()},l.init=function(){this.fishNameRoot&&(this._fishNamePool=this.fishNameRoot.NewPool(a,p)),this.goldScoreRoot&&(this._goldScorePool=this.goldScoreRoot.NewPool(h,g)),this.showCoinRoot&&(this._showCoinPool=this.showCoinRoot.NewPool(f,g)),this.coinRoot&&this.coinRoot.Init()},r(t,[{key:"fishNamePool",get:function(){return this._fishNamePool}},{key:"goldScorePool",get:function(){return this._goldScorePool}},{key:"showCoinPool",get:function(){return this._showCoinPool}},{key:"coinPool",get:function(){return this.coinRoot}},{key:"netPool",get:function(){return this._netPool}}]),t}(c)).prototype,"fishNameRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(C.prototype,"goldScoreRoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(C.prototype,"showCoinRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(C.prototype,"coinRoot",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIReconnectPopUpController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageCmd.ts","./MessageManager.ts"],(function(o){var n,e,t,i,s,c,r,a,l,p;return{setters:[function(o){n=o.applyDecoratedDescriptor,e=o.inheritsLoose,t=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){s=o.cclegacy,c=o._decorator,r=o.Node,a=o.Component},function(o){l=o.MessageCmd},function(o){p=o.MessageManager}],execute:function(){var h,u,f,U,_,d;s._RF.push({},"4fd1fli2rxEcoFT0VDsszTg","UIReconnectPopUpController",void 0);var P=c.ccclass,E=c.property;o("UIReconnectPopUpController",(h=P("UIReconnectPopUpController"),u=E(r),h((_=n((U=function(o){function n(){for(var n,e=arguments.length,s=new Array(e),c=0;c<e;c++)s[c]=arguments[c];return n=o.call.apply(o,[this].concat(s))||this,t(n,"ReconnectPopUpNode",_,i(n)),t(n,"MinimumTime",d,i(n)),n._callback=null,n._duration=0,n._show=!1,n}e(n,o);var s=n.prototype;return s.onLoad=function(){this.onCloseLoadingUIScene=this.onCloseLoadingUIScene.bind(this),this.ShowPopUp=this.ShowPopUp.bind(this),this.closePopUp=this.closePopUp.bind(this),p.Instance.on(l.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene),p.Instance.on(l.ON_SPEEDMODE_START,this.ShowPopUp),p.Instance.on(l.ON_SPEEDMODE_END,this.closePopUp),this._show=!1},s.onDestroy=function(){p.Instance.off(l.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene),p.Instance.off(l.ON_SPEEDMODE_START,this.ShowPopUp),p.Instance.off(l.ON_SPEEDMODE_END,this.closePopUp)},s.ShowPopUp=function(){this.ReconnectPopUpNode.active=this._show},s.closePopUp=function(){this.startTimer(this.MinimumTime)},s.startTimer=function(o){var n=this;this._duration=o,this._callback&&this.unschedule(this._callback),this._callback=function(){n.ReconnectPopUpNode.active=!1},this.scheduleOnce(this._callback,this._duration)},s.onCloseLoadingUIScene=function(){this._show=!0},n}(a)).prototype,"ReconnectPopUpNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(U.prototype,"MinimumTime",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),f=U))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Utility2.ts"],(function(t){var e,i,n,o,s,r,a,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Label,c=t.Component},function(t){l=t.Constants},function(t){u=t.Utility}],execute:function(){var m,h,y,p,d,f,b;s._RF.push({},"a979bThAupKVoHX4kxP9b1f","UIRoom",void 0);var D=r.ccclass,S=r.property;t("UIRoom",(m=D("UIRoom"),h=S(a),y=S(a),m((f=e((d=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"SystemDate",f,o(e)),n(e,"SystemTime",b,o(e)),e._timer=0,e._DateTime=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this),!1)},s.onDestroy=function(){document.removeEventListener("visibilitychange",this.onVisibilityChange.bind(this),!1)},s.start=function(){this.SetDateTime()},s.update=function(t){this._timer+=t,this._timer>=l.SecondsPerMinute&&this.SetDateTime()},s.SetDateTime=function(){this._DateTime=u.setLocaleDateAndTime(null,this.SystemDate,this.SystemTime,!1),this._timer=this._DateTime.getSeconds()},s.onVisibilityChange=function(){document.hidden||this.SetDateTime()},e}(c)).prototype,"SystemDate",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(d.prototype,"SystemTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=d))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIThroughWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWeaponBase.ts","./BulletKind.ts"],(function(n){var e,o,t,u,r,c;return{setters:[function(n){e=n.inheritsLoose,o=n.createClass},function(n){t=n.cclegacy,u=n._decorator},function(n){r=n.UIWeaponBase},function(n){c=n.BulletKind}],execute:function(){var s;t._RF.push({},"f8806bnoGBMuLQjqu6OM554","UIThroughWeapon",void 0);var i=u.ccclass;n("UIThroughWeapon",i("UIThroughWeapon")(s=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),o(t,[{key:"Kind",get:function(){return c.Through}}]),t}(r))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIWeaponBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Action.ts","./AudioPlayer.ts","./AudioManager.ts","./AudioMixerConfig.ts","./Utility2.ts","./UIWeaponScreenEffect.ts"],(function(e){var t,i,n,o,r,c,s,a,u,h,l,f,d,p,S,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){c=e.cclegacy,s=e._decorator,a=e.Label,u=e.Sprite,h=e.Component},function(e){l=e.Action},function(e){f=e.AudioPlayer},function(e){d=e.AudioManager},function(e){p=e.AudioState},function(e){S=e.Utility},function(e){w=e.UIWeaponScreenEffect}],execute:function(){var g,b,y,A,m,v,M,B,I,_,U,z,E,W,N;c._RF.push({},"76fcbWCX+ZAPrfv4yCxES+G","UIWeaponBase",void 0);var C=s.ccclass,O=s.property;e("UIWeaponBase",(g=C("UIWeaponBase"),b=O(a),y=O(a),A=O(l),m=O(l),v=O(w),M=O(f),g((_=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,n(t,"bet",_,o(t)),n(t,"reward",U,o(t)),n(t,"showAction",z,o(t)),n(t,"fadeOutAction",E,o(t)),n(t,"screenEffect",W,o(t)),n(t,"weaponBgm",N,o(t)),t.score=0,t._isMain=!1,t._closeNodeSchedule=null,t}i(t,e);var c=t.prototype;return c.ShowUI=function(e){this.cancelCloseSchedule(),this.bet.string=S.formatLocalizedNumber(e),this.reward.string=S.formatLocalizedNumber(this.score),this.ShowScore(),this.node.active=!0,this.fadeOutAction.recoverProps(),this.showAction.replayAction()},c.FadeUI=function(){this.ResetScore(),this.node.active&&(this.fadeOutAction.playAction(),this.switchScreenEffect(!1),this.switchWeaponBGM(!1),this._closeNodeSchedule=this.Reset,this.scheduleOnce(this._closeNodeSchedule,this.fadeOutAction.delay+this.fadeOutAction.duration))},c.ShowUsedUI=function(e){this.cancelCloseSchedule(),this.bet.string=S.formatLocalizedNumber(e),this.node.active=!0,this.updateScore(),this.ShowScore(),this.fadeOutAction.recoverProps(),this.showAction.replayAction(),this.switchScreenEffect(!1),this.switchWeaponBGM(!1)},c.SetScore=function(e){void 0===e&&(e=0),this.score=e,this.reward.string=this.score.toString()},c.AddScore=function(e){void 0===e&&(e=0),this.updateScore(e),this.reward.node.active||(this.reward.node.active=!0)},c.ShowScore=function(){this.reward.node.active=0!=this.score},c.Reset=function(){this.node.active=!1,this.reward.node.active=!1,this.fadeOutAction.recoverProps()},c.ResetScore=function(){this.score=0},c.switchScreenEffect=function(e){this.IsMain&&this.screenEffect&&(e?this.screenEffect.open():this.screenEffect.close())},c.switchWeaponBGM=function(e){this.IsMain&&this.weaponBgm&&(e?(d.instance().SwitchMixerState(p.Weapon),this.weaponBgm.play()):(this.weaponBgm.stop(),d.instance().SwitchMixerState(p.Normal)))},c.updateScore=function(e){void 0===e&&(e=0),this.score+=e,this.reward.string=this.score.toString()},c.cancelCloseSchedule=function(){this._closeNodeSchedule&&(this.unschedule(this._closeNodeSchedule),this._closeNodeSchedule=null)},r(t,[{key:"IsMain",get:function(){return this._isMain},set:function(e){this._isMain=e}},{key:"Score",get:function(){return this.score}},{key:"Bet",get:function(){return this.bet.string},set:function(e){this.bet.string=e}},{key:"SpriteFrame",get:function(){return this.node.getComponent(u).spriteFrame}}]),t}(h)).prototype,"bet",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(I.prototype,"reward",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"showAction",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(I.prototype,"fadeOutAction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(I.prototype,"screenEffect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(I.prototype,"weaponBgm",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=I))||B));c._RF.pop()}}}));

System.register("chunks:///_virtual/UIWeaponController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWeaponInfo.ts","./FSUIManager.ts","./PlayerFortManager.ts","./MessageCmd.ts","./MessageManager.ts"],(function(e){var n,t,o,a,i,r,s,I,c,h,p,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Component},function(e){I=e.UIWeaponInfo},function(e){c=e.FSUIManager},function(e){h=e.PlayerFortManager},function(e){p=e.MessageCmd},function(e){f=e.MessageManager}],execute:function(){var u,U,l,W,D;i._RF.push({},"670f0YBE1lPWYIqSHe51uYT","UIWeaponController",void 0);var g=r.ccclass,S=r.property;e("UIWeaponController",(u=g("UIWeaponController"),U=S([I]),u((D=n((W=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,o(n,"UIWeaponInfos",D,a(n)),n}t(n,e);var i=n.prototype;return i.onLoad=function(){c.Instance.WeaponUi=this,this.CheckShowUI=this.CheckShowUI.bind(this),f.Instance.on(p.ON_SPEEDMODE_END,this.CheckShowUI)},i.onDestroy=function(){f.Instance.off(p.ON_SPEEDMODE_END,this.CheckShowUI)},i.SetData=function(e){this.GetWeaponUI(e.CatchInfo.FortID).SetData(e)},i.DequeueData=function(e){this.GetWeaponUI(e).DequeueData()},i.ShowUI=function(e){this.GetWeaponUI(e).ShowUI()},i.ShowScore=function(e,n,t){this.GetWeaponUI(e).AddScore(n,t)},i.PlayerExit=function(e){this.GetWeaponUI(e)&&this.GetWeaponUI(e).PlayerExit()},i.ReplicaUI=function(e){this.GetWeaponUI(e.FortID)&&this.GetWeaponUI(e.FortID).ReplicaUI(e)},i.ComboEnd=function(e){this.GetWeaponUI(e.FortID)&&this.GetWeaponUI(e.FortID).ComboEnd(e)},i.WeaponUiEnd=function(e){this.GetWeaponUI(e)&&this.GetWeaponUI(e).WeaponUiEnd()},i.Reset=function(){for(var e=h.instance().getPlayerForts(),n=0;n<this.UIWeaponInfos.length;n++)this.UIWeaponInfos[n].Reset(e[n])},i.GetWeaponUI=function(e){for(var n=0;n<this.UIWeaponInfos.length;n++)if(this.UIWeaponInfos[n].ID==e)return this.UIWeaponInfos[n]},i.CheckShowUI=function(){this.UIWeaponInfos.forEach((function(e){e.RewardQueueLength>0&&e.ShowUI()}))},n}(s)).prototype,"UIWeaponInfos",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=W))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIWeaponInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWeaponBase.ts","./MessageCmd.ts","./MessageManager.ts","./PlayerFortManager.ts","./MessageData.ts","./BulletKind.ts","./AutoShootHelper.ts","./UIWeaponReplica.ts"],(function(e){var t,n,i,o,a,r,s,u,l,h,c,d,w,f,I,p,_,U;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,s=e._decorator,u=e.Node,l=e.Label,h=e.Component},function(e){c=e.UIWeaponBase},function(e){d=e.MessageCmd},function(e){w=e.MessageManager},function(e){f=e.PlayerFortManager},function(e){I=e.SpecialAutoShootMessage},function(e){p=e.BulletKind},function(e){_=e.AutoShootHelper},function(e){U=e.UIWeaponReplica}],execute:function(){var S,g,m,B,v,K,y,b,A,C,M,D,T;r._RF.push({},"71bef6j7Q1MaIKV8vmVvo9l","UIWeaponInfo",void 0);var R=s.ccclass,P=s.property,Q=function(e,t,n,i){this.FortID=void 0,this.BulletKind=void 0,this.Bet=void 0,this.Score=void 0,this.FortID=e,this.BulletKind=t,this.Bet=n.toPerformValue(),this.Score=i.toPerformValue()};e("UIWeaponInfo",(S=R("UIWeaponInfo"),g=P(u),m=P(l),B=P([c]),v=P(U),S((b=t((y=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"countdownTime",b,o(t)),i(t,"autoWeaponModeCountdownTime",A,o(t)),i(t,"countdownNode",C,o(t)),i(t,"countdownLabel",M,o(t)),i(t,"weaponUIs",D,o(t)),i(t,"replicaUI",T,o(t)),t.nowTime=0,t.timer=null,t._fortId=void 0,t._uiIndex=0,t._reward=null,t._rewardQueue=[],t._isShowing=void 0,t._lastKind=p.None,t}n(t,e);var r=t.prototype;return r.SetData=function(e){var t=new Q(e.CatchInfo.FortID,e.BulletKind,e.CatchInfo.Bet,0);this._rewardQueue.push(t)},r.DequeueData=function(){this.dequeueData()},r.ShowUI=function(){if(!this._isShowing&&(this._reward=this.peekData(),this._reward)){this._isShowing=!0,f.instance().switchFort(this._reward.FortID,this._reward.BulletKind),this.CheckLastUIShow(),this.ShowCountDownUI();for(var e=0;e<this.weaponUIs.length;e++)this.weaponUIs[e].Kind==this._reward.BulletKind&&(this._uiIndex=e,this._lastKind==this.weaponUIs[e].Kind?(this.replicaUI.ShowReplica(),this.weaponUIs[e].ShowUsedUI(this._reward.Bet)):(this._lastKind=this._reward.BulletKind,this.weaponUIs[e].node.setSiblingIndex(this.node.children.length-1),this.replicaUI.Replica(this.weaponUIs[e]),this.weaponUIs[e].ShowUI(this._reward.Bet)))}},r.PlayerExit=function(){this._isShowing=!1,this._lastKind=p.None,this.weaponUIs.forEach((function(e){e.FadeUI()})),this._rewardQueue=[],this._reward=null},r.ReplicaUI=function(e){var t=this;this.weaponUIs.forEach((function(n){n.Kind==e.BulletKind&&t.replicaUI.Replica(n)}))},r.ComboEnd=function(e){this.weaponUIs.forEach((function(t){t.Kind==e.BulletKind&&t.ResetScore()}))},r.WeaponUiEnd=function(){this._isShowing=!1,this._rewardQueue.length>0?this.ShowUI():(this._reward=null,this._lastKind=p.None,this.weaponUIs.forEach((function(e){e.FadeUI()})))},r.Reset=function(e){var t=this;this._fortId=e.FortID,this.node.active=!0,this.countdownNode.active=!1,this.weaponUIs.forEach((function(e){e.Reset(),e.ResetScore(),e.IsMain=t.IsMain})),this.updateRoomInfo(e)},r.AddScore=function(e,t){this.checkUIActivation(),this.weaponUIs.forEach((function(n){n.Kind==t&&n.AddScore(e)})),this.replicaUI.AddScore(e)},r.onLoad=function(){this.onSpawnBulletAction=this.onSpawnBulletAction.bind(this),w.Instance.on(d.ON_SPAWN_BULLET,this.onSpawnBulletAction)},r.onDestroy=function(){this._reward=null,w.Instance.off(d.ON_SPAWN_BULLET,this.onSpawnBulletAction)},r.updateRoomInfo=function(e){var t=this;if(e.PlayerInfo.CurrentSpecialBulletInfo){var n=e.PlayerInfo.CurrentSpecialBulletInfo,i=new Q(e.FortID,n.BulletKind,n.Bet,0);this._rewardQueue.push(i)}if(e.PlayerInfo.HoldingSpecialBulletInfos.length>0&&e.PlayerInfo.HoldingSpecialBulletInfos.forEach((function(e){var n=new Q(t._fortId,e.BulletKind,e.Bet,0);t._rewardQueue.push(n)})),e.PlayerInfo.CurrentSpecialBulletInfo||e.PlayerInfo.HoldingSpecialBulletInfos.length>0){var o=this._rewardQueue[0];this.weaponUIs.forEach((function(t){t.Kind==o.BulletKind&&t.AddScore(e.PlayerInfo.SpecialBulletScore.toPerformValue())})),this.ShowUI()}},r.startCountdown=function(){var e=this;function t(e,t){e&&(e.string=""+t)}this.nowTime=0,t(this.countdownLabel,this.RemainingTime),this.timer=setInterval((function(){e.RemainingTime>0?(e.nowTime++,t(e.countdownLabel,e.RemainingTime)):(e.stopCountdown(),e.nowTime=0,e.startAutoShoot())}),1e3)},r.stopCountdown=function(){this.timer&&(clearInterval(this.timer),this.timer=null,this.countdownNode.active=!1),this.weaponUIs[this._uiIndex].switchScreenEffect(!0),this.weaponUIs[this._uiIndex].switchWeaponBGM(!0)},r.onSpawnBulletAction=function(e,t){this._reward&&(this._lastKind=e.BulletKind,this.checkUIActivation(),this._reward.BulletKind==e.BulletKind&&e.FortID==this._fortId&&this.countdownNode.active&&(this.countdownNode.active=!1,this.stopCountdown()))},r.checkUIActivation=function(){this._rewardQueue.length>0&&!this._isShowing&&this.ShowUI()},r.startAutoShoot=function(){var e=new I;e.BulletKind=this._reward.BulletKind,w.Instance.emit(d.START_SPECIAL_AUTO_SHOOT,e)},r.peekData=function(){return this._rewardQueue.length>0?this._rewardQueue[0]:(console.error("_rewardQueue is empty"),null)},r.dequeueData=function(){return this._rewardQueue.length>0?this._rewardQueue.shift():(console.error("_rewardQueue is empty"),null)},r.CheckLastUIShow=function(){this._reward&&this.weaponUIs[this._uiIndex].Kind!=this._reward.BulletKind&&this.weaponUIs[this._uiIndex].node.active&&this.weaponUIs[this._uiIndex].FadeUI()},r.ShowCountDownUI=function(){this.IsMain?(this.countdownNode.active=!0,this.startCountdown()):this.countdownNode.active=!1},a(t,[{key:"ID",get:function(){return this._fortId}},{key:"IsMain",get:function(){return f.instance().MainPlayerFortIndex==this._fortId}},{key:"RemainingTime",get:function(){var e=_.instance().IsAutoWeaponMode?this.autoWeaponModeCountdownTime:this.countdownTime;return Math.max(e-this.nowTime,0)}},{key:"RewardQueueLength",get:function(){return this._rewardQueue.length}}]),t}(h)).prototype,"countdownTime",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),A=t(y.prototype,"autoWeaponModeCountdownTime",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),C=t(y.prototype,"countdownNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(y.prototype,"countdownLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(y.prototype,"weaponUIs",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=t(y.prototype,"replicaUI",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=y))||K));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIWeaponReplica.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletKind.ts","./UIWeaponBase.ts"],(function(e){var t,n,o,i,c,r,s;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,i=e._decorator,c=e.Sprite},function(e){r=e.BulletKind},function(e){s=e.UIWeaponBase}],execute:function(){var a;o._RF.push({},"8d36e+cUk5MvKh9dyKtTC8E","UIWeaponReplica",void 0);var p=i.ccclass;i.property,e("UIWeaponReplica",p("UIWeaponReplica")(a=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var i=o.prototype;return i.Replica=function(e){this.SetScore(e.Score),this.ShowScore(),this.Bet=e.Bet,this.node.getComponent(c).spriteFrame=e.SpriteFrame,this.node.position=e.node.position},i.ShowReplica=function(){this.node.active=!0,this.FadeUI()},n(o,[{key:"Kind",get:function(){return r.None}}]),o}(s))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIWeaponScreenEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteAnimationPlayer.ts","./ResourceLoader.ts","./MessageCmd.ts","./MessageManager.ts"],(function(e){var t,r,n,i,o,a,s,c,u,p,f,l,h,m,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,p=e.Node,f=e.Component},function(e){l=e.SpriteAnimationPlayer},function(e){h=e.ResourceLoader},function(e){m=e.MessageCmd},function(e){S=e.MessageManager}],execute:function(){var d,b,v,g,y,I,O,w,C;c._RF.push({},"60857qR+OtNILYoUPXawTB7","UIWeaponScreenEffect",void 0);var L=u.ccclass,N=u.property;e("UIWeaponScreenEffect",(d=L("UIWeaponScreenEffect"),b=N([l]),v=N([p]),d((I=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"spriteAnimationPlayers",I,i(t)),n(t,"spritePath",O,i(t)),n(t,"spriteNumber",w,i(t)),t.spriteFrameCache=[],n(t,"toShowOnOpen",C,i(t)),t}r(t,e);var c=t.prototype;return c.onLoad=function(){S.Instance.on(m.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene,this)},c.onDestroy=function(){S.Instance.off(m.CLOSE_LOADING_UISCENE,this.onCloseLoadingUIScene,this)},c.open=function(){0===this.spriteFrameCache.length&&this.loadAndSetSprites();for(var e,t=o(this.toShowOnOpen);!(e=t()).done;){e.value.active=!0}},c.close=function(){for(var e,t=o(this.toShowOnOpen);!(e=t()).done;){e.value.active=!1}},c.loadAndSetSprites=function(){var e=a(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.spriteNumber<=0)){e.next=2;break}return e.abrupt("return");case 2:if(0!==this.spriteFrameCache.length){e.next=5;break}return e.next=5,this.loadSprites();case 5:for(t=o(this.spriteAnimationPlayers);!(r=t()).done;)r.value.setUpSpriteFrames(this.spriteFrameCache);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.loadSprites=function(){var e=a(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.spriteNumber)){e.next=7;break}return e.next=4,this.loadOneSprite(t);case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.loadOneSprite=function(e){var t=this;return new Promise((function(r,n){var i=t.spritePath+t.formatNumber(e);h.LoadSpriteFrame(i,(function(i,o){i?n(i):(t.spriteFrameCache[e]=o,r())}))}))},c.formatNumber=function(e){return e<10?"0"+e:e.toString()},c.onCloseLoadingUIScene=function(){this.loadAndSetSprites()},t}(f)).prototype,"spriteAnimationPlayers",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(y.prototype,"spritePath",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=t(y.prototype,"spriteNumber",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=t(y.prototype,"toShowOnOpen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=y))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/Utility.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"21ced7ak0pFS5IaGlCmRkFj","Utility",void 0),e("Utility",function(){function e(){}return e.ToLogicValue=function(t){return Math.floor(t*e.ValuePercision)},e.ToPerformValue=function(t){return t/e.ValuePercision},e.ToSigFigsValue=function(e){return e.toLogicValue().toPerformValue()},e}()).ValuePercision=1e3,t._RF.pop()}}}));

System.register("chunks:///_virtual/Utility2.ts",["cc","./GameFlowManager.ts","./l10n.ts","./Constants.ts","./l10n-manager.ts"],(function(e){var t,o,n,i,r;return{setters:[function(e){t=e.cclegacy,o=e.macro,n=e.director},null,null,function(e){i=e.Constants},function(e){r=e.default}],execute:function(){t._RF.push({},"bd37d8jcvpFBar/xJS+AQGX","Utility",void 0);var l=e("Utility",function(){function e(){}return e.getBrowserToken=function(){return e.getBrowserValue("token")},e.getBrowserDemo=function(){var t=e.getBrowserValue("demo");return null!=t&&JSON.parse(t)},e.getBrowserValue=function(e){for(var t=window.location.search.substring(1).split("&"),o=0;o<t.length;++o){var n=t[o].split("=");if(n.length>=2&&n[0]===e)return n[1]}return null},e.emitEventHandlers=function(e){for(var t=0,o=e.length-1;t<=o;++t){var n=e[t];n.emit([n.customEventData])}},e.reload=function(){console.warn("reload page"),window.location.reload()},e.scheduler=function(e,t,i,r,l){if(void 0===i&&(i=1),void 0===r&&(r=o.REPEAT_FOREVER),void 0===l&&(l=0),0===i)for(var a=0;a<r;a++)e();else{var c=n.getScheduler(),u=e.bind(t);c.schedule(u,t,1e3*i,r-1,1e3*l,!1)}},e.unixTimeSecondsToLocaleDateAndTime=function(t,o,n,i,r,l){return void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===r&&(r=-1),void 0===l&&(l=!1),e.setLocaleDateAndTime(new Date(1e3*t),o,n,i,r,l)},e.setLocaleDateAndTime=function(t,o,n,i,r,l){return void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===r&&(r=-1),void 0===l&&(l=!1),void 0===e.locale&&e.initLocale(),null!=t||(t=new Date),null!=o&&(o.string=l?t.toLocaleDateString(e.locale,e.dateFormatOptions)+" "+t.toLocaleTimeString(e.locale,i?e.timeFormatOptions:e.timeFormatOptionsNoSeconds)+(-1===r?"":" UTC+"+r.toString()):t.toLocaleDateString(e.locale,e.dateFormatOptions)),l||null==n||(n.string=t.toLocaleTimeString(e.locale,i?e.timeFormatOptions:e.timeFormatOptionsNoSeconds)+(-1===r?"":" UTC+"+r.toString())),t},e.initLocale=function(){this.locale=r.currentLanguage},e.getNowDateSeconds=function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),+e/i.MilliSecondsPerSecond},e.getTimeZoneOffset=function(){return(new Date).getTimezoneOffset()/i.MinutesPerHour*-1},e.formatLocalizedNumber=function(t){return t.toLocaleString(e.locale)},e}());l.locale=void 0,l.dateFormatOptions={year:"numeric",month:"2-digit",day:"2-digit"},l.timeFormatOptions={hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23"},l.timeFormatOptionsNoSeconds={hour:"2-digit",minute:"2-digit",hourCycle:"h23"},t._RF.pop()}}}));

System.register("chunks:///_virtual/Values.ts",["cc"],(function(u){var t,n;return{setters:[function(u){t=u.cclegacy,n=u.Enum}],execute:function(){t._RF.push({},"a91b4HSk7ZDLa0DC6v/wijr","Values",void 0);var c=0,e=(u("AcitonType",function(u){return u[u.opacity=1<<c++]="opacity",u[u.scale=1<<c++]="scale",u[u.position=1<<c++]="position",u[u.angle=1<<c++]="angle",u}({})),u("PropType",function(u){return u[u.to=0]="to",u[u.from=1]="from",u[u.free=2]="free",u}({})));n(e);var i=u("ValueType",function(u){return u[u.relative=0]="relative",u[u.absolute=1]="absolute",u}({}));n(i);var a=u("Easing",function(u){return u[u.constant=0]="constant",u[u.linear=1]="linear",u[u.quadIn=2]="quadIn",u[u.quadOut=3]="quadOut",u[u.quadInOut=4]="quadInOut",u[u.cubicIn=5]="cubicIn",u[u.cubicOut=6]="cubicOut",u[u.cubicInOut=7]="cubicInOut",u[u.quartIn=8]="quartIn",u[u.quartOut=9]="quartOut",u[u.quartInOut=10]="quartInOut",u[u.quintIn=11]="quintIn",u[u.quintOut=12]="quintOut",u[u.quintInOut=13]="quintInOut",u[u.sineIn=14]="sineIn",u[u.sineOut=15]="sineOut",u[u.sineInOut=16]="sineInOut",u[u.expoIn=17]="expoIn",u[u.expoOut=18]="expoOut",u[u.expoInOut=19]="expoInOut",u[u.circIn=20]="circIn",u[u.circOut=21]="circOut",u[u.circInOut=22]="circInOut",u[u.elasticIn=23]="elasticIn",u[u.elasticOut=24]="elasticOut",u[u.elasticInOut=25]="elasticInOut",u[u.backIn=26]="backIn",u[u.backOut=27]="backOut",u[u.backInOut=28]="backInOut",u[u.bounceIn=29]="bounceIn",u[u.bounceOut=30]="bounceOut",u[u.bounceInOut=31]="bounceInOut",u[u.smooth=32]="smooth",u[u.fade=33]="fade",u[u.quadOutIn=34]="quadOutIn",u[u.cubicOutIn=35]="cubicOutIn",u[u.quartOutIn=36]="quartOutIn",u[u.quintOutIn=37]="quintOutIn",u[u.sineOutIn=38]="sineOutIn",u[u.expoOutIn=39]="expoOutIn",u[u.circOutIn=40]="circOutIn",u[u.elasticOutIn=41]="elasticOutIn",u[u.backOutIn=42]="backOutIn",u[u.bounceOutIn=43]="bounceOutIn",u[u.custom=44]="custom",u}({}));n(a),t._RF.pop()}}}));

System.register("chunks:///_virtual/Vector2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts"],(function(e){var r,t,i;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader}],execute:function(){r._RF.push({},"f153fy/dLhBJbVST160dthz","Vector2",void 0);e("Vector2",function(){function e(){this.X=void 0,this.Y=void 0,this.X=0,this.Y=0}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(2),e.writeFloat32(r.X),e.writeFloat32(r.Y)):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],n=t[1];if(!i)return null;var a=new e;if(2==n)a.X=r.readFloat32(),a.Y=r.readFloat32();else{if(n>2)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==n)return a;if(a.X=r.readFloat32(),1==n)return a;if(a.Y=r.readFloat32(),2==n)return a}return a},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/VersionLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,i,t,o,a,l,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,s=e.Component}],execute:function(){var c,u,p,b;o._RF.push({},"4af94HOepVO3aLgw+IPk+CK","VersionLabel",void 0);var f=a.ccclass,h=a.property;e("VersionLabel",f("VersionLabel")(((b=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,i(r,"version",p,t(r)),r._label=null,r}return n(r,e),r.prototype.start=function(){null==r.GameVersion&&(r.GameVersion=this.version),this._label=this.getComponent(l),this._label.string=r.GameVersion},r}(s)).GameVersion=null,p=r((u=b).prototype,"version",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0.1.0"}}),c=u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/WaveAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FishData.ts","./WaveData.ts","./WaveInfo.ts","./WaveAttributeHelper.ts"],(function(e){var t,a,n,i,o,s;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy},function(e){n=e.FishData},function(e){i=e.WaveData},function(e){o=e.WaveInfo},function(e){s=e.WaveAttributeHelper}],execute:function(){var r;a._RF.push({},"3de54+NNrBElr9QPAi8ta+F","WaveAttribute",void 0);var d=e("WaveAttribute",function(){function e(){this.Data=new Map,this.WaveInfos=new Map,this.WaveTable=new Map}var a=e.prototype;return a.LoadFromJsonAsset=function(e,t,a){var r=this,d=new i;d.FixedUpdateCountPerSecond=e.FixedUpdateCountPerSecond,d.WaveTimeInSeconds=e.WaveTimeInSeconds,d.WaveId=e.WaveId,d.Infos=[],e.Infos.forEach((function(e){var t=new o;t.InfoID=e.InfoID,t.StartTimeFixedUpdateCounts=e.StartTimeFixedUpdateCounts,t.LifeTimeFixedUpdateCounts=e.LifeTimeFixedUpdateCounts,t.PathIndex=e.PathIndex,t.PathSpeedIndex=e.PathSpeedIndex,t.TotalProbability=e.TotalProbability,t.Fishs=[],e.Fishs.forEach((function(e){var a=new n;a.FishType=e.FishType,a.Probability=e.Probability,t.Fishs.push(a)})),d.Infos.push(t)})),s.InitInfos(d),d.Infos.forEach((function(e){if(r.WaveInfos.has(e.InfoID))throw new Error("Duplicate Keys in wave infos: "+e.InfoID);r.WaveInfos.set(e.InfoID,e)})),this.Data.has(t)||this.Data.set(t,[]),this.Data.get(t).push(d),this.WaveTable.has(a)||this.WaveTable.set(a,d)},a.LoadFromMemoryPack=function(e){for(var a,n=t(e.Data.entries());!(a=n()).done;){for(var s,r=a.value,d=r[0],I=r[1],f=Array(),u=t(I);!(s=u()).done;){var h=s.value,v=new i;v.FixedUpdateCountPerSecond=h.FixedUpdateCountPerSecond,v.WaveTimeInSeconds=h.WaveTimeInSeconds,v.WaveId=h.WaveId,v.Infos=new Array;for(var p,c=t(h.Infos);!(p=c()).done;){var l=p.value,F=new o;F.InfoID=l.InfoID,F.StartTimeFixedUpdateCounts=l.StartTimeFixedUpdateCounts,F.LifeTimeFixedUpdateCounts=l.LifeTimeFixedUpdateCounts,F.PathIndex=l.PathIndex,F.PathSpeedIndex=l.PathSpeedIndex,F.TotalProbability=l.TotalProbability,F.Fishs=l.Fishs,v.Infos.push(F)}f.push(v)}this.Data.set(d,f)}for(var x,P=t(e.WaveInfos.entries());!(x=P()).done;){var T=x.value,b=T[0],W=T[1],S=new o;S.InfoID=W.InfoID,S.StartTimeFixedUpdateCounts=W.StartTimeFixedUpdateCounts,S.LifeTimeFixedUpdateCounts=W.LifeTimeFixedUpdateCounts,S.PathIndex=W.PathIndex,S.PathSpeedIndex=W.PathSpeedIndex,S.TotalProbability=W.TotalProbability,S.Fishs=W.Fishs,this.WaveInfos.set(b,S)}},e}());r=d,d.Instance=new r,a._RF.pop()}}}));

System.register("chunks:///_virtual/WaveAttribute2.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./WaveData.ts","./WaveInfo.ts"],(function(e){var r,t,n,i,a;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){n=e.MemoryPackReader},function(e){i=e.WaveData},function(e){a=e.WaveInfo}],execute:function(){r._RF.push({},"f7fd1HgeNRC6YCfMvH0o0QH","WaveAttribute",void 0);e("WaveAttribute",function(){function e(){this.Data=void 0,this.WaveInfos=void 0,this.WaveTable=void 0,this.Data=null,this.WaveInfos=null,this.WaveTable=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(3),e.writeMap(r.Data,(function(e,r){return e.writeInt32(r)}),(function(e,r){return e.writeArray(r,(function(e,r){return i.serializeCore(e,r)}))})),e.writeMap(r.WaveInfos,(function(e,r){return e.writeInt32(r)}),(function(e,r){return a.serializeCore(e,r)})),e.writeMap(r.WaveTable,(function(e,r){return e.writeString(r)}),(function(e,r){return i.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new n(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),n=t[0],u=t[1];if(!n)return null;var o=new e;if(3==u)o.Data=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return i.deserializeCore(e)}))})),o.WaveInfos=r.readMap((function(e){return e.readInt32()}),(function(e){return a.deserializeCore(e)})),o.WaveTable=r.readMap((function(e){return e.readString()}),(function(e){return i.deserializeCore(e)}));else{if(u>3)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==u)return o;if(o.Data=r.readMap((function(e){return e.readInt32()}),(function(e){return e.readArray((function(e){return i.deserializeCore(e)}))})),1==u)return o;if(o.WaveInfos=r.readMap((function(e){return e.readInt32()}),(function(e){return a.deserializeCore(e)})),2==u)return o;if(o.WaveTable=r.readMap((function(e){return e.readString()}),(function(e){return i.deserializeCore(e)})),3==u)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new n(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/WaveAttributeHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WaveKind.ts"],(function(r){var t,o,i;return{setters:[function(r){t=r.createForOfIteratorHelperLoose},function(r){o=r.cclegacy},function(r){i=r.WaveKind}],execute:function(){o._RF.push({},"f632aVEhUVOqqKnBk26EVuG","WaveAttributeHelper",void 0),r("WaveAttributeHelper",function(){function r(){}return r.InitInfos=function(o){for(var i,e=t(o.Infos);!(i=e()).done;){var n=i.value;r.InitFishProbility(n)}},r.InitFishProbility=function(r){r.Probs=new Array(r.Fishs.length),r.Probs[0]=r.Fishs[0].Probability;for(var t=1;t<r.Fishs.length;++t)r.Probs[t]=r.Fishs[t].Probability+r.Probs[t-1]},r.GetFishTypeByProbility=function(r,t){for(var o=Math.floor(t*r.TotalProbability),i=0;i<r.Probs.length;++i)if(r.Probs[i]>o)return r.Fishs[i].FishType;throw new Error("probility: "+t+" out of range in InfoID: "+r.InfoID)},r}()).WaveKindArray=[[i.Normal],[i.Middle],[i.Gotcha],[i.Weapon],[i.GotchaLow],[i.Boss],[i.Activity]],o._RF.pop()}}}));

System.register("chunks:///_virtual/WaveData.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./WaveInfo.ts"],(function(e){var r,n,t,i;return{setters:[function(e){r=e.cclegacy},function(e){n=e.MemoryPackWriter},function(e){t=e.MemoryPackReader},function(e){i=e.WaveInfo}],execute:function(){r._RF.push({},"bb809tplyVLebMrEMJQr2D9","WaveData",void 0);e("WaveData",function(){function e(){this.FixedUpdateCountPerSecond=void 0,this.WaveTimeInSeconds=void 0,this.WaveId=void 0,this.Infos=void 0,this.FixedUpdateCountPerSecond=0,this.WaveTimeInSeconds=0,this.WaveId=0,this.Infos=null}return e.serialize=function(e){var r=n.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(4),e.writeInt32(r.FixedUpdateCountPerSecond),e.writeInt32(r.WaveTimeInSeconds),e.writeInt32(r.WaveId),e.writeArray(r.Infos,(function(e,r){return i.serializeCore(e,r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=n.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,n){r.writeArray(n,(function(r,n){return e.serializeCore(r,n)}))},e.deserialize=function(e){return this.deserializeCore(new t(e))},e.deserializeCore=function(r){var n=r.tryReadObjectHeader(),t=n[0],a=n[1];if(!t)return null;var o=new e;if(4==a)o.FixedUpdateCountPerSecond=r.readInt32(),o.WaveTimeInSeconds=r.readInt32(),o.WaveId=r.readInt32(),o.Infos=r.readArray((function(e){return i.deserializeCore(e)}));else{if(a>4)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.FixedUpdateCountPerSecond=r.readInt32(),1==a)return o;if(o.WaveTimeInSeconds=r.readInt32(),2==a)return o;if(o.WaveId=r.readInt32(),3==a)return o;if(o.Infos=r.readArray((function(e){return i.deserializeCore(e)})),4==a)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new t(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/WaveInfo.ts",["cc","./MemoryPackWriter.ts","./MemoryPackReader.ts","./FishData.ts"],(function(e){var r,t,i,n;return{setters:[function(e){r=e.cclegacy},function(e){t=e.MemoryPackWriter},function(e){i=e.MemoryPackReader},function(e){n=e.FishData}],execute:function(){r._RF.push({},"3c498X7Nv9BC5NaeFcrjODi","WaveInfo",void 0);e("WaveInfo",function(){function e(){this.InfoID=void 0,this.Fishs=void 0,this.StartTimeFixedUpdateCounts=void 0,this.LifeTimeFixedUpdateCounts=void 0,this.PathIndex=void 0,this.PathSpeedIndex=void 0,this.TotalProbability=void 0,this.Probs=void 0,this.InfoID=0,this.Fishs=null,this.StartTimeFixedUpdateCounts=0,this.LifeTimeFixedUpdateCounts=0,this.PathIndex=0,this.PathSpeedIndex=0,this.TotalProbability=0,this.Probs=null}return e.serialize=function(e){var r=t.getSharedInstance();return this.serializeCore(r,e),r.toArray()},e.serializeCore=function(e,r){null!=r?(e.writeObjectHeader(8),e.writeInt32(r.InfoID),e.writeArray(r.Fishs,(function(e,r){return n.serializeCore(e,r)})),e.writeInt32(r.StartTimeFixedUpdateCounts),e.writeInt32(r.LifeTimeFixedUpdateCounts),e.writeInt32(r.PathIndex),e.writeInt32(r.PathSpeedIndex),e.writeInt32(r.TotalProbability),e.writeArray(r.Probs,(function(e,r){return e.writeFloat64(r)}))):e.writeNullObjectHeader()},e.serializeArray=function(e){var r=t.getSharedInstance();return this.serializeArrayCore(r,e),r.toArray()},e.serializeArrayCore=function(r,t){r.writeArray(t,(function(r,t){return e.serializeCore(r,t)}))},e.deserialize=function(e){return this.deserializeCore(new i(e))},e.deserializeCore=function(r){var t=r.tryReadObjectHeader(),i=t[0],a=t[1];if(!i)return null;var o=new e;if(8==a)o.InfoID=r.readInt32(),o.Fishs=r.readArray((function(e){return n.deserializeCore(e)})),o.StartTimeFixedUpdateCounts=r.readInt32(),o.LifeTimeFixedUpdateCounts=r.readInt32(),o.PathIndex=r.readInt32(),o.PathSpeedIndex=r.readInt32(),o.TotalProbability=r.readInt32(),o.Probs=r.readArray((function(e){return e.readFloat64()}));else{if(a>8)throw new Error("Current object's property count is larger than type schema, can't deserialize about versioning.");if(0==a)return o;if(o.InfoID=r.readInt32(),1==a)return o;if(o.Fishs=r.readArray((function(e){return n.deserializeCore(e)})),2==a)return o;if(o.StartTimeFixedUpdateCounts=r.readInt32(),3==a)return o;if(o.LifeTimeFixedUpdateCounts=r.readInt32(),4==a)return o;if(o.PathIndex=r.readInt32(),5==a)return o;if(o.PathSpeedIndex=r.readInt32(),6==a)return o;if(o.TotalProbability=r.readInt32(),7==a)return o;if(o.Probs=r.readArray((function(e){return e.readFloat64()})),8==a)return o}return o},e.deserializeArray=function(e){return this.deserializeArrayCore(new i(e))},e.deserializeArrayCore=function(r){return r.readArray((function(r){return e.deserializeCore(r)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/WaveKind.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c8bf92ifGZGpaAPVsFQayxw","WaveKind",void 0);e("WaveKind",{Normal:-2,Middle:0,Gotcha:1,Weapon:2,GotchaLow:3,Boss:4,Activity:7});t._RF.pop()}}}));

System.register("chunks:///_virtual/WaveManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BonusWaveFlag.ts","./Constants.ts","./WaveType.ts","./WaveKind.ts","./Action2.ts"],(function(t){var n,a,e,i,s,o,u,v,h;return{setters:[function(t){n=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){e=t.cclegacy},function(t){i=t.BonusWaveFlag},function(t){s=t.Constants},function(t){o=t.WaveType},function(t){u=t.WaveKind},function(t){v=t.ActionWithTwo,h=t.ActionWithOne}],execute:function(){e._RF.push({},"d6228e6pq9Hv7l7MUguT51Y","WaveManager",void 0);t("WaveManager",function(){function t(t,n,a){this.OnSpawnWave=new v,this.OnStartWave=new h,this.ActivityData=new Map,this._info=null,this._rand=null,this._waveDatas=null,this._bgBonusTable=null,this._waveTable=null,this.SetDatas(t,n,a)}var e=t.prototype;return e.Init=function(t,n){this._info=t,this._rand=n},e.Release=function(){this._rand=null,this._info=null},e.FixedUpdate=function(t){this.IsReady&&(this.InitWave(t),this.UpdateWave(t))},e.SetDatas=function(t,n,a){this._waveDatas=t,this._bgBonusTable=n,this._waveTable=a},e.InitWave=function(t){0==t&&this.SpawnNormalWave(),t==this._info.GenBonusFixedUpdateCount(0)&&this.SpawnBonusWaves(this._info.ID,this._info.BonusStatus[0])},e.UpdateWave=function(t){t%s.FixedUpdateCountPerHalfMinute==0&&(this.StartNormalWave(),this.SpawnNormalWave()),t==this._info.GenBonusFixedUpdateCount(this._info.BonusIndex)&&(this.StartBonusWaves(),this._info.BonusIndex++,this._info.BonusIndex<this._info.BonusStatus.length&&this.SpawnBonusWaves(this._info.ID,this._info.BonusStatus[this._info.BonusIndex]))},e.StartNormalWave=function(){var t;null==(t=this.OnStartWave)||t.invoke(u.Normal)},e.SpawnNormalWave=function(){var t,n=this._waveDatas.get(o.Wave30s_01),a=n[this._rand.Next(0,n.length)];null==(t=this.OnSpawnWave)||t.invoke(a,u.Normal)},e.StartBonusWaves=function(){var t,n,a,e,i,s;null==(t=this.OnStartWave)||t.invoke(u.Middle),null==(n=this.OnStartWave)||n.invoke(u.Gotcha),null==(a=this.OnStartWave)||a.invoke(u.Weapon),null==(e=this.OnStartWave)||e.invoke(u.GotchaLow),null==(i=this.OnStartWave)||i.invoke(u.Boss),null==(s=this.OnStartWave)||s.invoke(u.Activity)},e.SpawnBonusWaves=function(t,a){0!=(a&i.Middle)&&this.SpawnBonusWave(t,u.Middle),0!=(a&i.Gotcha)&&(this.HasActivity?this.SpawnBonusWave(t,function(){for(var t,a=[],e=n(this.ActivityData);!(t=e()).done;){var i=t.value;a.push(i[0])}a.sort();var s=a[this._rand.Next(0,a.length)];return console.info("get activity waveKind "+s),s}.bind(this)()):this.SpawnBonusWave(t,u.Gotcha)),0!=(a&i.Weapon)&&this.SpawnBonusWave(t,u.Weapon),0!=(a&i.GotchaLow)&&this.SpawnBonusWave(t,u.GotchaLow),0!=(a&i.Boss)&&this.SpawnBonusWave(t,u.Boss)},e.SpawnBonusWave=function(t,n){var a,e=this._bgBonusTable.get(t).get(n);null==e&&console.error("[waveNames Not Found] bgID:"+t+", waveKind:"+n);var i=e[this._rand.Next(0,e.length)],s=this._waveTable.get(i);null==(a=this.OnSpawnWave)||a.invoke(s,n)},a(t,[{key:"IsReady",get:function(){return null!=this._info&&null!=this._rand}},{key:"Info",get:function(){return this._info}},{key:"RoundStartFixedUpdateCount",get:function(){return this._info.StartFixedUpdateCount}},{key:"WaveDatas",get:function(){return this._waveDatas}},{key:"WaveTable",get:function(){return this._waveTable}},{key:"BgBonusTable",get:function(){return this._bgBonusTable}},{key:"HasActivity",get:function(){return this.ActivityData.size>0}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/WaveType.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"aec19w43G5Gc5fYqSjzlWMV","WaveType",void 0);e("WaveType",{Wave30s_01:0,WaveBonusKind00:1,WaveBonusKind01:2,WaveBonusKind02:3,WaveBonusKind04:4,WaveBonusKind03:5});n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponShootHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SingletonComponent.ts","./BouncyShoot.ts","./BulletKind.ts","./MeteorShoot.ts","./MissileShoot.ts","./ThroughShoot.ts","./MessageCmd.ts","./MessageManager.ts","./UIPlayerState.ts","./PlayerFortManager.ts","./Constants.ts"],(function(t){var o,n,i,e,h,u,a,s,r,S,l,c,p,A,f,_,M,g;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized,h=t.createClass},function(t){u=t.cclegacy,a=t._decorator},function(t){s=t.SingletonComponent},function(t){r=t.BouncyShoot},function(t){S=t.BulletKind},function(t){l=t.MeteorShoot},function(t){c=t.MissileShoot},function(t){p=t.ThroughShoot},function(t){A=t.MessageCmd},function(t){f=t.MessageManager},function(t){_=t.PlayerStateType},function(t){M=t.PlayerFortManager},function(t){g=t.Constants}],execute:function(){var y,d,w,T,F,b,B,I,m,C,H;u._RF.push({},"95bb1sG3sRHbLyWmJOPhki+","WeaponShootHelper",void 0);var P=a.ccclass,v=a.property,O=t("AutoShootMap",function(){function t(){this._autoShootMap=new Map}var o=t.prototype;return o.set=function(t,o){this._autoShootMap.set(t,o)},o.get=function(t){return this._autoShootMap.has(t)?this._autoShootMap.get(t):void 0},o.has=function(t){return!!this._autoShootMap.has(t)},t}());t("WeaponShootHelper",(y=P("WeaponShootHelper"),d=v(p),w=v(l),T=v(c),F=v(r),y((I=o((B=function(t){function o(){for(var o,n=arguments.length,h=new Array(n),u=0;u<n;u++)h[u]=arguments[u];return o=t.call.apply(t,[this].concat(h))||this,i(o,"autoThroughShoot",I,e(o)),i(o,"autoMeteorShoot",m,e(o)),i(o,"autoMissileShoot",C,e(o)),i(o,"autoBouncyShoot",H,e(o)),o._bulletTimer=0,o._nowAutoShoot=null,o._isReady=!1,o._autoShootMap=new O,o}n(o,t);var u=o.prototype;return u.initial=function(){this.autoThroughShoot.initAutoShoot(),this.autoMeteorShoot.initAutoShoot(),this.autoMissileShoot.initAutoShoot(),this.autoBouncyShoot.initAutoShoot(),this._autoShootMap.set(S.Through,this.autoThroughShoot),this._autoShootMap.set(S.Meteor,this.autoMeteorShoot),this._autoShootMap.set(S.Missile,this.autoMissileShoot),this._autoShootMap.set(S.Bouncy,this.autoBouncyShoot),this._isReady=!0},u.release=function(){this._isReady=!1},u.reset=function(){this.changeAutoShoot(this.FortManager.MainPlayerFort.UsedBulletKind)},u.weaponShootCheck=function(t){return!!t&&(t.HoldingSpecialBulletInfo.BulletKind,!0)},u.setHoldingSpecialBulletInfo=function(t,o){M.instance().checkMainFort(o)&&(this._nowAutoShoot&&this.onStopAutoShoot(),t&&(this.FortManager.MainPlayerFort.setPlayerStateUI(_.None),this.changeAutoShoot(t.BulletKind),this._nowAutoShoot.HoldingSpecialBulletInfo=t,this.FortManager.MainPlayerFort.UsedBulletKind==S.Lock&&this.FortManager.MainPlayerFort.UsedBulletFort.resetTarget()))},u.onLoad=function(){t.prototype.onLoad.call(this),this.onSwitchFortAction=this.onSwitchFortAction.bind(this),this.onStartSpecialAutoShootAction=this.onStartSpecialAutoShootAction.bind(this),f.Instance.on(A.ON_SWITCH_FORT,this.onSwitchFortAction),f.Instance.on(A.START_SPECIAL_AUTO_SHOOT,this.onStartSpecialAutoShootAction)},u.update=function(t){if(this._isReady&&this._nowAutoShoot)if(this._nowAutoShoot.IsAutoShootMode){if(this._bulletTimer+=t,this._bulletTimer>=g.BulletFrequency){if(this._bulletTimer-=g.BulletFrequency,!this.weaponShootCheck(this._nowAutoShoot))return void this.onStopAutoShoot();this._nowAutoShoot.updateAutoShoot()}}else this._bulletTimer=0},u.onDestroy=function(){f.Instance.off(A.ON_SWITCH_FORT,this.onSwitchFortAction),f.Instance.off(A.START_SPECIAL_AUTO_SHOOT,this.onStartSpecialAutoShootAction),t.prototype.onDestroy.call(this)},u.onStartAutoShoot=function(){this._nowAutoShoot.IsCountDownFinish=!0,this._nowAutoShoot.startAutoShoot()},u.onStopAutoShoot=function(){this._nowAutoShoot.stopAutoShoot(),this._nowAutoShoot=null},u.onStartSpecialAutoShootAction=function(t){this._bulletTimer=0,this.changeAutoShoot(t.BulletKind),this.onStartAutoShoot()},u.onSwitchFortAction=function(t,o,n){if(this.FortManager.checkMainFort(t)){var i=this.getAutoShoot(n);this._nowAutoShoot&&i!=this._nowAutoShoot&&this.onStopAutoShoot(),this.setAutoShoot(i),this._nowAutoShoot&&this._nowAutoShoot.IsAutoShootMode&&this.onStartAutoShoot()}},u.getAutoShoot=function(t){return this._autoShootMap.has(t)?this._autoShootMap.get(t):null},u.setAutoShoot=function(t){t?(this._nowAutoShoot=t,this.node.active=!0):this.node.active=!1},u.changeAutoShoot=function(t){this.setAutoShoot(this.getAutoShoot(t))},h(o,[{key:"HasWeaponInfo",get:function(){return null!=this._nowAutoShoot}},{key:"FortManager",get:function(){return M.instance()}}]),o}(s)).prototype,"autoThroughShoot",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=o(B.prototype,"autoMeteorShoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(B.prototype,"autoMissileShoot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=o(B.prototype,"autoBouncyShoot",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=B))||b));u._RF.pop()}}}));

System.register("chunks:///_virtual/WebSocketClient.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"903691vzTpPDqWSAIqQA/iN","WebSocketClient",void 0);e("WebSocketClient",function(){function e(){this.OnClose=void 0,this.OnError=void 0,this.OnOpen=void 0,this.OnReceive=void 0,this._webSocket=null,this._lengthbytes=new Uint8Array(3),this._lengthReadCount=0,this._readBuffer=void 0,this._readCount=0}var n=e.prototype;return n.Close=function(){var e=this._webSocket;e&&(e.onopen=null,e.onmessage=null,e.onerror=null,e.onclose=null,e.close(1e3)),this._webSocket=null},n.Connect=function(e){var t=this;this._webSocket=new WebSocket(e,[]),this._webSocket.binaryType="arraybuffer",this._webSocket.onopen=function(e){console.log("["+(new Date).toLocaleString()+"] "+t.Status),null==t.OnOpen||t.OnOpen(e.type)},this._webSocket.onerror=function(e){console.error("["+(new Date).toLocaleString()+"] "+t.Status),null==t.OnError||t.OnError(e.type)},this._webSocket.onclose=function(e){console.log("["+(new Date).toLocaleString()+"] "+t.Status),t._webSocket=null,null==t.OnClose||t.OnClose(e.reason)},this._webSocket.onmessage=function(e){t.OnMessage(new Uint8Array(e.data))}},n.DirectSend=function(e){var t;(null==(t=this._webSocket)?void 0:t.readyState)==WebSocket.OPEN&&this._webSocket.send(e.buffer)},n.SendPacket=function(e,t,n,o,r){if(this.IsOpen){var s=new Uint8Array([255&t,t>>8&255,n,o,255,e]),i=s.length;null!==r&&(i+=r.length);var l=new Uint8Array([i>>16&255,i>>8&255,255&i]);this._webSocket.send(l.buffer),null!==r&&this._webSocket.send(r.buffer),this._webSocket.send(s.buffer)}},n.OnMessage=function(e){for(var t=0;t<e.length;){if(this._lengthReadCount<3){var n=Math.min(3-this._lengthReadCount,e.length-t);0==t&&n==e.length?this._lengthbytes.set(e,this._lengthReadCount):this._lengthbytes.set(e.subarray(t,t+n),this._lengthReadCount),this._lengthReadCount+=n,t+=n}if(3==this._lengthReadCount){if(null==this._readBuffer){var o=this._lengthbytes[0]<<16|this._lengthbytes[1]<<8|this._lengthbytes[2];if(1==o&&t<e.length&&255==e[t]){this._lengthReadCount=0,++t;continue}this._readBuffer=new Uint8Array(o)}var r=Math.min(this._readBuffer.length-this._readCount,e.length-t);if(0==t&&r==e.length?this._readBuffer.set(e,this._readCount):this._readBuffer.set(e.subarray(t,t+r),this._readCount),this._readCount+=r,t+=r,this._readCount==this._readBuffer.length){try{switch(this._readCount){case 1:var s;if(255!=this._readBuffer[0])null==(s=this.OnReceive)||s.call(this,this._readBuffer);break;default:var i;null==(i=this.OnReceive)||i.call(this,this._readBuffer)}}catch(e){console.error("["+(new Date).toLocaleString()+"] "+e)}this._lengthReadCount=0,this._readCount=0,this._readBuffer=null}}}return null},t(e,[{key:"Status",get:function(){var e;switch(null==(e=this._webSocket)?void 0:e.readyState){case WebSocket.OPEN:return"WebSocket: open";case WebSocket.CONNECTING:return"WebSocket: connecting";case WebSocket.CLOSING:return"WebSocket: closeing";case WebSocket.CLOSED:return"WebSocket: closed"}return"WebSocket: closed"}},{key:"IsOpen",get:function(){var e;return(null==(e=this._webSocket)?void 0:e.readyState)==WebSocket.OPEN}}]),e}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});